{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"解决百度云大文件下载限制","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["http://pan.baidu.com/*","https://pan.baidu.com/*","http://yun.baidu.com/*","https://yun.baidu.com/*","https://eyun.baidu.com/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1509007134467},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/17800-%E8%A7%A3%E5%86%B3%E7%99%BE%E5%BA%A6%E4%BA%91%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E9%99%90%E5%88%B6/code/%E8%A7%A3%E5%86%B3%E7%99%BE%E5%BA%A6%E4%BA%91%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E9%99%90%E5%88%B6.user.js","uuid":"30b32b96-1820-41b8-b3a0-e1c70d752c9b","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDop6PlhrPnmb7luqbkupHlpKfmlofku7bkuIvovb3pmZDliLYKLy8gQG5hbWVzcGFjZSAgICB1bmRlZmluZWQKLy8gQHZlcnNpb24gICAgICAwLjAuNgovLyBAZGVzY3JpcHRpb24gIOS4gOihjOS7o+egge+8jOino+WGs+eZvuW6puS6keWkp+aWh+S7tuS4i+i9vemZkOWItgovLyBAYXV0aG9yICAgICAgIGZ1bmlhbnd1eGluCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vcGFuLmJhaWR1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL3l1bi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8veXVuLmJhaWR1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly9leXVuLmJhaWR1LmNvbS8qCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQovKiBqc2hpbnQgLVcwOTcgKi8KJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5nZXRQcm90b3R5cGVPZihuYXZpZ2F0b3IpLCdwbGF0Zm9ybScse2dldDpmdW5jdGlvbigpe3JldHVybiAnc2JfYmFpZHUnO319KQoKCihmdW5jdGlvbigpewp2YXIgaHJlZj1sb2NhdGlvbi5ocmVmOwovaHR0cDovLnRlc3QoaHJlZik/bG9jYXRpb24uaHJlZj0naHR0cHMnK2hyZWYuc2xpY2UoNCk6MDsKfSgpKTsKCgogICAg"},{"name":"百度网盘直接下载助手","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s/*","*://yun.baidu.com/s/*","*://pan.baidu.com/share/link*","*://yun.baidu.com/share/link*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1509007134475},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/31921-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B/code/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B.user.js","uuid":"8ca9001b-7e8a-486e-87c7-67af79d4cdd6","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnmb7luqbnvZHnm5jnm7TmjqXkuIvovb3liqnmiYsKLy8gQG5hbWVzcGFjZSAgICB1bmRlZmluZWQKLy8gQHZlcnNpb24gICAgICAwLjkuMjUKLy8gQGRlc2NyaXB0aW9uICDnm7TmjqXkuIvovb3nmb7luqbnvZHnm5jlkoznmb7luqbnvZHnm5jliIbkuqvnmoTmlofku7Ys6YG/5YWN5LiL6L295paH5Lu25pe26LCD55So55m+5bqm572R55uY5a6i5oi356uvLOiOt+WPlue9keebmOaWh+S7tueahOebtOaOpeS4i+i9veWcsOWdgAovLyBAYXV0aG9yICAgICAgIGl2ZXNqYXkKLy8gQG1hdGNoICAgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9kaXNrL2hvbWUqCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3NoYXJlL2xpbmsqCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vc2hhcmUvbGluayoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktbGF0ZXN0LmpzCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyICQgPSAkIHx8IHdpbmRvdy4kOwogICAgdmFyIGxvZ19jb3VudCA9IDE7CiAgICB2YXIgd29yZE1hcEh0dHAgPSB7CiAgICAgICAgJ2xpc3QtZ3JpZC1zd2l0Y2gnOid5dmdiOVhKJywKICAgICAgICAnbGlzdC1zd2l0Y2hlZC1vbic6J2tzYlhabScsCiAgICAgICAgJ2dyaWQtc3dpdGNoZWQtb24nOid0Y2g2VzI1JywKICAgICAgICAnbGlzdC1zd2l0Y2gnOidscmJvOWEnLAogICAgICAgICdncmlkLXN3aXRjaCc6J3hoNnBvTCcsCiAgICAgICAgJ2NoZWNrYm94JzonRU9HZXhmJywKICAgICAgICAnY29sLWl0ZW0nOidReHlmdmcnLAogICAgICAgICdjaGVjayc6J2Z5ZEdOQycsCiAgICAgICAgJ2NoZWNrZWQnOidFenViR2cnLAogICAgICAgICdsaXN0LXZpZXcnOid2ZEFmS01iJywKICAgICAgICAnaXRlbS1hY3RpdmUnOiduZ2I5TzYnLAogICAgICAgICdncmlkLXZpZXcnOidKS3ZISk1iJywKICAgICAgICAnYmFyLXNlYXJjaCc6J09GYVBhTycsCiAgICAgICAgJ2RlZmF1bHQtZG9tJzoneHBYMlBWJywKICAgICAgICAnYmFyJzoncXhuWDJHNScsCiAgICAgICAgJ2xpc3QtdG9vbHMnOidRRERPUUInCiAgICB9OwogICAgdmFyIHdvcmRNYXBIdHRwcyA9IHsKICAgICAgICAnbGlzdC1ncmlkLXN3aXRjaCc6J3FvYm1YQjFxJywKICAgICAgICAnbGlzdC1zd2l0Y2hlZC1vbic6J2V3WG0xZScsCiAgICAgICAgJ2dyaWQtc3dpdGNoZWQtb24nOidreGhrWDJFbScsCiAgICAgICAgJ2xpc3Qtc3dpdGNoJzoncnZwWG02MycsCiAgICAgICAgJ2dyaWQtc3dpdGNoJzonbXhnZEpnd3YnLAogICAgICAgICdjaGVja2JveCc6J0VPR2V4ZicsCiAgICAgICAgJ2NvbC1pdGVtJzonUXh5ZnZnJywKICAgICAgICAnY2hlY2snOidmeWRHTkMnLAogICAgICAgICdjaGVja2VkJzonRXp1YkdnJywKICAgICAgICAnbGlzdC12aWV3JzondmRBZktNYicsCiAgICAgICAgJ2l0ZW0tYWN0aXZlJzoncGNhbVhCUlgnLAogICAgICAgICdncmlkLXZpZXcnOidKS3ZISk1iJywKICAgICAgICAnYmFyLXNlYXJjaCc6J09GYVBhTycsCiAgICAgICAgJ2RlZmF1bHQtZG9tJzonbnl6dEpxV0UnLAogICAgICAgICdiYXInOidta3NlSnFLUScsCiAgICAgICAgJ2xpc3QtdG9vbHMnOidRRERPUUInCiAgICB9OwogICAgdmFyIHdvcmRNYXAgPSBsb2NhdGlvbi5wcm90b2NvbCA9PSAnaHR0cDonID8gd29yZE1hcEh0dHAgOiB3b3JkTWFwSHR0cHM7CgogICAgLy9jb25zb2xlLmxvZyh3b3JkTWFwKTsKCiAgICBmdW5jdGlvbiBzbG9nKGMxLGMyLGMzKXsKICAgICAgICBjMSA9IGMxP2MxOicnOwogICAgICAgIGMyID0gYzI/YzI6Jyc7CiAgICAgICAgYzMgPSBjMz9jMzonJzsKICAgICAgICBjb25zb2xlLmxvZygnIycrIGxvZ19jb3VudCsrICsnLUJhaUR1TmV0ZGlza0hlbHBlci1sb2c6JyxjMSxjMixjMyk7CiAgICB9CgogICAgJChmdW5jdGlvbigpewogICAgICAgIHN3aXRjaChkZXRlY3RQYWdlKCkpewogICAgICAgICAgICBjYXNlICdkaXNrJzoKICAgICAgICAgICAgICAgIHZhciBwYW5IZWxwZXIgPSBuZXcgUGFuSGVscGVyKCk7CiAgICAgICAgICAgICAgICBwYW5IZWxwZXIuaW5pdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBjYXNlICdzaGFyZSc6CiAgICAgICAgICAgIGNhc2UgJ3MnOgogICAgICAgICAgICAgICAgdmFyIHBhblNoYXJlSGVscGVyID0gbmV3IFBhblNoYXJlSGVscGVyKCk7CiAgICAgICAgICAgICAgICBwYW5TaGFyZUhlbHBlci5pbml0KCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfSk7CgogICAgLy/nvZHnm5jpobXpnaLnmoTkuIvovb3liqnmiYsKICAgIGZ1bmN0aW9uIFBhbkhlbHBlcigpewogICAgICAgIHZhciB5dW5EYXRhLHNpZ24sdGltZXN0YW1wLGJkc3Rva2VuLGxvZ2lkLGZpZF9saXN0OwogICAgICAgIHZhciBmaWxlTGlzdD1bXSxzZWxlY3RGaWxlTGlzdD1bXSxiYXRjaExpbmtMaXN0PVtdLGJhdGNoTGlua0xpc3RBbGw9W10sbGlua0xpc3Q9W10sCiAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXM9J2xpc3QnOwogICAgICAgIHZhciBvYnNlcnZlcixjdXJyZW50UGFnZSxjdXJyZW50UGF0aCxjdXJyZW50Q2F0ZWdvcnksZGlhbG9nLHNlYXJjaEtleTsKICAgICAgICB2YXIgcGFuQVBJVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvYXBpLyI7CiAgICAgICAgdmFyIHJlc3RBUElVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArICIvL3Bjcy5iYWlkdS5jb20vcmVzdC8yLjAvcGNzLyI7CiAgICAgICAgdmFyIGNsaWVudEFQSVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgIi8vZC5wY3MuYmFpZHUuY29tL3Jlc3QvMi4wL3Bjcy8iOwoKICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpewogICAgICAgICAgICB5dW5EYXRhID0gdW5zYWZlV2luZG93Lnl1bkRhdGE7CiAgICAgICAgICAgIHNsb2coJ3l1bkRhdGE6Jyx5dW5EYXRhKTsKICAgICAgICAgICAgaWYoeXVuRGF0YSA9PT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgIHNsb2coJ+mhtemdouacquato+W4uOWKoOi9ve+8jOaIluiAheeZvuW6puW3sue7j+abtOaWsO+8gScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluaXRQYXJhbXMoKTsKICAgICAgICAgICAgcmVnaXN0ZXJFdmVudExpc3RlbmVyKCk7CiAgICAgICAgICAgIGNyZWF0ZU9ic2VydmVyKCk7CiAgICAgICAgICAgIGFkZEJ1dHRvbigpOwogICAgICAgICAgICBjcmVhdGVJZnJhbWUoKTsKICAgICAgICAgICAgZGlhbG9nID0gbmV3IERpYWxvZyh7YWRkQ29weTp0cnVlfSk7CgogICAgICAgICAgICBzbG9nKCfnvZHnm5jnm7TmjqXkuIvovb3liqnmiYvliqDovb3miJDlip/vvIEnKTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBpbml0UGFyYW1zKCl7CiAgICAgICAgICAgIHNpZ24gPSBnZXRTaWduKCk7CiAgICAgICAgICAgIHRpbWVzdGFtcCA9IGdldFRpbWVzdGFtcCgpOwogICAgICAgICAgICBiZHN0b2tlbiA9IGdldEJEU3Rva2VuKCk7CiAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBnZXRDdXJyZW50UGFnZSgpOwogICAgICAgICAgICBzbG9nKCdDdXJyZW50IGRpc3BsYXkgbW9kZTonLGN1cnJlbnRQYWdlKTsKCiAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09ICdsaXN0JykKICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gZ2V0UGF0aCgpOwoKICAgICAgICAgICAgaWYoY3VycmVudFBhZ2UgPT0gJ2NhdGVnb3J5JykKICAgICAgICAgICAgICAgIGN1cnJlbnRDYXRlZ29yeSA9IGdldENhdGVnb3J5KCk7CgogICAgICAgICAgICBpZihjdXJyZW50UGFnZSA9PSAnc2VhcmNoJykKICAgICAgICAgICAgICAgIHNlYXJjaEtleSA9IGdldFNlYXJjaEtleSgpOwoKICAgICAgICAgICAgcmVmcmVzaExpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgICAgIHJlZnJlc2hGaWxlTGlzdCgpOwogICAgICAgICAgICByZWZyZXNoU2VsZWN0TGlzdCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaEZpbGVMaXN0KCl7CiAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZSA9PSAnbGlzdCcpIHsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZ2V0RmlsZUxpc3QoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PSAnY2F0ZWdvcnknKXsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZ2V0Q2F0ZWdvcnlGaWxlTGlzdCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09ICdzZWFyY2gnKSB7CiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IGdldFNlYXJjaEZpbGVMaXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hTZWxlY3RMaXN0KCl7CiAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWZyZXNoTGlzdEdyaWRTdGF0dXMoKXsKICAgICAgICAgICAgbGlzdF9ncmlkX3N0YXR1cyA9IGdldExpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluW9k+WJjeeahOinhuWbvuaooeW8jwogICAgICAgIGZ1bmN0aW9uIGdldExpc3RHcmlkU3RhdHVzKCl7CiAgICAgICAgICAgIC8vcmV0dXJuICQoJ2Rpdi5saXN0LWdyaWQtc3dpdGNoJykuaGFzQ2xhc3MoJ2xpc3Qtc3dpdGNoZWQtb24nKT8nbGlzdCc6KCQoJ2Rpdi5saXN0LWdyaWQtc3dpdGNoJykuaGFzQ2xhc3MoJ2dyaWQtc3dpdGNoZWQtb24nKT8nZ3JpZCc6J2xpc3QnKTsKICAgICAgICAgICAgLy9yZXR1cm4gJCgnZGl2Lml0aVd6UFknKS5oYXNDbGFzcygna3VkdFdZNDYnKT8nbGlzdCc6KCQoJ2Rpdi5pdGlXelBZJykuaGFzQ2xhc3MoJ255dEFMOXcnKT8nZ3JpZCc6J2xpc3QnKTsKICAgICAgICAgICAgcmV0dXJuICQoJ2Rpdi4nK3dvcmRNYXBbJ2xpc3QtZ3JpZC1zd2l0Y2gnXSkuaGFzQ2xhc3Mod29yZE1hcFsnbGlzdC1zd2l0Y2hlZC1vbiddKT8nbGlzdCc6KCQoJ2Rpdi4nK3dvcmRNYXBbJ2xpc3QtZ3JpZC1zd2l0Y2gnXSkuaGFzQ2xhc3Mod29yZE1hcFsnZ3JpZC1zd2l0Y2hlZC1vbiddKT8nZ3JpZCc6J2xpc3QnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnRMaXN0ZW5lcigpewogICAgICAgICAgICByZWdpc3Rlckhhc2hDaGFuZ2UoKTsKICAgICAgICAgICAgcmVnaXN0ZXJMaXN0R3JpZFN0YXR1cygpOwogICAgICAgICAgICByZWdpc3RlckNoZWNrYm94KCk7CiAgICAgICAgICAgIHJlZ2lzdGVyQWxsQ2hlY2tib3goKTsKICAgICAgICAgICAgcmVnaXN0ZXJGaWxlU2VsZWN0KCk7CiAgICAgICAgfQoKICAgICAgICAvL+ebkeinhuWcsOWdgOagjyPmoIfnrb7nmoTlj5jljJYKICAgICAgICBmdW5jdGlvbiByZWdpc3Rlckhhc2hDaGFuZ2UoKXsKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgcmVmcmVzaExpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgICAgICAgICBpZihnZXRDdXJyZW50UGFnZSgpID09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09IGdldEN1cnJlbnRQYWdlKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50UGF0aCA9PSBnZXRQYXRoKCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGggPSBnZXRQYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hTZWxlY3RMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gZ2V0UGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNlbGVjdExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdldEN1cnJlbnRQYWdlKCkgPT0gJ2NhdGVnb3J5JykgewogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09IGdldEN1cnJlbnRQYWdlKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50Q2F0ZWdvcnkgPT0gZ2V0Q2F0ZWdvcnkoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2F0ZWdvcnkgPSBnZXRDYXRlZ29yeSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZpbGVMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoU2VsZWN0TGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBnZXRDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2F0ZWdvcnkgPSBnZXRDYXRlZ29yeSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNlbGVjdExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZ2V0Q3VycmVudFBhZ2UoKSA9PSAnc2VhcmNoJykgewogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09IGdldEN1cnJlbnRQYWdlKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWFyY2hLZXkgPT0gZ2V0U2VhcmNoS2V5KCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBnZXRDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoS2V5ID0gZ2V0U2VhcmNoS2V5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hTZWxlY3RMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEtleSA9IGdldFNlYXJjaEtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNlbGVjdExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bop4blm77lj5jljJYKICAgICAgICBmdW5jdGlvbiByZWdpc3Rlckxpc3RHcmlkU3RhdHVzKCl7CiAgICAgICAgICAgIC8vdmFyICRhX2xpc3QgPSAkKCdhW25vZGUtdHlwZT1saXN0LXN3aXRjaF0nKTsKICAgICAgICAgICAgLy92YXIgJGFfbGlzdCA9ICQoJ2Fbbm9kZS10eXBlPWVlcFd6a2tdJyk7CiAgICAgICAgICAgIHZhciAkYV9saXN0ID0gJCgnYVtub2RlLXR5cGU9Jyt3b3JkTWFwWydsaXN0LXN3aXRjaCddKyddJyk7CiAgICAgICAgICAgICRhX2xpc3QuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSAnbGlzdCc7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy92YXIgJGFfZ3JpZCA9ICQoJ2Fbbm9kZS10eXBlPWdyaWQtc3dpdGNoXScpOwogICAgICAgICAgICAvL3ZhciAkYV9ncmlkID0gJCgnYVtub2RlLXR5cGU9eXRudldZN3FdJyk7CiAgICAgICAgICAgIHZhciAkYV9ncmlkID0gJCgnYVtub2RlLXR5cGU9Jyt3b3JkTWFwWydncmlkLXN3aXRjaCddKyddJyk7CiAgICAgICAgICAgICRhX2dyaWQuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSAnZ3JpZCc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/mlofku7bpgInmi6nmoYYKICAgICAgICBmdW5jdGlvbiByZWdpc3RlckNoZWNrYm94KCl7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uY2hlY2tib3gnKTsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi5FT0dleGYnKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uJyt3b3JkTWFwWydjaGVja2JveCddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIGlmKGxpc3RfZ3JpZF9zdGF0dXMgPT0gJ2xpc3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vZmlsZW5hbWUgPSAkKCdkaXYuZmlsZS1uYW1lIGRpdi50ZXh0IGEnLCRwYXJlbnQpLmF0dHIoJ3RpdGxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBkaXYudGV4dCBhJywkcGFyZW50KS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxpc3RfZ3JpZF9zdGF0dXMgPT0gJ2dyaWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWxlbmFtZSA9ICQoJ2Rpdi5maWxlLW5hbWUgYScsJHBhcmVudCkuYXR0cigndGl0bGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAkKCdkaXYuZmlsZS1uYW1lIGEnLCRwYXJlbnQpLmF0dHIoJ3RpdGxlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vaWYoJHBhcmVudC5oYXNDbGFzcygnaXRlbS1hY3RpdmUnKSl7CiAgICAgICAgICAgICAgICAgICAgLy9pZigkcGFyZW50Lmhhc0NsYXNzKCdwcld6WEEnKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJHBhcmVudC5oYXNDbGFzcyh3b3JkTWFwWydpdGVtLWFjdGl2ZSddKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+WPlua2iOmAieS4reaWh+S7tu+8micrZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPHNlbGVjdEZpbGVMaXN0Lmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3RbaV0uZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnNwbGljZShpLDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tjonK2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOmVsZW1lbnQucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi5jaGVja2JveCcpOwogICAgICAgICAgICAvL3ZhciAkY2hlY2tib3ggPSAkKCdzcGFuLkVPR2V4ZicpOwogICAgICAgICAgICB2YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi4nK3dvcmRNYXBbJ2NoZWNrYm94J10pOwogICAgICAgICAgICAkY2hlY2tib3guZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkudW5iaW5kKCdjbGljaycpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8v5YWo6YCJ5qGGCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJBbGxDaGVja2JveCgpewogICAgICAgICAgICAvL3ZhciAkY2hlY2tib3ggPSAkKCdkaXYuY29sLWl0ZW0uY2hlY2snKTsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnZGl2LlF4eWZ2Zy5meWRHTkMnKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ2Rpdi4nK3dvcmRNYXBbJ2NvbC1pdGVtJ10rJy4nK3dvcmRNYXBbJ2NoZWNrJ10pOwogICAgICAgICAgICAkY2hlY2tib3guZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYmluZCgnY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKTsKICAgICAgICAgICAgICAgICAgICAvL2lmKCRwYXJlbnQuaGFzQ2xhc3MoJ2NoZWNrZWQnKSl7CiAgICAgICAgICAgICAgICAgICAgLy9pZigkcGFyZW50Lmhhc0NsYXNzKCdFenViR2cnKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJHBhcmVudC5oYXNDbGFzcyh3b3JkTWFwWydjaGVja2VkJ10pKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5Y+W5raI5YWo6YCJJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5YWo6YOo6YCJ5LitJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDplbGVtZW50LnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2RpcjplbGVtZW50LmlzZGlyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQWxsQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnZGl2LmNvbC1pdGVtLmNoZWNrJyk7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ2Rpdi5ReHlmdmcuZnlkR05DJyk7CiAgICAgICAgICAgIHZhciAkY2hlY2tib3ggPSAkKCdkaXYuJyt3b3JkTWFwWydjb2wtaXRlbSddKycuJyt3b3JkTWFwWydjaGVjayddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnVuYmluZCgnY2xpY2snKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvL+WNleS4quaWh+S7tumAieS4re+8jOeCueWHu+aWh+S7tuS4jeaYr+eCueWHu+mAieS4reahhu+8jOS8muWPqumAieS4reivpeaWh+S7tgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRmlsZVNlbGVjdCgpewogICAgICAgICAgICAvL3ZhciAkZGQgPSAkKCdkaXYubGlzdC12aWV3IGRkJyk7CiAgICAgICAgICAgIC8vdmFyICRkZCA9ICQoJ2Rpdi52ZEFmS01iIGRkJyk7CiAgICAgICAgICAgIHZhciAkZGQgPSAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSsnIGRkJyk7CiAgICAgICAgICAgICRkZC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS5iaW5kKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVOYW1lID0gZS50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICBpZihub2RlTmFtZSAhPSAnc3BhbicgJiYgbm9kZU5hbWUgIT0gJ2EnICYmIG5vZGVOYW1lICE9ICdlbScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygnc2hpZnRLZXk6JytlLnNoaWZ0S2V5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWUuc2hpZnRLZXkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQoJ2Rpdi5maWxlLW5hbWUgZGl2LnRleHQgYScsJCh0aGlzKSkuYXR0cigndGl0bGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tu+8micgKyBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOmVsZW1lbnQucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzX2lkOmVsZW1lbnQuZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2RpcjplbGVtZW50LmlzZGlyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RGaWxlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgJGRkX3NlbGVjdCA9ICQoJ2Rpdi5saXN0LXZpZXcgZGQuaXRlbS1hY3RpdmUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyICRkZF9zZWxlY3QgPSAkKCdkaXYudmRBZktNYiBkZC5wcld6WEEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZGRfc2VsZWN0ID0gJCgnZGl2Licrd29yZE1hcFsnbGlzdC12aWV3J10rJyBkZC4nK3dvcmRNYXBbJ2l0ZW0tYWN0aXZlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCRkZF9zZWxlY3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBkaXYudGV4dCBhJywkKGVsZW1lbnQpKS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tu+8micgKyBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LnNlcnZlcl9maWxlbmFtZSA9PSBmaWxlbmFtZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ZWxlbWVudC5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzX2lkOmVsZW1lbnQuZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyRmlsZVNlbGVjdCgpewogICAgICAgICAgICAvL3ZhciAkZGQgPSAkKCdkaXYubGlzdC12aWV3IGRkJyk7CiAgICAgICAgICAgIC8vdmFyICRkZCA9ICQoJ2Rpdi52ZEFmS01iIGRkJyk7CiAgICAgICAgICAgIHZhciAkZGQgPSAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSsnIGRkJyk7CiAgICAgICAgICAgICRkZC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS51bmJpbmQoJ2NsaWNrJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bmlofku7bliJfooajmmL7npLrlj5jljJYKICAgICAgICBmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcigpewogICAgICAgICAgICB2YXIgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyOwogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICdjaGlsZExpc3QnOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKXsKICAgICAgICAgICAgICAgIHVucmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICAgICAgdW5yZWdpc3RlckFsbENoZWNrYm94KCk7CiAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyRmlsZVNlbGVjdCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJBbGxDaGVja2JveCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJGaWxlU2VsZWN0KCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy92YXIgbGlzdF92aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtdmlldycpOwogICAgICAgICAgICAvL3ZhciBncmlkX3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZC12aWV3Jyk7CgogICAgICAgICAgICAvL3ZhciBsaXN0X3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmRBZktNYicpOwogICAgICAgICAgICAvL3ZhciBncmlkX3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuSkt2SEpNYicpOwoKICAgICAgICAgICAgdmFyIGxpc3RfdmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK3dvcmRNYXBbJ2xpc3QtdmlldyddKTsKICAgICAgICAgICAgdmFyIGdyaWRfdmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK3dvcmRNYXBbJ2dyaWQtdmlldyddKTsKCiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobGlzdF92aWV3LG9wdGlvbnMpOwogICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGdyaWRfdmlldyxvcHRpb25zKTsKICAgICAgICB9CgogICAgICAgIC8v5re75Yqg5Yqp5omL5oyJ6ZKuCiAgICAgICAgZnVuY3Rpb24gYWRkQnV0dG9uKCl7CiAgICAgICAgICAgIC8vJCgnZGl2LmJhci1zZWFyY2gnKS5jc3MoJ3dpZHRoJywnMTglJyk7Ly/kv67mlLnmkJzntKLmoYbnmoTlrr3luqbvvIzpgb/lhY3pga7mjKEKICAgICAgICAgICAgLy8kKCdkaXYuT0ZhUGFPJykuY3NzKCd3aWR0aCcsJzE4JScpOwogICAgICAgICAgICAkKCdkaXYuJyt3b3JkTWFwWydiYXItc2VhcmNoJ10pLmNzcygnd2lkdGgnLCcxOCUnKTsKICAgICAgICAgICAgdmFyICRkcm9wZG93bmJ1dHRvbiA9ICQoJzxzcGFuIGNsYXNzPSJnLWRyb3Bkb3duLWJ1dHRvbiI+PC9zcGFuPicpOwogICAgICAgICAgICB2YXIgJGRyb3Bkb3duYnV0dG9uX2EgPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tZG93bmxvYWQiIHRpdGxlPSLnmb7luqbnvZHnm5jkuIvovb3liqnmiYsiPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogYXV0bzsiPuS4i+i9veWKqeaJizwvc3Bhbj48L3NwYW4+PC9hPicpOwogICAgICAgICAgICB2YXIgJGRyb3Bkb3duYnV0dG9uX3NwYW4gPSAkKCc8c3BhbiBjbGFzcz0ibWVudSIgc3R5bGU9IndpZHRoOjk2cHgiPjwvc3Bhbj4nKTsKCiAgICAgICAgICAgIHZhciAkZGlyZWN0YnV0dG9uID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLW1lbnUiIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkZGlyZWN0YnV0dG9uX3NwYW4gPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gZy1kcm9wZG93bi1idXR0b24tc2Vjb25kIiBtZW51bGV2ZWw9IjIiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkaXJlY3RidXR0b25fYSA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG8iPuebtOaOpeS4i+i9vTwvc3Bhbj48L3NwYW4+PC9hPicpOwogICAgICAgICAgICB2YXIgJGRpcmVjdGJ1dHRvbl9tZW51ID0gJCgnPHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDoxMjBweDtsZWZ0Ojc5cHgiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkaXJlY3RidXR0b25fZG93bmxvYWRfYnV0dG9uID0gJCgnPGEgaWQ9ImRvd25sb2FkLWRpcmVjdCIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuS4i+i9vTwvYT4nKTsKICAgICAgICAgICAgdmFyICRkaXJlY3RidXR0b25fbGlua19idXR0b24gPSAkKCc8YSBpZD0ibGluay1kaXJlY3QiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7mmL7npLrpk77mjqU8L2E+Jyk7CiAgICAgICAgICAgIHZhciAkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cGxpbmtfYnV0dG9uID0gJCgnPGEgaWQ9ImJhdGNoaHR0cGxpbmstZGlyZWN0IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5om56YeP6ZO+5o6lKEhUVFApPC9hPicpOwogICAgICAgICAgICB2YXIgJGRpcmVjdGJ1dHRvbl9iYXRjaGh0dHBzbGlua19idXR0b24gPSAkKCc8YSBpZD0iYmF0Y2hodHRwc2xpbmstZGlyZWN0IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5om56YeP6ZO+5o6lKEhUVFBTKTwvYT4nKTsKICAgICAgICAgICAgJGRpcmVjdGJ1dHRvbl9tZW51LmFwcGVuZCgkZGlyZWN0YnV0dG9uX2Rvd25sb2FkX2J1dHRvbikuYXBwZW5kKCRkaXJlY3RidXR0b25fbGlua19idXR0b24pLmFwcGVuZCgkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cGxpbmtfYnV0dG9uKS5hcHBlbmQoJGRpcmVjdGJ1dHRvbl9iYXRjaGh0dHBzbGlua19idXR0b24pOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uLmFwcGVuZCgkZGlyZWN0YnV0dG9uX3NwYW4uYXBwZW5kKCRkaXJlY3RidXR0b25fYSkuYXBwZW5kKCRkaXJlY3RidXR0b25fbWVudSkpOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uLmhvdmVyKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAkZGlyZWN0YnV0dG9uX3NwYW4udG9nZ2xlQ2xhc3MoJ2J1dHRvbi1vcGVuJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uX2Rvd25sb2FkX2J1dHRvbi5jbGljayhkb3dubG9hZENsaWNrKTsKICAgICAgICAgICAgJGRpcmVjdGJ1dHRvbl9saW5rX2J1dHRvbi5jbGljayhsaW5rQ2xpY2spOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cGxpbmtfYnV0dG9uLmNsaWNrKGJhdGNoQ2xpY2spOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cHNsaW5rX2J1dHRvbi5jbGljayhiYXRjaENsaWNrKTsKCiAgICAgICAgICAgIHZhciAkYXBpYnV0dG9uID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLW1lbnUiIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkYXBpYnV0dG9uX3NwYW4gPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gZy1kcm9wZG93bi1idXR0b24tc2Vjb25kIiBtZW51bGV2ZWw9IjIiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fYSA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG8iPkFQSeS4i+i9vTwvc3Bhbj48L3NwYW4+PC9hPicpOwogICAgICAgICAgICB2YXIgJGFwaWJ1dHRvbl9tZW51ID0gJCgnPHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDoxMjBweDtsZWZ0Ojc3cHgiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fZG93bmxvYWRfYnV0dG9uID0gJCgnPGEgaWQ9ImRvd25sb2FkLWFwaSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuS4i+i9vTwvYT4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fbGlua19idXR0b24gPSAkKCc8YSBpZD0iaHR0cGxpbmstYXBpIiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICB2YXIgJGFwaWJ1dHRvbl9iYXRjaGh0dHBsaW5rX2J1dHRvbiA9ICQoJzxhIGlkPSJiYXRjaGh0dHBsaW5rLWFwaSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuaJuemHj+mTvuaOpShIVFRQKTwvYT4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fYmF0Y2hodHRwc2xpbmtfYnV0dG9uID0gJCgnPGEgaWQ9ImJhdGNoaHR0cHNsaW5rLWFwaSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuaJuemHj+mTvuaOpShIVFRQUyk8L2E+Jyk7CiAgICAgICAgICAgICRhcGlidXR0b25fbWVudS5hcHBlbmQoJGFwaWJ1dHRvbl9kb3dubG9hZF9idXR0b24pLmFwcGVuZCgkYXBpYnV0dG9uX2xpbmtfYnV0dG9uKS5hcHBlbmQoJGFwaWJ1dHRvbl9iYXRjaGh0dHBsaW5rX2J1dHRvbikuYXBwZW5kKCRhcGlidXR0b25fYmF0Y2hodHRwc2xpbmtfYnV0dG9uKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbi5hcHBlbmQoJGFwaWJ1dHRvbl9zcGFuLmFwcGVuZCgkYXBpYnV0dG9uX2EpLmFwcGVuZCgkYXBpYnV0dG9uX21lbnUpKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbi5ob3ZlcihmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJGFwaWJ1dHRvbl9zcGFuLnRvZ2dsZUNsYXNzKCdidXR0b24tb3BlbicpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJGFwaWJ1dHRvbl9kb3dubG9hZF9idXR0b24uY2xpY2soZG93bmxvYWRDbGljayk7CiAgICAgICAgICAgICRhcGlidXR0b25fbGlua19idXR0b24uY2xpY2sobGlua0NsaWNrKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbl9iYXRjaGh0dHBsaW5rX2J1dHRvbi5jbGljayhiYXRjaENsaWNrKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbl9iYXRjaGh0dHBzbGlua19idXR0b24uY2xpY2soYmF0Y2hDbGljayk7CgogICAgICAgICAgICB2YXIgJG91dGVybGlua2J1dHRvbiA9ICQoJzxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBzdHlsZT0iZGlzcGxheTpibG9jayI+PC9zcGFuPicpOwogICAgICAgICAgICB2YXIgJG91dGVybGlua2J1dHRvbl9zcGFuID0gJCgnPHNwYW4gY2xhc3M9ImctZHJvcGRvd24tYnV0dG9uIGctZHJvcGRvd24tYnV0dG9uLXNlY29uZCIgbWVudWxldmVsPSIyIj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkb3V0ZXJsaW5rYnV0dG9uX2EgPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDphdXRvIj7lpJbpk77kuIvovb08L3NwYW4+PC9zcGFuPjwvYT4nKTsKICAgICAgICAgICAgdmFyICRvdXRlcmxpbmtidXR0b25fbWVudSA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6MTIwcHg7bGVmdDo3OXB4Ij48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkb3V0ZXJsaW5rYnV0dG9uX2Rvd25sb2FkX2J1dHRvbiA9ICQoJzxhIGlkPSJkb3dubG9hZC1vdXRlcmxpbmsiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7kuIvovb08L2E+Jyk7CiAgICAgICAgICAgIHZhciAkb3V0ZXJsaW5rYnV0dG9uX2xpbmtfYnV0dG9uID0gJCgnPGEgaWQ9Imxpbmstb3V0ZXJsaW5rIiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICB2YXIgJG91dGVybGlua2J1dHRvbl9iYXRjaGxpbmtfYnV0dG9uID0gJCgnPGEgaWQ9ImJhdGNobGluay1vdXRlcmxpbmsiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7mibnph4/pk77mjqU8L2E+Jyk7CiAgICAgICAgICAgICRvdXRlcmxpbmtidXR0b25fbWVudS5hcHBlbmQoJG91dGVybGlua2J1dHRvbl9kb3dubG9hZF9idXR0b24pLmFwcGVuZCgkb3V0ZXJsaW5rYnV0dG9uX2xpbmtfYnV0dG9uKS5hcHBlbmQoJG91dGVybGlua2J1dHRvbl9iYXRjaGxpbmtfYnV0dG9uKTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbi5hcHBlbmQoJG91dGVybGlua2J1dHRvbl9zcGFuLmFwcGVuZCgkb3V0ZXJsaW5rYnV0dG9uX2EpLmFwcGVuZCgkb3V0ZXJsaW5rYnV0dG9uX21lbnUpKTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbi5ob3ZlcihmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbl9zcGFuLnRvZ2dsZUNsYXNzKCdidXR0b24tb3BlbicpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbl9kb3dubG9hZF9idXR0b24uY2xpY2soZG93bmxvYWRDbGljayk7CiAgICAgICAgICAgICRvdXRlcmxpbmtidXR0b25fbGlua19idXR0b24uY2xpY2sobGlua0NsaWNrKTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbl9iYXRjaGxpbmtfYnV0dG9uLmNsaWNrKGJhdGNoQ2xpY2spOwoKICAgICAgICAgICAgJGRyb3Bkb3duYnV0dG9uX3NwYW4uYXBwZW5kKCRkaXJlY3RidXR0b24pLmFwcGVuZCgkYXBpYnV0dG9uKS5hcHBlbmQoJG91dGVybGlua2J1dHRvbik7CiAgICAgICAgICAgICRkcm9wZG93bmJ1dHRvbi5hcHBlbmQoJGRyb3Bkb3duYnV0dG9uX2EpLmFwcGVuZCgkZHJvcGRvd25idXR0b25fc3Bhbik7CgogICAgICAgICAgICAkZHJvcGRvd25idXR0b24uaG92ZXIoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICRkcm9wZG93bmJ1dHRvbi50b2dnbGVDbGFzcygnYnV0dG9uLW9wZW4nKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyQoJ2Rpdi5kZWZhdWx0LWRvbSBkaXYuYmFyIGRpdi5saXN0LXRvb2xzJykuYXBwZW5kKCRkcm9wZG93bmJ1dHRvbik7CiAgICAgICAgICAgIC8vJCgnZGl2LmlyaFc5cFogZGl2LnlxZ1I3NDcgZGl2LlFERE9RQicpLmFwcGVuZCgkZHJvcGRvd25idXR0b24pOwogICAgICAgICAgICAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXRvb2xzJ10pLmFwcGVuZCgkZHJvcGRvd25idXR0b24pOwogICAgICAgIH0KCiAgICAgICAgLy/mmoLml7bmsqHnlKgKICAgICAgICAvLyBmdW5jdGlvbiBhZGRMb2FkaW5nKCl7CiAgICAgICAgLy8gICAgIHZhciBzY3JlZW5XaWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7CiAgICAgICAgLy8gICAgIHZhciBzY3JlZW5IZWlnaHQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKICAgICAgICAvLyAgICAgdmFyIGxlZnQgPSAoc2NyZWVuV2lkdGgtMTApLzI7CiAgICAgICAgLy8gICAgIHZhciB0b3AgPSBzY3JlZW5IZWlnaHQvMjsKICAgICAgICAvLyAgICAgdmFyICRsb2FkaW5nID0gJCgnPGRpdiBpZD0iZGlhbG9nLWxvYWRpbmciIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OicrbGVmdCsncHg7dG9wOicrdG9wKydweDtkaXNwbGF5Om5vbmU7ei1pbmRleDo1Mjtjb2xvcjp3aGl0ZTtmb250LXNpemU6MTZweCI+5aSE55CG5LitPC9kaXY+Jyk7CiAgICAgICAgLy8gICAgICQoJ2JvZHknKS5hcHBlbmQoJGxvYWRpbmcpOwogICAgICAgIC8vIH0KCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRDbGljayhldmVudCl7CiAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tuWIl+ihqO+8micsc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICB2YXIgaWQgPSBldmVudC50YXJnZXQuaWQ7CiAgICAgICAgICAgIHZhciBkb3dubG9hZExpbms7CgogICAgICAgICAgICBpZihpZCA9PSAnZG93bmxvYWQtZGlyZWN0Jyl7CiAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRUeXBlOwogICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuiOt+WPlumAieS4reaWh+S7tuWksei0pe+8jOivt+WIt+aWsOmHjeivle+8gSIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXIgPT09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZSA9ICdiYXRjaCc7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXIgPT09IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZT0gJ2RsaW5rJzsKICAgICAgICAgICAgICAgICAgICAvL2Rvd25sb2FkVHlwZSA9IHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyPT0xPydiYXRjaCc6KHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyPT09MD8nZGxpbmsnOidiYXRjaCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA+IDEpewogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZSA9ICdiYXRjaCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmaWRfbGlzdCA9IGdldEZpZExpc3Qoc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGdldERvd25sb2FkTGlua1dpdGhQYW5BUEkoZG93bmxvYWRUeXBlKTsKICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJubyA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgaWYoZG93bmxvYWRUeXBlID09ICdkbGluaycpCiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IHJlc3VsdC5kbGlua1swXS5kbGluazsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGRvd25sb2FkVHlwZSA9PSAnYmF0Y2gnKXsKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gcmVzdWx0LmRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSBkb3dubG9hZExpbmsgKyAnJnppcG5hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChzZWxlY3RGaWxlTGlzdFswXS5maWxlbmFtZSkgKyAnLnppcCc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLlj5HnlJ/plJnor6/vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gLTEpewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bkuI3lrZjlnKjmiJblt7Looqvnmb7luqblkozosJDvvIzml6Dms5XkuIvovb3vvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gMTEyKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6aG16Z2i6L+H5pyf77yM6K+35Yi35paw6YeN6K+V77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWPkeeUn+mUmeivr++8gSIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6I635Y+W6YCJ5Lit5paH5Lu25aSx6LSl77yM6K+35Yi35paw6YeN6K+V77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RGaWxlTGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuivpeaWueazleS4jeaUr+aMgeWkmuaWh+S7tuS4i+i9ve+8gSIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXIgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLor6Xmlrnms5XkuI3mlK/mjIHnm67lvZXkuIvovb3vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGlkID09ICdkb3dubG9hZC1hcGknKXsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSBnZXREb3dubG9hZExpbmtXaXRoUkVTVEFQSUJhaWR1KHNlbGVjdEZpbGVMaXN0WzBdLnBhdGgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZCA9PSAnZG93bmxvYWQtb3V0ZXJsaW5rJyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGdldERvd25sb2FkTGlua1dpdGhDbGllbnRBUEkoc2VsZWN0RmlsZUxpc3RbMF0ucGF0aCk7CiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmVycm5vID09IDApewogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSByZXN1bHQudXJsc1swXS51cmw7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocmVzdWx0LmVycm5vID09IDEpewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5paH5Lu25LiN5a2Y5Zyo77yBJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gMil7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bkuI3lrZjlnKjmiJbogIXlt7Looqvnmb7luqblkozosJDvvIzml6Dms5XkuIvovb3vvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5Y+R55Sf6ZSZ6K+v77yBJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXhlY0Rvd25sb2FkKGRvd25sb2FkTGluayk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsaW5rQ2xpY2soZXZlbnQpewogICAgICAgICAgICBzbG9nKCfpgInkuK3mlofku7bliJfooajvvJonLHNlbGVjdEZpbGVMaXN0KTsKICAgICAgICAgICAgdmFyIGlkID0gZXZlbnQudGFyZ2V0LmlkOwogICAgICAgICAgICB2YXIgbGlua0xpc3QsdGlwOwoKICAgICAgICAgICAgaWYoaWQuaW5kZXhPZignZGlyZWN0JykgIT0gLTEpewogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkVHlwZTsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbms7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6I635Y+W6YCJ5Lit5paH5Lu25aSx6LSl77yM6K+35Yi35paw6YeN6K+V77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlPSAnZGxpbmsnOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA+IDEpewogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZSA9ICdiYXRjaCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmaWRfbGlzdCA9IGdldEZpZExpc3Qoc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGdldERvd25sb2FkTGlua1dpdGhQYW5BUEkoZG93bmxvYWRUeXBlKTsKICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJubyA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgaWYoZG93bmxvYWRUeXBlID09ICdkbGluaycpCiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IHJlc3VsdC5kbGlua1swXS5kbGluazsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGRvd25sb2FkVHlwZSA9PSAnYmF0Y2gnKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZyhzZWxlY3RGaWxlTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IHJlc3VsdC5kbGluazsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09PSAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gZG93bmxvYWRMaW5rICsgJyZ6aXBuYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQoc2VsZWN0RmlsZUxpc3RbMF0uZmlsZW5hbWUpICsgJy56aXAnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi5Y+R55Sf6ZSZ6K+v77yBIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gLTEpewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bkuI3lrZjlnKjmiJblt7Looqvnmb7luqblkozosJDvvIzml6Dms5XkuIvovb3vvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gMTEyKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6aG16Z2i6L+H5pyf77yM6K+35Yi35paw6YeN6K+V77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWPkeeUn+mUmeivr++8gSIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBodHRwbGluayA9IGRvd25sb2FkTGluay5yZXBsYWNlKC9eKFtBLVphLXpdKyk6LywnaHR0cDonKTsKICAgICAgICAgICAgICAgIHZhciBodHRwc2xpbmsgPSBkb3dubG9hZExpbmsucmVwbGFjZSgvXihbQS1aYS16XSspOi8sJ2h0dHBzOicpOwogICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJyc7CiAgICAgICAgICAgICAgICAkLmVhY2goc2VsZWN0RmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGVsZW1lbnQuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZmlsZW5hbWUgKyAnLCcgKyBlbGVtZW50LmZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbGlua0xpc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXJsczpbCiAgICAgICAgICAgICAgICAgICAgICAgIHt1cmw6aHR0cGxpbmsscmFuazoxfSwKICAgICAgICAgICAgICAgICAgICAgICAge3VybDpodHRwc2xpbmsscmFuazoyfQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aXAgPSAn5pi+56S65qih5ouf55m+5bqm572R55uY572R6aG16I635Y+W55qE6ZO+5o6l77yM5Y+v5Lul5L2/55So5Y+z6ZSu6L+F6Zu35LiL6L2977yM5aSN5Yi25Yiw5LiL6L295bel5YW36ZyA6KaB5Lyg6YCSY29va2ll77yM5aSa5paH5Lu25omT5YyF5LiL6L2955qE6ZO+5o6l5Y+v5Lul55u05o6l5aSN5Yi25L2/55SoJzsKICAgICAgICAgICAgICAgIGRpYWxvZy5vcGVuKHt0aXRsZTon5LiL6L296ZO+5o6lJyx0eXBlOidsaW5rJyxsaXN0OmxpbmtMaXN0LHRpcDp0aXB9KTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6I635Y+W6YCJ5Lit5paH5Lu25aSx6LSl77yM6K+35Yi35paw6YeN6K+V77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RGaWxlTGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuivpeaWueazleS4jeaUr+aMgeWkmuaWh+S7tuS4i+i9ve+8gSIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXIgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLor6Xmlrnms5XkuI3mlK/mjIHnm67lvZXkuIvovb3vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGlkLmluZGV4T2YoJ2FwaScpICE9IC0xKXsKICAgICAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRMaW5rID0gZ2V0RG93bmxvYWRMaW5rV2l0aFJFU1RBUElCYWlkdShzZWxlY3RGaWxlTGlzdFswXS5wYXRoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHR0cGxpbmsgPSBkb3dubG9hZExpbmsucmVwbGFjZSgvXihbQS1aYS16XSspOi8sJ2h0dHA6Jyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0dHBzbGluayA9IGRvd25sb2FkTGluay5yZXBsYWNlKC9eKFtBLVphLXpdKyk6LywnaHR0cHM6Jyk7CiAgICAgICAgICAgICAgICAgICAgbGlua0xpc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOnNlbGVjdEZpbGVMaXN0WzBdLmZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB1cmxzOlsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cmw6aHR0cGxpbmsscmFuazoxfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cmw6aHR0cHNsaW5rLHJhbms6Mn0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaHR0cGxpbmsgPSBodHRwbGluay5yZXBsYWNlKCcyNTA1MjgnLCcyNjY3MTknKTsKICAgICAgICAgICAgICAgICAgICBodHRwc2xpbmsgPSBodHRwc2xpbmsucmVwbGFjZSgnMjUwNTI4JywnMjY2NzE5Jyk7CiAgICAgICAgICAgICAgICAgICAgbGlua0xpc3QudXJscy5wdXNoKHt1cmw6aHR0cGxpbmsscmFuazozfSk7CiAgICAgICAgICAgICAgICAgICAgbGlua0xpc3QudXJscy5wdXNoKHt1cmw6aHR0cHNsaW5rLHJhbms6NH0pOwogICAgICAgICAgICAgICAgICAgIHRpcCA9ICfmmL7npLrmqKHmi59BUFDojrflj5bnmoTpk77mjqUo5L2/55So55m+5bqm5LqRSUQp77yM5Y+v5Lul5L2/55So5Y+z6ZSu6L+F6Zu35LiL6L2977yM5aSN5Yi25Yiw5LiL6L295bel5YW36ZyA6KaB5Lyg6YCSY29va2llJzsKICAgICAgICAgICAgICAgICAgICBkaWFsb2cub3Blbih7dGl0bGU6J+S4i+i9vemTvuaOpScsdHlwZTonbGluaycsbGlzdDpsaW5rTGlzdCx0aXA6dGlwfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlkLmluZGV4T2YoJ291dGVybGluaycpICE9IC0xKXsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aENsaWVudEFQSShzZWxlY3RGaWxlTGlzdFswXS5wYXRoKTsKICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZXJybm8gPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtMaXN0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6c2VsZWN0RmlsZUxpc3RbMF0uZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzOnJlc3VsdC51cmxzCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocmVzdWx0LmVycm5vID09IDEpewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5paH5Lu25LiN5a2Y5Zyo77yBJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gMil7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bkuI3lrZjlnKjmiJbogIXlt7Looqvnmb7luqblkozosJDvvIzml6Dms5XkuIvovb3vvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5Y+R55Sf6ZSZ6K+v77yBJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGlwID0gJ+aYvuekuuaooeaLn+eZvuW6pue9keebmOWuouaIt+err+iOt+WPlueahOmTvuaOpe+8jOWPr+S7peebtOaOpeWkjeWItuWIsOS4i+i9veW3peWFt+S9v+eUqO+8jOS4jemcgOimgWNvb2tpZSc7CiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oe3RpdGxlOifkuIvovb3pk77mjqUnLHR5cGU6J2xpbmsnLGxpc3Q6bGlua0xpc3QsdGlwOnRpcCxzaG93Y29weTp0cnVlLHNob3dlZGl0OnRydWV9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL2RpYWxvZy5vcGVuKHt0aXRsZTon5LiL6L296ZO+5o6lJyx0eXBlOidsaW5rJyxsaXN0OmxpbmtMaXN0LHRpcDp0aXB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGJhdGNoQ2xpY2soZXZlbnQpewogICAgICAgICAgICBzbG9nKCfpgInkuK3mlofku7bliJfooajvvJonLHNlbGVjdEZpbGVMaXN0KTsKICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgICAgIGFsZXJ0KCfojrflj5bpgInkuK3mlofku7blpLHotKXvvIzor7fliLfmlrDph43or5XvvIEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaWQgPSBldmVudC50YXJnZXQuaWQ7CiAgICAgICAgICAgIHZhciBsaW5rVHlwZSx0aXA7CiAgICAgICAgICAgIGxpbmtUeXBlID0gaWQuaW5kZXhPZignaHR0cHMnKSA9PSAtMSA/IChpZC5pbmRleE9mKCdodHRwJykgPT0gLTEgPyBsb2NhdGlvbi5wcm90b2NvbCsnOicgOiAnaHR0cDonKSA6ICdodHRwczonOwogICAgICAgICAgICBiYXRjaExpbmtMaXN0ID0gW107CiAgICAgICAgICAgIGJhdGNoTGlua0xpc3RBbGwgPSBbXTsKICAgICAgICAgICAgaWYoaWQuaW5kZXhPZignZGlyZWN0JykgIT0gLTEpewogICAgICAgICAgICAgICAgYmF0Y2hMaW5rTGlzdCA9IGdldERpcmVjdEJhdGNoTGluayhsaW5rVHlwZSk7CiAgICAgICAgICAgICAgICB0aXAgPSAn5pi+56S65omA5pyJ6YCJ5Lit5paH5Lu255qE55u05o6l5LiL6L296ZO+5o6l77yM5paH5Lu25aS55pi+56S65Li65omT5YyF5LiL6L2955qE6ZO+5o6lJzsKICAgICAgICAgICAgICAgIGlmKGJhdGNoTGlua0xpc3QubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn5rKh5pyJ6ZO+5o6l5Y+v5Lul5pi+56S677yMQVBJ6ZO+5o6l5LiN6KaB5YWo6YOo6YCJ5Lit5paH5Lu25aS577yBJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oe3RpdGxlOifmibnph4/pk77mjqUnLHR5cGU6J2JhdGNoJyxsaXN0OmJhdGNoTGlua0xpc3QsdGlwOnRpcCxzaG93Y29weTp0cnVlfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZihpZC5pbmRleE9mKCdhcGknKSAhPSAtMSl7CiAgICAgICAgICAgICAgICBiYXRjaExpbmtMaXN0ID0gZ2V0QVBJQmF0Y2hMaW5rKGxpbmtUeXBlKTsKICAgICAgICAgICAgICAgIHRpcCA9ICfmmL7npLrmiYDmnInpgInkuK3mlofku7bnmoRBUEnkuIvovb3pk77mjqXvvIzkuI3mmL7npLrmlofku7blpLknOwogICAgICAgICAgICAgICAgaWYoYmF0Y2hMaW5rTGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmsqHmnInpk77mjqXlj6/ku6XmmL7npLrvvIxBUEnpk77mjqXkuI3opoHlhajpg6jpgInkuK3mlofku7blpLnvvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaWFsb2cub3Blbih7dGl0bGU6J+aJuemHj+mTvuaOpScsdHlwZTonYmF0Y2gnLGxpc3Q6YmF0Y2hMaW5rTGlzdCx0aXA6dGlwLHNob3djb3B5OnRydWV9KTsKICAgICAgICAgICAgfSBlbHNlIGlmKGlkLmluZGV4T2YoJ291dGVybGluaycpICE9IC0xKXsKICAgICAgICAgICAgICAgIGJhdGNoTGlua0xpc3RBbGwgPSBnZXRPdXRlcmxpbmtCYXRjaExpbmtBbGwoKTsKICAgICAgICAgICAgICAgIGJhdGNoTGlua0xpc3QgPSBnZXRPdXRlcmxpbmtCYXRjaExpbmtGaXJzdChiYXRjaExpbmtMaXN0QWxsKTsKICAgICAgICAgICAgICAgIHRpcCA9ICfmmL7npLrmiYDmnInpgInkuK3mlofku7bnmoTlpJbpg6jkuIvovb3pk77mjqXvvIzkuI3mmL7npLrmlofku7blpLknOwogICAgICAgICAgICAgICAgaWYoYmF0Y2hMaW5rTGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmsqHmnInpk77mjqXlj6/ku6XmmL7npLrvvIxBUEnpk77mjqXkuI3opoHlhajpg6jpgInkuK3mlofku7blpLnvvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oe3RpdGxlOifmibnph4/pk77mjqUnLHR5cGU6J2JhdGNoJyxsaXN0OmJhdGNoTGlua0xpc3QsdGlwOnRpcCxzaG93Y29weTp0cnVlLGFsbGxpc3Q6YmF0Y2hMaW5rTGlzdEFsbCxzaG93YWxsOnRydWV9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9kaWFsb2cub3Blbih7dGl0bGU6J+aJuemHj+mTvuaOpScsdHlwZTonYmF0Y2gnLGxpc3Q6YmF0Y2hMaW5rTGlzdCx0aXA6dGlwLHNob3djb3B5OnRydWV9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldERpcmVjdEJhdGNoTGluayhsaW5rVHlwZSl7CiAgICAgICAgICAgIHZhciBsaXN0ID0gW107CiAgICAgICAgICAgICQuZWFjaChzZWxlY3RGaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZFR5cGUsZG93bmxvYWRMaW5rLHJlc3VsdDsKICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuaXNkaXIgPT0gMCkKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZFR5cGUgPSAnZGxpbmsnOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZSA9ICdiYXRjaCc7CiAgICAgICAgICAgICAgICBmaWRfbGlzdCA9IGdldEZpZExpc3QoW2VsZW1lbnRdKTsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdldERvd25sb2FkTGlua1dpdGhQYW5BUEkoZG93bmxvYWRUeXBlKTsKICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJubyA9PSAwKXsKICAgICAgICAgICAgICAgICAgICBpZihkb3dubG9hZFR5cGUgPT0gJ2RsaW5rJykKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gcmVzdWx0LmRsaW5rWzBdLmRsaW5rOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZG93bmxvYWRUeXBlID09ICdiYXRjaCcpCiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IHJlc3VsdC5kbGluazsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSBkb3dubG9hZExpbmsucmVwbGFjZSgvXihbQS1aYS16XSspOi8sbGlua1R5cGUpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gJ2Vycm9yJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7ZmlsZW5hbWU6ZWxlbWVudC5maWxlbmFtZSxkb3dubG9hZGxpbms6ZG93bmxvYWRMaW5rfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbGlzdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEFQSUJhdGNoTGluayhsaW5rVHlwZSl7CiAgICAgICAgICAgIHZhciBsaXN0ID0gW107CiAgICAgICAgICAgICQuZWFjaChzZWxlY3RGaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuaXNkaXIgPT0gMSkKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRMaW5rOwogICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gZ2V0RG93bmxvYWRMaW5rV2l0aFJFU1RBUElCYWlkdShlbGVtZW50LnBhdGgpOwogICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gZG93bmxvYWRMaW5rLnJlcGxhY2UoL14oW0EtWmEtel0rKTovLGxpbmtUeXBlKTsKICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7ZmlsZW5hbWU6ZWxlbWVudC5maWxlbmFtZSxkb3dubG9hZGxpbms6ZG93bmxvYWRMaW5rfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbGlzdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE91dGVybGlua0JhdGNoTGlua0FsbCgpewogICAgICAgICAgICB2YXIgbGlzdCA9IFtdOwogICAgICAgICAgICAkLmVhY2goc2VsZWN0RmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICAgICAgaWYoZWxlbWVudC5pc2RpciA9PSAxKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdldERvd25sb2FkTGlua1dpdGhDbGllbnRBUEkoZWxlbWVudC5wYXRoKTsKICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJubyA9PSAwKXsKICAgICAgICAgICAgICAgICAgICAvL2Rvd25sb2FkTGluayA9IHJlc3VsdC51cmxzWzBdLnVybDsKICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2goe2ZpbGVuYW1lOmVsZW1lbnQuZmlsZW5hbWUsbGlua3M6cmVzdWx0LnVybHN9KTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIC8vZG93bmxvYWRMaW5rID0gJ2Vycm9yJzsKICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2goe2ZpbGVuYW1lOmVsZW1lbnQuZmlsZW5hbWUsbGlua3M6W3tyYW5rOjEsdXJsOidlcnJvcid9XX0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9saXN0LnB1c2goe2ZpbGVuYW1lOmVsZW1lbnQuZmlsZW5hbWUsZG93bmxvYWRsaW5rOmRvd25sb2FkTGlua30pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRPdXRlcmxpbmtCYXRjaExpbmtGaXJzdChsaXN0KXsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgICAgICAkLmVhY2gobGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtmaWxlbmFtZTplbGVtZW50LmZpbGVuYW1lLGRvd25sb2FkbGluazplbGVtZW50LmxpbmtzWzBdLnVybH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFNpZ24oKXsKICAgICAgICAgICAgdmFyIHNpZ25GbmM7CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgIHNpZ25GbmMgPSBuZXcgRnVuY3Rpb24oInJldHVybiAiICsgeXVuRGF0YS5zaWduMikoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc2lnbkZuYyh5dW5EYXRhLnNpZ241LHl1bkRhdGEuc2lnbjEpKTsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5b2T5YmN55uu5b2VCiAgICAgICAgZnVuY3Rpb24gZ2V0UGF0aCgpewogICAgICAgICAgICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgIHZhciByZWd4ID0gLyhefCZ8XC8pcGF0aD0oW14mXSopKCZ8JCkvaTsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGhhc2gubWF0Y2gocmVneCk7CiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0WzJdKTsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5YiG57G75pi+56S655qE57G75Yir77yM5Y2z5Zyw5Z2A5qCP5Lit55qEdHlwZQogICAgICAgIGZ1bmN0aW9uIGdldENhdGVnb3J5KCl7CiAgICAgICAgICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDsKICAgICAgICAgICAgdmFyIHJlZ3ggPSAvKF58JnxcLyl0eXBlPShbXiZdKikoJnwkKS9pOwogICAgICAgICAgICB2YXIgcmVzdWx0ID0gaGFzaC5tYXRjaChyZWd4KTsKICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRbMl0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoS2V5KCl7CiAgICAgICAgICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDsKICAgICAgICAgICAgdmFyIHJlZ3ggPSAvKF58JnxcLylrZXk9KFteJl0qKSgmfCQpL2k7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBoYXNoLm1hdGNoKHJlZ3gpOwogICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdFsyXSk7CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluW9k+WJjemhtemdoihsaXN05oiW6ICFY2F0ZWdvcnkpCiAgICAgICAgZnVuY3Rpb24gZ2V0Q3VycmVudFBhZ2UoKXsKICAgICAgICAgICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwogICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhhc2guc3Vic3RyaW5nKGhhc2guaW5kZXhPZignIycpKzEsaGFzaC5pbmRleE9mKCcvJykpKTsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5paH5Lu25YiX6KGoCiAgICAgICAgZnVuY3Rpb24gZ2V0RmlsZUxpc3QoKXsKICAgICAgICAgICAgdmFyIGZpbGVsaXN0ID0gW107CiAgICAgICAgICAgIHZhciBsaXN0VXJsID0gcGFuQVBJVXJsICsgImxpc3QiOwogICAgICAgICAgICB2YXIgcGF0aCA9IGdldFBhdGgoKTsKICAgICAgICAgICAgbG9naWQgPSBnZXRMb2dJRCgpOwogICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgZGlyOnBhdGgsCiAgICAgICAgICAgICAgICBiZHN0b2tlbjpiZHN0b2tlbiwKICAgICAgICAgICAgICAgIGxvZ2lkOmxvZ2lkLAogICAgICAgICAgICAgICAgb3JkZXI6J3NpemUnLAogICAgICAgICAgICAgICAgZGVzYzowLAogICAgICAgICAgICAgICAgY2xpZW50dHlwZTowLAogICAgICAgICAgICAgICAgc2hvd2VtcHR5OjAsCiAgICAgICAgICAgICAgICB3ZWI6MSwKICAgICAgICAgICAgICAgIGNoYW5uZWw6J2NodW5sZWknLAogICAgICAgICAgICAgICAgYXBwaWQ6MjUwNTI4CiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6bGlzdFVybCwKICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgbWV0aG9kOidHRVQnLAogICAgICAgICAgICAgICAgZGF0YTpwYXJhbXMsCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICBmaWxlbGlzdCA9IDA9PT1yZXNwb25zZS5lcnJubyA/IHJlc3BvbnNlLmxpc3QgOiBbXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBmaWxlbGlzdDsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5YiG57G76aG16Z2i5LiL55qE5paH5Lu25YiX6KGoCiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlGaWxlTGlzdCgpewogICAgICAgICAgICB2YXIgZmlsZWxpc3QgPSBbXTsKICAgICAgICAgICAgdmFyIGxpc3RVcmwgPSBwYW5BUElVcmwgKyAiY2F0ZWdvcnlsaXN0IjsKICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gZ2V0Q2F0ZWdvcnkoKTsKICAgICAgICAgICAgbG9naWQgPSBnZXRMb2dJRCgpOwogICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgY2F0ZWdvcnk6Y2F0ZWdvcnksCiAgICAgICAgICAgICAgICBiZHN0b2tlbjpiZHN0b2tlbiwKICAgICAgICAgICAgICAgIGxvZ2lkOmxvZ2lkLAogICAgICAgICAgICAgICAgb3JkZXI6J3NpemUnLAogICAgICAgICAgICAgICAgZGVzYzowLAogICAgICAgICAgICAgICAgY2xpZW50dHlwZTowLAogICAgICAgICAgICAgICAgc2hvd2VtcHR5OjAsCiAgICAgICAgICAgICAgICB3ZWI6MSwKICAgICAgICAgICAgICAgIGNoYW5uZWw6J2NodW5sZWknLAogICAgICAgICAgICAgICAgYXBwaWQ6MjUwNTI4CiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6bGlzdFVybCwKICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgbWV0aG9kOidHRVQnLAogICAgICAgICAgICAgICAgZGF0YTpwYXJhbXMsCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICBmaWxlbGlzdCA9IDA9PT1yZXNwb25zZS5lcnJubyA/IHJlc3BvbnNlLmluZm8gOiBbXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBmaWxlbGlzdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFNlYXJjaEZpbGVMaXN0KCl7CiAgICAgICAgICAgIHZhciBmaWxlbGlzdCA9IFtdOwogICAgICAgICAgICB2YXIgbGlzdFVybCA9IHBhbkFQSVVybCArICdzZWFyY2gnOwogICAgICAgICAgICBsb2dpZCA9IGdldExvZ0lEKCk7CiAgICAgICAgICAgIHNlYXJjaEtleSA9IGdldFNlYXJjaEtleSgpOwogICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgcmVjdXJzaW9uOjEsCiAgICAgICAgICAgICAgICBvcmRlcjondGltZScsCiAgICAgICAgICAgICAgICBkZXNjOjEsCiAgICAgICAgICAgICAgICBzaG93ZW1wdHk6MCwKICAgICAgICAgICAgICAgIHdlYjoxLAogICAgICAgICAgICAgICAgcGFnZToxLAogICAgICAgICAgICAgICAgbnVtOjEwMCwKICAgICAgICAgICAgICAgIGtleTpzZWFyY2hLZXksCiAgICAgICAgICAgICAgICBjaGFubmVsOidjaHVubGVpJywKICAgICAgICAgICAgICAgIGFwcF9pZDoyNTA1MjgsCiAgICAgICAgICAgICAgICBiZHN0b2tlbjpiZHN0b2tlbiwKICAgICAgICAgICAgICAgIGxvZ2lkOmxvZ2lkLAogICAgICAgICAgICAgICAgY2xpZW50dHlwZTowCiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6bGlzdFVybCwKICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgbWV0aG9kOidHRVQnLAogICAgICAgICAgICAgICAgZGF0YTpwYXJhbXMsCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICBmaWxlbGlzdCA9IDA9PT1yZXNwb25zZS5lcnJubyA/IHJlc3BvbnNlLmxpc3QgOiBbXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBmaWxlbGlzdDsKICAgICAgICB9CgogICAgICAgIC8v55Sf5oiQ5LiL6L295pe255qEZmlkX2xpc3Tlj4LmlbAKICAgICAgICBmdW5jdGlvbiBnZXRGaWRMaXN0KGxpc3QpewogICAgICAgICAgICB2YXIgZmlkbGlzdCA9IG51bGw7CiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB2YXIgZmlsZWlkbGlzdCA9IFtdOwogICAgICAgICAgICAkLmVhY2gobGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgIGZpbGVpZGxpc3QucHVzaChlbGVtZW50LmZzX2lkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZpZGxpc3QgPSAnWycgKyBmaWxlaWRsaXN0ICsgJ10nOwogICAgICAgICAgICByZXR1cm4gZmlkbGlzdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFRpbWVzdGFtcCgpewogICAgICAgICAgICByZXR1cm4geXVuRGF0YS50aW1lc3RhbXA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRCRFN0b2tlbigpewogICAgICAgICAgICByZXR1cm4geXVuRGF0YS5NWUJEU1RPS0VOOwogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bnm7TmjqXkuIvovb3lnLDlnYAKICAgICAgICAvL+i/meS4quWcsOWdgOS4jeaYr+ebtOaOpeS4i+i9veWcsOWdgO+8jOiuv+mXrui/meS4quWcsOWdgOS8mui/lOWbnjMwMu+8jHJlc3BvbnNlIGhlYWRlcuS4reeahGxvY2F0aW9u5omN5piv55yf5a6e5LiL6L295Zyw5Z2ACiAgICAgICAgLy/mmoLml7bmsqHmnInmib7liLDmj5Dlj5bmlrnms5UKICAgICAgICBmdW5jdGlvbiBnZXREb3dubG9hZExpbmtXaXRoUGFuQVBJKHR5cGUpewogICAgICAgICAgICB2YXIgZG93bmxvYWRVcmwgPSBwYW5BUElVcmwgKyAiZG93bmxvYWQiOwogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICBsb2dpZCA9IGdldExvZ0lEKCk7CiAgICAgICAgICAgIHZhciBwYXJhbXM9IHsKICAgICAgICAgICAgICAgIHNpZ246c2lnbiwKICAgICAgICAgICAgICAgIHRpbWVzdGFtcDp0aW1lc3RhbXAsCiAgICAgICAgICAgICAgICBmaWRsaXN0OmZpZF9saXN0LAogICAgICAgICAgICAgICAgdHlwZTp0eXBlLAogICAgICAgICAgICAgICAgY2hhbm5lbDonY2h1bmxlaScsCiAgICAgICAgICAgICAgICB3ZWI6MSwKICAgICAgICAgICAgICAgIGFwcF9pZDoyNTA1MjgsCiAgICAgICAgICAgICAgICBiZHN0b2tlbjpiZHN0b2tlbiwKICAgICAgICAgICAgICAgIGxvZ2lkOmxvZ2lkLAogICAgICAgICAgICAgICAgY2xpZW50dHlwZTowCiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6ZG93bmxvYWRVcmwsCiAgICAgICAgICAgICAgICBhc3luYzpmYWxzZSwKICAgICAgICAgICAgICAgIG1ldGhvZDonR0VUJywKICAgICAgICAgICAgICAgIGRhdGE6cGFyYW1zLAogICAgICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNwb25zZSl7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RG93bmxvYWRMaW5rV2l0aFJFU1RBUElCYWlkdShwYXRoKXsKICAgICAgICAgICAgdmFyIGxpbmsgPSByZXN0QVBJVXJsICsgJ2ZpbGU/bWV0aG9kPWRvd25sb2FkJmFwcF9pZD0yNTA1MjgmcGF0aD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhdGgpOwogICAgICAgICAgICByZXR1cm4gbGluazsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldERvd25sb2FkTGlua1dpdGhSRVNUQVBJRVMocGF0aCl7CiAgICAgICAgICAgIHZhciBsaW5rID0gcmVzdEFQSVVybCArICdmaWxlP21ldGhvZD1kb3dubG9hZCZhcHBfaWQ9MjY2NzE5JnBhdGg9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXRoKTsKICAgICAgICAgICAgcmV0dXJuIGxpbms7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXREb3dubG9hZExpbmtXaXRoQ2xpZW50QVBJKHBhdGgpewogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICB2YXIgdXJsID0gY2xpZW50QVBJVXJsICsgJ2ZpbGU/bWV0aG9kPWxvY2F0ZWRvd25sb2FkJmFwcF9pZD0yNTA1MjgmdmVyPTQuMCZwYXRoPScgKyBlbmNvZGVVUklDb21wb25lbnQocGF0aCk7CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJywKICAgICAgICAgICAgICAgIHhockZpZWxkczogewogICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNwb25zZSl7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3RhdHVzQ29kZTp7CiAgICAgICAgICAgICAgICAgICAgNDA0OmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYocmVzdWx0KXsKICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJvcl9jb2RlID09IHVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LnVybHMgPT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm5vID0gMjsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHJlc3VsdC51cmxzLGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnVybHNbaW5kZXhdLnVybCA9IGVsZW1lbnQudXJsLnJlcGxhY2UoJ1xcJywnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJybm8gPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5lcnJvcl9jb2RlID09IDMxMDY2KXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJybm8gPSAxOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm5vID0gLTE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgcmVzdWx0ID0ge307CiAgICAgICAgICAgICAgICByZXN1bHQuZXJybm8gPSAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXhlY0Rvd25sb2FkKGxpbmspewogICAgICAgICAgICBzbG9nKCLkuIvovb3pk77mjqXvvJoiK2xpbmspOwogICAgICAgICAgICAkKCcjaGVscGVyZG93bmxvYWRpZnJhbWUnKS5hdHRyKCdzcmMnLGxpbmspOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlSWZyYW1lKCl7CiAgICAgICAgICAgIHZhciAkZGl2ID0gJCgnPGRpdiBjbGFzcz0iaGVscGVyLWhpZGUiIHN0eWxlPSJwYWRkaW5nOjA7bWFyZ2luOjA7ZGlzcGxheTpibG9jayI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkaWZyYW1lID0gJCgnPGlmcmFtZSBzcmM9ImphdmFzY3JpcHQ6dm9pZCgwKSIgaWQ9ImhlbHBlcmRvd25sb2FkaWZyYW1lIiBzdHlsZT0iZGlzcGxheTpub25lIj48L2lmcmFtZT4nKTsKICAgICAgICAgICAgJGRpdi5hcHBlbmQoJGlmcmFtZSk7CiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGRpdik7CgogICAgICAgIH0KICAgIH0KCiAgICAvL+WIhuS6q+mhtemdoueahOS4i+i9veWKqeaJiwogICAgZnVuY3Rpb24gUGFuU2hhcmVIZWxwZXIoKXsKICAgICAgICB2YXIgeXVuRGF0YSxzaWduLHRpbWVzdGFtcCxiZHN0b2tlbixjaGFubmVsLGNsaWVudHR5cGUsd2ViLGFwcF9pZCxsb2dpZCxlbmNyeXB0LHByb2R1Y3QsdWsscHJpbWFyeWlkLGZpZF9saXN0LGV4dHJhLHNoYXJlaWQ7CiAgICAgICAgdmFyIHZjb2RlOwogICAgICAgIHZhciBzaGFyZVR5cGUsYnV0dG9uVGFyZ2V0LGN1cnJlbnRQYXRoLGxpc3RfZ3JpZF9zdGF0dXMsb2JzZXJ2ZXIsZGlhbG9nLHZjb2RlRGlhbG9nOwogICAgICAgIHZhciBmaWxlTGlzdD1bXSxzZWxlY3RGaWxlTGlzdD1bXTsKICAgICAgICB2YXIgcGFuQVBJVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvYXBpLyI7CiAgICAgICAgdmFyIHNoYXJlTGlzdFVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3QgKyAiL3NoYXJlL2xpc3QiOwoKICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpewogICAgICAgICAgICB5dW5EYXRhID0gdW5zYWZlV2luZG93Lnl1bkRhdGE7CiAgICAgICAgICAgIHNsb2coJ3l1bkRhdGE6Jyx5dW5EYXRhKTsKICAgICAgICAgICAgaWYoeXVuRGF0YSA9PT0gdW5kZWZpbmVkIHx8IHl1bkRhdGEuRklMRUlORk8gPT0gbnVsbCl7CiAgICAgICAgICAgICAgICBzbG9nKCfpobXpnaLmnKrmraPluLjliqDovb3vvIzmiJbogIXnmb7luqblt7Lnu4/mm7TmlrDvvIEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbml0UGFyYW1zKCk7CiAgICAgICAgICAgIGFkZEJ1dHRvbigpOwogICAgICAgICAgICBkaWFsb2cgPSBuZXcgRGlhbG9nKHthZGRDb3B5OmZhbHNlfSk7CiAgICAgICAgICAgIHZjb2RlRGlhbG9nID0gbmV3IFZDb2RlRGlhbG9nKHJlZnJlc2hWQ29kZSxjb25maXJtQ2xpY2spOwogICAgICAgICAgICBjcmVhdGVJZnJhbWUoKTsKCiAgICAgICAgICAgIGlmKCFpc1NpbmdsZVNoYXJlKCkpewogICAgICAgICAgICAgICAgcmVnaXN0ZXJFdmVudExpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICBjcmVhdGVPYnNlcnZlcigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzbG9nKCfliIbkuqvnm7TmjqXkuIvovb3liqDovb3miJDlip8hJyk7CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gaW5pdFBhcmFtcygpewogICAgICAgICAgICBzaGFyZVR5cGUgPSBnZXRTaGFyZVR5cGUoKTsKICAgICAgICAgICAgc2lnbiA9IHl1bkRhdGEuU0lHTjsKICAgICAgICAgICAgdGltZXN0YW1wID0geXVuRGF0YS5USU1FU1RBTVA7CiAgICAgICAgICAgIGJkc3Rva2VuID0geXVuRGF0YS5NWUJEU1RPS0VOOwogICAgICAgICAgICBjaGFubmVsID0gJ2NodW5sZWknOwogICAgICAgICAgICBjbGllbnR0eXBlID0gMDsKICAgICAgICAgICAgd2ViID0gMTsKICAgICAgICAgICAgYXBwX2lkID0gMjUwNTI4OwogICAgICAgICAgICBsb2dpZCA9IGdldExvZ0lEKCk7CiAgICAgICAgICAgIGVuY3J5cHQgPSAwOwogICAgICAgICAgICBwcm9kdWN0ID0gJ3NoYXJlJzsKICAgICAgICAgICAgcHJpbWFyeWlkID0geXVuRGF0YS5TSEFSRV9JRDsKICAgICAgICAgICAgdWsgPSB5dW5EYXRhLlNIQVJFX1VLOwoKICAgICAgICAgICAgaWYoc2hhcmVUeXBlID09ICdzZWNyZXQnKXsKICAgICAgICAgICAgICAgIGV4dHJhID0gZ2V0RXh0cmEoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihpc1NpbmdsZVNoYXJlKCkpewogICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgICAgICAgaWYoeXVuRGF0YS5DQVRFR09SWSA9PSAyKXsKICAgICAgICAgICAgICAgICAgICBvYmouZmlsZW5hbWUgPSB5dW5EYXRhLkZJTEVOQU1FOwogICAgICAgICAgICAgICAgICAgIG9iai5wYXRoID0geXVuRGF0YS5QQVRIOwogICAgICAgICAgICAgICAgICAgIG9iai5mc19pZCA9IHl1bkRhdGEuRlNfSUQ7CiAgICAgICAgICAgICAgICAgICAgb2JqLmlzZGlyID0gMDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmZpbGVuYW1lID0geXVuRGF0YS5GSUxFSU5GT1swXS5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5wYXRoID0geXVuRGF0YS5GSUxFSU5GT1swXS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICBvYmouZnNfaWQgPSB5dW5EYXRhLkZJTEVJTkZPWzBdLmZzX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBvYmouaXNkaXIgPXl1bkRhdGEuRklMRUlORk9bMF0uaXNkaXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNoYXJlaWQgPSB5dW5EYXRhLlNIQVJFX0lEOwogICAgICAgICAgICAgICAgY3VycmVudFBhdGggPSBnZXRQYXRoKCk7CiAgICAgICAgICAgICAgICBsaXN0X2dyaWRfc3RhdHVzID0gZ2V0TGlzdEdyaWRTdGF0dXMoKTsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZ2V0RmlsZUxpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy/liKTmlq3liIbkuqvnsbvlnovvvIhwdWJsaWPmiJbogIVzZWNyZXTvvIkKICAgICAgICBmdW5jdGlvbiBnZXRTaGFyZVR5cGUoKXsKICAgICAgICAgICAgcmV0dXJuIHl1bkRhdGEuU0hBUkVfUFVCTElDPT09MSA/ICdwdWJsaWMnIDogJ3NlY3JldCc7CiAgICAgICAgfQoKICAgICAgICAvL+WIpOaWreaYr+WNleS4quaWh+S7tuWIhuS6q+i/mOaYr+aWh+S7tuWkueaIluiAheWkmuaWh+S7tuWIhuS6qwogICAgICAgIGZ1bmN0aW9uIGlzU2luZ2xlU2hhcmUoKXsKICAgICAgICAgICAgcmV0dXJuIHl1bkRhdGEuZ2V0Q29udGV4dCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy/liKTmlq3mmK/lkKbkuLroh6rlt7HnmoTliIbkuqvpk77mjqUKICAgICAgICBmdW5jdGlvbiBpc1NlbGZTaGFyZSgpewogICAgICAgICAgICByZXR1cm4geXVuRGF0YS5NWVNFTEYgPT0gMSA/IHRydWUgOiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEV4dHJhKCl7CiAgICAgICAgICAgIHZhciBzZUtleSA9IGRlY29kZVVSSUNvbXBvbmVudChnZXRDb29raWUoJ0JEQ0xORCcpKTsKICAgICAgICAgICAgcmV0dXJuICd7JyArICcic2VrZXkiOiInICsgc2VLZXkgKyAnIicgKyAifSI7CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluW9k+WJjeebruW9lQogICAgICAgIGZ1bmN0aW9uIGdldFBhdGgoKXsKICAgICAgICAgICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwogICAgICAgICAgICB2YXIgcmVneCA9IC8oXnwmfFwvKXBhdGg9KFteJl0qKSgmfCQpL2k7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBoYXNoLm1hdGNoKHJlZ3gpOwogICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdFsyXSk7CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluW9k+WJjeeahOinhuWbvuaooeW8jwogICAgICAgIGZ1bmN0aW9uIGdldExpc3RHcmlkU3RhdHVzKCl7CiAgICAgICAgICAgIHZhciBzdGF0dXMgPSAnbGlzdCc7CiAgICAgICAgICAgIHZhciAkc3RhdHVzX2RpdiA9ICQoJ2Rpdi5saXN0LWdyaWQtc3dpdGNoJyk7CiAgICAgICAgICAgIGlmICgkc3RhdHVzX2Rpdi5oYXNDbGFzcygnbGlzdC1zd2l0Y2hlZC1vbicpKXsKICAgICAgICAgICAgICAgIHN0YXR1cyA9ICdsaXN0JzsKICAgICAgICAgICAgfSBlbHNlIGlmICgkc3RhdHVzX2Rpdi5oYXNDbGFzcygnZ3JpZC1zd2l0Y2hlZC1vbicpKSB7CiAgICAgICAgICAgICAgICBzdGF0dXMgPSAnZ3JpZCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN0YXR1czsKICAgICAgICB9CgogICAgICAgIC8v5re75Yqg5LiL6L295Yqp5omL5oyJ6ZKuCiAgICAgICAgZnVuY3Rpb24gYWRkQnV0dG9uKCl7CiAgICAgICAgICAgIGlmKGlzU2luZ2xlU2hhcmUoKSl7CiAgICAgICAgICAgICAgICAkKCdkaXYuc2xpZGUtc2hvdy1yaWdodCcpLmNzcygnd2lkdGgnLCc1MDBweCcpOwogICAgICAgICAgICAgICAgJCgnZGl2LmZyYW1lLW1haW4nKS5jc3MoJ3dpZHRoJywnOTYlJyk7CiAgICAgICAgICAgICAgICAkKCdkaXYuc2hhcmUtZmlsZS12aWV3ZXInKS5jc3MoJ3dpZHRoJywnNzQwcHgnKS5jc3MoJ21hcmdpbi1sZWZ0JywnYXV0bycpLmNzcygnbWFyZ2luLXJpZ2h0JywnYXV0bycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICQoJ2Rpdi5zbGlkZS1zaG93LXJpZ2h0JykuY3NzKCd3aWR0aCcsJzUwMHB4Jyk7CiAgICAgICAgICAgIHZhciAkZHJvcGRvd25idXR0b24gPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24iPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkcm9wZG93bmJ1dHRvbl9hID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uIiBkYXRhLWJ1dHRvbi1pZD0iYjIwMCIgZGF0YS1idXR0b24taW5kZXg9IjIwMCIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PC9hPicpOwogICAgICAgICAgICB2YXIgJGRyb3Bkb3duYnV0dG9uX2Ffc3BhbiA9ICQoJzxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tZG93bmxvYWQiIHRpdGxlPSLnmb7luqbnvZHnm5jkuIvovb3liqnmiYsiPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogYXV0bzsiPuS4i+i9veWKqeaJizwvc3Bhbj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkZHJvcGRvd25idXR0b25fc3BhbiA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6YXV0bzt6LWluZGV4OjQxIj48L3NwYW4+Jyk7CgogICAgICAgICAgICB2YXIgJGRvd25sb2FkQnV0dG9uID0gJCgnPGEgZGF0YS1tZW51LWlkPSJiLW1lbnUyMDciIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7nm7TmjqXkuIvovb08L2E+Jyk7CiAgICAgICAgICAgIHZhciAkbGlua0J1dHRvbiA9ICQoJzxhIGRhdGEtbWVudS1pZD0iYi1tZW51MjA4IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5pi+56S66ZO+5o6lPC9hPicpOwoKICAgICAgICAgICAgJGRyb3Bkb3duYnV0dG9uX3NwYW4uYXBwZW5kKCRkb3dubG9hZEJ1dHRvbikuYXBwZW5kKCRsaW5rQnV0dG9uKTsKICAgICAgICAgICAgJGRyb3Bkb3duYnV0dG9uX2EuYXBwZW5kKCRkcm9wZG93bmJ1dHRvbl9hX3NwYW4pOwogICAgICAgICAgICAkZHJvcGRvd25idXR0b24uYXBwZW5kKCRkcm9wZG93bmJ1dHRvbl9hKS5hcHBlbmQoJGRyb3Bkb3duYnV0dG9uX3NwYW4pOwoKICAgICAgICAgICAgJGRyb3Bkb3duYnV0dG9uLmhvdmVyKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAkZHJvcGRvd25idXR0b24udG9nZ2xlQ2xhc3MoJ2J1dHRvbi1vcGVuJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJGRvd25sb2FkQnV0dG9uLmNsaWNrKGRvd25sb2FkQnV0dG9uQ2xpY2spOwogICAgICAgICAgICAkbGlua0J1dHRvbi5jbGljayhsaW5rQnV0dG9uQ2xpY2spOwoKICAgICAgICAgICAgJCgnZGl2Lm1vZHVsZS1zaGFyZS10b3AtYmFyIGRpdi5iYXIgZGl2LmJ1dHRvbi1ib3gnKS5hcHBlbmQoJGRyb3Bkb3duYnV0dG9uKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUlmcmFtZSgpewogICAgICAgICAgICB2YXIgJGRpdiA9ICQoJzxkaXYgY2xhc3M9ImhlbHBlci1oaWRlIiBzdHlsZT0icGFkZGluZzowO21hcmdpbjowO2Rpc3BsYXk6YmxvY2siPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGlmcmFtZSA9ICQoJzxpZnJhbWUgc3JjPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGlkPSJoZWxwZXJkb3dubG9hZGlmcmFtZSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9pZnJhbWU+Jyk7CiAgICAgICAgICAgICRkaXYuYXBwZW5kKCRpZnJhbWUpOwogICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRkaXYpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudExpc3RlbmVyKCl7CiAgICAgICAgICAgIHJlZ2lzdGVySGFzaENoYW5nZSgpOwogICAgICAgICAgICByZWdpc3Rlckxpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgICAgIHJlZ2lzdGVyQ2hlY2tib3goKTsKICAgICAgICAgICAgcmVnaXN0ZXJBbGxDaGVja2JveCgpOwogICAgICAgICAgICByZWdpc3RlckZpbGVTZWxlY3QoKTsKICAgICAgICB9CgogICAgICAgIC8v55uR6KeG5Zyw5Z2A5qCPI+agh+etvuWPmOWMlgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVySGFzaENoYW5nZSgpewogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICBsaXN0X2dyaWRfc3RhdHVzID0gZ2V0TGlzdEdyaWRTdGF0dXMoKTsKICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYXRoID09IGdldFBhdGgoKSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGF0aCA9IGdldFBhdGgoKTsKICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICByZWZyZXNoU2VsZWN0RmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWZyZXNoRmlsZUxpc3QoKXsKICAgICAgICAgICAgZmlsZUxpc3QgPSBnZXRGaWxlTGlzdCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaFNlbGVjdEZpbGVMaXN0KCl7CiAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgfQoKICAgICAgICAvL+ebkeinhuinhuWbvuWPmOWMlgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyTGlzdEdyaWRTdGF0dXMoKXsKICAgICAgICAgICAgdmFyICRhX2xpc3QgPSAkKCdhW25vZGUtdHlwZT1saXN0LXN3aXRjaF0nKTsKICAgICAgICAgICAgJGFfbGlzdC5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgICAgbGlzdF9ncmlkX3N0YXR1cyA9ICdsaXN0JzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgJGFfZ3JpZCA9ICQoJ2Fbbm9kZS10eXBlPWdyaWQtc3dpdGNoXScpOwogICAgICAgICAgICAkYV9ncmlkLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBsaXN0X2dyaWRfc3RhdHVzID0gJ2dyaWQnOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8v55uR6KeG5paH5Lu26YCJ5oup5qGGCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJDaGVja2JveCgpewogICAgICAgICAgICAvL3ZhciAkY2hlY2tib3ggPSAkKCdzcGFuLmNoZWNrYm94Jyk7CiAgICAgICAgICAgIHZhciAkY2hlY2tib3ggPSAkKCdzcGFuLicrd29yZE1hcFsnY2hlY2tib3gnXSk7CiAgICAgICAgICAgICRjaGVja2JveC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS5iaW5kKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICBpZihsaXN0X2dyaWRfc3RhdHVzID09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9ICQoJ2Rpdi5maWxlLW5hbWUgZGl2LnRleHQgYScsJHBhcmVudCkuYXR0cigndGl0bGUnKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihsaXN0X2dyaWRfc3RhdHVzID09ICdncmlkJyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBhJywkcGFyZW50KS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZigkcGFyZW50Lmhhc0NsYXNzKCdpdGVtLWFjdGl2ZScpKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5Y+W5raI6YCJ5Lit5paH5Lu277yaJytmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8c2VsZWN0RmlsZUxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdFtpXS5maWxlbmFtZSA9PSBmaWxlbmFtZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3Quc3BsaWNlKGksMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn6YCJ5Lit5paH5Lu277yaJytmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lID09IGZpbGVuYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTplbGVtZW50LnNlcnZlcl9maWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDplbGVtZW50LnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzX2lkOmVsZW1lbnQuZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzZGlyOmVsZW1lbnQuaXNkaXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdW5yZWdpc3RlckNoZWNrYm94KCl7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uY2hlY2tib3gnKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uJyt3b3JkTWFwWydjaGVja2JveCddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnVuYmluZCgnY2xpY2snKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvL+ebkeinhuWFqOmAieahhgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQWxsQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnZGl2LmNvbC1pdGVtLmNoZWNrJyk7CiAgICAgICAgICAgIHZhciAkY2hlY2tib3ggPSAkKCdkaXYuJyt3b3JkTWFwWydjb2wtaXRlbSddKycuJyt3b3JkTWFwWydjaGVjayddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7CiAgICAgICAgICAgICAgICAgICAgLy9pZigkcGFyZW50Lmhhc0NsYXNzKCdjaGVja2VkJykpewogICAgICAgICAgICAgICAgICAgIGlmKCRwYXJlbnQuaGFzQ2xhc3Mod29yZE1hcFsnY2hlY2tlZCddKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+WPlua2iOWFqOmAiScpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RGaWxlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+WFqOmDqOmAieS4rScpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RGaWxlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ZWxlbWVudC5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzX2lkOmVsZW1lbnQuZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdW5yZWdpc3RlckFsbENoZWNrYm94KCl7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ2Rpdi5jb2wtaXRlbS5jaGVjaycpOwogICAgICAgICAgICB2YXIgJGNoZWNrYm94ID0gJCgnZGl2Licrd29yZE1hcFsnY29sLWl0ZW0nXSsnLicrd29yZE1hcFsnY2hlY2snXSk7CiAgICAgICAgICAgICRjaGVja2JveC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS51bmJpbmQoJ2NsaWNrJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bljZXkuKrmlofku7bpgInkuK0KICAgICAgICBmdW5jdGlvbiByZWdpc3RlckZpbGVTZWxlY3QoKXsKICAgICAgICAgICAgLy92YXIgJGRkID0gJCgnZGl2Lmxpc3QtdmlldyBkZCcpOwogICAgICAgICAgICB2YXIgJGRkID0gJCgnZGl2Licrd29yZE1hcFsnbGlzdC12aWV3J10rJyBkZCcpOwogICAgICAgICAgICAkZGQuZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYmluZCgnY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciBub2RlTmFtZSA9IGUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYobm9kZU5hbWUgIT0gJ3NwYW4nICYmIG5vZGVOYW1lICE9ICdhJyAmJiBub2RlTmFtZSAhPSAnZW0nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQoJ2Rpdi5maWxlLW5hbWUgZGl2LnRleHQgYScsJCh0aGlzKSkuYXR0cigndGl0bGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn6YCJ5Lit5paH5Lu277yaJyArIGZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOmVsZW1lbnQucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyRmlsZVNlbGVjdCgpewogICAgICAgICAgICAvL3ZhciAkZGQgPSAkKCdkaXYubGlzdC12aWV3IGRkJyk7CiAgICAgICAgICAgIHZhciAkZGQgPSAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSsnIGRkJyk7CiAgICAgICAgICAgICRkZC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS51bmJpbmQoJ2NsaWNrJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bmlofku7bliJfooajmmL7npLrlj5jljJYKICAgICAgICBmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcigpewogICAgICAgICAgICB2YXIgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyOwogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICdjaGlsZExpc3QnOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKXsKICAgICAgICAgICAgICAgIHVucmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICAgICAgdW5yZWdpc3RlckFsbENoZWNrYm94KCk7CiAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyRmlsZVNlbGVjdCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJBbGxDaGVja2JveCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJGaWxlU2VsZWN0KCk7IAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy92YXIgbGlzdF92aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtdmlldycpOwogICAgICAgICAgICAvL3ZhciBncmlkX3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZC12aWV3Jyk7CgogICAgICAgICAgICB2YXIgbGlzdF92aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrd29yZE1hcFsnbGlzdC12aWV3J10pOwogICAgICAgICAgICB2YXIgZ3JpZF92aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicrd29yZE1hcFsnZ3JpZC12aWV3J10pOwoKICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShsaXN0X3ZpZXcsb3B0aW9ucyk7CiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZ3JpZF92aWV3LG9wdGlvbnMpOwogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bmlofku7bkv6Hmga/liJfooagKICAgICAgICBmdW5jdGlvbiBnZXRGaWxlTGlzdCgpewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgICAgIGlmKGdldFBhdGgoKSA9PSAnLycpewogICAgICAgICAgICAgICAgcmVzdWx0ID0geXVuRGF0YS5GSUxFSU5GTzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgdWs6dWssCiAgICAgICAgICAgICAgICAgICAgc2hhcmVpZDpzaGFyZWlkLAogICAgICAgICAgICAgICAgICAgIG9yZGVyOidvdGhlcicsCiAgICAgICAgICAgICAgICAgICAgZGVzYzoxLAogICAgICAgICAgICAgICAgICAgIHNob3dlbXB0eTowLAogICAgICAgICAgICAgICAgICAgIHdlYjp3ZWIsCiAgICAgICAgICAgICAgICAgICAgZGlyOmdldFBhdGgoKSwKICAgICAgICAgICAgICAgICAgICB0Ok1hdGgucmFuZG9tKCksCiAgICAgICAgICAgICAgICAgICAgYmRzdG9rZW46YmRzdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDpjaGFubmVsLAogICAgICAgICAgICAgICAgICAgIGNsaWVudHR5cGU6Y2xpZW50dHlwZSwKICAgICAgICAgICAgICAgICAgICBhcHBfaWQ6YXBwX2lkLAogICAgICAgICAgICAgICAgICAgIGxvZ2lkOmxvZ2lkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICB1cmw6c2hhcmVMaXN0VXJsLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDonR0VUJywKICAgICAgICAgICAgICAgICAgICBhc3luYzpmYWxzZSwKICAgICAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZXJybm8gPT09IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2UubGlzdDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkb3dubG9hZEJ1dHRvbkNsaWNrKCl7CiAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tuWIl+ihqO+8micsc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgYWxlcnQoJ+iOt+WPluaWh+S7tklE5aSx6LSl77yM6K+36YeN6K+VJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnV0dG9uVGFyZ2V0ID0gJ2Rvd25sb2FkJzsKICAgICAgICAgICAgdmFyIGRvd25sb2FkTGluayA9IGdldERvd25sb2FkTGluaygpOwoKICAgICAgICAgICAgaWYoZG93bmxvYWRMaW5rLmVycm5vID09IC0yMCkgewogICAgICAgICAgICAgICAgdmNvZGUgPSBnZXRWQ29kZSgpOwogICAgICAgICAgICAgICAgaWYodmNvZGUuZXJybm8gIT09IDApewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfojrflj5bpqozor4HnoIHlpLHotKXvvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2Y29kZURpYWxvZy5vcGVuKHZjb2RlKTsKICAgICAgICAgICAgfSBlbHNlIGlmKGRvd25sb2FkTGluay5lcnJubyA9PSAxMTIpewogICAgICAgICAgICAgICAgYWxlcnQoJ+mhtemdoui/h+acn++8jOivt+WIt+aWsOmHjeivlScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRvd25sb2FkTGluay5lcnJubyA9PT0gMCkgewogICAgICAgICAgICAgICAgdmFyIGxpbms7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSAmJiBzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMCkKICAgICAgICAgICAgICAgICAgICBsaW5rID0gZG93bmxvYWRMaW5rLmxpc3RbMF0uZGxpbms7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbGluayA9IGRvd25sb2FkTGluay5kbGluazsKICAgICAgICAgICAgICAgIGV4ZWNEb3dubG9hZChsaW5rKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCfojrflj5bkuIvovb3pk77mjqXlpLHotKXvvIEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bpqozor4HnoIEKICAgICAgICBmdW5jdGlvbiBnZXRWQ29kZSgpewogICAgICAgICAgICB2YXIgdXJsID0gcGFuQVBJVXJsICsgJ2dldHZjb2RlJzsKICAgICAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICAgICAgbG9naWQgPSBnZXRMb2dJRCgpOwogICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgcHJvZDoncGFuJywKICAgICAgICAgICAgICAgIHQ6TWF0aC5yYW5kb20oKSwKICAgICAgICAgICAgICAgIGJkc3Rva2VuOmJkc3Rva2VuLAogICAgICAgICAgICAgICAgY2hhbm5lbDpjaGFubmVsLAogICAgICAgICAgICAgICAgY2xpZW50dHlwZTpjbGllbnR0eXBlLAogICAgICAgICAgICAgICAgd2ViOndlYiwKICAgICAgICAgICAgICAgIGFwcF9pZDphcHBfaWQsCiAgICAgICAgICAgICAgICBsb2dpZDpsb2dpZAogICAgICAgICAgICB9OwogICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgIG1ldGhvZDonR0VUJywKICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgZGF0YTpwYXJhbXMsCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICAvL+WIt+aWsOmqjOivgeeggQogICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hWQ29kZSgpewogICAgICAgICAgICB2Y29kZSA9IGdldFZDb2RlKCk7CiAgICAgICAgICAgICQoJyNkaWFsb2ctaW1nJykuYXR0cignc3JjJyx2Y29kZS5pbWcpOwogICAgICAgIH0KCiAgICAgICAgLy/pqozor4HnoIHnoa7orqTmj5DkuqQKICAgICAgICBmdW5jdGlvbiBjb25maXJtQ2xpY2soKXsKICAgICAgICAgICAgdmFyIHZhbCA9ICQoJyNkaWFsb2ctaW5wdXQnKS52YWwoKTsKICAgICAgICAgICAgaWYodmFsLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1lcnInKS50ZXh0KCfor7fovpPlhaXpqozor4HnoIEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIGlmKHZhbC5sZW5ndGggPCA0KSB7CiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWVycicpLnRleHQoJ+mqjOivgeeggei+k+WFpemUmeivr++8jOivt+mHjeaWsOi+k+WFpScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IAogICAgICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aFZDb2RlKHZhbCk7CiAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJubyA9PSAtMjApewogICAgICAgICAgICAgICAgdmNvZGVEaWFsb2cuY2xvc2UoKTsKICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctZXJyJykudGV4dCgn6aqM6K+B56CB6L6T5YWl6ZSZ6K+v77yM6K+36YeN5paw6L6T5YWlJyk7CiAgICAgICAgICAgICAgICByZWZyZXNoVkNvZGUoKTsKICAgICAgICAgICAgICAgIGlmKCF2Y29kZSB8fCB2Y29kZS5lcnJubyAhPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+iOt+WPlumqjOivgeeggeWksei0pe+8gScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZjb2RlRGlhbG9nLm9wZW4oKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZXJybm8gPT09IDApIHsKICAgICAgICAgICAgICAgIHZjb2RlRGlhbG9nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB2YXIgbGluazsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PTEgJiYgc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXIgPT09IDApCiAgICAgICAgICAgICAgICAgICAgbGluayA9IHJlc3VsdC5saXN0WzBdLmRsaW5rOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGxpbmsgPSByZXN1bHQuZGxpbms7CiAgICAgICAgICAgICAgICBpZihidXR0b25UYXJnZXQgPT0gJ2Rvd25sb2FkJyl7CiAgICAgICAgICAgICAgICAgICAgZXhlY0Rvd25sb2FkKGxpbmspOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXR0b25UYXJnZXQgPT0gJ2xpbmsnKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJyc7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHNlbGVjdEZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGVsZW1lbnQuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZSArICcsJyArIGVsZW1lbnQuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgbGlua0xpc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB1cmxzOlsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cmw6bGluayxyYW5rOjF9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZhciB0aXAgPSAi5pi+56S66I635Y+W55qE6ZO+5o6l77yM5Y+v5Lul5L2/55So5Y+z6ZSu6L+F6Zu35LiL6L2977yM5aSN5Yi25peg55So77yM6ZyA6KaB5Lyg6YCSY29va2llIjsKICAgICAgICAgICAgICAgICAgICBkaWFsb2cub3Blbih7dGl0bGU6J+S4i+i9vemTvuaOpScsdHlwZTonbGluaycsbGlzdDpsaW5rTGlzdCx0aXA6dGlwfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydCgn5Y+R55Sf6ZSZ6K+v77yBJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v55Sf5oiQ5LiL6L2955So55qEZmlkX2xpc3Tlj4LmlbAKICAgICAgICBmdW5jdGlvbiBnZXRGaWRMaXN0KCl7CiAgICAgICAgICAgIHZhciBmaWRsaXN0ID0gW107CiAgICAgICAgICAgICQuZWFjaChzZWxlY3RGaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgIGZpZGxpc3QucHVzaChlbGVtZW50LmZzX2lkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiAnWycgKyBmaWRsaXN0ICsgJ10nOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbGlua0J1dHRvbkNsaWNrKCl7CiAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tuWIl+ihqO+8micsc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgYWxlcnQoJ+ayoeaciemAieS4reaWh+S7tu+8jOivt+mHjeivlScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1dHRvblRhcmdldCA9ICdsaW5rJzsKICAgICAgICAgICAgdmFyIGRvd25sb2FkTGluayA9IGdldERvd25sb2FkTGluaygpOwoKICAgICAgICAgICAgaWYoZG93bmxvYWRMaW5rLmVycm5vID09IC0yMCkgewogICAgICAgICAgICAgICAgdmNvZGUgPSBnZXRWQ29kZSgpOwogICAgICAgICAgICAgICAgaWYoIXZjb2RlIHx8IHZjb2RlLmVycm5vICE9PSAwKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn6I635Y+W6aqM6K+B56CB5aSx6LSl77yBJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmNvZGVEaWFsb2cub3Blbih2Y29kZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG93bmxvYWRMaW5rLmVycm5vID09IDExMikgewogICAgICAgICAgICAgICAgYWxlcnQoJ+mhtemdoui/h+acn++8jOivt+WIt+aWsOmHjeivlScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRvd25sb2FkTGluay5lcnJubyA9PT0gMCkgewogICAgICAgICAgICAgICAgdmFyIGxpbms7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSAmJiBzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMCkKICAgICAgICAgICAgICAgICAgICBsaW5rID0gZG93bmxvYWRMaW5rLmxpc3RbMF0uZGxpbms7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbGluayA9IGRvd25sb2FkTGluay5kbGluazsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctZG93bmxvYWRsaW5rJykuYXR0cignaHJlZicsbGluaykudGV4dChsaW5rKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWRvd25sb2FkbGluaycpLmF0dHIoJ2hyZWYnLGxpbmspLnRleHQobGluayk7CiAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSAnJzsKICAgICAgICAgICAgICAgICQuZWFjaChzZWxlY3RGaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBlbGVtZW50LmZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZSArICcsJyArIGVsZW1lbnQuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgbGlua0xpc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXJsczpbCiAgICAgICAgICAgICAgICAgICAgICAgIHt1cmw6bGluayxyYW5rOjF9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciB0aXAgPSAi5pi+56S66I635Y+W55qE6ZO+5o6l77yM5Y+v5Lul5L2/55So5Y+z6ZSu6L+F6Zu35LiL6L2977yM5aSN5Yi25peg55So77yM6ZyA6KaB5Lyg6YCSY29va2llIjsKICAgICAgICAgICAgICAgIGRpYWxvZy5vcGVuKHt0aXRsZTon5LiL6L296ZO+5o6lJyx0eXBlOidsaW5rJyxsaXN0OmxpbmtMaXN0LHRpcDp0aXB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCfojrflj5bkuIvovb3pk77mjqXlpLHotKXvvIEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bkuIvovb3pk77mjqUKICAgICAgICBmdW5jdGlvbiBnZXREb3dubG9hZExpbmsoKXsKICAgICAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICAgICAgaWYoaXNTaW5nbGVTaGFyZSl7CiAgICAgICAgICAgICAgICBmaWRfbGlzdCA9IGdldEZpZExpc3QoKTsKICAgICAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgICAgIHZhciB1cmwgPSBwYW5BUElVcmwgKyAnc2hhcmVkb3dubG9hZD9zaWduPScgKyBzaWduICsgJyZ0aW1lc3RhbXA9JyArIHRpbWVzdGFtcCArICcmYmRzdG9rZW49JyArIGJkc3Rva2VuICsgJyZjaGFubmVsPScgKyBjaGFubmVsICsgJyZjbGllbnR0eXBlPScgKyBjbGllbnR0eXBlICsgJyZ3ZWI9Jysgd2ViICsgJyZhcHBfaWQ9JyArIGFwcF9pZCArICcmbG9naWQ9JyArIGxvZ2lkOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICBlbmNyeXB0OmVuY3J5cHQsCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDpwcm9kdWN0LAogICAgICAgICAgICAgICAgICAgIHVrOnVrLAogICAgICAgICAgICAgICAgICAgIHByaW1hcnlpZDpwcmltYXJ5aWQsCiAgICAgICAgICAgICAgICAgICAgZmlkX2xpc3Q6ZmlkX2xpc3QKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZihzaGFyZVR5cGUgPT0gJ3NlY3JldCcpewogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5leHRyYSA9IGV4dHJhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXIgPT0gMSB8fCBzZWxlY3RGaWxlTGlzdC5sZW5ndGggPiAxKXsKICAgICAgICAgICAgICAgICAgICBwYXJhbXMudHlwZSA9ICdiYXRjaCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJywKICAgICAgICAgICAgICAgICAgICBhc3luYzpmYWxzZSwKICAgICAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIC8v5pyJ6aqM6K+B56CB6L6T5YWl5pe26I635Y+W5LiL6L296ZO+5o6lCiAgICAgICAgZnVuY3Rpb24gZ2V0RG93bmxvYWRMaW5rV2l0aFZDb2RlKHZjb2RlSW5wdXQpewogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICBpZihpc1NpbmdsZVNoYXJlKXsKICAgICAgICAgICAgICAgIGZpZF9saXN0ID0gZ2V0RmlkTGlzdCgpOwogICAgICAgICAgICAgICAgdmFyIHVybCA9IHBhbkFQSVVybCArICdzaGFyZWRvd25sb2FkP3NpZ249JyArIHNpZ24gKyAnJnRpbWVzdGFtcD0nICsgdGltZXN0YW1wICsgJyZiZHN0b2tlbj0nICsgYmRzdG9rZW4gKyAnJmNoYW5uZWw9JyArIGNoYW5uZWwgKyAnJmNsaWVudHR5cGU9JyArIGNsaWVudHR5cGUgKyAnJndlYj0nKyB3ZWIgKyAnJmFwcF9pZD0nICsgYXBwX2lkICsgJyZsb2dpZD0nICsgbG9naWQ7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgIGVuY3J5cHQ6ZW5jcnlwdCwKICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OnByb2R1Y3QsCiAgICAgICAgICAgICAgICAgICAgdmNvZGVfaW5wdXQ6dmNvZGVJbnB1dCwKICAgICAgICAgICAgICAgICAgICB2Y29kZV9zdHI6dmNvZGUudmNvZGUsCiAgICAgICAgICAgICAgICAgICAgdWs6dWssCiAgICAgICAgICAgICAgICAgICAgcHJpbWFyeWlkOnByaW1hcnlpZCwKICAgICAgICAgICAgICAgICAgICBmaWRfbGlzdDpmaWRfbGlzdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKHNoYXJlVHlwZSA9PSAnc2VjcmV0Jyl7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmV4dHJhID0gZXh0cmE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PSAxIHx8IHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA+IDEgKXsKICAgICAgICAgICAgICAgICAgICBwYXJhbXMudHlwZSA9ICdiYXRjaCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJywKICAgICAgICAgICAgICAgICAgICBhc3luYzpmYWxzZSwKICAgICAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4ZWNEb3dubG9hZChsaW5rKXsKICAgICAgICAgICAgc2xvZygn5LiL6L296ZO+5o6l77yaJytsaW5rKTsKICAgICAgICAgICAgJCgnI2hlbHBlcmRvd25sb2FkaWZyYW1lJykuYXR0cignc3JjJyxsaW5rKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFzZTY0RW5jb2RlKHQpewogICAgICAgIHZhciBhLCByLCBlLCBuLCBpLCBzLCBvID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iOwogICAgICAgIGZvciAoZSA9IHQubGVuZ3RoLHIgPSAwLGEgPSAiIjsgZSA+IHI7ICkgewogICAgICAgICAgICBpZiAobiA9IDI1NSAmIHQuY2hhckNvZGVBdChyKyspLHIgPT0gZSkgewogICAgICAgICAgICAgICAgYSArPSBvLmNoYXJBdChuID4+IDIpOwogICAgICAgICAgICAgICAgYSArPSBvLmNoYXJBdCgoMyAmIG4pIDw8IDQpOwogICAgICAgICAgICAgICAgYSArPSAiPT0iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGkgPSB0LmNoYXJDb2RlQXQocisrKSxyID09IGUpIHsKICAgICAgICAgICAgICAgIGEgKz0gby5jaGFyQXQobiA+PiAyKTsKICAgICAgICAgICAgICAgIGEgKz0gby5jaGFyQXQoKDMgJiBuKSA8PCA0IHwgKDI0MCAmIGkpID4+IDQpOwogICAgICAgICAgICAgICAgYSArPSBvLmNoYXJBdCgoMTUgJiBpKSA8PCAyKTsKICAgICAgICAgICAgICAgIGEgKz0gIj0iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcyA9IHQuY2hhckNvZGVBdChyKyspOwogICAgICAgICAgICBhICs9IG8uY2hhckF0KG4gPj4gMik7CiAgICAgICAgICAgIGEgKz0gby5jaGFyQXQoKDMgJiBuKSA8PCA0IHwgKDI0MCAmIGkpID4+IDQpOwogICAgICAgICAgICBhICs9IG8uY2hhckF0KCgxNSAmIGkpIDw8IDIgfCAoMTkyICYgcykgPj4gNik7CiAgICAgICAgICAgIGEgKz0gby5jaGFyQXQoNjMgJiBzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGE7CiAgICB9CgogICAgZnVuY3Rpb24gZGV0ZWN0UGFnZSgpewogICAgICAgIHZhciByZWd4ID0gL1tcL10uK1tcL10vZzsKICAgICAgICB2YXIgcGFnZSA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKHJlZ3gpOwogICAgICAgIHJldHVybiBwYWdlWzBdLnJlcGxhY2UoL1wvL2csJycpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldENvb2tpZShlKSB7CiAgICAgICAgdmFyIG8sIHQ7CiAgICAgICAgdmFyIG4gPSBkb2N1bWVudCxjPWRlY29kZVVSSTsKICAgICAgICByZXR1cm4gbi5jb29raWUubGVuZ3RoID4gMCAmJiAobyA9IG4uY29va2llLmluZGV4T2YoZSArICI9IiksLTEgIT0gbykgPyAobyA9IG8gKyBlLmxlbmd0aCArIDEsdCA9IG4uY29va2llLmluZGV4T2YoIjsiLCBvKSwtMSA9PSB0ICYmICh0ID0gbi5jb29raWUubGVuZ3RoKSxjKG4uY29va2llLnN1YnN0cmluZyhvLCB0KSkpIDogIiI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TG9nSUQoKXsKICAgICAgICB2YXIgbmFtZSA9ICJCQUlEVUlEIjsKICAgICAgICB2YXIgdSA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvfu+8gUAj77+lJeKApuKApiYiOwogICAgICAgIHZhciBkID0gL1tcdUQ4MDAtXHVEQkZGXVtcdURDMDAtXHVERkZGRl18W15ceDAwLVx4N0ZdL2c7CiAgICAgICAgdmFyIGYgPSBTdHJpbmcuZnJvbUNoYXJDb2RlOwogICAgICAgIGZ1bmN0aW9uIGwoZSl7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZS5jaGFyQ29kZUF0KDApOwogICAgICAgICAgICAgICAgcmV0dXJuIDEyOCA+IG4gPyBlIDogMjA0OCA+IG4gPyBmKDE5MiB8IG4gPj4+IDYpICsgZigxMjggfCA2MyAmIG4pIDogZigyMjQgfCBuID4+PiAxMiAmIDE1KSArIGYoMTI4IHwgbiA+Pj4gNiAmIDYzKSArIGYoMTI4IHwgNjMgJiBuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbiA9IDY1NTM2ICsgMTAyNCAqIChlLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKyAoZS5jaGFyQ29kZUF0KDEpIC0gNTYzMjApOwogICAgICAgICAgICByZXR1cm4gZigyNDAgfCBuID4+PiAxOCAmIDcpICsgZigxMjggfCBuID4+PiAxMiAmIDYzKSArIGYoMTI4IHwgbiA+Pj4gNiAmIDYzKSArIGYoMTI4IHwgNjMgJiBuKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZyhlKXsKICAgICAgICAgICAgcmV0dXJuIChlICsgIiIgKyBNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKGQsIGwpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUpewogICAgICAgICAgICB2YXIgbiA9IFswLCAyLCAxXVtlLmxlbmd0aCAlIDNdOwogICAgICAgICAgICB2YXIgdCA9IGUuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChlLmxlbmd0aCA+IDEgPyBlLmNoYXJDb2RlQXQoMSkgOiAwKSA8PCA4IHwgKGUubGVuZ3RoID4gMiA/IGUuY2hhckNvZGVBdCgyKSA6IDApOwogICAgICAgICAgICB2YXIgbyA9IFt1LmNoYXJBdCh0ID4+PiAxOCksIHUuY2hhckF0KHQgPj4+IDEyICYgNjMpLCBuID49IDIgPyAiPSIgOiB1LmNoYXJBdCh0ID4+PiA2ICYgNjMpLCBuID49IDEgPyAiPSIgOiB1LmNoYXJBdCg2MyAmIHQpXTsKICAgICAgICAgICAgcmV0dXJuIG8uam9pbigiIik7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGgoZSl7CiAgICAgICAgICAgIHJldHVybiBlLnJlcGxhY2UoL1tcc1xTXXsxLDN9L2csIG0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwKCl7CiAgICAgICAgICAgIHJldHVybiBoKGcoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB3KGUsbil7CiAgICAgICAgICAgIHJldHVybiBuID8gcChTdHJpbmcoZSkpLnJlcGxhY2UoL1srXC9dL2csIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiKyIgPT0gZSA/ICItIiA6ICJfIjsKICAgICAgICAgICAgfSkucmVwbGFjZSgvPS9nLCAiIikgOiBwKFN0cmluZyhlKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3KGdldENvb2tpZShuYW1lKSk7CiAgICB9CgogICAgZnVuY3Rpb24gRGlhbG9nKCl7CiAgICAgICAgdmFyIGxpbmtMaXN0ID0gW107CiAgICAgICAgdmFyIHNob3dQYXJhbXM7CiAgICAgICAgdmFyIGRpYWxvZyxzaGFkb3c7CiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRGlhbG9nKCl7CiAgICAgICAgICAgIHZhciBzY3JlZW5XaWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7CiAgICAgICAgICAgIHZhciBkaWFsb2dMZWZ0ID0gc2NyZWVuV2lkdGg+ODAwID8gKHNjcmVlbldpZHRoLTgwMCkvMiA6IDA7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2RpdiA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZyIgc3R5bGU9IndpZHRoOiA4MDBweDsgdG9wOiAwcHg7IGJvdHRvbTogYXV0bzsgbGVmdDogJytkaWFsb2dMZWZ0KydweDsgcmlnaHQ6IGF1dG87IGRpc3BsYXk6IGhpZGRlbjsgdmlzaWJpbGl0eTogdmlzaWJsZTsgei1pbmRleDogNTI7Ij48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfaGVhZGVyID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLWhlYWRlciI+PGgzPjxzcGFuIGNsYXNzPSJkaWFsb2ctdGl0bGUiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDo3NDBweDt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3cteDpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+PC9zcGFuPjwvaDM+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2NvbnRyb2wgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctY29udHJvbCI+PHNwYW4gY2xhc3M9ImRpYWxvZy1pY29uIGRpYWxvZy1jbG9zZSI+w5c8L3NwYW4+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2JvZHkgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctYm9keSIgc3R5bGU9Im1heC1oZWlnaHQ6NDUwcHg7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6MCAyMHB4OyI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX3RpcCA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy10aXAiIHN0eWxlPSJwYWRkaW5nLWxlZnQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNmYWYyZDM7Ym9yZGVyLXRvcDogMXB4IHNvbGlkICNjNGRiZmU7Ij48cD48L3A+PC9kaXY+Jyk7CgogICAgICAgICAgICAkZGlhbG9nX2Rpdi5hcHBlbmQoJGRpYWxvZ19oZWFkZXIuYXBwZW5kKCRkaWFsb2dfY29udHJvbCkpLmFwcGVuZCgkZGlhbG9nX2JvZHkpOwoKICAgICAgICAgICAgLy92YXIgJGRpYWxvZ190ZXh0YXJlYSA9ICQoJzx0ZXh0YXJlYSBjbGFzcz0iZGlhbG9nLXRleHRhcmVhIiBzdHlsZT0iZGlzcGxheTpub25lO3dpZHRoIj48L3RleHRhcmVhPicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19yYWRpb19kaXYgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctcmFkaW8iIHN0eWxlPSJkaXNwbGF5Om5vbmU7d2lkdGg6NzYwcHg7cGFkZGluZy1sZWZ0OjIwcHg7cGFkZGluZy1yaWdodDoyMHB4Ij48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfcmFkaW9fbXVsdGkgPSAkKCc8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InNob3dtb2RlIiBjaGVja2VkPSJjaGVja2VkIiB2YWx1ZT0ibXVsdGkiPjxzcGFuPuWkmuihjDwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfcmFkaW9fc2luZ2xlID0gJCgnPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJzaG93bW9kZSIgdmFsdWU9InNpbmdsZSI+PHNwYW4+5Y2V6KGMPC9zcGFuPicpOwogICAgICAgICAgICAkZGlhbG9nX3JhZGlvX2Rpdi5hcHBlbmQoJGRpYWxvZ19yYWRpb19tdWx0aSkuYXBwZW5kKCRkaWFsb2dfcmFkaW9fc2luZ2xlKTsKICAgICAgICAgICAgJGRpYWxvZ19kaXYuYXBwZW5kKCRkaWFsb2dfcmFkaW9fZGl2KTsKICAgICAgICAgICAgJCgnaW5wdXRbdHlwZT1yYWRpb11bbmFtZT1zaG93bW9kZV0nLCRkaWFsb2dfcmFkaW9fZGl2KS5jaGFuZ2UoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgJHRleHRhcmVhID0gJCgnZGl2LmRpYWxvZy1ib2R5IHRleHRhcmVhW25hbWU9ZGlhbG9nLXRleHRhcmVhXScsZGlhbG9nKTsKICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gJHRleHRhcmVhLnZhbCgpOwogICAgICAgICAgICAgICAgaWYodmFsdWUgPT0gJ211bHRpJyl7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXHMrL2csJ1xuJyk7CiAgICAgICAgICAgICAgICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywnMzAwcHgnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZih2YWx1ZSA9PSAnc2luZ2xlJyl7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXG4rL2csJyAnKTsKICAgICAgICAgICAgICAgICAgICAkdGV4dGFyZWEuY3NzKCdoZWlnaHQnLCcnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0ZXh0YXJlYS52YWwoY29udGVudCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyICRkaWFsb2dfYnV0dG9uID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2J1dHRvbl9kaXYgPSAkKCc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlO21hcmdpbjphdXRvIj48L2Rpdj4nKQogICAgICAgICAgICB2YXIgJGRpYWxvZ19jb3B5X2J1dHRvbiA9ICQoJzxidXR0b24gaWQ9ImRpYWxvZy1jb3B5LWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+5aSN5Yi2PC9idXR0b24+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2VkaXRfYnV0dG9uID0gJCgnPGJ1dHRvbiBpZD0iZGlhbG9nLWVkaXQtYnV0dG9uIiBzdHlsZT0iZGlzcGxheTpub25lIj7nvJbovpE8L2J1dHRvbj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfZXhpdF9idXR0b24gPSAkKCc8YnV0dG9uIGlkPSJkaWFsb2ctZXhpdC1idXR0b24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiPumAgOWHujwvYnV0dG9uPicpOwoKICAgICAgICAgICAgJGRpYWxvZ19idXR0b25fZGl2LmFwcGVuZCgkZGlhbG9nX2NvcHlfYnV0dG9uKS5hcHBlbmQoJGRpYWxvZ19lZGl0X2J1dHRvbikuYXBwZW5kKCRkaWFsb2dfZXhpdF9idXR0b24pOwogICAgICAgICAgICAkZGlhbG9nX2J1dHRvbi5hcHBlbmQoJGRpYWxvZ19idXR0b25fZGl2KTsKICAgICAgICAgICAgJGRpYWxvZ19kaXYuYXBwZW5kKCRkaWFsb2dfYnV0dG9uKTsKCiAgICAgICAgICAgICRkaWFsb2dfY29weV9idXR0b24uY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICBpZihzaG93UGFyYW1zLnR5cGUgPT0gJ2JhdGNoJyl7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGxpbmtMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LmRvd25sb2FkbGluayA9PSAnZXJyb3InKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PSBsaW5rTGlzdC5sZW5ndGgtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgZWxlbWVudC5kb3dubG9hZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAgY29udGVudCArIGVsZW1lbnQuZG93bmxvYWRsaW5rICsgJ1xuJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzaG93UGFyYW1zLnR5cGUgPT0gJ2xpbmsnKXsKICAgICAgICAgICAgICAgICAgICAkLmVhY2gobGlua0xpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQudXJsID09ICdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IGxpbmtMaXN0Lmxlbmd0aC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyBlbGVtZW50LnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9ICBjb250ZW50ICsgZWxlbWVudC51cmwgKyAnXG4nOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkKGNvbnRlbnQsJ3RleHQnKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCflt7LlsIbpk77mjqXlpI3liLbliLDliarotLTmnb/vvIEnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkZGlhbG9nX2VkaXRfYnV0dG9uLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgJGRpYWxvZ190ZXh0YXJlYSA9ICQoJ2Rpdi5kaWFsb2ctYm9keSB0ZXh0YXJlYVtuYW1lPWRpYWxvZy10ZXh0YXJlYV0nLGRpYWxvZyk7CiAgICAgICAgICAgICAgICB2YXIgJGRpYWxvZ19pdGVtID0gJCgnZGl2LmRpYWxvZy1ib2R5IGRpdicsZGlhbG9nKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfaXRlbS5oaWRlKCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX2NvcHlfYnV0dG9uLmhpZGUoKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfZWRpdF9idXR0b24uaGlkZSgpOwogICAgICAgICAgICAgICAgJGRpYWxvZ190ZXh0YXJlYS5zaG93KCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX3JhZGlvX2Rpdi5zaG93KCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX2V4aXRfYnV0dG9uLnNob3coKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkZGlhbG9nX2V4aXRfYnV0dG9uLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgJGRpYWxvZ190ZXh0YXJlYSA9ICQoJ2Rpdi5kaWFsb2ctYm9keSB0ZXh0YXJlYVtuYW1lPWRpYWxvZy10ZXh0YXJlYV0nLGRpYWxvZyk7CiAgICAgICAgICAgICAgICB2YXIgJGRpYWxvZ19pdGVtID0gJCgnZGl2LmRpYWxvZy1ib2R5IGRpdicsZGlhbG9nKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfdGV4dGFyZWEuaGlkZSgpOwogICAgICAgICAgICAgICAgJGRpYWxvZ19yYWRpb19kaXYuaGlkZSgpOwogICAgICAgICAgICAgICAgJGRpYWxvZ19pdGVtLnNob3coKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfZXhpdF9idXR0b24uaGlkZSgpOwogICAgICAgICAgICAgICAgJGRpYWxvZ19jb3B5X2J1dHRvbi5zaG93KCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX2VkaXRfYnV0dG9uLnNob3coKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkZGlhbG9nX2Rpdi5hcHBlbmQoJGRpYWxvZ190aXApOwogICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRkaWFsb2dfZGl2KTsKICAgICAgICAgICAgJGRpYWxvZ19kaXYuZGlhbG9nRHJhZygpOwogICAgICAgICAgICAkZGlhbG9nX2NvbnRyb2wuY2xpY2soZGlhbG9nQ29udHJvbCk7CiAgICAgICAgICAgIHJldHVybiAkZGlhbG9nX2RpdjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYWRvdygpewogICAgICAgICAgICB2YXIgJHNoYWRvdyA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1zaGFkb3ciIHN0eWxlPSJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IDBweDsgdG9wOiAwcHg7IHotaW5kZXg6IDUwOyBiYWNrZ3JvdW5kOiByZ2IoMCwgMCwgMCkgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBvcGFjaXR5OiAwLjU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGRpc3BsYXk6IG5vbmU7Ij48L2Rpdj4nKTsKICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkc2hhZG93KTsKICAgICAgICAgICAgcmV0dXJuICRzaGFkb3c7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm9wZW4gPSBmdW5jdGlvbihwYXJhbXMpewogICAgICAgICAgICBzaG93UGFyYW1zID0gcGFyYW1zOwogICAgICAgICAgICBsaW5rTGlzdCA9IFtdOwogICAgICAgICAgICBpZihwYXJhbXMudHlwZSA9PSAnbGluaycpewogICAgICAgICAgICAgICAgbGlua0xpc3QgPSBwYXJhbXMubGlzdC51cmxzOwogICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1oZWFkZXIgaDMgc3Bhbi5kaWFsb2ctdGl0bGUnLGRpYWxvZykudGV4dChwYXJhbXMudGl0bGUgKyAi77yaIiArcGFyYW1zLmxpc3QuZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgJC5lYWNoKHBhcmFtcy5saXN0LnVybHMsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgdmFyICRkaXYgPSAkKCc8ZGl2PjxkaXYgc3R5bGU9IndpZHRoOjMwcHg7ZmxvYXQ6bGVmdCI+JytlbGVtZW50LnJhbmsrJzo8L2Rpdj48ZGl2IHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiPjxhIGhyZWY9IicrZWxlbWVudC51cmwrJyI+JytlbGVtZW50LnVybCsnPC9hPjwvZGl2PjwvZGl2PicpOwogICAgICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYm9keScsZGlhbG9nKS5hcHBlbmQoJGRpdik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmKHBhcmFtcy50eXBlID09ICdiYXRjaCcpewogICAgICAgICAgICAgICAgbGlua0xpc3QgPSBwYXJhbXMubGlzdDsKICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctaGVhZGVyIGgzIHNwYW4uZGlhbG9nLXRpdGxlJyxkaWFsb2cpLnRleHQocGFyYW1zLnRpdGxlKTsKICAgICAgICAgICAgICAgIGlmKHBhcmFtcy5zaG93YWxsKXsKICAgICAgICAgICAgICAgICAgICAkLmVhY2gocGFyYW1zLmxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbV9kaXYgPSAkKCc8ZGl2IGNsYXNzPSJpdGVtLWNvbnRhaW5lciIgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcCI+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbV9uYW1lID0gJCgnPGRpdiBzdHlsZT0id2lkdGg6MTAwcHg7ZmxvYXQ6bGVmdDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyIgdGl0bGU9IicrZWxlbWVudC5maWxlbmFtZSsnIj4nK2VsZW1lbnQuZmlsZW5hbWUrJzwvZGl2PicpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW1fc2VwID0gJCgnPGRpdiBzdHlsZT0id2lkdGg6MTJweDtmbG9hdDpsZWZ0Ij48c3Bhbj7vvJo8L3NwYW4+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbV9saW5rX2RpdiA9ICQoJzxkaXYgY2xhc3M9Iml0ZW0tbGluayIgc3R5bGU9ImZsb2F0OmxlZnQ7d2lkdGg6NjE4cHg7Ij48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtX2ZpcnN0ID0gJCgnPGRpdiBjbGFzcz0iaXRlbS1maXJzdCIgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIj48YSBocmVmPSInK2VsZW1lbnQuZG93bmxvYWRsaW5rKyciPicrZWxlbWVudC5kb3dubG9hZGxpbmsrJzwvYT48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1fbGlua19kaXYuYXBwZW5kKCRpdGVtX2ZpcnN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHBhcmFtcy5hbGxsaXN0W2luZGV4XS5saW5rcyxmdW5jdGlvbihuLGl0ZW0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5kb3dubG9hZGxpbmsgPT0gaXRlbS51cmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJCgnPGRpdiBjbGFzcz0iaXRlbS1leCIgc3R5bGU9ImRpc3BsYXk6bm9uZTtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+PGEgaHJlZj0iJytpdGVtLnVybCsnIj4nK2l0ZW0udXJsKyc8L2E+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbV9saW5rX2Rpdi5hcHBlbmQoJGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtX2V4ID0gJCgnPGRpdiBzdHlsZT0id2lkdGg6MTVweDtmbG9hdDpsZWZ0O2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxNnB4Ij48c3Bhbj4rPC9zcGFuPjwvZGl2PicpOwogICAgICAgICAgICAgICAgICAgICAgICAkaXRlbV9kaXYuYXBwZW5kKCRpdGVtX25hbWUpLmFwcGVuZCgkaXRlbV9zZXApLmFwcGVuZCgkaXRlbV9saW5rX2RpdikuYXBwZW5kKCRpdGVtX2V4KTsKICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1fZXguY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXJlbnQudG9nZ2xlQ2xhc3MoJ3Nob3dhbGwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRwYXJlbnQuaGFzQ2xhc3MoJ3Nob3dhbGwnKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50ZXh0KCctJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnZGl2Lml0ZW0tbGluayBkaXYuaXRlbS1leCcsJHBhcmVudCkuc2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRleHQoJysnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXYuaXRlbS1saW5rIGRpdi5pdGVtLWV4JywkcGFyZW50KS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJvZHknLGRpYWxvZykuYXBwZW5kKCRpdGVtX2Rpdik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAkLmVhY2gocGFyYW1zLmxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZGl2ID0gJCgnPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwIj48ZGl2IHN0eWxlPSJ3aWR0aDoxMDBweDtmbG9hdDpsZWZ0O292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIiB0aXRsZT0iJytlbGVtZW50LmZpbGVuYW1lKyciPicrZWxlbWVudC5maWxlbmFtZSsnPC9kaXY+PHNwYW4+77yaPC9zcGFuPjxhIGhyZWY9IicrZWxlbWVudC5kb3dubG9hZGxpbmsrJyI+JytlbGVtZW50LmRvd25sb2FkbGluaysnPC9hPjwvZGl2PicpOwogICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJvZHknLGRpYWxvZykuYXBwZW5kKCRkaXYpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihwYXJhbXMudGlwKXsKICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctdGlwIHAnLGRpYWxvZykudGV4dChwYXJhbXMudGlwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYocGFyYW1zLnNob3djb3B5KXsKICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYnV0dG9uJyxkaWFsb2cpLnNob3coKTsKICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYnV0dG9uIGJ1dHRvbiNkaWFsb2ctY29weS1idXR0b24nLGRpYWxvZykuc2hvdygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHBhcmFtcy5zaG93ZWRpdCl7CiAgICAgICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJ1dHRvbicsZGlhbG9nKS5zaG93KCk7CiAgICAgICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJ1dHRvbiBidXR0b24jZGlhbG9nLWVkaXQtYnV0dG9uJyxkaWFsb2cpLnNob3coKTsKICAgICAgICAgICAgICAgIHZhciAkZGlhbG9nX3RleHRhcmVhID0gJCgnPHRleHRhcmVhIG5hbWU9ImRpYWxvZy10ZXh0YXJlYSIgc3R5bGU9ImRpc3BsYXk6bm9uZTtyZXNpemU6bm9uZTt3aWR0aDo3NThweDtoZWlnaHQ6MzAwcHg7d2hpdGUtc3BhY2U6cHJlO3dvcmQtd3JhcDpub3JtYWw7b3ZlcmZsb3cteDpzY3JvbGwiPjwvdGV4dGFyZWE+Jyk7CiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgaWYoc2hvd1BhcmFtcy50eXBlID09ICdiYXRjaCcpewogICAgICAgICAgICAgICAgICAgICQuZWFjaChsaW5rTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5kb3dubG9hZGxpbmsgPT0gJ2Vycm9yJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXggPT0gbGlua0xpc3QubGVuZ3RoLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudCArIGVsZW1lbnQuZG93bmxvYWRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gIGNvbnRlbnQgKyBlbGVtZW50LmRvd25sb2FkbGluayArICdcbic7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc2hvd1BhcmFtcy50eXBlID09ICdsaW5rJyl7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGxpbmtMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LnVybCA9PSAnZXJyb3InKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PSBsaW5rTGlzdC5sZW5ndGgtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgZWxlbWVudC51cmw7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAgY29udGVudCArIGVsZW1lbnQudXJsICsgJ1xuJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRkaWFsb2dfdGV4dGFyZWEudmFsKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1ib2R5JyxkaWFsb2cpLmFwcGVuZCgkZGlhbG9nX3RleHRhcmVhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2hhZG93LnNob3coKTsKICAgICAgICAgICAgZGlhbG9nLnNob3coKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY2xvc2UgPSBmdW5jdGlvbigpewogICAgICAgICAgICBkaWFsb2dDb250cm9sKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaWFsb2dDb250cm9sKCl7CiAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYm9keScsZGlhbG9nKS5jaGlsZHJlbigpLnJlbW92ZSgpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWhlYWRlciBoMyBzcGFuLmRpYWxvZy10aXRsZScsZGlhbG9nKS50ZXh0KCcnKTsKICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy10aXAgcCcsZGlhbG9nKS50ZXh0KCcnKTsKICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1idXR0b24nLGRpYWxvZykuaGlkZSgpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLXJhZGlvIGlucHV0W3R5cGU9cmFkaW9dW25hbWU9c2hvd21vZGVdW3ZhbHVlPW11bHRpXScsZGlhbG9nKS5wcm9wKCdjaGVja2VkJyx0cnVlKTsKICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1yYWRpbycsZGlhbG9nKS5oaWRlKCk7CiAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYnV0dG9uIGJ1dHRvbiNkaWFsb2ctY29weS1idXR0b24nLGRpYWxvZykuaGlkZSgpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJ1dHRvbiBidXR0b24jZGlhbG9nLWVkaXQtYnV0dG9uJyxkaWFsb2cpLmhpZGUoKTsKICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1leGl0LWJ1dHRvbicsZGlhbG9nKS5oaWRlKCk7CiAgICAgICAgICAgIGRpYWxvZy5oaWRlKCk7CiAgICAgICAgICAgIHNoYWRvdy5oaWRlKCk7CiAgICAgICAgfQoKICAgICAgICBkaWFsb2cgPSBjcmVhdGVEaWFsb2coKTsKICAgICAgICBzaGFkb3cgPSBjcmVhdGVTaGFkb3coKTsKICAgIH0KCiAgICBmdW5jdGlvbiBWQ29kZURpYWxvZyhyZWZyZXNoVkNvZGUsY29uZmlybUNsaWNrKXsKICAgICAgICB2YXIgZGlhbG9nLHNoYWRvdzsKICAgICAgICBmdW5jdGlvbiBjcmVhdGVEaWFsb2coKXsKICAgICAgICAgICAgdmFyIHNjcmVlbldpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgdmFyIGRpYWxvZ0xlZnQgPSBzY3JlZW5XaWR0aD41MjAgPyAoc2NyZWVuV2lkdGgtNTIwKS8yIDogMDsKICAgICAgICAgICAgdmFyICRkaWFsb2dfZGl2ID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nIiBpZD0iZGlhbG9nLXZjb2RlIiBzdHlsZT0id2lkdGg6NTIwcHg7dG9wOjBweDtib3R0b206YXV0bztsZWZ0OicrZGlhbG9nTGVmdCsncHg7cmlnaHQ6YXV0bztkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTp2aXNpYmxlO3otaW5kZXg6NTIiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19oZWFkZXIgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctaGVhZGVyIj48aDM+PHNwYW4gY2xhc3M9ImRpYWxvZy1oZWFkZXItdGl0bGUiPjxlbSBjbGFzcz0ic2VsZWN0LXRleHQiPuaPkOekujwvZW0+PC9zcGFuPjwvaDM+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2NvbnRyb2wgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctY29udHJvbCI+PHNwYW4gY2xhc3M9ImRpYWxvZy1pY29uIGRpYWxvZy1jbG9zZSBpY29uIGljb24tY2xvc2UiPjxzcGFuIGNsYXNzPSJzaWNvbiI+eDwvc3Bhbj48L3NwYW4+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2JvZHkgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctYm9keSI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2JvZHlfZGl2ID0gJCgnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzoyMnB4Ij48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfYm9keV9kb3dubG9hZF92ZXJpZnkgPSAkKCc8ZGl2IGNsYXNzPSJkb3dubG9hZC12ZXJpZnkiIHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7cGFkZGluZzowIDI4cHg7dGV4dC1hbGlnbjpsZWZ0O2ZvbnQtc2l6ZToxMnB4OyI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX3ZlcmlmeV9ib2R5ID0gJCgnPGRpdiBjbGFzcz0idmVyaWZ5LWJvZHkiPuivt+i+k+WFpemqjOivgeegge+8mjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19pbnB1dCA9ICQoJzxpbnB1dCBpZD0iZGlhbG9nLWlucHV0IiB0eXBlPSJ0ZXh0IiBzdHlsZT0icGFkZGluZzozcHg7d2lkdGg6ODVweDtoZWlnaHQ6MjNweDtib3JkZXI6MXB4IHNvbGlkICNjNmM2YzY7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBjbGFzcz0iaW5wdXQtY29kZSIgbWF4bGVuZ3RoPSI0Ij4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfaW1nID0gJCgnPGltZyBpZD0iZGlhbG9nLWltZyIgY2xhc3M9ImltZy1jb2RlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBhbHQ9IueCueWHu+aNouS4gOW8oCIgc3JjPSIiIHdpZHRoPSIxMDAiIGhlaWdodD0iMzAiPicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19yZWZyZXNoID0gJCgnPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTsiIGNsYXNzPSJ1bmRlcmxpbmUiPuaNouS4gOW8oDwvYT4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfZXJyID0gJCgnPGRpdiBpZD0iZGlhbG9nLWVyciIgc3R5bGU9InBhZGRpbmctbGVmdDo4NHB4O2hlaWdodDoxOHB4O2NvbG9yOiNkODAwMDAiIGNsYXNzPSJ2ZXJpZnktZXJyb3IiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19mb290ZXIgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctZm9vdGVyIGctY2xlYXJmaXgiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19jb25maXJtX2J1dHRvbiA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1ibHVlIiBkYXRhLWJ1dHRvbi1pZD0iIiBkYXRhLWJ1dHRvbi1pbmRleCBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHN0eWxlPSJwYWRkaW5nLWxlZnQ6MzZweCI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0IiBzdHlsZT0icGFkZGluZy1yaWdodDozNnB4OyI+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDphdXRvOyI+56Gu5a6aPC9zcGFuPjwvc3Bhbj48L2E+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2NhbmNlbF9idXR0b24gPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGRhdGEtYnV0dG9uLWlkPSIiIGRhdGEtYnV0dG9uLWluZGV4IGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIHN0eWxlPSJwYWRkaW5nLWxlZnQ6IDM2cHg7Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiIHN0eWxlPSJwYWRkaW5nLXJpZ2h0OiAzNnB4OyI+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogYXV0bzsiPuWPlua2iDwvc3Bhbj48L3NwYW4+PC9hPicpOwoKICAgICAgICAgICAgJGRpYWxvZ19oZWFkZXIuYXBwZW5kKCRkaWFsb2dfY29udHJvbCk7CiAgICAgICAgICAgICRkaWFsb2dfdmVyaWZ5X2JvZHkuYXBwZW5kKCRkaWFsb2dfaW5wdXQpLmFwcGVuZCgkZGlhbG9nX2ltZykuYXBwZW5kKCRkaWFsb2dfcmVmcmVzaCk7CiAgICAgICAgICAgICRkaWFsb2dfYm9keV9kb3dubG9hZF92ZXJpZnkuYXBwZW5kKCRkaWFsb2dfdmVyaWZ5X2JvZHkpLmFwcGVuZCgkZGlhbG9nX2Vycik7CiAgICAgICAgICAgICRkaWFsb2dfYm9keV9kaXYuYXBwZW5kKCRkaWFsb2dfYm9keV9kb3dubG9hZF92ZXJpZnkpOwogICAgICAgICAgICAkZGlhbG9nX2JvZHkuYXBwZW5kKCRkaWFsb2dfYm9keV9kaXYpOwogICAgICAgICAgICAkZGlhbG9nX2Zvb3Rlci5hcHBlbmQoJGRpYWxvZ19jb25maXJtX2J1dHRvbikuYXBwZW5kKCRkaWFsb2dfY2FuY2VsX2J1dHRvbik7CiAgICAgICAgICAgICRkaWFsb2dfZGl2LmFwcGVuZCgkZGlhbG9nX2hlYWRlcikuYXBwZW5kKCRkaWFsb2dfYm9keSkuYXBwZW5kKCRkaWFsb2dfZm9vdGVyKTsKICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZGlhbG9nX2Rpdik7CgogICAgICAgICAgICAkZGlhbG9nX2Rpdi5kaWFsb2dEcmFnKCk7CgogICAgICAgICAgICAkZGlhbG9nX2NvbnRyb2wuY2xpY2soZGlhbG9nQ29udHJvbCk7CiAgICAgICAgICAgICRkaWFsb2dfaW1nLmNsaWNrKHJlZnJlc2hWQ29kZSk7CiAgICAgICAgICAgICRkaWFsb2dfcmVmcmVzaC5jbGljayhyZWZyZXNoVkNvZGUpOwogICAgICAgICAgICAkZGlhbG9nX2lucHV0LmtleXByZXNzKGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIGlmKGV2ZW50LndoaWNoID09IDEzKQogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1DbGljaygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJGRpYWxvZ19jb25maXJtX2J1dHRvbi5jbGljayhjb25maXJtQ2xpY2spOwogICAgICAgICAgICAkZGlhbG9nX2NhbmNlbF9idXR0b24uY2xpY2soZGlhbG9nQ29udHJvbCk7CiAgICAgICAgICAgICRkaWFsb2dfaW5wdXQuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctZXJyJykudGV4dCgnJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gJGRpYWxvZ19kaXY7CiAgICAgICAgfQogICAgICAgIHRoaXMub3BlbiA9IGZ1bmN0aW9uKHZjb2RlKXsKICAgICAgICAgICAgaWYodmNvZGUpCiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWltZycpLmF0dHIoJ3NyYycsdmNvZGUuaW1nKTsKICAgICAgICAgICAgZGlhbG9nLnNob3coKTsKICAgICAgICAgICAgc2hhZG93LnNob3coKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGRpYWxvZ0NvbnRyb2woKTsKICAgICAgICB9CiAgICAgICAgZGlhbG9nID0gY3JlYXRlRGlhbG9nKCk7CiAgICAgICAgc2hhZG93ID0gJCgnZGl2LmRpYWxvZy1zaGFkb3cnKTsKICAgICAgICBmdW5jdGlvbiBkaWFsb2dDb250cm9sKCl7CiAgICAgICAgICAgICQoJyNkaWFsb2ctaW1nJyxkaWFsb2cpLmF0dHIoJ3NyYycsJycpOwogICAgICAgICAgICAkKCcjZGlhbG9nLWVycicpLnRleHQoJycpOwogICAgICAgICAgICBkaWFsb2cuaGlkZSgpOwogICAgICAgICAgICBzaGFkb3cuaGlkZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAkLmZuLmRpYWxvZ0RyYWcgPSBmdW5jdGlvbigpewogICAgICAgIHZhciBtb3VzZUluaXRYLG1vdXNlSW5pdFksZGlhbG9nSW5pdFgsZGlhbG9nSW5pdFk7CiAgICAgICAgdmFyIHNjcmVlbldpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICB2YXIgJHBhcmVudCA9IHRoaXM7CiAgICAgICAgJCgnZGl2LmRpYWxvZy1oZWFkZXInLHRoaXMpLm1vdXNlZG93bihmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIG1vdXNlSW5pdFggPSBwYXJzZUludChldmVudC5wYWdlWCk7CiAgICAgICAgICAgIG1vdXNlSW5pdFkgPSBwYXJzZUludChldmVudC5wYWdlWSk7CiAgICAgICAgICAgIGRpYWxvZ0luaXRYID0gcGFyc2VJbnQoJHBhcmVudC5jc3MoJ2xlZnQnKS5yZXBsYWNlKCdweCcsJycpKTsKICAgICAgICAgICAgZGlhbG9nSW5pdFkgPSBwYXJzZUludCgkcGFyZW50LmNzcygndG9wJykucmVwbGFjZSgncHgnLCcnKSk7CiAgICAgICAgICAgICQodGhpcykubW91c2Vtb3ZlKGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgICAgIHZhciB0ZW1wWCA9IGRpYWxvZ0luaXRYICsgcGFyc2VJbnQoZXZlbnQucGFnZVgpIC0gbW91c2VJbml0WDsKICAgICAgICAgICAgICAgIHZhciB0ZW1wWSA9IGRpYWxvZ0luaXRZICsgcGFyc2VJbnQoZXZlbnQucGFnZVkpIC0gbW91c2VJbml0WTsKICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KCRwYXJlbnQuY3NzKCd3aWR0aCcpLnJlcGxhY2UoJ3B4JywnJykpOwogICAgICAgICAgICAgICAgdGVtcFggPSB0ZW1wWDwwID8gMCA6IHRlbXBYPnNjcmVlbldpZHRoLXdpZHRoID8gc2NyZWVuV2lkdGgtd2lkdGggOiB0ZW1wWDsKICAgICAgICAgICAgICAgIHRlbXBZID0gdGVtcFk8MCA/IDAgOiB0ZW1wWTsKICAgICAgICAgICAgICAgICRwYXJlbnQuY3NzKCdsZWZ0Jyx0ZW1wWCsncHgnKS5jc3MoJ3RvcCcsdGVtcFkrJ3B4Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgICQoJ2Rpdi5kaWFsb2ctaGVhZGVyJyx0aGlzKS5tb3VzZXVwKGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgJCh0aGlzKS51bmJpbmQoJ21vdXNlbW92ZScpOwogICAgICAgIH0pOwogICAgfQoKfSkoKTs="},{"name":"baidu-music-download","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://music.baidu.com/song/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":["tingapi.ting.baidu.com","yinyueyun.baidu.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1509007134479},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/3953-baidu-music-download/code/baidu-music-download.user.js","uuid":"16541415-3325-45d1-a74a-2217568d5dbb","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGJhaWR1LW11c2ljLWRvd25sb2FkCi8vIEBuYW1lc3BhY2UgICB0aHVuZGVyaGl0QDE2My5jb20KLy8gQGRlc2NyaXB0aW9uIOW/q+mAn+WFjei0ueS4i+i9veeZvuW6pumfs+S5kAovLyBAYXV0aG9yICAgICAgdGh1bmRlcmhpdAovLyBAaW5jbHVkZSAgICAgaHR0cDovL211c2ljLmJhaWR1LmNvbS9zb25nLyoKLy8gQGdyYW50ICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAdmVyc2lvbiAgICAgMS4xMAovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtZW5kCi8vID09L1VzZXJTY3JpcHQ9PTAwCgp2YXIgc2hvd19jb2xsZWN0aW9uX251bSA9IHRydWU7IC8v5pi+56S65b2T5YmN55qE5pS26JeP5pWwCgp2YXIgbWF4X2NvbGxlY3Rpb25fbnVtID0gMjAwOyAvL+W9k+i2hei/h+i/meS4quaVsOWtl+iEmuacrOS8muiHquWKqOS7juaUtuiXj+S4reWIoOmZpOmfs+S5kAoKdmFyIGJhaWR1aWQgPSAoZnVuY3Rpb24oKSB7CiAgICBpZiAoZG9jdW1lbnQuY29va2llLmxlbmd0aCA+IDApIHsKICAgICAgICBjX3N0YXJ0ID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoIkJBSURVSUQiICsgIj0iKTsKICAgICAgICBpZiAoY19zdGFydCAhPSAtMSkgewogICAgICAgICAgICBjX3N0YXJ0ID0gY19zdGFydCArICJCQUlEVUlEIi5sZW5ndGggKyAxOwogICAgICAgICAgICBjX2VuZCA9IGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKCI7IiwgY19zdGFydCk7CiAgICAgICAgICAgIGlmIChjX2VuZCA9PSAtMSkgY19lbmQgPSBkb2N1bWVudC5jb29raWUubGVuZ3RoOwogICAgICAgICAgICByZXR1cm4gdW5lc2NhcGUoZG9jdW1lbnQuY29va2llLnN1YnN0cmluZyhjX3N0YXJ0LCBjX2VuZCkpLnJlcGxhY2UoIjpGRz0xIiwgIiIpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAiIjsKfSkoKTsKdmFyIHNvbmdpZCA9IChmdW5jdGlvbigpIHsKICAgIHJldHVybiBsb2NhdGlvbi5ocmVmLm1hdGNoKC9cL3NvbmdcLyguKikvKVsxXTsKfSkoKTsKdmFyIGFqYXhfZ2V0ID0gZnVuY3Rpb24oY2IsIHVybCkgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBSZWZlcmVyOiBsb2NhdGlvbi5ocmVmCiAgICAgICAgfSwKICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGNiKEpTT04ucGFyc2UocmVzcG9uc2UucmVzcG9uc2VUZXh0KSk7CiAgICAgICAgfSwKICAgICAgICBvbmVycm9yOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0KICAgIH0pOwp9Owp2YXIgYWpheF9wb3N0ID0gZnVuY3Rpb24oY2IsIHVybCkgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIHVybDogdXJsLAogICAgICAgIGRhdGE6ICdpZHM9JyArIHNvbmdpZCArICcmdHlwZT1zb25nJnBheV90eXBlPTAmJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKICAgICAgICB9LAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShyZXNwb25zZSkpOwogICAgICAgIH0sCiAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9CiAgICB9KTsKfTsKCnZhciBtdXNpYyA9IHsKICAgIGNvbGxlY3Q6IGZ1bmN0aW9uKGNiKSB7CiAgICAgICAgYWpheF9nZXQoY2IsICdodHRwOi8vdGluZ2FwaS50aW5nLmJhaWR1LmNvbS92MS9yZXN0c2VydmVyL3Rpbmc/JyArICdtZXRob2Q9YmFpZHUudGluZy5mYXZvcml0ZS5hZGRTb25nRmF2b3JpdGUmZm9ybWF0PWpzb24mZnJvbT1ibXBjJnZlcnNpb249MS4wLjAmdmVyc2lvbl9kPTkuMS4xNiYmYmFpZHVpZD0nICsgYmFpZHVpZCArICcmc29uZ0lkPScgKyBzb25naWQgKyAnJnRpbWU9JyArIChNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkpKTsKICAgIH0sCiAgICBpc2NvbGxlY3Q6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgYWpheF9nZXQoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICBjYWxsYmFjayhkYXRhLmRhdGEuaXNDb2xsZWN0KTsKICAgICAgICB9LCAnaHR0cDovL211c2ljLmJhaWR1LmNvbS9kYXRhL3VzZXIvaXNDb2xsZWN0P3R5cGU9c29uZyZpZHM9JyArIHNvbmdpZCArICcmcj0nICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDAwKSArIChuZXcgRGF0ZSgpLmdldFRpbWUoKSkpOwogICAgfSwKICAgIGRlbGNvbGxlY3Rpb246IGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgYWpheF9nZXQoZnVuY3Rpb24oZGF0YSkgewogICAgICAgIH0sICdodHRwOi8vbXVzaWMuYmFpZHUuY29tL2RhdGEvdXNlci9kZWxldGVDb2xsZWN0aW9uP3R5cGU9c29uZyZpZHM9JyArIGlkICsgJyZyPScgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApICsgKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSk7CiAgICB9LAogICAgc29uZ2RldGFpbDogZnVuY3Rpb24oY2IpIHsKICAgICAgICBhamF4X2dldChjYiwgJ2h0dHA6Ly95aW55dWV5dW4uYmFpZHUuY29tL2RhdGEvY2xvdWQvZG93bmxvYWQ/c29uZ0lkcz0nICsgc29uZ2lkKTsKICAgIH0sCiAgICBnZXRyYXRlZGV0YWlsOiBmdW5jdGlvbihyYXRlX3R5cGUsIGNiKSB7CiAgICAgICAgdGhpcy5zb25nZGV0YWlsKGZ1bmN0aW9uKGpzb24pIHsKICAgICAgICAgICAgaWYgKHJhdGVfdHlwZSA9PSAxMDI0ICYmIGpzb24uZGF0YS5kYXRhLmZsYWMpIHsKICAgICAgICAgICAgICAgIGNiKGpzb24uZGF0YS5kYXRhLmZsYWMucmF0ZSwganNvbi5kYXRhLmRhdGEuZmxhYy5mb3JtYXQsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGpzb24uZGF0YS5kYXRhW3JhdGVfdHlwZV0pIHsKICAgICAgICAgICAgICAgIGNiKGpzb24uZGF0YS5kYXRhW3JhdGVfdHlwZV0ucmF0ZSwganNvbi5kYXRhLmRhdGFbcmF0ZV90eXBlXS5yYXRlLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNiKG51bGwsIG51bGwsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGdldHNvbmdsaXN0OiBmdW5jdGlvbihjYikgewogICAgICAgIGFqYXhfZ2V0KGNiLCAnaHR0cDovL3RpbmdhcGkudGluZy5iYWlkdS5jb20vdjEvcmVzdHNlcnZlci90aW5nP21ldGhvZD1iYWlkdS50aW5nLmZhdm9yaXRlLmdldENvbGxlY3RTb25nJmZvcm1hdD1qc29uJmZyb209Ym1wYyZ2ZXJzaW9uPTEuMC4wJnZlcnNpb25fZD05LjEuMTYmYmRpZHVpZD0nICsgYmFpZHVpZCArICcmcG49MCZybj01MCcpOwogICAgfSwKICAgIGRvd25sb2FkOiBmdW5jdGlvbih0eXBlLCB0YXJnZXQpIHsKICAgICAgICB0aGlzLmdldHJhdGVkZXRhaWwodHlwZSwgZnVuY3Rpb24ocmF0ZSwgZm9ybWF0LCBpc2V4aXN0KSB7CiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsIGV2ZW50X2hhbmRsZSwgZmFsc2UpOwogICAgICAgICAgICBpZiAoaXNleGlzdCkgewogICAgICAgICAgICAgICAgdmFyIGZpbmFsdXJsID0gJ2h0dHA6Ly95aW55dWV5dW4uYmFpZHUuY29tL2RhdGEvY2xvdWQvZG93bmxvYWRzb25nZmlsZT9zb25nSWRzPScgKyBzb25naWQgKyAnJnJhdGU9JyArIHJhdGUgKyAnJmZvcm1hdD0nICsgZm9ybWF0OwogICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKGZpbmFsdXJsKTsKICAgICAgICAgICAgICAgIHRhcmdldC5ocmVmID0gZmluYWx1cmw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0YXJnZXQuY2xpY2sgPSBudWxsOwogICAgICAgICAgICAgICAgdGFyZ2V0LnRleHQgPSAn5peg6LWE5rqQJzsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKfTsKCnZhciBtYWluID0gZnVuY3Rpb24ocmF0ZV90eXBlLCB0YXJnZXQpIHsKCiAgICBtdXNpYy5pc2NvbGxlY3QoZnVuY3Rpb24oaXNjb2xsZWN0X2ZsYWcpIHsKICAgICAgICBpZiAoaXNjb2xsZWN0X2ZsYWcpIHsKICAgICAgICAgICAgbXVzaWMuZG93bmxvYWQocmF0ZV90eXBlLCB0YXJnZXQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG11c2ljLmNvbGxlY3QoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgbXVzaWMuZG93bmxvYWQocmF0ZV90eXBlLCB0YXJnZXQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KTsKICAgIG11c2ljLmdldHNvbmdsaXN0KGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICBpZiAobWF4X2NvbGxlY3Rpb25fbnVtICYmIGRhdGEudG90YWwgPiBtYXhfY29sbGVjdGlvbl9udW0pIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnRvdGFsOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlc3VsdFtpXS5zb25nX2lkID09IHNvbmdpZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtdXNpYy5kZWxjb2xsZWN0aW9uKGRhdGEucmVzdWx0W2ldLnNvbmdfaWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cgp9OwoKdmFyIGV2ZW50X2hhbmRsZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBtYWluKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3JhdGUnKSwgZXZlbnQudGFyZ2V0KTsKfTsKR01fYWRkU3R5bGUoJyNtdXNpYy1kb3dubG9hZC11bD5saXtkaXNwbGF5OmlubGluZX0ubXVzaWMtZG93bmxvYWQtYXttYXJnaW4tdG9wOiA2cHg7bWFyZ2luLXJpZ2h0OiA2cHg7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgMzlweCAwIC0yNHB4ICNlNjdhNzM7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgMzlweCAwIC0yNHB4ICNlNjdhNzM7Ym94LXNoYWRvdzppbnNldCAwIDM5cHggMCAtMjRweCAjZTY3YTczO2JhY2tncm91bmQtY29sb3I6I2U0Njg1ZDstbW96LWJvcmRlci1yYWRpdXM6NHB4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2N1cnNvcjpwb2ludGVyO2NvbG9yOiNmZmY7Zm9udC1zaXplOjE0cHg7cGFkZGluZzoycHggMTVweDt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXNoYWRvdzowIDFweCAwICNiMjNlMzV9Lm11c2ljLWRvd25sb2FkLWE6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWI2NzVlfS5tdXNpYy1kb3dubG9hZC1hOmFjdGl2ZXtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MXB4fScpOwp2YXIgbGlzdCA9IChmdW5jdGlvbigpIHsKICAgIHZhciB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICB1bC5pZCA9ICdtdXNpYy1kb3dubG9hZC11bCc7CiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGEuY2xhc3NOYW1lID0gJ211c2ljLWRvd25sb2FkLWEnOwogICAgYS5ocmVmID0gJ2phdmFzY3JpcHQ6dm9pZCgwKTsnOwogICAgdmFyIHJhdGVzID0gWzEyOCwgMTkyLCAzMjAsIDEwMjRdOyAvLzEwMjQgPSDml6DmjZ8KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF0ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgY2xvbmVfYSA9IGEuY2xvbmVOb2RlKCk7CiAgICAgICAgY2xvbmVfYS5zZXRBdHRyaWJ1dGUoJ3JhdGUnLCByYXRlc1tpXSk7CiAgICAgICAgY2xvbmVfYS5pbm5lckhUTUwgPSByYXRlc1tpXSArICJrYnBzIjsKICAgICAgICBjbG9uZV9hLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnRfaGFuZGxlLCBmYWxzZSk7CiAgICAgICAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaS5hcHBlbmRDaGlsZChjbG9uZV9hKTsKICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7CiAgICB9CiAgICBpZiAoc2hvd19jb2xsZWN0aW9uX251bSkgewogICAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdpZCcsICdtdXNpYy1kb3dubG9hZC1jbicpOwogICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdzdHlsZScsICdjb2xvcjogcmdiKDE5NCwgMTk0LCAxOTQpOycpOwogICAgICAgIHZhciBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkuYXBwZW5kQ2hpbGQoc3Bhbik7CiAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgfQogICAgcmV0dXJuIHVsOwp9KSgpOwp2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Nvbmctb3BlcmEnKVswXTsKcy5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShsaXN0LCBzLm5leHRFbGVtZW50U2libGluZyk7Cm11c2ljLmdldHNvbmdsaXN0KGZ1bmN0aW9uKGRhdGEpIHsKICAgIHZhciBjbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdXNpYy1kb3dubG9hZC1jbicpIHx8IG51bGw7CiAgICBpZiAoY24pIHsKICAgICAgICBjbi5pbm5lckhUTUwgPSAn5b2T5YmN5pS26JeP5pWwOicgKyBkYXRhLnRvdGFsOwogICAgfQp9KTs="},{"name":"CNKI 中国知网 PDF 全文下载（特制版）","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["http://image.cnki.net/*"],"orig_includes":["http://*.cnki.net/*","http://*.cnki.net.*/*","*/kns/brief/*","*/kns55/brief/*","*/grid2008/brief/*","*/detail/detail.aspx*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1509007134482},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/18842-cnki-%E4%B8%AD%E5%9B%BD%E7%9F%A5%E7%BD%91-pdf-%E5%85%A8%E6%96%87%E4%B8%8B%E8%BD%BD-%E7%89%B9%E5%88%B6%E7%89%88/code/CNKI%20%E4%B8%AD%E5%9B%BD%E7%9F%A5%E7%BD%91%20PDF%20%E5%85%A8%E6%96%87%E4%B8%8B%E8%BD%BD%EF%BC%88%E7%89%B9%E5%88%B6%E7%89%88%EF%BC%89.user.js","uuid":"73371c6c-1727-46b4-913b-15c16d11fa39","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQGlkICAgICAgICAgICAgIENOS0ktUERGLVNwZWNpYWwKLy8gQG5hbWUgICAgICAgICAgIENOS0kg5Lit5Zu955+l572RIFBERiDlhajmlofkuIvovb3vvIjnibnliLbniYjvvIkKLy8gQHZlcnNpb24gICAgICAgIDMuMi4wLjIwMTcwMjEwCi8vIEBuYW1lc3BhY2UgICAgICBodHRwOi8veXVlbG9uZy5pbmZvCi8vIEBhdXRob3IgICAgICAgICBZVUUgTG9uZwovLyBAZGVzY3JpcHRpb24gICAg5Y+C6KeBIGh0dHA6Ly9ibG9nLnl1ZWxvbmcuaW5mby9wb3N0L2Nua2ktcGRmLWpzLmh0bWwKLy8gQGluY2x1ZGUgICAgICAgIGh0dHA6Ly8qLmNua2kubmV0LyoKLy8gQGluY2x1ZGUgICAgICAgIGh0dHA6Ly8qLmNua2kubmV0LiovKgovLyBAZXhjbHVkZSAgICAgICAgaHR0cDovL2ltYWdlLmNua2kubmV0LyoKLy8gQGluY2x1ZGUgICAgICAgICova25zL2JyaWVmLyoKLy8gQGluY2x1ZGUgICAgICAgICova25zNTUvYnJpZWYvKgovLyBAaW5jbHVkZSAgICAgICAgKi9ncmlkMjAwOC9icmllZi8qCi8vIEBpbmNsdWRlICAgICAgICAqL2RldGFpbC9kZXRhaWwuYXNweCoKLy8gQHJ1bi1hdCAgICAgICAgIGRvY3VtZW50LWlkbGUKLy8gQGdyYW50ICAgICAgICAgIG5vbmUKLy8gQHN1cHBvcnRVUkwgICAgIGh0dHA6Ly9ibG9nLnl1ZWxvbmcuaW5mby9wb3N0L2Nua2ktcGRmLWpzLmh0bWwKLy8gPT0vVXNlclNjcmlwdD09Cgp2YXIgYWxsTGlzLCB0aGlzTGksIG5ld0xpLCBhUERGLCBiUERGLCBhbGxMaW5rcywgdGhpc0xpbmssIHBhZ2VUeXBlLCBwZlR5cGUsIG15dXJsLCBpOwp2YXIgcGFnZVR5cGUgPSB0cnVlOwp2YXIgcGZUeXBlID0gdHJ1ZTsKdmFyIG15dXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CgphbGxMaW5rcyA9IGRvY3VtZW50LmV2YWx1YXRlKAogICAgJy8vYVtAaHJlZl0nLAogICAgZG9jdW1lbnQsCiAgICBudWxsLAogICAgWFBhdGhSZXN1bHQuVU5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSwKICAgIG51bGwpOwoKYWxsTGlzID0gZG9jdW1lbnQuZXZhbHVhdGUoCiAgICAiLy9saVtAY2xhc3NdIiwKICAgIGRvY3VtZW50LAogICAgbnVsbCwKICAgIFhQYXRoUmVzdWx0LlVOT1JERVJFRF9OT0RFX1NOQVBTSE9UX1RZUEUsCiAgICBudWxsKTsKCmlmIChteXVybC5pbmRleE9mKCJkZXRhaWwuYXNweCIpICE9IC0xKSB7CiAgICBwYWdlVHlwZSA9IGZhbHNlOwp9IC8vZmFsc2Ug5Li66K+m5oOF6aG16Z2iCmlmIChkb2N1bWVudC50aXRsZS5pbmRleE9mKCIgLSDkuK3lm73nn6XnvZEiKSAhPSAtMSkgewogICAgcGZUeXBlID0gZmFsc2U7Cn0gLy9mYWxzZSDkuLrmlrDlubPlj7AKCmlmICgocGZUeXBlID09PSB0cnVlKSAmIChwYWdlVHlwZSA9PT0gZmFsc2UpKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbExpcy5zbmFwc2hvdExlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpc0xpID0gYWxsTGlzLnNuYXBzaG90SXRlbShpKTsKICAgICAgICBpZiAodGhpc0xpLmdldEF0dHJpYnV0ZSgiY2xhc3MiKS5pbmRleE9mKCJyZWFkb2wiKSAhPSAtMSkgewogICAgICAgICAgICBuZXdMaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICAgIG5ld0xpLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicGRmIik7CiAgICAgICAgICAgIGFQREYgPSAnPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9IicgKyB0aGlzTGkuZmlyc3RDaGlsZC5ocmVmLnJlcGxhY2UoIiZkZmxhZz1yZWFkb25saW5lIiwgIiZkZmxhZz1wZGZkb3duIikgKyAnIj5QREbkuIvovb08L2E+JzsKICAgICAgICAgICAgbmV3TGkuaW5uZXJIVE1MID0gYVBERjsKICAgICAgICAgICAgdGhpc0xpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld0xpLCB0aGlzTGkubmV4dFNpYmxpbmcpOwogICAgICAgIH0KICAgIH0KfQoKaWYgKChwZlR5cGUgPT09IGZhbHNlKSAmIChwYWdlVHlwZSA9PT0gZmFsc2UpKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbExpbmtzLnNuYXBzaG90TGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzTGluayA9IGFsbExpbmtzLnNuYXBzaG90SXRlbShpKTsKICAgICAgICBpZiAodGhpc0xpbmsuaHJlZiAmJiB0aGlzTGluay5ocmVmLmluZGV4T2YoImRvd25sb2FkLmFzcHg/ZmlsZW5hbWU9IikgIT0gLTEgJiYgdGhpc0xpbmsuaW5uZXJIVE1MLmluZGV4T2YoIuaVtOacrCIpICE9IC0xKSB7CiAgICAgICAgICAgIHRoaXNMaW5rLmlubmVySFRNTCA9IHRoaXNMaW5rLmlubmVySFRNTC5yZXBsYWNlKCLmlbTmnKwiLCAiQ0FKIik7CiAgICAgICAgICAgIGJQREYgPSB0aGlzTGluay5ocmVmOwogICAgICAgIH0KICAgICAgICBpZiAodGhpc0xpbmsuaHJlZiAmJiB0aGlzTGluay5ocmVmLmluZGV4T2YoImRvd25sb2FkLmFzcHg/ZmlsZW5hbWU9IikgIT0gLTEgJiYgdGhpc0xpbmsuaW5uZXJIVE1MLmluZGV4T2YoIuWIhumhtSIpICE9IC0xKSB7CiAgICAgICAgICAgIHRoaXNMaW5rLmlubmVySFRNTCA9IHRoaXNMaW5rLmlubmVySFRNTC5yZXBsYWNlKCLliIbpobUiLCAiUERGIik7CiAgICAgICAgICAgIHRoaXNMaW5rLmhyZWYgPSBiUERGLnJlcGxhY2UoIm5oZG93biIsICJwZGZkb3duIik7CiAgICAgICAgfQogICAgfQp9CgppZiAocGFnZVR5cGUgPT09IHRydWUpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsTGlua3Muc25hcHNob3RMZW5ndGg7IGkrKykgewogICAgICAgIHRoaXNMaW5rID0gYWxsTGlua3Muc25hcHNob3RJdGVtKGkpOwogICAgICAgIGlmICh0aGlzTGluay5ocmVmICYmIHRoaXNMaW5rLmhyZWYuaW5kZXhPZigiZG93bmxvYWQuYXNweD9maWxlbmFtZT0iKSAhPSAtMSAmJiB0aGlzTGluay5ocmVmLmluZGV4T2YoIiZkZmxhZyIpID09IC0xKSB7CiAgICAgICAgICAgIHRoaXNMaW5rLmhyZWYgPSB0aGlzTGluay5ocmVmICsgIiZkZmxhZz1wZGZkb3duIjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXNMaW5rLmhyZWYgJiYgdGhpc0xpbmsuaHJlZi5pbmRleE9mKCJkb3dubG9hZC5hc3B4P2ZpbGVuYW1lPSIpICE9IC0xICYmIHRoaXNMaW5rLmhyZWYuaW5kZXhPZigiJmRmbGFnPW5oZG93biIpICE9IC0xKSB7CiAgICAgICAgICAgIHRoaXNMaW5rLmhyZWYgPSB0aGlzTGluay5ocmVmLnJlcGxhY2UoIm5oZG93biIsICJwZGZkb3duIik7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzTGluay5ocmVmICYmIHRoaXNMaW5rLmhyZWYuaW5kZXhPZigiZG93bmxvYWQuYXNweD9maWxlbmFtZT0iKSAhPSAtMSAmJiB0aGlzTGluay5ocmVmLmluZGV4T2YoIiZkZmxhZz1wZGZkb3duIikgIT0gLTEgJiYgKHRoaXNMaW5rLmhyZWYuaW5kZXhPZigiPUNNRkQiKSAhPSAtMSB8fCB0aGlzTGluay5ocmVmLmluZGV4T2YoIj1DREZEIikgIT0gLTEgKSkgewogICAgICAgICAgICB0aGlzTGluay5ocmVmID0gdGhpc0xpbmsuaHJlZi5yZXBsYWNlKCJwZGZkb3duIiwgIm5oZG93biIpOwogICAgICAgIH0KICAgIH0KfQ=="},{"name":"破解VIP会员视频集合","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["*://*.bilibili.com/blackboard/*"],"orig_includes":[],"orig_matches":["*://*.iqiyi.com/*","*://*.youku.com/*","*://*.le.com/*","*://*.letv.com/*","*://v.qq.com/*","*://*.tudou.com/*","*://*.mgtv.com/*","*://film.sohu.com/*","*://tv.sohu.com/*","*://*.acfun.cn/v/*","*://*.bilibili.com/*","*://vip.1905.com/play/*","*://*.pptv.com/*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://*.fun.tv/vplay/*","*://*.wasu.cn/Play/show/*","*://*.56.com/*"],"orig_noframes":true,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"userApis":"o[{}]","userApisOn":"bfalse"},"ts":1510192738131},"enabled":true,"position":5,"file_url":"https://greasyfork.org/scripts/27530-%E7%A0%B4%E8%A7%A3vip%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88/code/%E7%A0%B4%E8%A7%A3VIP%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88.user.js","uuid":"ec45a3a1-952c-4eb0-a6a0-07499ddd5555","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgIOegtOino1ZJUOS8muWRmOinhumikembhuWQiAovLyBAbmFtZXNwYWNlICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3VzZXJzLzEwNDIwMQovLyBAdmVyc2lvbiAgICA0LjIuNAovLyBAZGVzY3JpcHRpb24gIOS4gOmUruegtOino1vkvJjphbd86IW+6K6vfOS5kOinhnzniLHlpYfoibp86IqS5p6cfEFC56uZfOmfs+aCpuWPsF3nrYlWSVDmiJbkvJrlkZjop4bpopHvvIzop6PmnpDmjqXlj6PotLXnsr7kuI3otLXlpJrvvIznu53lr7nlpJ/nlKjjgILor6bnu4bmlrnms5XnnIvor7TmmI7lkozlm77niYfjgILljIXlkKvkuoZbVklQ6KeG6aKR5Zyo57q/6Kej5p6Q56C06Kej5Y675bm/5ZGKKOWFqOe9kSl4eC54eC54eOabtOaWsOWPr+eUqOKWtnNvbmltZWkxMzRdW+egtOino+WFqOe9kVZJUOinhumikeS8muWRmC3ljrvlub/lkYrilrZ0dG1zanhdW1ZJUOS8muWRmOinhumikeino+aekOKWtum+mei9qV1b6YW357uYLeegtOino1ZJUOS8muWRmOinhumikeKWtmFodWlhYmMyMDAzXeS7peWPiltWSVDop4bpopHnoLTop6PilrZob290aGluXeeahOmDqOWIhuaOpeWPo+OAgltUYW1wZXJtb25rZXkgfCBWaW9sZW50bW9ua2V5IHwgR3JlYXN5bW9ua2V5IDQuMCtdCi8vIEBhdXRob3IgICAgIOm7hOebkAovLyByZXF1aXJlICBodHRwczovL2dyZWFzZW1vbmtleS5naXRodWIuaW8vZ200LXBvbHlmaWxsL2dtNC1wb2x5ZmlsbC5qcwovLyBAbm9mcmFtZXMKLy8gQG1hdGNoICAgICo6Ly8qLmlxaXlpLmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vKi55b3VrdS5jb20vKgovLyBAbWF0Y2ggICAgKjovLyoubGUuY29tLyoKLy8gQG1hdGNoICAgICo6Ly8qLmxldHYuY29tLyoKLy8gQG1hdGNoICAgICo6Ly92LnFxLmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vKi50dWRvdS5jb20vKgovLyBAbWF0Y2ggICAgKjovLyoubWd0di5jb20vKgovLyBAbWF0Y2ggICAgKjovL2ZpbG0uc29odS5jb20vKgovLyBAbWF0Y2ggICAgKjovL3R2LnNvaHUuY29tLyoKLy8gQG1hdGNoICAgICo6Ly8qLmFjZnVuLmNuL3YvKgovLyBAbWF0Y2ggICAgKjovLyouYmlsaWJpbGkuY29tLyoKLy8gQG1hdGNoICAgICo6Ly92aXAuMTkwNS5jb20vcGxheS8qCi8vIEBtYXRjaCAgICAqOi8vKi5wcHR2LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vdi55aW55dWV0YWkuY29tL3ZpZGVvLyoKLy8gQG1hdGNoICAgICo6Ly92Lnlpbnl1ZXRhaS5jb20vcGxheWxpc3QvKgovLyBAbWF0Y2ggICAgKjovLyouZnVuLnR2L3ZwbGF5LyoKLy8gQG1hdGNoICAgICo6Ly8qLndhc3UuY24vUGxheS9zaG93LyoKLy8gQG1hdGNoICAgICo6Ly8qLjU2LmNvbS8qCi8vIEBleGNsdWRlICAqOi8vKi5iaWxpYmlsaS5jb20vYmxhY2tib2FyZC8qCi8vIEBncmFudCAgICBHTS5nZXRWYWx1ZQovLyBAZ3JhbnQgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgR00ueG1sSHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgR00ub3BlbkluVGFiCi8vID09L1VzZXJTY3JpcHQ9PQoKKCgpID0+IHsKICAndXNlIHN0cmljdCc7CiAgY29uc3QgWW91a3VJY29uID0gJzxzdmcgd2lkdGg9IjEuMmVtIiBoZWlnaHQ9IjEuMmVtIiB2aWV3Ym94PSIwIDAgNzIgNzIiPjxkZWZzPjxjaXJjbGUgaWQ9InlvdWt1QzEiIHI9IjUuNSIgc3R5bGU9InN0cm9rZTpub25lOztmaWxsOiMwQjlCRkY7Ij48L2NpcmNsZT48cGF0aCBpZD0ieW91a3VBcm93IiBkPSJtMCwxMCBhNSw1IDAsMCwxIDAsLTEwIGgyMCBhNSw1IDAsMCwxIDAsMTB6IiBzdHlsZT0iZmlsbDojRkY0MjQyOyI+PC9wYXRoPjwvZGVmcz48Y2lyY2xlIGN4PSIzNiIgY3k9IjM2IiByPSIzMC41IiBzdHlsZT0ic3Ryb2tlOiMzMEI0RkY7c3Ryb2tlLXdpZHRoOjExO2ZpbGw6bm9uZTsiPjwvY2lyY2xlPjx1c2UgeD0iMTAuNSIgeT0iMTkiIHhsaW5rOmhyZWY9IiN5b3VrdUMxIi8+PHVzZSB4PSI2MS41IiB5PSI1MyIgeGxpbms6aHJlZj0iI3lvdWt1QzEiLz48dXNlIHg9IjM5IiB5PSIxIiB0cmFuc2Zvcm09InJvdGF0ZSgzMCkiIHhsaW5rOmhyZWY9IiN5b3VrdUFyb3ciLz48dXNlIHg9Ii0xIiB5PSI1MiIgdHJhbnNmb3JtPSJyb3RhdGUoLTM1KSIgeGxpbms6aHJlZj0iI3lvdWt1QXJvdyIvPjwvc3ZnPic7CiAgY29uc3QgVlFRSWNvbiA9ICc8c3ZnIGhlaWdodD0iMS4yZW0iIHdpZHRoPSIxLjJlbSIgdmlld2JveD0iMCAwIDE4NSAxNzAiPjxkZWZzPjxwYXRoIGlkPSJ2UVEiIGQ9Ik03IDIwUTE0IC0xMCA1NSA3UTEwMCAyMyAxNDUgNjBRMTcwIDgwIDE0NSAxMDJRMTA4IDEzOCA0NyAxNjVRMTUgMTc1IDQgMTQ2US01IDgwIDcgMjAiPjwvcGF0aD48L2RlZnM+PHVzZSBzdHlsZT0iZmlsbDojNDRCOUZEOyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcsMCkiIHhsaW5rOmhyZWY9IiN2UVEiPjwvdXNlPjx1c2Ugc3R5bGU9ImZpbGw6I0ZGOUYwMTsiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMTgpLHNjYWxlKDAuOCwwLjc1KSIgeGxpbms6aHJlZj0iI3ZRUSI+PC91c2U+PHVzZSBzdHlsZT0iZmlsbDojOTdFNjFCOyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjMsMTgpLHNjYWxlKDAuODAuNzUpIiB4bGluazpocmVmPSIjdlFRIj48L3VzZT48dXNlIHN0eWxlPSJmaWxsOiNmZmY7IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCw0NSksc2NhbGUoMC40KSIgeGxpbms6aHJlZj0iI3ZRUSI+PC91c2U+PC9zdmc+JzsKICB2YXIgdE1zY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICB0TXNjcmlwdC5pbm5lclRleHQgPSBgcSA9IGZ1bmN0aW9uKGNzc1NlbGVjdG9yKXtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjc3NTZWxlY3Rvcik7fTtxYSA9IGZ1bmN0aW9uKGNzc1NlbGVjdG9yKXtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjc3NTZWxlY3Rvcik7fTtgOwogIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodE1zY3JpcHQpOwogIHdpbmRvdy5xID0gZnVuY3Rpb24oY3NzU2VsZWN0b3IpIHtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjc3NTZWxlY3Rvcik7fTsKICB3aW5kb3cucWEgPSBmdW5jdGlvbihjc3NTZWxlY3Rvcikge3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNzc1NlbGVjdG9yKTt9OwogIHdpbmRvdy5tYWtlRWwgPSBmdW5jdGlvbih0YWcpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7fTsKICAvKiDlhbzlrrkgVGFtcGVybW9ua2V5IHwgVmlvbGVudG1vbmtleSB8IEdyZWFzeW1vbmtleSA0LjArICovCiAgZnVuY3Rpb24gR01hZGRTdHlsZShjc3NUZXh0KXsKICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgIGEudGV4dENvbnRlbnQgPSBjc3NUZXh0OwogICAgbGV0IGRvYyA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgZG9jLmFwcGVuZENoaWxkKGEpOwogIH0KICAvKiDlhbzlrrkgVGFtcGVybW9ua2V5IHwgVmlvbGVudG1vbmtleSB8IEdyZWFzeW1vbmtleSA0LjArCiAgICog5Li65LqG5YW85a65R3JlYXN5TW9ua2V5IDQuMCDojrflj5bnu5PmnoTljJbmlbDmja4s5q+U5aaCIGpzb24gQXJyYXkg562JLAogICAqIOW6lOW9k+WFiOWwhuWtl+espuS4sui/mOWOn+S4uuWvueixoSzlho3miafooYzlkI7nu63mk43kvZwKICAgKiBHTWdldFZhbHVlKG5hbWUsZGVmYXVsdFZhbHVlKS50aGVuKChyZXN1bHQpPT57CiAgICogICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXN1bHQpOwogICAqICAgLy8gb3RoZXIgY29kZS4uLgogICAqIH07CiAgICovCiAgZnVuY3Rpb24gR01nZXRWYWx1ZShuYW1lLCBkZWZhdWx0VmFsdWUpIHsKICAgIGlmICh0eXBlb2YgR01fZ2V0VmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgcmVzb2x2ZShHTV9nZXRWYWx1ZShuYW1lLCBkZWZhdWx0VmFsdWUpKTsKICAgICAgLy8gcmVqZWN0KCk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEdNLmdldFZhbHVlKG5hbWUsIGRlZmF1bHRWYWx1ZSk7CiAgICB9CiAgfQogIC8qIOWFvOWuuSBUYW1wZXJtb25rZXkgfCBWaW9sZW50bW9ua2V5IHwgR3JlYXN5bW9ua2V5IDQuMCsKICAgKiDkuLrkuoblhbzlrrlHcmVhc3lNb25rZXkgNC4wIOWCqOWtmOe7k+aehOWMluaVsOaNrizmr5TlpoIganNvbiBBcnJheSDnrYksCiAgICog5bqU5b2T5YWI5bCG5a+56LGh5a2X56ym5Liy5YyWLAogICAqIEdNc2V0VmFsdWUobmFtZSwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFZhbHVlKSkKICAgKi8KICBmdW5jdGlvbiBHTXNldFZhbHVlKG5hbWUsIGRlZmF1bHRWYWx1ZSkgewogICAgaWYgKHR5cGVvZiBHTV9zZXRWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBHTV9zZXRWYWx1ZShuYW1lLCBkZWZhdWx0VmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgR00uc2V0VmFsdWUobmFtZSwgZGVmYXVsdFZhbHVlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gR014bWxodHRwUmVxdWVzdChvYmopewogICAgaWYgKEdNX3htbGh0dHBSZXF1ZXN0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KG9iaik7CiAgICB9IGVsc2V7CiAgICAgIEdNLnhtbGh0dHBSZXF1ZXN0KG9iaik7CiAgICB9CiAgfQogIHZhciByZXBsYWNlUmF3LCAgLyrmmK/lkKbltYzlhaXlvZPliY3pobXpnaIqLwogIGVwaXNvZGVzLCAgICAgICAgLyrmmK/lkKblkK/nlKjniLHlpYfoibrmraPnoa7pgInpm4YqLwogIHVzZXJBcGlzT247ICAgICAgLyrmmK/lkKbliqDovb3oh6rlrprkuYnop6PmnpDmjqXlj6MqLwogIEdNYWRkU3R5bGUoYAogICAgLypUTUhZOlRhbXBlck1vbmtleUh1YW5ZYW4qLwogICAgI1RNSFl2aWRlb0NvbnRhaW5lcnt6LWluZGV4Ojk5OTk5ODtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjcpO3Bvc2l0aW9uOmZpeGVkO3RvcDo3ZW07bGVmdDo1ZW07aGVpZ2h0OjY1JTt3aWR0aDo2NSU7cmVzaXplOmJvdGg7b3ZlcmZsb3c6YXV0bztib3gtc2hhZG93OjJweCAycHggNXB4IDVweCByZ2JhKDI1NSwyNTUsMCwuOCk7fQogICAgLypUTUhZVmlkZW9Db250YWluZXIqLwogICAgI1RNSFl2aWRlb0NvbnRhaW5lciBidXR0b257dG9wOi4xZW07Y3Vyc29yOnBvaW50ZXI7dmlzaWJpbGl0eTpoaWRkZW47Zm9udC1zaXplOjNlbTtjb2xvcjojZmZmO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOjA7fQogICAgI1RNSFl2aWRlb0NvbnRhaW5lcjpob3ZlciBidXR0b257dmlzaWJpbGl0eTp2aXNpYmxlO30KICAgICNUTUhZdmlkZW9Db250YWluZXI6aG92ZXIgYnV0dG9uOmhvdmVye2NvbG9yOiNmZjA7fQogICAgI1RNSFlpZnJhbWV7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtvdmVyZmxvdzphdXRvO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46YXV0bztib3JkZXI6MDtib3gtc2hhZG93OjAgMCAzZW0gcmdiYSgwLDAsMCwuNCk7ei1pbmRleDotMTt9CiAgICAvKlRNSFlJZnJhbWUqLwogICAgI1RNSFl1bHtwb3NpdGlvbjpmaXhlZDt0b3A6NWVtO2xlZnQ6MDtwYWRkaW5nOjA7ei1pbmRleDo5OTk5OTk7fQogICAgI1RNSFl1bCBsaXtsaXN0LXN0eWxlOm5vbmU7fQogICAgI1RNSFl1bCBzdmd7ZmxvYXQ6cmlnaHQ7fQogICAgLlRNMXtvcGFjaXR5OjAuMztwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nLXJpZ2h0Oi41ZW07d2lkdGg6MS41ZW07Y3Vyc29yOnBvaW50ZXI7fQogICAgLlRNMTpob3ZlcntvcGFjaXR5OjE7fQogICAgLlRNMSBzcGFue2Rpc3BsYXk6YmxvY2s7Ym9yZGVyLXJhZGl1czowIC4zZW0gLjNlbSAwO2JhY2tncm91bmQtY29sb3I6I2ZmZmYwMDtib3JkZXI6MDtmb250OmJvbGQgMWVtICLlvq7ova/pm4Xpu5EiIWltcG9ydGFudDtjb2xvcjojZmYwMDAwO21hcmdpbjowO3BhZGRpbmc6MWVtIC4zZW07fQogICAgLlRNM3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjEuNWVtO2Rpc3BsYXk6bm9uZTtib3JkZXItcmFkaXVzOi4zZW07bWFyZ2luOjA7cGFkZGluZzowO30KICAgIC5UTTMgbGl7ZmxvYXQ6bm9uZTt3aWR0aDo2ZW07bWFyZ2luOjA7Zm9udC1zaXplOjFlbTtwYWRkaW5nOi4xNWVtIDFlbTtjdXJzb3I6cG9pbnRlcjtjb2xvcjojM2EzYTNhIWltcG9ydGFudDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwwLDAuOCk7fQogICAgLlRNMyBsaTpob3Zlcntjb2xvcjp3aGl0ZSFpbXBvcnRhbnQ7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC44KTt9CiAgICAuVE0zIGxpOmxhc3QtY2hpbGR7Ym9yZGVyLXJhZGl1czowIDAgLjM1ZW0gLjM1ZW07fQogICAgLlRNMyBsaTpmaXJzdC1jaGlsZHtib3JkZXItcmFkaXVzOi4zNWVtIC4zNWVtIDAgMDt9CiAgICAuVE0xOmhvdmVyIC5UTTN7ZGlzcGxheTpibG9jazt9CiAgICAvKuiHquWumuS5ieino+aekOaOpeWPoyzmnKzpobXmkq3mlL7nqpflj6Porr7nva4qLwogICAgLlRNSFlwIHtwb3NpdGlvbjpmaXhlZDt0b3A6MjAlO2xlZnQ6MjAlO3otaW5kZXg6OTk5OTk5O2JhY2tncm91bmQ6eWVsbG93O3BhZGRpbmc6MzBweCAyMHB4IDEwcHggMjBweDtib3JkZXItcmFkaXVzOjEwcHg7dGV4dC1hbGlnbjpjZW50ZXI7fS8qVE1IWXBhbmVsKi8KICAgIC5UTUhZcCAqIHtmb250LXNpemU6MTZweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwwLDEpO2ZvbnQtZmFtaWx5Oiflvq7ova/pm4Xpu5EnO2NvbG9yOiMzYTNhM2E7Ym9yZGVyLXJhZGl1czoxMHB4O30KICAgICN0TXVzZXJEZWZpbmUgbGkge21hcmdpbjo1cHg7d2lkdGg6MTAwJTtsaXN0LXN0eWxlLXR5cGU6bm9uZTt9CiAgICAuVE1IWXAgaW5wdXRbdHlwZT10ZXh0XSB7Ym9yZGVyLXJhZGl1czo1cHggIWltcG9ydGFudDtib3JkZXI6MXB4IHNvbGlkICMzYTNhM2E7bWFyZ2luOjJweCAxMHB4IDJweCA1cHg7cGFkZGluZzoycHggNXB4O30KICAgIC5UTUhZbHRpIHt3aWR0aDozNTBweDt9LypUTUhZbG9uZ1RleHRJbnB1dCovCiAgICAuVE1IWW10aSB7d2lkdGg6MTYwcHg7fS8qVE1IWW10aSovCiAgICAuaWRlbGV0ZSB7ZmxvYXQ6IGxlZnQ7ICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGNvbG9yOiByZWQ7IHBhZGRpbmc6IDAgMjBweCAhaW1wb3J0YW50OyBjdXJzb3I6IHBvaW50ZXI7fQogICAgLmluYW1lIHtwYWRkaW5nLXJpZ2h0OjEwcHg7fQogICAgbGk6aG92ZXIgLmlkZWxldGUsbGk6aG92ZXIgLmlsaW5rLGxpOmhvdmVyIC5pbmFtZSB7YmFja2dyb3VuZDpyZ2JhKDIyNCwxNzUsMTcsMC42Mik7fQogICAgLlRNSFlwIGJ1dHRvbiB7Ym9yZGVyOjFweCBzb2xpZCAjM2EzYTNhO2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO3BhZGRpbmc6IDJweCAxMHB4O21hcmdpbjoxMHB4IDIwcHggMCAyMHB4O30KICAgIC5UTUhZcCBidXR0b246aG92ZXIge2JhY2tncm91bmQ6IzNhM2EzYTtjb2xvcjp5ZWxsb3c7fQogICAgLlRNSFlDbG9zZSB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO21hcmdpbjowIWltcG9ydGFudDt9CiAgICAuVE1IWXAgZmllbGRzZXQge21hcmdpbjowO3BhZGRpbmc6MTBweDt9CiAgICAuVE1IWXAgbGVnZW5kIHtwYWRkaW5nOjAgMTBweDt9CiAgICAuVE1IWXAgbGFiZWwge2Rpc3BsYXk6aW5saW5lLWJsb2NrO30KICAgIC5UTUhZc3BhbjgwIHtkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOnJpZ2h0O3dpZHRoOjgwcHg7fQogICAgLlRNSFlzcGFuMTIwIHtkaXNwbGF5OmlubGluZS1ibG9jazt0ZXh0LWFsaWduOnJpZ2h0O3dpZHRoOjEyMHB4O30KICAgICNpblRhYlNldHRpbmdTYXZlIHtwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW4tdG9wOjEwcHg7cGFkZGluZzozcHggMjBweDt9CiAgYCk7CiAgdmFyIGRlZmF1bHRhcGkgPSB7CiAgICB0aXRsZTogIum+mei9qeiEmuacrOeahOaOpeWPo++8jOm7mOiupOeUqOa1ruepuuino+aekO+8jOWkseaViOivt+abtOaNouaOpeWPoyIsCiAgICB1cmw6ICJodHRwOi8vZ291ZGlkaWFvLmNvbS8/dXJsPSIKICB9OwogIC8vYXBpcyBuYW1lOuaYvuekuueahOaWh+WtlyAgdXJsOuaOpeWPoyAgdGl0bGU65o+Q56S65paH5a2XICBpbnRhYjrmmK/lkKbpgILlkIjlhoXltYwo5bWM5YWl5Yik5patOkdNZ2V0VmFsdWUoInJlcGxhY2VSYXciLGZhbHNlKeWAvHx8aW50YWLlgLwpCiAgdmFyIGFwaXMgPVsKICAgIHtuYW1lOiLlpJ/kvY7osIMiLHVybDoiaHR0cDovL2dvdWRpZGlhby5jb20vP3VybD0iLHRpdGxlOiLovazlnIjlnIjlsLHmjaLnur/ot68iLGludGFiOjF9LAogICAge25hbWU6IueZvuWfn+mYgSIsdXJsOiJodHRwOi8vYXBpLmJhaXl1Zy5jbi92aXAvaW5kZXgucGhwP3VybD0iLHRpdGxlOiLovazlnIjlnIjlsLHmjaLnur/ot68iLGludGFiOjF9LAogICAge25hbWU6IuaQnOS9oOWmuSIrWW91a3VJY29uLHVybDoiaHR0cDovL3d3dy5zb25pbWVpLmNuLz91cmw9Iix0aXRsZToi57u85ZCI5o6l5Y+j77yMVklQ6KeG6aKRKioqIOabtOaWsOWPr+eUqOOAkOS9nOiAhXNvbmltZWkxMzTjgJHohJrmnKznmoTmjqXlj6MiLGludGFiOjB9LAogICAge25hbWU6InZQYXJzZSIrVlFRSWNvbix1cmw6Imh0dHBzOi8vYXBpLnZwYXJzZS5vcmcvP3VybD0iLHRpdGxlOiLmlK/mjIHohb7orq8iLGludGFiOjF9LAogICAge25hbWU6IueMq+S6kSIrVlFRSWNvbix1cmw6Imh0dHBzOi8vangubWFveXVuLnR2L2luZGV4LnBocD9pZD0iLHRpdGxlOiLmlK/mjIHohb7orq8iLGludGFiOjF9LAogICAge25hbWU6IuWZl+WZl+eUteW9sSIsdXJsOiJodHRwOi8vcHVwdWR5LmNvbS9wbGF5P21ha2U9dXJsJmlkPSIsdGl0bGU6Iue7vOWQiOaOpeWPo++8jOegtOino+WFqOe9kVZJUOinhumikeS8muWRmC3ljrvlub/lkYrjgJDkvZzogIV0dG1zanjjgJHohJrmnKznmoTmjqXlj6MiLGludGFiOjB9LAogICAge25hbWU6IuaKouWFiOW9semZoiIrWW91a3VJY29uLHVybDoiaHR0cDovL3d3dy5xeHlpbmd5dWFuLnZpcC9wbGF5P21ha2U9dXJsJmlkPSIsdGl0bGU6IuaNruivtOS8mOmFt+avlOi+g+eos+WumiIsaW50YWI6MH0sCiAgICB7bmFtZToi6YW357uYIix1cmw6Imh0dHA6Ly9hcHBhcGkuc3ZpcHYua3V1aHVpLmNvbS9zdmlwangvbGl1bGFucWljaGFqaWFuL2Jyb3dzZXJwbHVnaW4vcWhqeC9xaGp4LnBocD9pZD0iLHRpdGxlOiLnu7zlkIjmjqXlj6PvvIzphbfnu5gq44CQ5L2c6ICFYWh1aWFiYzIwMDPjgJHohJrmnKznmoTmjqXlj6MiLGludGFiOjB9LAogICAge25hbWU6IuaXi+mjjuino+aekCIsdXJsOiJodHRwOi8vYXBpLnhmc3ViLmNvbS9pbmRleC5waHA/dXJsPSIsdGl0bGU6IjE5MDXkvJjlhYjkvb/nlKgiLGludGFiOjF9LAogICAge25hbWU6Iuefs+WktOino+aekCIsdXJsOiJodHRwczovL2ppZXhpLjA3MTgxMS5jYy9qeC5waHA/dXJsPSIsdGl0bGU6IuaJi+WKqOeCueaSreaUviIsaW50YWI6MX0sCiAgICB7bmFtZToi5peg5ZCN5bCP56uZIix1cmw6Imh0dHA6Ly93d3cuc2ZzZnQuY29tL2FkbWluLnBocD91cmw9Iix0aXRsZToi5peg5ZCN5bCP56uZ5ZCM5rqQIixpbnRhYjoxfSwKICAgIHtuYW1lOiJWSVDnnIvnnIsiLHVybDoiaHR0cDovL3Euei52aXAudG90di43MmR1LmNvbS8/dXJsPSIsdGl0bGU6IuabtOaNoue6v+i3r+aIkOWKn+eOh+S8muaPkOmrmCIsaW50YWI6MX0sCiAgICB7bmFtZToiT0RGTFYiLHVybDoiaHR0cDovL2Fpa2FuLXR2LmNvbS8/dXJsPSIsdGl0bGU6IuS4jeeos+Wumu+8jOW5v+WRiui/h+a7pOi9r+S7tuWPr+iDveacieW9seWTjSIsaW50YWI6MX0sCiAgICB7bmFtZToiMTYz5Lq6Iix1cmw6Imh0dHA6Ly9qeC5hcGkuMTYzcmVuLmNvbS92b2QucGhwP3VybD0iLHRpdGxlOiLlgbblsJTmlK/mjIHohb7orq8iLGludGFiOjF9LAogICAgLy97bmFtZToiQ0tGTFYiLHVybDoiaHR0cDovL3d3dy4wMzM1aGFpYm8uY29tL3RvbmcucGhwP3VybD0iLHRpdGxlOiJDS0ZMVuS6kSzpg6jliIbnq5nngrnkuI3mlK/mjIEiLGludGFiOjF9LAogICAge25hbWU6IuaXoOWQjeWwj+ermTIiLHVybDoiaHR0cDovL3d3dy53bXh6LndhbmcvdmlkZW8ucGhwP3VybD0iLHRpdGxlOiLovazlnIjlnIjlsLHmjaLnur/ot68iLGludGFiOjF9LAogICAgLy97bmFtZToi55y8552b5Lya5LiL6ZuoIix1cmw6Imh0dHA6Ly93d3cudmlwamlleGkuY29tL3l1bi5waHA/dXJsPSIsdGl0bGU6Ind3dy52aXBqaWV4aS5jb20iLGludGFiOjF9LAogICAge25hbWU6IuS6uuS6uuWPkeW4gyIsdXJsOiJodHRwOi8vdi5yZW5yZW5mYWJ1LmNvbS9qaWV4aS5waHA/dXJsPSIsdGl0bGU6Iue7vOWQiO+8jOWkmue6v+i3ryIsaW50YWI6MH0KICBdOwogIC8v5bWM5YWl6aG16Z2i5pKt5pS+CiAgZnVuY3Rpb24gb3BlbkluVGFiKGV2dCkgewogICAgLy8g5om+5Yiw5pSv5oyB55qE5pa55rOVLCDkvb/nlKjpnIDopoHlhajlsY/nmoQgZWxlbWVudCDosIPnlKgKICAgIGZ1bmN0aW9uIGxhdW5jaEZ1bGxTY3JlZW4oZWxlbWVudCkgewogICAgICBpZihlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7CiAgICAgICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgICB9IGVsc2UgaWYoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTsKICAgICAgfSBlbHNlIGlmKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgIH0gZWxzZSBpZihlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgfQogICAgfQogICAgaWYoZXZ0LnRhcmdldC5kYXRhc2V0LmludGFiID09PSAnMScpewogICAgICAvL+WmguaenOmhtemdouacieaSreaUvueql+WPoyzlj6rpnIDmm7TmlrDmkq3mlL7nqpflj6PnmoQgc3JjLCDlpoLmnpzmsqHmnInmkq3mlL7nqpflj6Ms6K+75Y+W5pKt5pS+56qX5Y+j5L2N572u5L+h5oGvLOaWsOW7uuS4gOS4quaSreaUvueqlwogICAgICBpZihxKCcjVE1IWWlmcmFtZScpID09PSBudWxsKXsKICAgICAgICBHTWdldFZhbHVlKCdpbnRhYlNpemUnLCd7ImhlaWdodCI6IiIsIndpZHRoIjoiIiwibGVmdCI6IiIsInRvcCI6IiJ9JykudGhlbigocG9zaXRpb24pPT57CiAgICAgICAgICB2YXIgc3R5ID0gSlNPTi5wYXJzZShwb3NpdGlvbik7CiAgICAgICAgICBzdHkgPSAnaGVpZ2h0Oicrc3R5LmhlaWdodCsnO3dpZHRoOicrc3R5LndpZHRoKyc7bGVmdDonK3N0eS5sZWZ0Kyc7dG9wOicrc3R5LnRvcCsnOyc7CiAgICAgICAgICB2YXIgYSA9IG1ha2VFbCgnZGl2Jyk7CiAgICAgICAgICBhLmlkID0gJ1RNSFl2aWRlb0NvbnRhaW5lcic7CiAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHkpOwogICAgICAgICAgYS5pbm5lckhUTUwgPSAnPGJ1dHRvbiB0aXRsZT0i5YWz6ZetIiBpZD0iVE1IWUlmcmFtZUNsb3NlIj4mIzEyODQ3Mzs8L2J1dHRvbj48YnV0dG9uIGlkPSJUTUhZZnVsbFNjcmVlbiIgdGl0bGU9IuWFqOWxjyI+JiMxMjg0NzA7PC9idXR0b24+JzsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICB2YXIgYj1tYWtlRWwoJ2lmcmFtZScpOwogICAgICAgICAgYi5pZD0nVE1IWWlmcmFtZSc7CiAgICAgICAgICBiLnNyYz1ldnQudGFyZ2V0LmRhdGFzZXQudXJsICsgbG9jYXRpb24uaHJlZjsKICAgICAgICAgIHEoJyNUTUhZdmlkZW9Db250YWluZXInKS5hcHBlbmRDaGlsZChiKTsKICAgICAgICAgIHEoJyNUTUhZSWZyYW1lQ2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChxKCcjVE1IWXZpZGVvQ29udGFpbmVyJykpO30sIGZhbHNlKTsKICAgICAgICAgIHEoJyNUTUhZZnVsbFNjcmVlbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntsYXVuY2hGdWxsU2NyZWVuKHEoJyNUTUhZaWZyYW1lJykpO30sIGZhbHNlKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlewogICAgICAgIHEoJyNUTUhZaWZyYW1lJykuc3JjPWV2dC50YXJnZXQuZGF0YXNldC51cmwgKyBsb2NhdGlvbi5ocmVmOwogICAgICB9CiAgICB9IGVsc2V7CiAgICAgIC8v5LiN6YCC5ZCI6aG15YaF5pKt5pS+55qELOaJk+W8gOaWsOagh+etvgogICAgICB3aW5kb3cub3BlbihldnQudGFyZ2V0LmRhdGFzZXQudXJsICsgbG9jYXRpb24uaHJlZik7CiAgICB9CiAgfQogIC8v5L+d5a2Y5bWM5YWl6aG16Z2i5aSn5bCP5L2N572u6K6+572uCiAgZnVuY3Rpb24gc2F2ZUluVGFiU2V0dGluZygpewogICAgdmFyIGludGFiU2l6ZSA9IHsKICAgICAgaGVpZ2h0OnEoJyNUTXBIJykudmFsdWUsCiAgICAgIHdpZHRoOnEoJyNUTXBXJykudmFsdWUsCiAgICAgIGxlZnQ6cSgnI1RNcEwnKS52YWx1ZSwKICAgICAgdG9wOnEoJyNUTXBUJykudmFsdWUKICAgIH07CiAgICBHTXNldFZhbHVlKCdpbnRhYlNpemUnLCBKU09OLnN0cmluZ2lmeShpbnRhYlNpemUpKTsKICAgIHNldFRpbWVvdXQoJ2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocSgiI1RNSFlTZXR0aW5nIikpOycsIDMwKTsKICB9CiAgLy/nlJ/miJAi5bWM5YWl6aG16Z2i5aSn5bCP5L2N572u6K6+572uIumdouadvwogIGZ1bmN0aW9uIGludGFiU2V0dGluZygpewogICAgdmFyIGludGFiU2l6ZSA9IEdNZ2V0VmFsdWUoJ2ludGFiU2l6ZScsJ3siaGVpZ2h0IjoiIiwid2lkdGgiOiIiLCJsZWZ0IjoiIiwidG9wIjoiIn0nKQogICAgLnRoZW4oKGFnKT0+ewogICAgICB2YXIgYSA9IG1ha2VFbCgnZGl2Jyk7CiAgICAgIGEuaWQ9J1RNSFlTZXR0aW5nJzsKICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ1RNSFlwJyk7CiAgICAgIGEuaW5uZXJIVE1MID0gYAogICAgICA8YnV0dG9uIGNsYXNzPSJUTUhZQ2xvc2UiIG9uY2xpY2s9ImRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5wYXJlbnROb2RlKSI+JiMxMjg0NzM7PC9idXR0b24+CiAgICAgIDxmaWVsZHNldD4KICAgICAgICA8bGVnZW5kPumhteWGheaSreaUvueql+WPo+S9jee9ruWkp+WwjzwvbGVnZW5kPgogICAgICAgIDxsYWJlbCBmb3I9IlRNcEgiPjxzcGFuIGNsYXNzPSJUTUhZc3BhbjgwIj7pq5jluqY8L3NwYW4+PGlucHV0IHR5cGU9InRleHQiIGlkPSJUTXBIIiB2YWx1ZT0iJHtpbnRhYlNpemUuaGVpZ2h0fSIgIGNsYXNzPSJUTUhZbXRpIiBwbGFjZWhvbGRlcj0n5aaCIjMwMHB4IuaIluiAhSI2NSUiJy8+PC9sYWJlbD4KICAgICAgICA8bGFiZWwgZm9yPSJUTXBXIj48c3BhbiBjbGFzcz0iVE1IWXNwYW44MCI+5a695bqmPC9zcGFuPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iVE1wVyIgdmFsdWU9IiR7aW50YWJTaXplLndpZHRofSIgIGNsYXNzPSJUTUhZbXRpIiBwbGFjZWhvbGRlcj0n5aaCIjMwMHB4IuaIluiAhSI2NSUiJy8+PC9sYWJlbD48YnIgLz4KICAgICAgICA8bGFiZWwgZm9yPSJUTXBMIj48c3BhbiBjbGFzcz0iVE1IWXNwYW44MCI+5bem6L656LedPC9zcGFuPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iVE1wTCIgdmFsdWU9IiR7aW50YWJTaXplLmxlZnR9IiAgY2xhc3M9IlRNSFltdGkiIHBsYWNlaG9sZGVyPSflpoIiMzAwcHgi5oiW6ICFIjY1JSInLz48L2xhYmVsPgogICAgICAgIDxsYWJlbCBmb3I9IlRNcFQiPjxzcGFuIGNsYXNzPSJUTUhZc3BhbjgwIj7kuIrovrnot508L3NwYW4+PGlucHV0IHR5cGU9InRleHQiIGlkPSJUTXBUIiB2YWx1ZT0iJHtpbnRhYlNpemUudG9wfSIgIGNsYXNzPSJUTUhZbXRpIiBwbGFjZWhvbGRlcj0n5aaCIjMwMHB4IuaIluiAhSI2NSUiJy8+PC9sYWJlbD4KICAgICAgPC9maWVsZHNldD4KICAgICAgPGJ1dHRvbiBvbmNsaWNrPSIoZnVuY3Rpb24oKXt2YXIgYT1nZXRDb21wdXRlZFN0eWxlKHEoJyNUTUhZdmlkZW9Db250YWluZXInKSk7cSgnI1RNcEgnKS52YWx1ZT1hLmhlaWdodCxxKCcjVE1wVycpLnZhbHVlPWEud2lkdGgscSgnI1RNcEwnKS52YWx1ZT1hLmxlZnQscSgnI1RNcFQnKS52YWx1ZT1hLnRvcDt9KSgpIj7ojrflj5blvZPliY3mkq3mlL7nqpflsLrlr7g8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBpZD0iaW50YWJTZXR0aW5nUHJldmlldyIgb25jbGljaz0iKGZ1bmN0aW9uKCl7YT1xKCcjVE1IWXZpZGVvQ29udGFpbmVyJykuc3R5bGUuY3NzVGV4dD0naGVpZ2h0OicrcSgnI1RNcEgnKS52YWx1ZSsnO3dpZHRoOicrcSgnI1RNcFcnKS52YWx1ZSsnO2xlZnQ6JytxKCcjVE1wTCcpLnZhbHVlKyc7dG9wOicrcSgnI1RNcFQnKS52YWx1ZSsnOyc7fSkoKSI+6aKE6KeIPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9ImludGFiU2V0dGluZ1NhdmUiPuS/neWtmDwvYnV0dG9uPgogICAgICBgOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICBxKCcjaW50YWJTZXR0aW5nU2F2ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZUluVGFiU2V0dGluZywgZmFsc2UpOwogICAgfSk7CiAgfQogIC8v5qOA5p+l5piv5ZCm5Yu+6YCJ6aG15YaF6Kej5p6QCiAgZnVuY3Rpb24gbm9OZXdUYWJDaGVjaygpIHsKICAgIHZhciB4LCBhcnIgPSBxYSgiLlRNNCBsaSIpOwogICAgcmVwbGFjZVJhdyA9IHEoIiNpbnRhYkNoZWtieCIpLmNoZWNrZWQ7CiAgICBHTXNldFZhbHVlKCJyZXBsYWNlUmF3IiwgcmVwbGFjZVJhdyk7CiAgICBmb3IgKHggPSAwOyB4IDwgYXJyLmxlbmd0aDsgeCsrKSB7CiAgICAgIGlmIChyZXBsYWNlUmF3KSB7CiAgICAgICAgYXJyW3hdLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgb3BlbkluVGFiLCBmYWxzZSk7CiAgICAgICAgYXJyW3hdLnNldEF0dHJpYnV0ZSgnb25jbGljaycsICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhcnJbeF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBvcGVuSW5UYWIsIGZhbHNlKTsKICAgICAgICBhcnJbeF0uc2V0QXR0cmlidXRlKCdvbmNsaWNrJywgJ3dpbmRvdy5vcGVuKHRoaXMuZGF0YXNldC51cmwgKyBsb2NhdGlvbi5ocmVmKScpOwogICAgICB9CiAgICB9CiAgfQogIC8qIOeIseWlh+iJuuato+ehrumAiembhiAqLwogIGZ1bmN0aW9uIHJpZ2h0RXBzTGlua0NoZWNrKCkgewogICAgZXBpc29kZXMgPSBxKCIjcmVhbExpbmtDaGVrYngiKS5jaGVja2VkOwogICAgR01zZXRWYWx1ZSgiZXBpc29kZXMiLCBlcGlzb2Rlcyk7CiAgICB0cnkgewogICAgICBpZiAoZXBpc29kZXMpIHsKICAgICAgICBxKCcjd2lkZ2V0LWRyYW1hc2VyaWVzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBnZXRMaW5rKGUpIHsKICAgICAgICAvLy0tLS0tLS0tLS0tLS1pcWl5aeWJp+mbhuecn+WunuaSreaUvumhtemdouaWueazlSAgQmVnaW4tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvL0NvZGUgcGllY2UgaW5mb21hdGlvbjoKICAgICAgICAvL0xpY2Vuc2U6TUlUICAgQXV0aG9yOmhvb3RoaW4gIEhvbWVwYWdlOiBodHRwOi8vaG9vdGhpbi5jb20gIEVtYWlsOiByaXhpeGlAZ21haWwuY29tCiAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQucGFyZW50Tm9kZS50YWdOYW1lID09ICJMSSIgPyBlLnRhcmdldC5wYXJlbnROb2RlIDogKGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS50YWdOYW1lID09ICJMSSIgPyBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUgOiBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CiAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgIT0gIkxJIikgcmV0dXJuOwogICAgICAgICAgR014bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgIHVybDogImh0dHA6Ly9jYWNoZS52aWRlby5xaXlpLmNvbS9qcC92aS8iICsgdGFyZ2V0LmRhdGFzZXQudmlkZW9saXN0VHZpZCArICIvIiArIHRhcmdldC5kYXRhc2V0LnZpZGVvbGlzdFZpZCArICIvP2NhbGxiYWNrPWNyYWNrSXFpeWkiLAogICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICAgIHZhciBjcmFja0lxaXlpID0gZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IGQudnU7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBldmFsKHJlc3VsdC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAvLy0tLS0tLS0tLS0tLS1pcWl5aeWJp+mbhuecn+WunuaSreaUvumhtemdouaWueazlSAgRW5kLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcSgnI3dpZGdldC1kcmFtYXNlcmllcycpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2V0TGluayk7CiAgICAgIH0KICAgIH0gY2F0Y2goZSkge30KICB9CiAgLyog5Yu+6YCJ6Ieq5a6a5LmJ5o6l5Y+jICovCiAgZnVuY3Rpb24gYWRkQXBpQ2hlY2soKSB7CiAgICB1c2VyQXBpc09uID0gcSgnI2FkZEFwaUNoZWtCeCcpLmNoZWNrZWQ7CiAgICBHTXNldFZhbHVlKCd1c2VyQXBpc09uJywgdXNlckFwaXNPbik7CiAgICBpZih1c2VyQXBpc09uKSB7CiAgICAgIHNlbGZEZWZpbmUoKTsKICAgICAgc2V0VGltZW91dChzaG93QWRkQXBpUGFuZWwsIDIwMCk7CiAgICB9CiAgfQogIC8qICDmiafooYwgICovCiAgdmFyIGRpdiA9IG1ha2VFbCgiZGl2Iik7CiAgZGl2LmlkID0gIlRNSFlkIjsKICB2YXIgdHh0ID0gJycsIGkgPSAwOwogIC8q5o+Q5L6b55qE5o6l5Y+j5YiX6KGoKi8KICBmb3IgKGkgaW4gYXBpcykgewogICAgdHh0ICs9IGA8bGkgZGF0YS1vcmRlcj0ke2l9IGRhdGEtdXJsPSIke2FwaXNbaV0udXJsfSIgZGF0YS1pbnRhYj0ke2FwaXNbaV0uaW50YWJ9IHRpdGxlPSIke2FwaXNbaV0udGl0bGV9IiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLmRhdGFzZXQudXJsK2xvY2F0aW9uLmhyZWYpIj4ke2FwaXNbaV0ubmFtZX08L2xpPmA7CiAgfQogIGRpdi5pbm5lckhUTUwgPSBgCiAgICA8dWwgaWQ9IlRNSFl1bCI+CiAgICAgIDxsaSBjbGFzcz0iVE0xIj48c3BhbiBpZD0iVE1MaXN0IiAgdGl0bGU9IiR7ZGVmYXVsdGFwaS50aXRsZX0iIG9uY2xpY2s9IndpbmRvdy5vcGVuKFwnJHtkZWZhdWx0YXBpLnVybH1cJyt3aW5kb3cubG9jYXRpb24uaHJlZikiPuKWtjwvc3Bhbj48dWwgY2xhc3M9IlRNMyBUTTQiPiR7dHh0fTwvdWw+PC9saT4KICAgICAgPGxpIGNsYXNzPSJUTTEiPjxzcGFuIGlkPSJUTVNldCI+4pajPC9zcGFuPjx1bCBjbGFzcz0iVE0zIj4KICAgICAgICA8bGk+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImludGFiQ2hla2J4Ij7mnKzpobXop6PmnpA8L2xhYmVsPjwvbGk+CiAgICAgICAgPGxpPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJyZWFsTGlua0NoZWtieCI+54ix5aWH6Im65q2j56Gu6YCJ6ZuGPC9sYWJlbD48L2xpPgogICAgICAgIDxsaT48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJhZGRBcGlDaGVrQngiPjxsYWJlbCBpZD0iYWRkQXBpQnRuIj7lop7liqDmjqXlj6M8L2xhYmVsPjwvbGk+CiAgICAgICAgPGxpPjxsYWJlbCBpZD0iaW50YWJTZXR0aW5nQnRuIj7mnKzpobXmkq3mlL7orr7nva48L2xhYmVsPjwvbGk+CiAgICAgIDwvdWw+PC9saT4KICAgIDwvdWw+CiAgYDsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7CiAgcSgiI2FkZEFwaUNoZWtCeCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFkZEFwaUNoZWNrLCBmYWxzZSk7CiAgLy8gcSgiI2FkZEFwaUNoZWtCeCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkQXBpQ2hlY2ssIGZhbHNlKTsKICBHTWdldFZhbHVlKCd1c2VyQXBpc09uJyxmYWxzZSkKICAudGhlbigoYWcpPT57CiAgICB1c2VyQXBpc09uID0gYWc7CiAgICBxKCIjYWRkQXBpQ2hla0J4IikuY2hlY2tlZCA9IHVzZXJBcGlzT247CiAgICAvKueci+eci+aYr+WQpumcgOimgeWKoOi9veiHquWumuS5ieeahOaOpeWPo+WIl+ihqCovCiAgICBpZiAodXNlckFwaXNPbikgewogICAgICBHTWdldFZhbHVlKCd1c2VyQXBpcycsICJbe31dIikudGhlbigoYWcxKT0+ewogICAgICAgIHZhciB1c2VyQXBpcyA9IEpTT04ucGFyc2UoYWcxKSwgdHh0PScnOwogICAgICAgIGZvciAodmFyIGogaW4gdXNlckFwaXMpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh1c2VyQXBpc1tqXS5saW5rICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgdHh0ICs9IGA8bGkgZGF0YS1vcmRlcj0ke2p9IGRhdGEtdXJsPSIke3VzZXJBcGlzW2pdLmxpbmt9IiAgZGF0YS1pbnRhYj0ke3VzZXJBcGlzW2pdLmludGFifSBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLmRhdGFzZXQudXJsK2xvY2F0aW9uLmhyZWYpIj4ke3VzZXJBcGlzW2pdLm5hbWV9PC9saT5gOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7Lypjb25zb2xlLmxvZyhlKTsqL30KICAgICAgICB9CiAgICAgICAgcSgndWwuVE0zLlRNNCcpLmlubmVySFRNTCA9IHR4dCArIHEoJ3VsLlRNMy5UTTQnKS5pbm5lckhUTUw7CiAgICAgICAgc2VsZkRlZmluZSgpOwogICAgICB9KTsKICAgIH0KICB9KQogIC50aGVuKCgpPT57CiAgICBxKCIjaW50YWJDaGVrYngiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIG5vTmV3VGFiQ2hlY2ssIGZhbHNlKTsKICAgIEdNZ2V0VmFsdWUoJ3JlcGxhY2VSYXcnLGZhbHNlKS50aGVuKChhZyk9PnsKICAgICAgcmVwbGFjZVJhdyA9IGFnOwogICAgICBxKCIjaW50YWJDaGVrYngiKS5jaGVja2VkID0gcmVwbGFjZVJhdzsKICAgICAgaWYgKHJlcGxhY2VSYXcpIHsKICAgICAgICBub05ld1RhYkNoZWNrKCk7CiAgICAgIH0KICAgIH0pOwogICAgcSgiI3JlYWxMaW5rQ2hla2J4IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCByaWdodEVwc0xpbmtDaGVjaywgZmFsc2UpOwogICAgR01nZXRWYWx1ZSgnZXBpc29kZXMnLGZhbHNlKS50aGVuKChhZyk9PnsKICAgICAgZXBpc29kZXMgPSBhZzsKICAgICAgcSgiI3JlYWxMaW5rQ2hla2J4IikuY2hlY2tlZCA9IGVwaXNvZGVzOwogICAgICBpZiAoZXBpc29kZXMgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiaXFpeWkiKSAhPSAtMSkgewogICAgICAgIHJpZ2h0RXBzTGlua0NoZWNrKCk7CiAgICAgIH0KICAgIH0pOwogICAgcSgiI2FkZEFwaUJ0biIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0FkZEFwaVBhbmVsLCBmYWxzZSk7CiAgICBxKCIjaW50YWJTZXR0aW5nQnRuIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRhYlNldHRpbmcsIGZhbHNlKTsKICB9KTsKCi8qKiAyMDE3LTEwLTI0ICDoh6rlrprkuYnop6PmnpDmjqXlj6MgICovCi8qICDmmL7npLrlop7liqDmjqXlj6PnmoTpnaLmnb8gICovCiAgZnVuY3Rpb24gc2hvd0FkZEFwaVBhbmVsKCkgewogICAgaWYgKHEoJyN0TXVzZXJEZWZpbmUnKSkgewogICAgICBxKCcjdE11c2VyRGVmaW5lJykuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICB9IGVsc2UgewogICAgICBhbGVydChgKOKXj++/oyjvvbQp77+j4pePKeOBpVxuXG7mnKrlkK/nlKhb5aKe5Yqg5o6l5Y+jXeWKn+iDvVxu6K+35oqKICfilqPlop7liqDmjqXlj6Mn4oaSJ+KYkeWinuWKoOaOpeWPoychYCk7CiAgICB9CiAgfQovKiAg55Sf5oiQ5aKe5Yqg5o6l5Y+j6Z2i5p2/ICAqLwogIGZ1bmN0aW9uIHNlbGZEZWZpbmUoKSB7CiAgICB2YXIgYSA9IG1ha2VFbCgnZGl2Jyk7CiAgICBhLmlkID0gJ3RNdXNlckRlZmluZSc7CiAgICBhLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnVE1IWXAnKTsKICAgIGEuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5Om5vbmUnKTsKICAgIHZhciB0eHQgPSBgCiAgICAgIDxidXR0b24gY2xhc3M9IlRNSFlDbG9zZSIgb25jbGljaz0icSgnI3RNdXNlckRlZmluZScpLnN0eWxlLmRpc3BsYXk9J25vbmUnOyI+8J+XmTwvYnV0dG9uPgogICAgICA8bGk+PHNwYW4gY2xhc3M9IlRNSFlzcGFuMTIwIj7op6PmnpDmjqXlj6PlkI3np7A6PC9zcGFuPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idE1uYW1lIiBjbGFzcz0iVE1IWWx0aSIgcGxhY2Vob2xkZXI9IuaYvuekuueahOWQjeensCI+PC9saT4KICAgICAgPGxpPjxzcGFuIGNsYXNzPSJUTUhZc3BhbjEyMCI+6Kej5p6Q5o6l5Y+j5Zyw5Z2AOjwvc3Bhbj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRNcGFyc2VMaW5rIiBjbGFzcz0iVE1IWWx0aSIgcGxhY2Vob2xkZXI9IuaOpeWPo+mcgOimgeWMheWQqyBodHRwIOaIluiAhSBodHRwcyI+PC9saT4KICAgICAgPGxpPjxzcGFuIGNsYXNzPSJUTUhZc3BhbjgwIj7mnKzpobXop6PmnpA6PC9zcGFuPjxsYWJlbCBmb3I9InRNaW50YWJja2J4Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ0TWludGFiY2tieCIvPumAguWQiDwvbGFiZWw+PC9saT4KICAgICAgPGxpIGlkPSJ0TWJ0bkxpIj4KICAgICAgICA8YnV0dG9uIGlkPSJ0TWdvIiBvbmNsaWNrPSJ3aW5kb3cub3BlbihxKCcjdE1wYXJzZUxpbmsnKS52YWx1ZStsb2NhdGlvbi5ocmVmKSI+5rWL6K+VPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0idE1hZGQiPuWinuWKoDwvYnV0dG9uPgogICAgICAgIDxidXR0b24gaWQ9InRNc2F2ZSI+5L+d5a2YPC9idXR0b24+CiAgICAgIDwvbGk+CiAgICBgOwogICAgR01nZXRWYWx1ZSgndXNlckFwaXMnLCAiW3t9XSIpLnRoZW4oKGFnKT0+ewogICAgICB2YXIgYXIgPSBKU09OLnBhcnNlKGFnKSxkOwogICAgICB0cnkgewogICAgICAgIGlmIChhclswXS5uYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZCA9IChhcltpXS5pbnRhYj09PSIxIik/J2NoZWNrZWQnOicnOwogICAgICAgICAgICB0eHQgKz0gYDxsaT48c3BhbiBjbGFzcz0iaWRlbGV0ZSIgdGl0bGU9IuWIoOmZpCIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RNdXNlckRlZmluZScpLnJlbW92ZUNoaWxkKHRoaXMucGFyZW50Tm9kZSkiPuKcmDwvc3Bhbj48aW5wdXQgY2xhc3M9ImljaGVjayIgdHlwZT0iY2hlY2tib3giICR7ZH0+PHNwYW4gY2xhc3M9ImluYW1lIj4ke2FyW2ldLm5hbWV9PC9zcGFuPjxzcGFuIGNsYXNzPSJpbGluayI+JHthcltpXS5saW5rfTwvc3Bhbj48L2xpPmA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7fQogICAgICBhLmlubmVySFRNTCA9IHR4dDsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgLyrkuovku7bnu5HlrpoqLwogICAgICBxKCcjdE1zYXZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbmV3UGFyc2VMaW5rcyA9IGdldGFycigpOwogICAgICAgIEdNc2V0VmFsdWUoJ3VzZXJBcGlzJywgSlNPTi5zdHJpbmdpZnkobmV3UGFyc2VMaW5rcykpOwogICAgICAgIGNvbnNvbGUubG9nKG5ld1BhcnNlTGlua3MpOwogICAgICB9LCBmYWxzZSk7CiAgICAgIHEoJyN0TWFkZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHEoJyN0TW5hbWUnKS52YWx1ZSB8fCBxKCcjdE1wYXJzZUxpbmsnKS52YWx1ZSkgewogICAgICAgICAgdmFyIGIgPSBxKCIjdE1pbnRhYmNrYngiKS5jaGVja2VkPyIxIjoiMCI7CiAgICAgICAgICB2YXIgYyA9IHEoIiN0TWludGFiY2tieCIpLmNoZWNrZWQ/ImNoZWNrZWQiOiIiOwogICAgICAgICAgdmFyIGEgPSBtYWtlRWwoJ2xpJyk7CiAgICAgICAgICBhLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz0iaWRlbGV0ZSIgdGl0bGU9IuWIoOmZpCIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RNdXNlckRlZmluZScpLnJlbW92ZUNoaWxkKHRoaXMucGFyZW50Tm9kZSkiPuKcmDwvc3Bhbj48aW5wdXQgY2xhc3M9ImljaGVjayIgdHlwZT0iY2hlY2tib3giICR7Y30+PHNwYW4gY2xhc3M9ImluYW1lIj4ke3EoJyN0TW5hbWUnKS52YWx1ZX06PC9zcGFuPjxzcGFuIGNsYXNzPSJpbGluayI+JHtxKCcjdE1wYXJzZUxpbmsnKS52YWx1ZX08L3NwYW4+YDsKICAgICAgICAgIGlmIChxKCdzcGFuW2NsYXNzPWluYW1lXScpID09PSBudWxsKSB7CiAgICAgICAgICAgIHEoJyN0TXVzZXJEZWZpbmUnKS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgcSgnI3RNbmFtZScpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIHEoJyN0TXBhcnNlTGluaycpLnZhbHVlID0gJyc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBxKCcjdE11c2VyRGVmaW5lJykuaW5zZXJ0QmVmb3JlKGEsIHEoJ3NwYW5bY2xhc3M9aW5hbWVdJykucGFyZW50Tm9kZSk7CiAgICAgICAgICAgIHEoJyN0TW5hbWUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBxKCcjdE1wYXJzZUxpbmsnKS52YWx1ZSA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgZmFsc2UpOwogICAgfSk7CiAgfQovKiAg5L+d5a2Y5oyJ6ZKu5omn6KGM5Ye95pWwOuiOt+WPluWAvOW5tiBhd2FpdCBHTS5zZXRWYWx1ZSgpICAqLwogIGZ1bmN0aW9uIGdldGFycigpIHsKICAgIHZhciB1c2VyVXJsID0gcWEoJy5pbGluaycpOwogICAgdmFyIHVybGFyciA9IFtdLCB0TW5hbWUsIHRNcGFyc2VMaW5rLCB0TWludGFiY2tieDsKICAgIHRNbmFtZSA9IHEoJyN0TW5hbWUnKS52YWx1ZTsKICAgIHRNcGFyc2VMaW5rID0gcSgnI3RNcGFyc2VMaW5rJykudmFsdWU7CiAgICB0TWludGFiY2tieCA9IHEoJyN0TWludGFiY2tieCcpLmNoZWNrZWQ/MTowOwogICAgaWYgKHRNbmFtZSB8fCB0TXBhcnNlTGluaykgewogICAgICB1cmxhcnIucHVzaCh7IG5hbWU6IHRNbmFtZSwgbGluazogdE1wYXJzZUxpbmssIGludGFiOnRNaW50YWJja2J4IH0pOwogICAgfQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2VyVXJsLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBuLCB0LCBsOwogICAgICB0ID0gdXNlclVybFtpXS5pbm5lclRleHQ7CiAgICAgIG4gPSB1c2VyVXJsW2ldLnByZXZpb3VzU2libGluZy5pbm5lclRleHQ7CiAgICAgIGwgPSB1c2VyVXJsW2ldLnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmcuY2hlY2tlZD8nMSc6JzAnOwogICAgICB1cmxhcnIucHVzaCh7IG5hbWU6IG4sIGxpbms6IHQsaW50YWI6bCB9KTsKICAgIH0KICAgIHJldHVybiB1cmxhcnI7CiAgfQovKiogMjAxNy0xMC0yNCAg6Ieq5a6a5LmJ6Kej5p6Q5o6l5Y+jIEVORCAqLwoKfSkoKTsKCi8vIOi1hOa6kOWPguiAg2h0dHA6Ly93d3cuNWlmeHcuY29tL3ZpcC8KLy8g6LWE5rqQ5Y+C6ICDaHR0cDovL2xpdmUuZ29wYXJ0b29rLmNvbS8KLy8g6LWE5rqQ5Y+C6ICDaHR0cDovL3R2LmRzcW5kaC5jb20KLy8g6LWE5rqQ5Y+C6ICDaHR0cDovLzUxLnJ1eW8ubmV0L3AvMzEyNy5odG1sCi8v5pyJ5pWI5oCn5pyq55+lfHzkuI3og73nm7TmjqXlvJXnlKjmjqXlj6MKLy9odHRwOi8vd3d3Lnl5ZHk4LmNvbS9jb21tb24vP3VybD0KLy9ocmVmPSJodHRwOi8vbXQydC5jb20veXVuP3VybD0KLy9odHRwczovL2FwaS40N2tzLmNvbS93ZWJjbG91ZC8/dj0KLy9odHRwOi8vd3d3Lmd1cWlhbmt1bi5jb20vdG9vbHMvdmlwdmlkZW8KLy97bmFtZToiUFUudG4iLHVybDoiaHR0cDovL2FwaS5wdS50bi9xcTEvP3VybD0iLHRpdGxlOiLmja7or7Tlj6/ku6XnnIvkvJjphbfluIPooovmuLjmiI8iLGludGFiOjB9LAovLyB7bmFtZToi6Iie5Yqo56eL5aSpIix1cmw6Imh0dHA6Ly9xdHpyLm5ldC9zLz9xdD0iLHRpdGxlOiJxdHpyLm5ldCIsaW50YWI6MX0sCi8v6L+H5pyf5o6l5Y+jCi8ve25hbWU6IjY1WVciLHVybDoiaHR0cDovL3d3dy42NXl3LmNvbS82NXl3Lz92aWQ9Iix0aXRsZToi5paw5o6l5Y+j77yM56iz5a6a5oCn5pyq55+lIn0sCi8ve25hbWU6Iue0q+eLkCIsdXJsOiJodHRwOi8veXVuLnppaHUudHYvcGxheS5odG1sP3VybD0iLHRpdGxlOiLmlYjmnpzlj6/og73kuI3nqLPlrpoifSwKLy97bmFtZToi5LqR6Kej5p6QIix1cmw6Imh0dHA6Ly93d3cuZWZ1bmZpbG0uY29tL3l1bnBhcnNlL2luZGV4LnBocD91cmw9Iix0aXRsZToi5paw5o6l5Y+j77yM56iz5a6a5oCn5pyq55+lIn0sCi8ve25hbWU6IuWmueWEv+S6kSIsdXJsOiJodHRwczovL3d3dy55eW1laWVyLmNvbS9hcGkucGhwP3VybD0iLHRpdGxlOiLkuI3nqLPlrpoifQovL3tuYW1lOiJW5LqRW+iFvuiur10iLHVybDoiaHR0cDovL3d3dy52aXl1bi5tZS9qaWV4aS5waHA/dXJsPSIsdGl0bGU6IuiFvuiur+mmlumAiSJ9LAovL3tuYW1lOiIxMDA45b2x6KeGIitZb3VrdUljb24sdXJsOiJodHRwOi8vYXBpLjEwMDhuZXQuY29tL3YucGhwP3VybD0iLHRpdGxlOiLmja7or7Tlj6/ku6XnnIvluIPooovmuLjmiI/op4bpopEiLGludGFiOjF9LAovL3tuYW1lOiJGTFZTUFvohb7orq9dIix1cmw6Imh0dHBzOi8vYXBpLmZsdnNwLmNvbS8/dXJsPSIsdGl0bGU6IuaUr+aMgeiFvuiuryIsaW50YWI6MX0sLy/op6PmnpDmupDlkIzkuIo="},{"name":"视频站启用html5播放器","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["*://pan.baidu.com/*","*://yun.baidu.com/*","*://v.qq.com/*","*://v.sports.qq.com/*","*://film.qq.com/*","*://view.inews.qq.com/*","*://news.qq.com/*","https://www.weiyun.com/video_*","*://v.youku.com/v_show/id_*","*://*.tudou.com/v/*","*://www.bilibili.com/*","*://v.163.com/*.html*","*://ent.163.com/*.html*","*://news.163.com/*.html*","*://news.163.com/special/*","*://study.163.com/course/*.htm?courseId=*","*://news.sina.com.cn/*","*://video.sina.com.cn/*","*://video.sina.cn/*","*://weibo.com/*","*://*.weibo.com/*","*://*.le.com/*.html*","*://*.lesports.com/*.html*","*://tv.sohu.com/*.shtml*","*://*.tv.sohu.com/*.shtml*","*://film.sohu.com/album/*","*://www.fun.tv/vplay/*","*://m.fun.tv/*","*://www.yy.com/*","*://www.huya.com/*","https://www.douyu.com/*","https://www.panda.tv/*","*://star.longzhu.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1509007134491},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/30545-%E8%A7%86%E9%A2%91%E7%AB%99%E5%90%AF%E7%94%A8html5%E6%92%AD%E6%94%BE%E5%99%A8/code/%E8%A7%86%E9%A2%91%E7%AB%99%E5%90%AF%E7%94%A8html5%E6%92%AD%E6%94%BE%E5%99%A8.user.js","uuid":"1020d160-f53f-4295-a374-f47cebdd3de7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAg6KeG6aKR56uZ5ZCv55SoaHRtbDXmkq3mlL7lmagKLy8gQGRlc2NyaXB0aW9uICAgICAg5LiJ5aSn5Yqf6IO9IOOAguWQr+eUqGh0bWw15pKt5pS+5Zmo77yb5LiH6IO9572R6aG15YWo5bGP77yb5re75Yqg5b+r5o236ZSu77ya5b+r6L+b44CB5b+r6YCA44CB5pqC5YGcL+aSreaUvuOAgemfs+mHj+OAgeS4i+S4gOmbhuOAgeWIh+aNoijnvZHpobUp5YWo5bGP44CB5LiK5LiL5bin44CB5pKt5pS+6YCf5bqm44CC5pSv5oyB6KeG6aKR56uZ54K577ya5LyYLuWcn+OAgVFR44CBQuermeOAgeaWsOa1quOAgeW+ruWNmuOAgee9keaYk+inhumikVvlqLHkuZDjgIHkupHor77loILjgIHmlrDpl7td44CB5pCc54uQ44CB5LmQ6KeG44CB6aOO6KGM44CB55m+5bqm5LqR6KeG6aKR562J77yb55u05pKt77ya5paX6bG844CB54aK54yr44CBWVnjgIHomY7niZnjgIHpvpnnj6DjgILlj6/oh6rlrprkuYnnq5nngrkKLy8gQHZlcnNpb24gICAgICAgICAgMC44MwovLyBAaG9tZXBhZ2UgICAgICAgICBodHRwOi8vYmJzLmthZmFuLmNuL3RocmVhZC0yMDkzMDE0LTEtMS5odG1sCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly9wYW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vdi5xcS5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vdi5zcG9ydHMucXEuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL2ZpbG0ucXEuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL3ZpZXcuaW5ld3MucXEuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL25ld3MucXEuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgaHR0cHM6Ly93d3cud2VpeXVuLmNvbS92aWRlb18qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly92LnlvdWt1LmNvbS92X3Nob3cvaWRfKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vKi50dWRvdS5jb20vdi8qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly93d3cuYmlsaWJpbGkuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL3YuMTYzLmNvbS8qLmh0bWwqCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly9lbnQuMTYzLmNvbS8qLmh0bWwqCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly9uZXdzLjE2My5jb20vKi5odG1sKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vbmV3cy4xNjMuY29tL3NwZWNpYWwvKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vc3R1ZHkuMTYzLmNvbS9jb3Vyc2UvKi5odG0/Y291cnNlSWQ9KgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vbmV3cy5zaW5hLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly92aWRlby5zaW5hLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly92aWRlby5zaW5hLmNuLyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL3dlaWJvLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly8qLndlaWJvLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly8qLmxlLmNvbS8qLmh0bWwqCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly8qLmxlc3BvcnRzLmNvbS8qLmh0bWwqCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly90di5zb2h1LmNvbS8qLnNodG1sKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vKi50di5zb2h1LmNvbS8qLnNodG1sKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgICAgICAgICo6Ly93d3cuZnVuLnR2L3ZwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL20uZnVuLnR2LyoKLy8gQGluY2x1ZGUgICAgICAgICAgKjovL3d3dy55eS5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vd3d3Lmh1eWEuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgaHR0cHM6Ly93d3cuZG91eXUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgICAgaHR0cHM6Ly93d3cucGFuZGEudHYvKgovLyBAaW5jbHVkZSAgICAgICAgICAqOi8vc3Rhci5sb25nemh1LmNvbS8qCi8vIEBncmFudCAgICAgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgIEdNX2dldFZhbHVlCi8vIEBydW4tYXQgICAgICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBuYW1lc3BhY2UgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvdXNlcnMvNzAzNgovLyA9PS9Vc2VyU2NyaXB0PT0KJ3VzZSBzdHJpY3QnOwppZiAod2luZG93LmNocm9tZSkKCU5vZGVMaXN0LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXTsKCmNvbnN0IHcgPSB1bnNhZmVXaW5kb3csCm5vb3BGbiA9ICgpID0+IHt9LApxID0gY3NzID0+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY3NzKSwKJCQgPSAoYywgY2IgPSBlPT5lLnJlbW92ZSgpKSA9PiB7CglpZiAoIWMubGVuZ3RoKSByZXR1cm47CglpZiAodHlwZW9mIGMgPT09ICdzdHJpbmcnKQoJCWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGMpOwoJaWYgKGNiKSBmb3IgKGxldCBlIG9mIGMpIHsKCQlpZiAoZSAmJiBjYihlKT09PWZhbHNlKSBicmVhazsKCX0KCXJldHVybiBjOwp9LApyMSA9IChyZWdwLCBzKSA9PiByZWdwLnRlc3QocykgJiYgUmVnRXhwLiQxLApzbGVlcCA9IG1zID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewoJc2V0VGltZW91dChyZXNvbHZlLCBtcyk7Cn0pLApnZXRTdHlsZSA9IChvLCBzKSA9PiB7CiAgICBpZiAoby5zdHlsZVtzXSkgcmV0dXJuIG8uc3R5bGVbc107CiAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZSkgey8vRE9NCgkJdmFyIHggPSBnZXRDb21wdXRlZFN0eWxlKG8sICcnKTsKCQkvL3MgPSBzLnJlcGxhY2UoLyhbQS1aXSkvZywnLSQxJykudG9Mb3dlckNhc2UoKTsKCQlyZXR1cm4geCAmJiB4LmdldFByb3BlcnR5VmFsdWUocyk7Cgl9Cn0sCmluamVjdEpTID0gcyA9PiB7Cgljb25zdCBqcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwoJaWYgKHMuc3RhcnRzV2l0aCgnaHR0cCcpKSBqcy5zcmMgPSBzOwoJZWxzZSBqcy50ZXh0Q29udGVudCA9IHM7Cglkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGpzKTsKfSwKdGhyb3R0bGUgPSBmdW5jdGlvbihmbiwgZGVsYXkgPSAxMDApeyAvL+WHveaVsOiKgua1gQoJbGV0IHRpbWVyID0gbnVsbCwgbWUgPSB0aGlzOwoJcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHsKCQl0aW1lciAmJiBjbGVhclRpbWVvdXQodGltZXIpOwoJCXRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CgkJCWZuLmFwcGx5KG1lLCBhcmdzKTsKCQkJdGltZXIgPSBudWxsOwoJCX0sIGRlbGF5KTsKCX07Cn0sCndpbGxSZW1vdmUgPSB0aHJvdHRsZSgkJCksLy/lpJrlpITlkIzml7bosIPnlKjml7bpobvpmLLmraLlrprml7blmajlhrLnqoEKZG9DbGljayA9IGUgPT4gewoJaWYgKGUpIHsgZS5jbGljayA/IGUuY2xpY2soKSA6IGUuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnY2xpY2snKSkgfTsKfSwKdW5kZXJGaXJlZm94NTcgPSAoKCkgPT4gewoJY29uc3QgeCA9IHIxKC9GaXJlZm94XC8oXGQrKS8sIG5hdmlnYXRvci51c2VyQWdlbnQpOwoJcmV0dXJuIHggJiYgeCA8IDU3Owp9KSgpLApmYWtlVUEgPSB1YSA9PiBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAndXNlckFnZW50JywgewoJdmFsdWU6IHVhLAoJd3JpdGFibGU6IGZhbHNlLAoJY29uZmlndXJhYmxlOiBmYWxzZSwKCWVudW1lcmFibGU6IHRydWUKfSksCmdldE1haW5Eb21haW4gPSBob3N0ID0+IHsKCWxldCBhID0gaG9zdC5zcGxpdCgnLicpLAoJaSA9IGEubGVuZ3RoIC0yOwoJaWYgKFsnY29tJywndHYnLCduZXQnLCdvcmcnLCdnb3YnLCdlZHUnXS5pbmNsdWRlcyhhW2ldKSkgaS0tOwoJcmV0dXJuIGFbaV07Cn0sCnVhX3NhbXN1bmcgPSAnTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMC40OyBHVC1JOTMwMCBCdWlsZC9JTU03NkQpIEFwcGxlV2ViS2l0LzUzNC4zMCBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC4zMCcsCnVhX2Nocm9tZSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NClBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNjIuMC4zMjAyLjknLAp1YV9pcGFkMiA9ICdNb3ppbGxhLzUuMCAoaVBhZDsgQ1BVIE9TIDVfMCBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMSBNb2JpbGUvOUEzMzQgU2FmYXJpLzc1MzQuNDguMyc7CgpjbGFzcyBGdWxsU2NyZWVuIHsKCWNvbnN0cnVjdG9yKHZpZGVvKSB7CgkJdGhpcy5fdmlkZW8gPSB2aWRlbzsKCQljb25zdCBkID0gZG9jdW1lbnQ7CgkJdGhpcy5fZXhpdEZuID0gZC5leGl0RnVsbHNjcmVlbiB8fCBkLndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8IGQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fCBkLm1zRXhpdEZ1bGxzY3JlZW47CgoJCWNvbnN0IGUgPSB2aWRlbzsKCQl0aGlzLl9lbnRlckZuID0gZS5yZXF1ZXN0RnVsbHNjcmVlbiB8fCBlLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIHx8IGUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgZS5tc1JlcXVlc3RGdWxsU2NyZWVuOwoJfQoKCXN0YXRpYyBpc0Z1bGwoKSB7CgkJY29uc3QgZCA9IGRvY3VtZW50OwoJCXJldHVybiAhIShkLmZ1bGxzY3JlZW4gfHwgZC53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgZC5tb3pGdWxsU2NyZWVuIHx8CgkJZC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkLndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50IHx8IGQubW96RnVsbFNjcmVlbkVsZW1lbnQpOwoJfQoKCWVudGVyKCkgewoJCXRoaXMuX2VudGVyRm4gJiYgdGhpcy5fZW50ZXJGbi5jYWxsKHRoaXMuX3ZpZGVvKTsKCX0KCglleGl0KCkgewoJCXRoaXMuX2V4aXRGbiAmJiB0aGlzLl9leGl0Rm4uY2FsbChkb2N1bWVudCk7Cgl9CgoJdG9nZ2xlKCkgewoJCUZ1bGxTY3JlZW4uaXNGdWxsKCkgPyB0aGlzLmV4aXQoKSA6IHRoaXMuZW50ZXIoKTsKCX0KfQoKLy/kuIfog73nvZHpobXlhajlsY8s5Luj56CB5Y+C6ICD5LqG77yaaHR0cHM6Ly9naXRodWIuY29tL2dvb3lpZS95a2g1cApjbGFzcyBGdWxsUGFnZSB7Cgljb25zdHJ1Y3Rvcih2aWRlbykgewoJCXRoaXMuX3ZpZGVvID0gdmlkZW87CgkJY29uc29sZS5sb2codmlkZW8pOwoJCXRoaXMuX2NoZWNrQ29udGFpbmVyKCk7CgkJR01fYWRkU3R5bGUoYAoJCQkuei10b3AgewoJCQkJcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CgkJCQl6LWluZGV4OiAyMzMzMzMzMyAhaW1wb3J0YW50OwoJCQl9CgkJCS53ZWJmdWxsc2NyZWVuIHsKCQkJCWRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CgkJCQlwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsKCQkJCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CgkJCQloZWlnaHQ6IDEwMCUgIWltcG9ydGFudDsKCQkJCXRvcDogMCAhaW1wb3J0YW50OwoJCQkJbGVmdDogMCAhaW1wb3J0YW50OwoJCQkJYmFja2dyb3VuZDogIzAwMCAhaW1wb3J0YW50OwoJCQkJei1pbmRleDogMjMzMzMzMzMgIWltcG9ydGFudDsKCQkJfQoJCWApOwoJfQoKCV9jaGVja0NvbnRhaW5lcigpIHsKCQljb25zdCBlID0gdGhpcy5fdmlkZW87CgkJaWYgKCF0aGlzLl9jb250YWluZXIgfHwgdGhpcy5fY29udGFpbmVyID09PSBlKQoJCQl0aGlzLl9jb250YWluZXIgPSBGdWxsUGFnZS5nZXRQbGF5ZXJDb250YWluZXIoZSk7Cgl9CgoJZ2V0IGNvbnRhaW5lcigpIHsKCQl0aGlzLl9jaGVja0NvbnRhaW5lcigpOwoJCXJldHVybiB0aGlzLl9jb250YWluZXI7Cgl9CgoJc3RhdGljIGdldFBsYXllckNvbnRhaW5lcih2aWRlbykgewoJCWxldCBkID0gZG9jdW1lbnQuYm9keSwKCQllID0gdmlkZW8sCgkJcCA9IGUucGFyZW50Tm9kZTsKCQlpZiAocCA9PT0gZCkgcmV0dXJuIGU7CgkJY29uc3QgdyA9IHAuY2xpZW50V2lkdGgsCgkJaCA9IHAuY2xpZW50SGVpZ2h0OwoJCWRvIHsKCQkJZSA9IHA7CgkJCXAgPSBlLnBhcmVudE5vZGU7CgkJfSB3aGlsZSAocCAhPT0gZCAmJiBwLmNsaWVudFdpZHRoIC0gdyA8IDUgJiYgcC5jbGllbnRIZWlnaHQgLSBoIDwgNSk7CgkJcmV0dXJuIGU7Cgl9CgoJZml4VmlldygpIHsKCQlsZXQgZSA9IHRoaXMuX3ZpZGVvLCBjID0gdGhpcy5fY29udGFpbmVyOwoJCWlmIChlID09PSBjKSByZXR1cm47CgkJaWYgKGUuY2xpZW50V2lkdGggPCBjLmNsaWVudFdpZHRoIHx8IGUuY2xpZW50SGVpZ2h0IDwgYy5jbGllbnRIZWlnaHQpIHsKCQkJbGV0IGEgPSBbXTsKCQkJd2hpbGUgKGUgIT09IGMpIHsKCQkJCWEucHVzaChlKTsKCQkJCWUgPSBlLnBhcmVudE5vZGU7CgkJCX0KCQkJd2hpbGUgKGUgPSBhLnBvcCgpKSBlLnN0eWxlLndpZHRoID0gZS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7CgkJfQoJfQoKCXN0YXRpYyBpc0Z1bGwodmlkZW8pIHsKCQlyZXR1cm4gd2luZG93LmlubmVyV2lkdGggLXZpZGVvLmNsaWVudFdpZHRoIDwgNSAmJiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB2aWRlby5jbGllbnRIZWlnaHQgPCA1OwoJfQoKCXRvZ2dsZSgpIHsKCQljb25zdCBkID0gZG9jdW1lbnQuYm9keSwKCQlzdGF0ZSA9IEZ1bGxQYWdlLmlzRnVsbCh0aGlzLmNvbnRhaW5lcik7CgkJZC5zdHlsZS5vdmVyZmxvdyA9IHN0YXRlID8gJycgOiAnaGlkZGVuJzsKCQl0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCd3ZWJmdWxsc2NyZWVuJyk7CgoJCWxldCBwID0gdGhpcy5jb250YWluZXIucGFyZW50Tm9kZTsKCQl3aGlsZSAocCAhPT0gZCkgewoJCQlwLmNsYXNzTGlzdC50b2dnbGUoJ3otdG9wJyk7CgkJCXAgPSBwLnBhcmVudE5vZGU7CgkJfQoKCQkhc3RhdGUgJiYgc2V0VGltZW91dCh0aGlzLmZpeFZpZXcuYmluZCh0aGlzKSwgOSk7Cgl9Cn0KCmxldCB2LCBfZnAsIF9mczsKCmNvbnN0IHsgaG9zdCwgcGF0aG5hbWU6IHBhdGggfSA9IGxvY2F0aW9uLAp1ID0gZ2V0TWFpbkRvbWFpbihob3N0KSwvL+S4u+Wfn+WQjQovL+WuueWZqO+8jOeZu+iusOS6i+S7tuWkhOeQhuaWueazleS4reeahOWbnuiwgwpldmVudHMgPSB7CglvbihuYW1lLCBmbikgewoJCXRoaXNbbmFtZV0gPSBmbjsKCX0KfSwKYXBwID0gewoJaXNMaXZlOiAhMSwKCXZMaXN0OiBudWxsLAoJZ2V0VmlkZW9zKCkgewoJCXRoaXMudkxpc3QgPSB0aGlzLnZMaXN0IHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpOwoJCWlmICh2Lm9mZnNldFdpZHRoPjEpIHJldHVybjsKCQlmb3IgKGxldCBlIG9mIHRoaXMudkxpc3QpIGlmIChlLm9mZnNldFdpZHRoPjEpIHsKCQkJZS5wbGF5YmFja1JhdGUgPSB2LnBsYXliYWNrUmF0ZTsKCQkJZS52b2x1bWUgPSB2LnZvbHVtZTsKCQkJdiA9IGU7CgkJCWJyZWFrOwoJCX0KCX0sCglfY29udmVydFZpZXcoYnRuKSB7CgkJKCFidG4ubmV4dFNpYmxpbmcgfHwgYnRuLmNsaWVudFdpZHRoID4xIHx8IGdldFN0eWxlKGJ0biwgJ2Rpc3BsYXknKSAhPT0gJ25vbmUnKSA/IGRvQ2xpY2soYnRuKSA6IGRvQ2xpY2soYnRuLm5leHRTaWJsaW5nKTsKCX0sCglvbkNhbnBsYXkoZXYpIHsKCQljb25zb2xlLmxvZygn6ISa5pysW+WQr+eUqGh0bWw15pKt5pS+5ZmoXe+8jOS6i+S7tmxvYWRlZGRhdGEnKTsKCQkvL2lmIChldi50YXJnZXQucmVhZHlTdGF0ZSA+IDIpCgkJZXZlbnRzLmNhbnBsYXkgJiYgZXZlbnRzLmNhbnBsYXkoKTsKCQlldi50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsIHRoaXMub25DYW5wbGF5KTsKCX0sCglob3RLZXkoZSkgewoJCS8v5Yik5patY3RybCxhbHQsc2hpZnTkuInplK7nirbmgIHvvIzpmLLmraLmtY/op4jlmajlv6vmjbfplK7ooqvljaDnlKgKCQlpZiAoZS5jdHJsS2V5IHx8IGUuYWx0S2V5IHx8IC9JTlBVVHxURVhUQVJFQS8udGVzdChlLnRhcmdldC5ub2RlTmFtZSkpCgkJCXJldHVybjsKCQlpZiAoZS5zaGlmdEtleSAmJiAhWzEzLDM3LDM5XS5pbmNsdWRlcyhlLmtleUNvZGUpKQoJCQlyZXR1cm47CgkJaWYgKHRoaXMuaXNMaXZlICYmIFszNywzOSw3OCw4OCw2Nyw5MF0uaW5jbHVkZXMoZS5rZXlDb2RlKSkKCQkJcmV0dXJuOwoJCXRoaXMuZ2V0VmlkZW9zKCk7CgkJdGhpcy5jaGVja1VJKCk7CgkJbGV0IG47CgkJc3dpdGNoIChlLmtleUNvZGUpIHsKCQljYXNlIDMyOiAvL3NwYWNlCgkJCWlmICh0aGlzLmRpc2FibGVTcGFjZSkgcmV0dXJuOwoJCQl2LnBhdXNlZCA/IHYucGxheSgpIDogdi5wYXVzZSgpOwoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCWJyZWFrOwoJCWNhc2UgMzc6IC8vbGVmdAoJCQluID0gZS5zaGlmdEtleSA/IC0yNyA6IC01OyAvL+W/q+mAgDXnp5Isc2hpZnTliqDpgJ8KCQljYXNlIDM5OiAvL3JpZ2h0CgkJCW4gPSBuIHx8IChlLnNoaWZ0S2V5ID8gMjcgOiA1KTsgLy/lv6vov5s156eSLHNoaWZ05Yqg6YCfCgkJCXYuY3VycmVudFRpbWUgKz0gbjsKCQkJYnJlYWs7CgkJY2FzZSA3ODogLy8gTiDkuIvkuIDpppYKCQkJZG9DbGljayh0aGlzLmJ0bk5leHQpOwoJCQlicmVhazsKCQkvL2Nhc2UgODA6IC8vIFAg5LiK5LiA6aaWCgkJY2FzZSAzODogLy/liqDpn7Pph48KCQkJbiA9IDAuMTsKCQljYXNlIDQwOiAvL+mZjemfs+mHjwoJCQluID0gbiB8fCAtMC4xOwoJCQluICs9IHYudm9sdW1lOwoJCQlpZiAoMCA8PSBuICYmIG4gPD0gMSkgdi52b2x1bWUgPSBuOwoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCWUuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCWJyZWFrOwoJCWNhc2UgMTM6IC8v5YWo5bGPCgkJCWlmIChlLnNoaWZ0S2V5KSB7CgkJCQlfZnAgPyBfZnAudG9nZ2xlKCkgOiB0aGlzLmZ1bGxQYWdlKCk7CgkJCX0gZWxzZSB7CgkJCQlfZnMgPyBfZnMudG9nZ2xlKCkgOiB0aGlzLmZ1bGxTY3JlZW4oKTsKCQkJfQoJCQlicmVhazsKCQljYXNlIDI3OiAvL2VzYwoJCQlpZiAoRnVsbFNjcmVlbi5pc0Z1bGwoKSkgewoJCQkJX2ZzID8gX2ZzLmV4aXQoKSA6IHRoaXMuZnVsbFNjcmVlbigpOwoJCQl9IGVsc2UgaWYgKEZ1bGxQYWdlLmlzRnVsbCh2KSkgewoJCQkJX2ZwID8gX2ZwLnRvZ2dsZSgpIDogdGhpcy5mdWxsUGFnZSgpOwoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgNjc6IC8v5oyJ6ZSuQ++8muWKoOmAn+aSreaUviArMC4xCgkJCW4gPSAwLjE7CgkJY2FzZSA4ODogLy/mjInplK5Y77ya5YeP6YCf5pKt5pS+IC0wLjEKCQkJbiA9IG4gfHwgLTAuMTsKCQkJbiArPSB2LnBsYXliYWNrUmF0ZTsKCQkJaWYgKDAgPCBuICYmIG4gPD0gMTYpIHYucGxheWJhY2tSYXRlID0gbjsKCQkJYnJlYWs7CgkJY2FzZSA5MDogLy/mjInplK5a77ya5q2j5bi46YCf5bqm5pKt5pS+CgkJCXYucGxheWJhY2tSYXRlID0gMTsKCQkJYnJlYWs7CgkJY2FzZSA3MDogLy/mjInplK5G77ya5LiL5LiA5binCgkJCW4gPSAwLjAzOwoJCWNhc2UgNjg6IC8v5oyJ6ZSuRO+8muS4iuS4gOW4pwoJCQluID0gbiB8fCAtMC4wMzsKCQkJaWYgKCF2LnBhdXNlZCkgdi5wYXVzZSgpOwoJCQl2LmN1cnJlbnRUaW1lICs9IG47CgkJfQoJfSwKCWNoZWNrVUkoKSB7CgkJaWYgKCF0aGlzLndlYmZ1bGxDU1MpIHsKCQkJX2ZwID0gX2ZwIHx8IG5ldyBGdWxsUGFnZSh2KTsKCQl9IGVsc2UgaWYgKCF0aGlzLmJ0bldGUykgewoJCQl0aGlzLmJ0bldGUyA9IHEodGhpcy53ZWJmdWxsQ1NTKTsKCQkJdGhpcy5mdWxsUGFnZSA9ICgpID0+IHRoaXMuX2NvbnZlcnRWaWV3KHRoaXMuYnRuV0ZTKTsKCQl9CgkJaWYgKHRoaXMubmV4dENTUyAmJiAhdGhpcy5idG5OZXh0KSB0aGlzLmJ0bk5leHQgPSBxKHRoaXMubmV4dENTUyk7CgkJaWYgKCF0aGlzLmZ1bGxDU1MpIHsKCQkJX2ZzID0gX2ZzIHx8ICBuZXcgRnVsbFNjcmVlbih2KTsKCQl9IGVsc2UgaWYgKCF0aGlzLmJ0bkZTKSB7CgkJCXRoaXMuYnRuRlMgPSBxKHRoaXMuZnVsbENTUyk7CgkJCXRoaXMuZnVsbFNjcmVlbiA9ICgpID0+IHRoaXMuX2NvbnZlcnRWaWV3KHRoaXMuYnRuRlMpOwoJCX0KCX0sCgliaW5kRXZlbnQoKSB7CgkJdGhpcy5vbkNhbnBsYXkgPSB0aGlzLm9uQ2FucGxheS5iaW5kKHRoaXMpOwoJCXYuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsIHRoaXMub25DYW5wbGF5KTsKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5ob3RLZXkuYmluZCh0aGlzKSk7CgkJdGhpcy5jaGVja1VJKCk7CgkJZXZlbnRzLmZvdW5kTVYgJiYgZXZlbnRzLmZvdW5kTVYoKTsKCX0sCglmaW5kTVYoKSB7CgkJcmV0dXJuIHEoJ3ZpZGVvJyk7Cgl9LAoJaW5pdCgpIHsKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gewoJCQlpZiAodiA9IHRoaXMuZmluZE1WKCkpIHRoaXMuYmluZEV2ZW50KCk7CgkJCWVsc2UgewoJCQkJdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlY29yZHMgPT4gewoJCQkJCWlmICh2ID0gdGhpcy5maW5kTVYoKSkgewoJCQkJCQl0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKCQkJCQkJZGVsZXRlIHRoaXMub2JzZXJ2ZXI7CgkJCQkJCXRoaXMuYmluZEV2ZW50KHYpOwoJCQkJCX0KCQkJCQlpZiAodGhpcy5hZHNDU1MpIHdpbGxSZW1vdmUodGhpcy5hZHNDU1MpOwoJCQkJCWlmIChldmVudHMub2JzZXJ2ZSAmJiBldmVudHMub2JzZXJ2ZSgpKSBkZWxldGUgZXZlbnRzLm9ic2VydmU7CgkJCQl9KTsKCQkJCXRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7Y2hpbGRMaXN0IDogdHJ1ZSwgc3VidHJlZSA6IHRydWV9KTsKCQkJfQoJCQlldmVudHMuRE9NUmVhZHkgJiYgZXZlbnRzLkRPTVJlYWR5KCk7CgkJfSk7Cgl9Cn07CgpsZXQgcm91dGVyID0gewoJcXEoKSB7CgkJT2JqZWN0LmFzc2lnbihhcHAsIHsKCQkJZGlzYWJsZVNwYWNlOiB0cnVlLAoJCQluZXh0Q1NTOiAnLnR4cF9idG5fbmV4dCcsCgkJCXdlYmZ1bGxDU1M6ICcudHhwX2J0bl9mYWtlJywKCQkJZnVsbENTUzogJy50eHBfYnRuX2Z1bGxzY3JlZW4nLAoJCX0pOwoJCWV2ZW50cy5vbignY2FucGxheScsIGFwcC5nZXRWaWRlb3MpOwoJCWZha2VVQSgnTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTA7IHJ2OjQ4LjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvNDguMCcpOwoJfSwKCXlvdWt1KCkgewoJCWV2ZW50cy5vbignZm91bmRNVicsICgpID0+IHsKCQkJLy/kvb/nlKjkuobkvJjphbfmkq3mlL7lmahZQVBmWeaJqeWxlQoJCQlpZiAoIWFwcC5idG5GUykgewoJCQkJYXBwLndlYmZ1bGxDU1MgPSAnLkFCUC1XZWItRnVsbFNjcmVlbic7CgkJCQlhcHAuZnVsbENTUyA9ICcuQUJQLUZ1bGxTY3JlZW4nOwoJCQl9CgkJfSk7CgkJZXZlbnRzLm9uKCdjYW5wbGF5JywgKCkgPT4gewoJCQkkJCgnLnlvdWt1LWxheWVyLWxvZ28nKTsvL+WOu+awtOWNsOOAgiAg56C06KejMTA4MFAKCQkJdy4kKCcuc2V0dGluZ3MtaXRlbS5kaXNhYmxlJykucmVwbGFjZVdpdGgoJzxkaXYgZGF0YS12YWw9MTA4MHAgY2xhc3M9c2V0dGluZ3MtaXRlbSBkYXRhLWV2ZW50bG9nPXhzbD4xMDgwcDwvZGl2PicpOwoJCQlpZiAodi5zcmMuc3RhcnRzV2l0aCgnaHR0cCcpKSBhcHAuZ2V0VmlkZW9zKCk7Ly/liJ3lp4vljJZ2TGlzdO+8jOaXp+eJiOeUqGZsdi5qc37lnLDlnYDku6VibG9iOuW8gOWktAoJCQkvL+S/ruato+S4i+S4gOS4quaMiemSruaXoOaViCB5ay10cmlnZ2VyLWxheWVyCgkJCWNvbnN0IGJ0biA9IHEoJ2J1dHRvbi5jb250cm9sLW5leHQtdmlkZW8nKTsKCQkJaWYgKGJ0biAmJiBidG4ub2Zmc2V0V2lkdGg+MSkgewoJCQkJbGV0IGUgPSBxKCcucHJvZ3JhbS5jdXJyZW50Jyk7CgkJCQllID0gZSAmJiBlLmNsb3Nlc3QoJy5pdGVtJykgfHwgcSgnLml0ZW0uY3VycmVudCcpOwoJCQkJZSA9IGUubmV4dFNpYmxpbmc7CgkJCQlpZiAoIWUpIHJldHVybjsKCQkJCWUgPSBlLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsvL+S4i+S4gOS4quinhumikemTvuaOpQoJCQkJYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXYgPT4gZS5jbGljaygpKTsKCQkJCWFwcC5idG5OZXh0ID0gZTsKCQkJfQoJCX0pOwoJCWFwcC5mdWxsQ1NTID0gJy5jb250cm9sLWZ1bGxzY3JlZW4taWNvbic7Cgl9LAoJYmlsaWJpbGkoKSB7CgkJaWYgKCF3aW5kb3cuUmVhZGFibGVTdHJlYW0pCgkJCWluamVjdEpTKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY3JlYXRvcnJyL3dlYi1zdHJlYW1zLXBvbHlmaWxsL21hc3Rlci9kaXN0L3BvbHlmaWxsLm1pbi5qcycpOwoJCWxldCB4ID0gbG9jYWxTdG9yYWdlLmJpbGliaWxpX3BsYXllcl9zZXR0aW5nczsKCQlpZiAoeCkgewoJCQl4ID0gSlNPTi5wYXJzZSh4KTsKCQkJeC52aWRlb19zdGF0dXMuaGlnaHF1YWxpdHkgPSB0cnVlOwoJCQl4LnZpZGVvX3N0YXR1cy5pc3dpZGVzY3JlZW4gPSB0cnVlOwoJCQl4LnZpZGVvX3N0YXR1cy53aWRlc2NyZWVuc2F2ZSA9IHRydWU7CgkJCXguc2V0dGluZ19jb25maWcuZGVmcXVhbGl0eSA9ICc4MCc7CgkJCWxvY2FsU3RvcmFnZS5iaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MgPSBKU09OLnN0cmluZ2lmeSh4KTsKCQl9IGVsc2UKCQkJLy9kZWZxdWFsaXR5IOmAieaLqea4heaZsOW6pu+8jDcyMFDvvJo2NCAgMTA4MFDvvJo4MCAgIOWuveWxjyBpc3dpZGVzY3JlZW4KCQkJbG9jYWxTdG9yYWdlLmJpbGliaWxpX3BsYXllcl9zZXR0aW5ncyA9IGB7InNldHRpbmdfY29uZmlnIjp7InR5cGUiOiJkaXYiLCJvcGFjaXR5IjoiMS4wMCIsImZvbnRmYW1pbHkiOiJTaW1IZWksICdNaWNyb3NvZnQgSmhlbmdIZWknIiwiZm9udGZhbWlseWN1c3RvbSI6IiIsImJvbGQiOmZhbHNlLCJwcmV2ZW50c2hhZGUiOmZhbHNlLCJmb250Ym9yZGVyIjowLCJzcGVlZHBsdXMiOiIxLjAiLCJzcGVlZHN5bmMiOmZhbHNlLCJmb250c2l6ZSI6IjEuMCIsImZ1bGxzY3JlZW5zeW5jIjpmYWxzZSwiZGFubWFrdW51bWJlciI6NTAsImZ1bGxzY3JlZW5zZW5kIjpmYWxzZSwiZGVmcXVhbGl0eSI6IjgwIiwic2FtZWFzcGFuZWwiOmZhbHNlfSwidmlkZW9fc3RhdHVzIjp7ImF1dG9wYXJ0IjoxLCJoaWdocXVhbGl0eSI6dHJ1ZSwid2lkZXNjcmVlbnNhdmUiOnRydWUsImlzd2lkZXNjcmVlbiI6dHJ1ZSwidmlkZW9taXJyb3IiOmZhbHNlLCJ2aWRlb3NwZWVkIjoxLCJ2b2x1bWUiOjF9LCJibG9jayI6eyJzdGF0dXMiOnRydWUsInR5cGVfc2Nyb2xsIjp0cnVlLCJ0eXBlX3RvcCI6dHJ1ZSwidHlwZV9ib3R0b20iOnRydWUsInR5cGVfcmV2ZXJzZSI6dHJ1ZSwidHlwZV9ndWVzdCI6dHJ1ZSwidHlwZV9jb2xvciI6dHJ1ZSwiZnVuY3Rpb25fbm9ybWFsIjp0cnVlLCJmdW5jdGlvbl9zdWJ0aXRsZSI6dHJ1ZSwiZnVuY3Rpb25fc3BlY2lhbCI6dHJ1ZSwiY2xvdWRfbGV2ZWwiOjIsImNsb3VkX3NvdXJjZV92aWRlbyI6dHJ1ZSwiY2xvdWRfc291cmNlX3BhcnRpdGlvbiI6dHJ1ZSwiY2xvdWRfc291cmNlX2FsbCI6dHJ1ZSwic2l6ZSI6MCwicmVnZXhwIjpmYWxzZSwibGlzdCI6W119LCJtZXNzYWdlIjp7InN5c3RlbSI6ZmFsc2UsImJhbmd1bWkiOmZhbHNlLCJuZXdzIjpmYWxzZX19YDsKCQlhcHAubmV4dENTUyA9ICcuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1uZXh0JzsKCQlhcHAud2ViZnVsbENTUyA9ICcuYmlsaWJpbGktcGxheWVyLXZpZGVvLXdlYi1mdWxsc2NyZWVuJzsKCQlhcHAuZnVsbENTUyA9ICcuYmlsaWJpbGktcGxheWVyLWljb25mb250LWZ1bGxzY3JlZW4nOwoJCWNvbnN0IF9zZXRQbGF5ZXIgPSAoKSA9PiB7CgkJCXYgPSBxKCcjYm9mcWkgdmlkZW9bc3JjXScpOwoJCQlpZiAoIXYpIHsKCQkJCXNldFRpbWVvdXQoX3NldFBsYXllciwgMzAwKTsKCQkJCXJldHVybjsKCQkJfQoJCQl3LnNjcm9sbFRvKDAsIHYuY2xvc2VzdCgnI2JvZnFpJykucGFyZW50Tm9kZS5wYXJlbnROb2RlLm9mZnNldFRvcCk7CgkJCWRvQ2xpY2socSgnaS5iaWxpYmlsaS1wbGF5ZXItaWNvbmZvbnQtcmVwZWF0Lmljb24tMjRyZXBlYXRvbicpKTsgLy/lhbPlvqrnjq/mkq3mlL4KCQkJLy8gZG9DbGljayhxKCdpW25hbWU9Y3RsYmFyX2Rhbm11a3VfY2xvc2VdJykpOy8v5YWz5by55bmVCgkJCS8vIOS7peS4izjooYzvvIzoh6rliqjmkq3mlL4KCQkJaWYgKHYucmVhZHlTdGF0ZSA9PT0gNCkKCQkJCWRvQ2xpY2socSgnaVtuYW1lPXBsYXlfYnV0dG9uXScpKTsKCQkJZWxzZSB7CgkJCQl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgZXYgPT4gewoJCQkJCXYucGF1c2VkICYmIGRvQ2xpY2socSgnaVtuYW1lPXBsYXlfYnV0dG9uXScpKTsKCQkJCX0pOwoJCQl9CgkJCXYuc2V0QXR0cmlidXRlKCdhdXRvcGxheScsICcnKTsKCQl9OwoJCWNvbnN0IGZuID0gaGlzdG9yeS5wdXNoU3RhdGU7CgkJaGlzdG9yeS5wdXNoU3RhdGUgPSBmdW5jdGlvbigpIHsKCQkJZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCQkJc2V0VGltZW91dChfc2V0UGxheWVyLCA1MDApOwoJCX07CgkJdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGV2ID0+IHsKCQkJc2V0VGltZW91dChfc2V0UGxheWVyLCA1MDApOwoJCX0pOwoJCWV2ZW50cy5vbignY2FucGxheScsIF9zZXRQbGF5ZXIpOwoJfSwKCXNpbmEoKSB7CgkJZmFrZVVBKHVhX2lwYWQyKTsKCX0sCglsZSgpIHsKCQlmYWtlVUEoJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzlfMykgQXBwbGVXZWJLaXQvNTM3Ljc1LjE0IFZlcnNpb24vNy4wLjMgU2FmYXJpLzcwNDZBMTk0QScpOwoJCWFwcC5uZXh0Q1NTID0gJ2Rpdi5odl9pY29fbmV4dCc7CgkJYXBwLndlYmZ1bGxDU1MgPSAnc3Bhbi5odl9pY29fd2ViZnVsbHNjcmVlbic7CgkJYXBwLmZ1bGxDU1MgPSAnc3Bhbi5odl9pY29fc2NyZWVuJzsKCX0sCglzb2h1KCkgewoJCWZha2VVQSh1YV9zYW1zdW5nKTsKCQlhcHAubmV4dENTUyA9ICdsaS5vbltkYXRhLXZpZF0rbGkgYSc7CgkJYXBwLmZ1bGxDU1MgPSAnZGl2LngtZnMtYnRuJzsKCX0sCglmdW4oKSB7CgkJaWYgKGhvc3Quc3RhcnRzV2l0aCgnbS4nKSkgewoJCQlpZiAoIXBhdGguaW5jbHVkZXMoJ3BsYXknKSkgcmV0dXJuIHRydWU7Ly/pnZ7mkq3mlL7pobXvvIzkuI3miafooYxpbml0KCkKCQkJL15cL1ttdl0vLnRlc3QocGF0aCkgJiYgbG9jYXRpb24uYXNzaWduKHBhdGgucmVwbGFjZSgnLycsICcvaScpICsgbG9jYXRpb24uc2VhcmNoKTsKCQkJYXBwLm5leHRDU1MgPSAnYS5idG4ubmV4dC1idG4nOwoJCQlhcHAuZnVsbENTUyA9ICdhLmJ0bi5mdWxsLWJ0bic7CgkJCUdNX2FkZFN0eWxlKCdkaXYucC1pcC13cmFwe292ZXJmbG93LXk6IGF1dG8gIWltcG9ydGFudDt9Jyk7CgkJCXJldHVybjsKCQl9CgkJbGV0IHZpZCA9IHIxKC9cYnYtKFxkKykvLCBwYXRoKTsKCQlsZXQgbWlkID0gcjEoL1xiZy0oXGQrKS8sIHBhdGgpOwoJCS8v5Ymn6ZuGcGF0aDogL2ltcGxheS/vvIzljZXop4bpopFwYXRoOiAvaXZwbGF5LwoJCWlmICh2aWQpIHsKCQkJbWlkICYmIGxvY2F0aW9uLmFzc2lnbihgLy9tLmZ1bi50di9pbXBsYXkvP21pZD0ke21pZH0mdmlkPSR7dmlkfWApOwoJCQlsb2NhdGlvbi5hc3NpZ24oJy8vbS5mdW4udHYvaXZwbGF5Lz92aWQ9Jyt2aWQpOwoJCX0KCQltaWQgJiYgc2V0VGltZW91dCgoKSA9PiB7CgkJCXZpZCA9IHcudnBsYXkudmlkZW9pZDsKCQkJdmlkICYmIGxvY2F0aW9uLmFzc2lnbihgLy9tLmZ1bi50di9pbXBsYXkvP21pZD0ke21pZH0mdmlkPSR7dmlkfWApOwoJCX0sIDk5KTsKCQlyZXR1cm4gdHJ1ZTsKCX0KfTsKcm91dGVyLmxlc3BvcnRzID0gcm91dGVyLmxlOwpyb3V0ZXJbJzE2MyddID0gcm91dGVyLnNpbmE7CgppZiAoIXJvdXRlclt1XSkgeyAvL+ebtOaSreermeeCuQoJcm91dGVyID0gewoJCWRvdXl1KCkgewoJCQlsZXQgdXNlRG91eXVFeHQgPSBHTV9nZXRWYWx1ZSgndXNlRG91eXVFeHQnLCAhMSksCgkJCWNzcyA9ICdpLnNpZ24tc3BlYycsCgkJCWZuV3JhcCA9IHRocm90dGxlKCQkKSwKCQkJcyA9ICfkvb/nlKjkuobmlpfpsbxINeaSreaUvuWZqOaJqeWxlSAgJzsKCQkJcyArPSB1c2VEb3V5dUV4dCA/ICfiiJonIDogJ++8nyc7CgkJCUdNX3JlZ2lzdGVyTWVudUNvbW1hbmQocywgKCkgPT4gewoJCQkJR01fc2V0VmFsdWUoJ3VzZURvdXl1RXh0JywgIXVzZURvdXl1RXh0KTsKCQkJCWxvY2F0aW9uLnJlbG9hZCgpOwoJCQl9KTsKCQkJYXBwLmZpbmRNViA9IGZ1bmN0aW9uKCkgewoJCQkJZm5XcmFwKGNzcywgZT0+ZS5wYXJlbnROb2RlLnJlbW92ZSgpKTsKCQkJCWNvbnN0IHAgPSB3Ll9fcGxheWVyIHx8IHcuX19wbGF5ZXJpbmRleDsKCQkJCWlmICghcCkgcmV0dXJuOwoJCQkJaWYgKHBhdGg9PT0nLycpIHsvL+S4u+mhtQoJCQkJCWlmIChwLmlzU3dpdGNoZWQpIHJldHVybiBxKCd2aWRlbycpOwoJCQkJfQoJCQkJZWxzZSBpZiAodXNlRG91eXVFeHQgfHwgcC5pc1N3aXRjaGVkKQoJCQkJCXJldHVybiBxKCcjanMtcm9vbS12aWRlbyB2aWRlbycpOwoJCQkJLy/mnInnm7Tmkq3nmoTpobXpnaIgIWxhc3RJbmRleE9mKCcvJykg6ZO+5Yik5pat6L+Q566X56ymOiAkUk9PTT8ucm9vbV9pZAoJCQkJcC5zd2l0Y2hQbGF5ZXIoJ2g1Jyk7CgkJCQlwLmlzU3dpdGNoZWQgPSB0cnVlOwoJCQl9OwoJCQlldmVudHMub24oJ2NhbnBsYXknLCBmdW5jdGlvbigpIHsKCQkJCSQkKGFwcC5hZHNDU1MpOwoJCQkJJCQoY3NzLCBlPT5lLnBhcmVudE5vZGUucmVtb3ZlKCkpOwoJCQkJaWYgKHBhdGg9PT0nLycpIHJldHVybjsKCQkJCWNvbnN0IHBsYXllciA9IHYucGFyZW50Tm9kZS5wYXJlbnROb2RlOwoJCQkJcyA9IGAjJHtwbGF5ZXIuaWR9PmRpdjpub3QoW2NsYXNzXSk6bm90KFtzdHlsZV0pLCAjZGlhbG9nLW1vcmUtdmlkZW9+KmA7CgkJCQlzZXRUaW1lb3V0KCQkLCAzMDAsIHMpOwoJCQkJc2V0VGltZW91dCgkJCwgMzkwMCwgcyk7CgkJCX0pOwoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgZXYgPT4gewoJCQkJaWYgKCFkb2N1bWVudC5oaWRkZW4pIHsKCQkJCQkkJChhcHAuYWRzQ1NTKTsKCQkJCQkkJChjc3MsIGU9PmUucGFyZW50Tm9kZS5yZW1vdmUoKSk7CgkJCQl9CgkJCX0pOwoJCQlhcHAud2ViZnVsbENTUyA9IHVzZURvdXl1RXh0ID8gJ2EuZGFubXUtZnVsbHBhZ2UnIDogJ2Rpdlt0aXRsZT0i572R6aG15YWo5bGPIl0nOwoJCQlhcHAuZnVsbENTUyA9IHVzZURvdXl1RXh0ID8gJ2EuZGFubXUtZnVsbHNjcmVlbic6ICdkaXZbdGl0bGU9Iueql+WPo+WFqOWxjyJdJzsKCQkJLy8gLndhdGVybWFyay00MjMxZGIsIC5hbmltYXRpb25fY29udGFpbmVyLTAwNWFiNyArZGl2CgkJCWFwcC5hZHNDU1MgPSAnLmJveC0xOWZlZDYsIFtjbGFzc3w9cmVjb21tZW5kQURdLCBbY2xhc3N8PXJvb20tYWRdLCAjanMtcmVjb21tYW5kPmRpdjpudGgtb2YtdHlwZSgyKX4qLCAjZGlhbG9nLW1vcmUtdmlkZW9+KiwgLm5vLWxvZ2luLCAucG9wLXpvb20tY29udGFpbmVyLCNqcy1jaGF0LW5vdGljZSc7CgkJfSwKCQlwYW5kYSgpIHsKCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhbmRhLnR2L3VzZXIvcGxheWVyJywgJ3sidXNlSDVwbGF5ZXIiOiB0cnVlfScpOwoJCQlhcHAud2ViZnVsbENTUyA9ICcuaDVwbGF5ZXItY29udHJvbC1iYXItZnVsbHNjcmVlbic7CgkJCWFwcC5mdWxsQ1NTID0gJy5oNXBsYXllci1jb250cm9sLWJhci1hbGxmdWxsc2NyZWVuJzsKCQkJYXBwLmFkc0NTUyA9ICcuYWN0LXpodXhpYW5tYXJjaC1jb250YWluZXIsICNsaXZlb3MtY29udGFpbmVyLCAuYWQtY29udGFpbmVyLCAucm9vbS1iYW5uZXItaW1hZ2VzJzsKCQkJaWYgKHBhdGghPT0nLycpIGV2ZW50cy5vbignZm91bmRNVicsICgpID0+IHsKCQkJCWxldCBmbiwgYnRuQ2xvc2UgPSBxKCdhLnJvb20tY2hhdC1leHBhbmQtYnRuJyk7CgkJCQlpZiAoYnRuQ2xvc2UpIHsKCQkJCQkvL+i/memHjOeUqHRocm90dGxl5Luj5pu/c2V0VGltZW91dAoJCQkJCWZuID0gdGhyb3R0bGUoZXYgPT4gYnRuQ2xvc2UuY2xpY2soKSwgOSk7CgkJCQkJLy8gZm4gPSBhc3luYyBldiA9PiB7CgkJCQkJCS8vIGF3YWl0IHNsZWVwKDkpOwoJCQkJCQkvLyBidG5DbG9zZS5jbGljaygpOwoJCQkJCS8vIH07CgkJCQkJYXBwLmJ0bldGUy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZuKTsKCQkJCQl2LmNsb3Nlc3QoJy5oNXBsYXllci1wbGF5ZXItY29yZS1jb250YWluZXInKS5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZuKTsKCQkJCX0KCQkJCXNldFRpbWVvdXQoJCQsIDkwMCwgYXBwLmFkc0NTUyk7CgkJCX0pOwoJCX0sCgkJeXkoKSB7CgkJCWlmICghd2luZG93LmNocm9tZSkgZmFrZVVBKHVhX2Nocm9tZSk7CgkJCWFwcC5mdWxsQ1NTID0gJy5saXZlcGxheWVyVG9vbEJhci1mdWxsU2NyZWVuQnRuJzsKCQl9LAoJCWh1eWEoKSB7CgkJCWlmICh1bmRlckZpcmVmb3g1NykgcmV0dXJuIHRydWU7CgkJCWlmICghd2luZG93LmNocm9tZSkgZmFrZVVBKHVhX2Nocm9tZSk7CgkJCWFwcC53ZWJmdWxsQ1NTID0gJy5wbGF5ZXItZnVsbHBhZ2UtYnRuJzsKCQkJYXBwLmZ1bGxDU1MgPSAnLnBsYXllci1mdWxsc2NyZWVuLWJ0bic7CgkJCWV2ZW50cy5vbignY2FucGxheScsIGZ1bmN0aW9uKCkgewoJCQkJaWYgKHcuVFRfUk9PTV9EQVRBKSBzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQlpZiAoIXEoJy5wbGF5ZXItdmlkZW90eXBlLWxpc3QgbGknKSkgewoJCQkJCQl0aGlzLmNhbnBsYXkoKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCQkkJCgnI3BsYXllci1sb2dpbi10aXAtd3JhcCwjcGxheWVyLXN1YnNjcmliZS13YXAnKTsKCQkJCQljb25zdCAkID0gdy4kLCBjaGFubmVsID0gdy5UVF9ST09NX0RBVEEuY2hhbm5lbCwKCQkJCQkkdmlkZW90eXBlID0gJCgnLnBsYXllci12aWRlb3R5cGUtY3VyJyk7CgkJCQkJJCgiLnBsYXllci12aWRlb3R5cGUtbGlzdCBsaSIpLnVuYmluZCgnY2xpY2snKQoJCQkJCS5jbGljayhmdW5jdGlvbihlKSB7CgkJCQkJCWlmICgkKHRoaXMpLmhhc0NsYXNzKCdvbicpKSByZXR1cm47CgkJCQkJCWNvbnNvbGUubG9nKHRoaXMpOwoJCQkJCQljb25zdCByYXRlID0gJCh0aGlzKS5hdHRyKCJpYml0cmF0ZSIpOwoJCQkJCQl3LnZwbGF5ZXIudmNvcmUucmVxQml0UmF0ZShyYXRlLCBjaGFubmVsKTsKCQkJCQkJJCh0aGlzKS5zaWJsaW5ncygnLm9uJykucmVtb3ZlQ2xhc3MoJ29uJyk7CgkJCQkJCSQodGhpcykuYWRkQ2xhc3MoJ29uJykucGFyZW50KCkucGFyZW50KCkuaGlkZSgpOwoJCQkJCQkkdmlkZW90eXBlLnRleHQoJCh0aGlzKS50ZXh0KCkpOwoJCQkJCX0pOwoJCQkJfSwgNTAwKTsKCQkJfSk7CgkJfSwKCQlsb25nemh1KCkgewoJCQlpZiAoIXdpbmRvdy5jaHJvbWUpIGZha2VVQSh1YV9jaHJvbWUpOwoJCQlpZiAoIXdpbmRvdy5SZWFkYWJsZVN0cmVhbSkKCQkJCWluamVjdEpTKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY3JlYXRvcnJyL3dlYi1zdHJlYW1zLXBvbHlmaWxsL21hc3Rlci9kaXN0L3BvbHlmaWxsLm1pbi5qcycpOwoJCQlhcHAuZnVsbENTUyA9ICcjc2NyZWVuX3ZrJzsKCQkJLy9hcHAud2ViZnVsbENTUyA9ICcuZnVsbC1zY3JlZW4tYnV0dG9uLW91dGVyLWJveCc7CgkJfQoJfTsKCglpZiAocm91dGVyW3VdKSBhcHAuaXNMaXZlID0gdHJ1ZTsKfQoKcm91dGVyLmJhaWR1ID0gcm91dGVyLndlaWJvID0gbm9vcEZuOwohL2JpbGliaWxpfGRvdXl1fHBhbmRhLy50ZXN0KHUpICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdwbHVnaW5zJywgewoJZ2V0KCkgewoJCXJldHVybiB7IGxlbmd0aDogMCB9OwoJfQp9KTsKaWYgKCFyb3V0ZXJbdV0gfHwgIXJvdXRlclt1XSgpKSBhcHAuaW5pdCgpOw=="},{"name":"AC-baidu： 优化百度、搜狗、谷歌搜索结果之重定向去除+去广告+favicon","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["*"],"orig_excludes":[],"orig_includes":["*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":["www.baidu.com","winedt.com","*"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"AdsStyleMode_Baidu":"s0","AdsStyleMode_Google":"s0","HightLightColorList":"o[\"#FFFF80\",\"#90EE90\",\"#33FFFF\",\"#FF6600\",\"#FF69B4\",\"#20B2AA\",\"#8470FF\"]","defaultFaviconUrl":"shttps://ws1.sinaimg.cn/large/6a155794ly1foijtdzhxhj200w00wjr5.jpg","doDisableSug":"btrue","isALineEnable":"bfalse","isAdsEnable":"btrue","isCounterEnable":"bfalse","isFaviconEnable":"btrue","isHighLightEnable":"bfalse","isRedirectEnable":"btrue","isRightDisplayEnable":"btrue","version":"s16.5"},"ts":1527096430015},"enabled":true,"position":7,"file_url":"https://greasyfork.org/scripts/14178-ac-baidu-%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6-%E6%90%9C%E7%8B%97-%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E4%B9%8B%E9%87%8D%E5%AE%9A%E5%90%91%E5%8E%BB%E9%99%A4-%E5%8E%BB%E5%B9%BF%E5%91%8A-favicon/code/AC-baidu%EF%BC%9A%20%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E3%80%81%E6%90%9C%E7%8B%97%E3%80%81%E8%B0%B7%E6%AD%8C%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E4%B9%8B%E9%87%8D%E5%AE%9A%E5%90%91%E5%8E%BB%E9%99%A4+%E5%8E%BB%E5%B9%BF%E5%91%8A+favicon.user.js","uuid":"0bae6029-34e6-4e1e-b202-1e1f79b4f715","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQUMtYmFpZHXvvJog5LyY5YyW55m+5bqm44CB5pCc54uX44CB6LC35q2M5pCc57Si57uT5p6c5LmL6YeN5a6a5ZCR5Y676ZmkK+WOu+W5v+WRiitmYXZpY29uCi8vIEBpY29uICAgICAgICAgICAgaHR0cHM6Ly9jb2RpbmcubmV0L3UvemIyMjcvcC96YkltZy9naXQvcmF3L21hc3Rlci9pbWcwL2ljb24uanBnCi8vIEBncmFudCAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGF1dGhvciAgICAgICAgICBBQwovLyBAY3JlYXRlICAgICAgICAgIDIwMTUtMTEtMjUKLy8gQHJ1bi1hdCAgICAgICAgICBkb2N1bWVudC1zdGFydAovLyBAdmVyc2lvbiAgICAgICAgIDE2LjUKLy8gQGNvbm5lY3QgICAgICAgICAqCi8vIEBpbmNsdWRlICAgICAgICAgKgovLyBAaG9tZS11cmwgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8xNDE3OAovLyBAaG9tZS11cmwyICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5ncmVuMTM1My9HTV9zY3JpcHQKLy8gQG5hbWVzcGFjZSAgICAgICAxMzUzNDY0NTM5QHFxLmNvbQovLyBAY29weXJpZ2h0ICAgICAgIDIwMTcsIEFDCi8vIEBkZXNjcmlwdGlvbiAgICAgMS7nuZ7pgY7nmb7luqbjgIHmkJzni5fjgIHosLfmrYzjgIHlpb3mkJzmkJzntKLntZDmnpzkuK3nmoToh6rlt7HnmoTot7PovYnpj4jmjqXvvIznm7TmjqXoqKrllY/ljp/lp4vntrLpoIEt5Y+N5q2j6YO96IO955yL5oeCIDIu5Y676Zmk55m+5bqm55qE5aSa5L2Z5bm/5ZGKIDMu5re75YqgRmF2aWNvbuaYvuekuiA0LumhtemdokNTUyA1Lua3u+WKoOiuoeaVsCA2LuW8gOWFs+mAieaLqeS7peS4iuWKn+iDvQovLyBAbGFzdG1vZGlmaWVkICAgIDIwMTgtMDUtMjMKLy8gQGZlZWRiYWNrLXVybCAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMTQxNzgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA1LjIyLVYxNi41IOWwneivlee8k+ino+WGheWtmOeahOmXrumimO+8jOmBv+WFjeWvueWFtuS7lueahOi/m+ihjOW5suaJsO+8jOWQjOaXtuWHj+WwkeS6hmhlYWTmoIfnrb7op6blj5EKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA1LjIyLVYxNi40IOW9u+W6leaLhuWIhuWPjOWHu+mrmOS6ruWSjOiHquWKqOmrmOS6ruWKn+iDve+8jOWQjOaXtuS/neaMgeS4pOS4quWKn+iDvemDveaYr+WFs+mXreeKtuaAgQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDUuMjItVjE2LjMg6K6+572u5re75Yqg5Y+M5Ye76auY5Lqu5oyJ6ZKuCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNS4yMi1WMTYuMiDkuI3lho3kvb/nlKhNT+aWueW8j++8jOeZvuW6pueahOWOn+WboOWvvOiHtE1P5b275bqV5peg5rOV5L2/55So77yM5LqO5piv5YWo6YO955SoRE9N5pON5L2c5p2l5Yik5pat5ZCnCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNS4yMS1WMTYuMSDkvJjljJbpq5jkuq7nmoTpl67popg7IOWQjOaXtuS/ruWkjeS6huS4gOS4qumrmOS6ruWFs+mUruivjeeahGJ1Z++8m+WcqOS4gOS4quiAgeWPuOacuueahOaMh+eCueS4i++8jOa3u+WKoOS6hnJlZmVyZXLlj4LmlbAKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA1LjIxLVYxNi4wIOiwouiwouaci+WPi+S7rOWFs+W/gzUuMjDmiJHov5jmmK/kuIDkuKrkurrov4fnmoTlvojlpb3vvJvlpKfniYjmnKzvvJrkv67mraPorqHmlbDlmajnmoTorqHmlbDpl67popjvvIzkv67mraNNT+WkseaViOS5i+WQjuiEmuacrOeahOinpuWPkemXrumimO+8m+aWsOWinuaQnOe0ouWFs+mUruivjemrmOS6rumAiemhue+8jOm7mOiupOWFs+mXrQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDUuMDYtVjE1LjMg566A5Y2V56e76Zmk5aW95pCc55qE5bm/5ZGKCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNC4yMC1WMTUuMiDkv67lpI1iaW5n55qERmF2aWNvbuaViOaenO+8jOmBv+WFjeaYvuekuuWcqOS4jeWQjOihjOS4igovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDQuMDQtVjE1LjEg57un57ut5bCd6K+V5L+u5aSNYnVnLOS8mOWMluaVtOS9k+mhtemdouaViOaenOS7peWPiuiwt+atjOWFtuS9memhtemdoueahOaViOaenOWxleekujvlkIzml7blsIbnmb7luqbmoLflvI/lhpnlhaXliLAjd3JhcHBlcj4jaGVhZOS4reWOuyzliLfmlrDmiJbogIXmm7TmjaLpobXpnaLml7blsLHkuI3kvJrlvILluLjpl6rng4HlubbkuJTlvojlubPmu5HkuoYKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA0LjAyLVYxNC45IOabtOaWsOiwt+atjOaVtOS9k+aViOaenCzlubblsJ3or5Xkv67lpI3lm77niYfmlrDpl7vnrYnmmL7npLrpl67popjnmoRidWcKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA0LjAxLVYxNC44IC0t5pel54uX6Zeu6aKY77yM5b+Y5LqG5pS55Luj56CB77yM5Y+q5piv5pu05paw5LqG6K+05piO44CC44CCCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wNC4wMS1WMTQuNyDnu4/ov4fogIHlj7jmnLoo5rKhSUQp5o+Q5L6b55qE5Y+N6aaI77yM5Y+R546w5LiK5LiA54mI5pu05paw55qE5L6d5pen5pyJYnVn77yM5L+u5aSN6LCD5bCP6Kem5Y+R5Y+C5pWw5a+86Ie055qE6Kem5Y+R5rKh5pyJ55Sf5pWI55qE6Zeu6aKYLS3lgbblsJTlj4zliJflpLHmlYjnmoTpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA0LjAxLVYxNC42IOe7j+i/h+iAgeWPuOacuijmsqFJRCnmj5DkvpvnmoTlj43ppojvvIzmjpLmn6Xlj5HnjrBjaHJvbWXkuIrohJrmnKzpppbmrKHovb3lhaXlpLHmlYjnmoTpl67popjvvIzlt7Lnu4/kv67lpI0KLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjA0LjAxLVYxNC41IOabtOaWsOW5tua3u+WKoOiwt+atjOWPjOWIl+OAgeW+hea1i+ivle+8jOWmguaenOaciemXrumimO+8jOWPr+S7peebtOaOpeWPjemmiAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDMuMjgtVjE0LjQg56e76ZmkanF1ZXJ555qEcmVxdWlyZe+8jOeWkeS8vGpxdWVyeeW8lei1t+WGsueqgemXrumimO+8jOS6juaYr+W9u+W6leW8g+eUqGpxdWVyeeadpeWkhOeQhumhtemdouaVsOaNru+8jOaUueeUqOWOn+WjsEpT5aSE55CG6aG16Z2iCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMy4yNy1WMTQuMyDliLfkuIDkuKrniYjmnKzlj7fvvIzlkIzml7bkvJjljJZDU1Povb3lhaXov4flpJrnmoTpl67popjvvIzkvYbmmK/ovb3lhaXov4fmhaLnmoTpl67popjlj4jlh7rnjrDkuobvvIzkuIvmrKHlpITnkIYKLy8gQG5vdGUgICAgICAgICAgICAyMDE4LjAzLjI2LVYxNC4yIOS/ruWkjeeUseS6juS4iuasoeabtOaWsOi/h+S6jua1geeVheeahGJ1Z++8jOWQjOaXtuS/ruato+mmlumhteeahOagt+W8j+aYvuekugovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDMuMjUtVjE0LjEg5YaN5qyh5oqE54K55Luj56CB77yM5YCf6Ym06ICB5Y+45py6Oua1rueUn0DmnKrmrYfnmoTpg6jliIbkvJjljJbku6PnoIHlrozlloTlt7LmnInnmoTvvIhAcmVzb3VyY2XjgIFHTV9nZXRSZXNvdXJjZVRleHTjgIFHTV9hZGRTdHlsZe+8ie+8jOmBv+WFjemhtemdoumXqueDgeS4gOS4i++8jOWQjOaXtuino+WGs+mDqOWIhmNzc+i9veWFpemHjeWkjeeahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDMuMjMtVjE0LjAgMS7lsJ3or5Xkv67lpI3lnKjnmb7luqbotLTlkKflkoznmb7luqbnn6XpgZPnmoTmloflrZfmmL7npLrlvILluLjnmoTpl67popg7IDIu5L+u5aSN57yW5Y+35aWH5oCq55qE5byC5bi46Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMy4xOC1WMTMuOSDmm7TmlrDosLfmrYznmoRmYXZpY29u5Lii5aSx55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxOC4wMy4wNC1WMTMuOCDmm7TmlrDlm77lupPkuLpodHRwc+aooeW8j++8jOmBv+WFjemCo+WVpeaYvuekuuS4jeWuieWFqAovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDIuMTYtVjEzLjcgMS7mlrDlop7lhbPpl63nmb7luqbmkJzntKLpooTmtYvvvJsyLuaWsOWinuacquefpeWbvuagh+aXtuWIh+aNou+8myAzLuenu+mZpOeZvuW6puaQnOe0ouW7uuiurueahOmhtumDqOS4gOadoQovLyBAbm90ZSAgICAgICAgICAgIDIwMTguMDEuMTItVjEzLjYgMS7mlrDlop7np7vpmaTlj7PovrnmoI/nmoTmjInpkq7vvJsyLuaWsOWinueJiOacrOaYvuekuuaWh+Wtl++8mzMu5L+u5q2jZmF2aWNvbuS9jee9ru+8mzQu5L+u5aSNZmF2aWNvbueahOWbvueJh+mUmeivr+aXtuWAmeeahOWAvO+8jOS4h+W5tEJVRwovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTIuMjctVjEzLjUg5L+u5aSN55Sx5LqO5LiK5Liq54mI5pys5pu05paw5aSE55CG55m95bGP77yM5a+86Ie055qE6buY6K6k5qCH5YeG5qih5byP55qE5Y+z5L6n5qCP5LiN6KeB5LqGCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4xMi4yMC1WMTMuNCDmhJ/osKJJRO+8muejgeaCrOa1rumdkuibmeeahOWPjemmiO+8jOW3sue7j+S/ruWkjeWwj+amgueOh+aQnOe0ouS5i+WQjueCueWHu+e7k+aenOeZveWxj+eahOmXrumimC3osozkvLzkuYvliY3lpITnkIbov4fvvIzkvYbmmK/msqHmnInlvbvlupXlpITnkIbmjonvvIzov5nmrKHlvbvlupXkuobvvIzmlLnnlKhDU1PpmpDol48KLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjEyLjA0LVYxMy4zIOaWsOWinuiuvue9ru+8jOmSiOWvueeZvuW6puezu+WIl+eahOmHjeWumuWQkemXrumimO+8jOS4jeW4uOeUqOeZvuW6puezu+WIl+eahOaci+WPi+WPr+S7peW8gOWQr+i/meS4quWKn+iDvQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTEuMjMtVjEzLjIg5oSf6LCi5Y2h6aWt5Z2b5Y+LQEFwb2xsbzg1MTHmj5Dkvpvlj43ppojvvIzlt7Lnu4/kv67lpI3pg6jliIbnn6XkuY7nmoTph43lrprlkJHpl67popjvvIzmm7TlpJrpl67popjlj6/ku6Xnm7TmjqXlj43ppojmiJEKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjExLjIyLVYxMy4xIOenu+mZpOeZvuW6puezu+eahOmHjeWumuWQke+8jOiZveeEtuWkhOeQhuS6hu+8jOS9huaYr+eZvuW6puezu+ebtOi/nuS8muWvvOiHtOaWh+Wtl+aXoOazleebtOaOpeaYvuekuu+8jOWFtuS7luebtOi/nuS4jeW9seWTjQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTEuMTctVjEyLjEzIOi/m+S4gOatpeenu+mZpOeZvuW6pueahOW5v+WRiu+8jOWPs+i+uemDqOWIhuW5v+WRiueahOWkhOeQhuWSjOenu+mZpAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTEuMTUtVjEyLjEyIOaQnOeLl+eahOaQnOe0ouWcsOWdgOWPiOWPmOS6hu+8jOWKoOS4gOS4qgovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTEuMDItVjEyLjExIOaWsOWinuWcqOaJi+acum1vYmlsZeaooeW8j+S4i+eZvuW6pueahOmHjeWumuWQkeWkhOeQhu+8jOWFtuS9mee9keermeS7peWQjuWGjeivtOWQp++8jOS8sOiuoeayoeaciemcgOaxggovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMTAuMjctVjEyLjEwIDEu5L+u5aSN6YC85q275by66L+r55eH55qE6Zeu6aKY77ybMi7np7vpmaTlrozmlbTmqKHlvI8t6YG/5YWN5Ye6546w5ZCE56eN5oum5oiq77ybMy7kv67lpI13d3cuc28uY29t55qE6YeN5a6a5ZCR6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4xOC1WMTIuOSDmm7TmlrDljp/lm6DvvJoxLuWLv+W/mOWbveiAuzkxOO+8mzIu5pu05paw55m+5bqm5YG25bCU6YeN5a6a5ZCR5rKh5oiQ5Yqf55qE6Zeu6aKY77ybMy7kv67lpI3pobXpnaLnmoTlsI/pl67popjvvJs0LuaWsOWinuaWh+Wtl+S4i+WIkue6v+W8gOWFswovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMTUtVjEyLjgg57Sn5oCl5L+u5aSN6LC35q2M5LiK6aG16Z2i5Y2h6aG/55qE6Zeu6aKY77yM5o6S5p+l5b6X55+l5Li655m+5bqm6KeE5YiZ55qE5omp5bGV5Ye65LqG6Zeu6aKY77yM6Z2e5bi45oSf6LCi5LyX5aSa5pyL5Y+L55qE5pSv5oyB77yM5rKh5pyJ5L2g5Lus55qE5Y+N6aaI5bCx5rKh5pyJ6L+Z5Liq6ISa5pys44CC5L+u5aSN5bm256e76Zmk5LqG55m+5bqm5a6Y5pa56YeH55So55qE5paw5pa55byP5bm/5ZGK5qih5byP77yM6LKM5Ly85Y+q5ZyoY2hyb21l5LiK5Ye6546wCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4xMy1WMTIuNyAxLuS/ruWkjU7lubTliY3mm7TmlrDlr7zoh7TnmoTpg6jliIbnvZHlnYDph43lrprlkJHml6DmlYjvvIznu6fnu63kvb/nlKhHRVTmlrnms5XvvIzlm6DkuLrlpb3kupvnvZHnq5nkuI3mlK/mjIFIRUFE5pa55rOV77yM6I635Y+W5oiQ5Yqf5LmL5ZCO5bCx5pat5byA77yM5bC96YeP5YeP5bCR5LqG572R57uc5byA5pSvOyAyLuS/ruWkjeaQnOeLl+eahOmDqOWIhuaQnOe0ouW8guW4uDsgMy7kv67lpI3nmb7luqblnKhjaHJvbWU2MeS4iueahOmTvuaOpeW8guW4uOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMTMtVjEyLjYg5byA5a2m5LmL5ZCO55qE56ys5LqM5Liq54mI5pys77yM5L+u5aSN5LiK5qyh5pu05paw5a+86Ie055qE55m+5bqm6aaW6aG16ZSZ5Lmx77yM5L+u5aSNZmlyZWZveOS4iueahOinpuWPke+8jOS/ruWkjVN1cGVyUHJlbG9hZGVy55qE57+76aG15bGV56S6Ci8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOS4xMi1WMTIuNSDlvIDlrabkuYvlkI7nmoTnrKzkuIDkuKrniYjmnKzvvIzkv67lpI3lnKjnmb7luqbkuIrlgbblsJTkuI3op6blj5HnmoTpl67popjjgJDku47pppbpobXmkJzntKLnmoTml7blgJnop6blj5HjgJHvvIzlhbbmrKHlnKjlhYTlvJ9YWFgo5oiR5Lmf5b+Y5LqG5ZOq5LiqUF9QKeeahOW4ruWKqeS4i++8jOS/ruWkjeS6huWBtuWwlOS8muWFqOWxj+eJueauiuaOqOW5v+aooeW8j+eahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMDYtVjEyLjQg5L+u5aSN5LiK5Liq54mI5pys5pu05paw5a+86Ie055qE55m+5bqm55+l6YGT5YaN5qyh5byC5bi46Zeu6aKYO+abtOaWsOefpeS5juS4iueahOmHjeWumuWQkemXrumimC3oh6rlt7HnmoTohJrmnKwKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA5LjA2LVYxMi4zIOS/ruWkjeWPjOWIl+eahOaooeW8j+eahOaYvuekuumXrumimO+8jOWmguaenOaciemXrumimOW4jOacm+WPjemmiOS4gOS4i++8jOmhuuS+v+WIh+aNomNzc+adpea6kAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMDQtVjEyLjIg54m55oSP5L+u5aSN5ZyoVmlvbGVudE1vbmtleeS4iueahOiuvue9ruaXoOaViOeahOmXrumimOS7peWPiuWcqDM2MOa1j+iniOWZqOS4iueahOiuvue9ruS4jeaYvuekuumXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMDQtVjEyLjEg55m+5bqm6aG16Z2i55u05o6l5re75Yqg6K6+572u5YWl5Y+j77ybMzYw5rWP6KeI5Zmo6K6+572u5Y+v6IO95Zyo5bqV6YOo6aG16Z2i77yb5pSv5oyB5Y2V5YiX5ZKM5Y+M5YiX5qih5byP77yM55WM6Z2i5pu0576O6KeCZnJvbea1rueUn0DmnKrmrYfvvJvlj6/og73mmK/mnIDov5HkuIDmrrXml7bpl7TnmoTmnIDlkI7niYjmnKzkuobvvIzopoHlvIDlrabkuoZ+fgovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMDItVjExLjEwIOa3u+WKoOS4pOS4qumAiemhue+8jOWPr+S7pemAieaLqeaAp+enu+mZpOmDqOWIhuiuvue9rgovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDkuMDEtVjExLjkg5L+u5aSN5LiK5qyh5pu05paw5a+86Ie055qE55m+5bqm5Y675bm/5ZGK5LiN54G155qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOC4zMC1WMTEuOCDmlrDlop7vvJoxLkdN6K6+572u5qCP55uu5Lit5Yqg5YWl6K6+572uIDIuYmFpZHUt5L2/55SoSEVBROaWueW8j+iOt+WPlu+8jOWHj+WwkeaVsOaNruS8oOi+k++8jOaQnOeLl+eJueauiu+8jOe7p+e7rUdFVOaWueW8jwovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDguMjktVjExLjcg5pa55L6/5pyL5Y+L5LusLeenu+mZpOefpeS5jumHjeWumuWQkQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDguMDctVjExLjYg6LCD5pW077ya56e76Zmk5bCP57u/54K577yM5o2i5Li654K55Ye7RmF2aWNvbuaIluiAheaYr+iuoeaVsOWZqOW8ueWHuueql+WPo++8jOabtOaNouS4uuWKoOe+pOmTvuaOpQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDguMDYtVjExLjUg5L+u5aSN77yM5L+d5a2Y5byC5bi477yb6aKE5pyf5LmL5ZCO5Lya5re75Yqg55m+5bqm5pCc57Si6aG16Z2i55qE5aSn6LCD5pW0Ci8vIEBub3RlICAgICAgICAgICAgMjAxNy4wOC4wNS1WMTEuNCDmlrDlop7vvJrlj43ppojlkozlu7rorq7lnLDlnYDlop7liqAKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA4LjA0LVYxMS4zIOS/ruWkje+8mueUseS6juiLseivreS4jeWlveWvvOiHtOeahOaLvOWGmemUmeivr++8jOaEn+iwonNoauWFhOW8n+aMh+WHugovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDguMDMtVjExLjIg5paw5aKe77ya6LC35q2M6ZO+5o6l5paw5qCH562+5omT5byAOyDnp7vpmaTmkJzntKLnu5Pmnpzpk77mjqXnmoTkuIvliJLnur8KLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA3LjIyLVYxMS4xIOaWsOWinuS6huW8gOWFs+aooeW8j++8jOWPr+S7peW8gOWQr+aIluiAheWFs+mXreafkOS6m+iHquW3seS4jeWWnOasoueahOWKn+iDve+8jOW8gOWFs+WcqOWPs+S4iuinku+8jOWSjFN1cGVyUHJlbG9hZOWFseeUqAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDYuMjUtVjEwLjEg5L+u5aSN5LiK5qyh5pu05paw5a+86Ie055qE55m+5bqm5Y675bm/5ZGK55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNi4yNS1WMTAuMCDkv67lpI3kuIrmrKHmm7TmlrDlr7zoh7TnmoTnmb7luqbnn6XpgZPlho3mrKHlh7rnjrDogIHpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA2LjI0LVY5Ljkg5pu05paw5LqG57+76aG155qE6Zeu6aKY77yM57uP6L+H5aSa5qyh55qE5bCd6K+V5bqU6K+l5rKh5pyJ5aSq5aSn6Zeu6aKY5LqGCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNi4yNC1WOS44IOabtOaWsOS6hmJpbmfkuIrnmoTlm77niYdmYXZpY29u5Zyw5Z2AO+W5tuS4lOWwvemHj+WHj+WwkeS6hk1P6Kem5Y+R5qyh5pWw77yM6YG/5YWN6aG16Z2i5Y2h6aG/O+S/ruWkjeaQnOeLl+eahOmHjeWumuWQkemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDYuMjMtVjkuNyDkuIrkvKDplJnkuoZ+6YeN5paw5p2l77yM6aG65bim5aSE55CG5LqG6LC35q2MZmF2aWNvbumXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDYuMjMtVjkuNiDkv67lpI3kuobosLfmrYzph43lrprlkJHnmoTpl67poph+fuaIkeeahOmUhQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDYuMTEtVjkuNSDkuI3lho3kvb/nlKhET03mlrnlvI/mnaXnm5HlkKzpobXpnaLkuobvvIzkvb/nlKh0aW1lcitNT+adpeWkhOeQhu+8jOaegeWkp+WHj+WwkeS6hmNwdeWNoOeUqOaXtumXtOWSjOeerOaXtue9kemAn+WNoOeUqAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMjYtVjkuNCDmgaLlpI1mYXZpY29u5qih5byP77yM546w5Zyo6L+Z5Liq6ISa5pys5Z+65pys5LiK5YWo5LqG77yM5pyJ6ZyA6KaB5Lul5ZCO5YaN6K+0Ci8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4xNS1WOS4zIOaaguaXtuenu+mZpOeZvuW6puWPs+i+ueS+p+agj+eahOW5v+WRiuenu+mZpOaooeW8j++8jOWHhuWkh+S4i+asoeS8mOWMluWlveS6huWGjee7p+e7rQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMTItVjkuMiDmmoLml7bnp7vpmaTosLfmrYznmoTlronlhajmkJzntKLmqKHlvI/vvIzlm6DkuLrlvojlpI3mnYLnmoTljp/lm6AKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA1LjEyLVY5LjEg5pqC5pe256e76ZmkRmF2aWNvbueahOaYvuekuu+8jOWboOS4uui/meagt+WwseadguS6hu+8jOaciemcgOimgeeahOS6uuiHquW3seWOu+ijhei/meS4quiEmuacrOWQp++8jOS/neeVmeeZvuW6puWOu+W5v+WRigovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMTItVjkuMCDpm4blkIjkuobljrvph43lrprlkJEr5Y675bm/5ZGKK0Zhdmljb27mmL7npLoKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA1LjEyLVY4Ljcg6ZuG5ZCI5LqG5Y675bm/5ZGK55qE6ISa5pys77yM5Lul5YmN55qE6YKj5Liq5Y675bm/5ZGK55qE6ISa5pys5bCx5LiN55So5LqGCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4xMi1WOC42IOS/ruWkjeiwt+atjOWuieWFqOaQnOe0oueahEJVRyBWMgovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMTItVjguNCDmlrDlop7vvJrpu5jorqTlsY/olL3osLfmrYznmoTlronlhajmkJzntKLlip/og70KLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjA1LjA1LVY4LjMg5L+u5aSNaW5jbHVkZeiMg+WbtOWkquWwj+WvvOiHtOeahOeZvuW6puefpemBk+eahOWxj+iUvemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMDQtVjguMiDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUc7IOmhuuS+v+WkhOeQhuS6hnN1cGVyYXBpLnpoaWRhby5iYWlkdS5jb207IOaWsOWinuiwt+atjOaQnOe0oue7k+aenOmHjeWumuWQkeWOu+mZpAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDUuMDQtVjguMSDnu4jkuo7kv67lpI3kuobnmb7luqbnn6XpgZPlm77niYfmm7/mjaLkuobmloflrZfnmoTov5nkuKrlpKdCVUfvvIzpobrkvr/lpITnkIbkuoZzdXBlcmFwaS56aGlkYW8uYmFpZHUuY29tCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wNS4wNC1WOC4wIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVR++8jOW+hea1i+ivlQovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDMuMjgtVjcuNiDkv67lpI3lnKhWaW9sZW50TW9ua2V55LiK55qE5LiN5pSv5oyB55qE6Zeu6aKYCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wMy4yOC1WNy41IOWwneivleS/ruWkjWNocm9tZeS4iueahOmXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDMuMjEtVjcuNCDlsJ3or5XlpITnkIZFZGdl5LiK5LiN5pSv5oyB55qE6Zeu6aKY77yM57uT5p6c5Y+R546w5pivRWRnZeacrOi6q+eahFRhbXBlck1vbmtleeaUr+aMgeaciemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDMuMTktVjcuMyDkv67lpI3miZPlvIDnmb7luqbkuYvlkI7lho3mrKHngrnlh7vigJznmb7luqbkuIDkuIvigJ3lr7zoh7TnmoTml6Dms5Xmm7TmlrDph43lrprlkJHpl67popgKLy8gQG5vdGUgICAgICAgICAgICAyMDE3LjAzLjE5LVY3LjIg5pyq55+l5Y6f5ZugY2hyb21l55qETXV0YXRpb25PYnNlcnZlcuaXoOazleS9v+eUqOS6hu+8jOe7p+e7reWbnuW9kuS7peWJjeeahERPTU5vZGVJbnNlcnRlZAovLyBAbm90ZSAgICAgICAgICAgIDIwMTcuMDIuMTctVjcuMCDkv67lpI3mkJzni5fnmoTmkJzntKLnu5Pmnpzph43lrprlkJHpl67popgr5pS55Liq5ZCN5a2XCi8vIEBub3RlICAgICAgICAgICAgMjAxNy4wMi4xNy1WNi45IOS/ruWkjeaQnOeLl+eahOaQnOe0oue7k+aenOmHjeWumuWQkemXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTYuMTIuMTAtVjYuOCAqKioKLy8gQG5vdGUgICAgICAgICAgICAyMDE2LjEwLjI3LVY2Ljcg5L+u5aSN5LqG5Lul5YmN55qE6YeN5aSN6K+35rGC77yM546w5Zyo55qE6K+35rGC5pWw5bqU6K+l5bCP5LqG5b6I5aSa77yM572R57uc5Lmf5bCx5LiN5Y2h5LqG77yM5oSf6KeJ6JCM6JCM5ZOSCi8vIEBub3RlICAgICAgICAgICAgMjAxNi4wNC4yNC1WNi42IOaBouWkjeS7peWJjeeahOeJiOacrO+8jOWboOS4uuWFvOWuueaAp+mXrumimAovLyBAbm90ZSAgICAgICAgICAgIDIwMTUuMTIuMDEtVjUuMCDliqDlhaXmkJzni5fnmoTmlK/mjIHvvIzkvYbmmK/mlK/mjIHkuI3mmK/lvojlpb0KLy8gQG5vdGUgICAgICAgICAgICAyMDE1LjExLjI1LVYyLjAg5LyY5YyW77yM5bey57uP5piv55yf5a6e5Zyw5Z2A55qE5LiN5YaN5bCd6K+V6I635Y+WCi8vIEBub3RlICAgICAgICAgICAgMjAxNS4xMS4yNS1WMS4wIOWujOaIkOWOu+aOieeZvuW6pumHjeWumuWQkeeahOWKn+iDvQovLyBAcmVzb3VyY2UgICAgICAgIGJhaWR1Q29tbW9uU3R5bGUgICAgIGh0dHBzOi8vcmVtaXguYWMuY24vQUNGaWxlL0NTUy9BQ19CYWlkdS9iYWlkdUNvbW1vblN0eWxlLmNzcz90PTE1LjIKLy8gQHJlc291cmNlICAgICAgICBiYWlkdU15TWVudVN0eWxlICAgICBodHRwczovL3JlbWl4LmFjLmNuL0FDRmlsZS9DU1MvQUNfQmFpZHUvYmFpZHVNeU1lbnVTdHlsZS5jc3M/dD0xNS4yCi8vIEByZXNvdXJjZSAgICAgICAgYmFpZHVPbmVQYWdlU3R5bGUgICAgaHR0cHM6Ly9yZW1peC5hYy5jbi9BQ0ZpbGUvQ1NTL0FDX0JhaWR1L2JhaWR1T25lUGFnZVN0eWxlLmNzcz90PTE1LjIKLy8gQHJlc291cmNlICAgICAgICBiYWlkdVR3b1BhZ2VTdHlsZSAgICBodHRwczovL3JlbWl4LmFjLmNuL0FDRmlsZS9DU1MvQUNfQmFpZHUvYmFpZHVUd29QYWdlU3R5bGUuY3NzP3Q9MTUuMgovLyBAcmVzb3VyY2UgICAgICAgIGdvb2dsZUNvbW1vblN0eWxlICAgIGh0dHBzOi8vcmVtaXguYWMuY24vQUNGaWxlL0NTUy9BQ19CYWlkdS9nb29nbGVDb21tb25TdHlsZS5jc3M/dD0xNS4yCi8vIEByZXNvdXJjZSAgICAgICAgZ29vZ2xlTXlNZW51U3R5bGUgICAgaHR0cHM6Ly9yZW1peC5hYy5jbi9BQ0ZpbGUvQ1NTL0FDX0JhaWR1L2dvb2dsZU15TWVudVN0eWxlLmNzcz90PTE1LjIKLy8gQHJlc291cmNlICAgICAgICBnb29nbGVPbmVQYWdlU3R5bGUgICBodHRwczovL3JlbWl4LmFjLmNuL0FDRmlsZS9DU1MvQUNfQmFpZHUvZ29vZ2xlT25lUGFnZVN0eWxlLmNzcz90PTE1LjIKLy8gQHJlc291cmNlICAgICAgICBnb29nbGVUd29QYWdlU3R5bGUgICBodHRwczovL3JlbWl4LmFjLmNuL0FDRmlsZS9DU1MvQUNfQmFpZHUvZ29vZ2xlVHdvUGFnZVN0eWxlLmNzcz90PTE1LjIKLy8gQGdyYW50ICAgICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gQGdyYW50ICAgICAgICAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGdyYW50ICAgICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vID09L1VzZXJTY3JpcHQ9PQondXNlIHN0cmljdDsnCnZhciBuZWVkRGlzcGxheU5ld0Z1biA9IHRydWU7IC8vIOacrOasoeabtOaWsOaYr+WQpuacieaWsOWKn+iDvemcgOimgeWxleekugovLyDliJ3mrKHvvJrov5jmmK/ph4fnlKjkuoZzZXRJbnRlcnZhbOadpeWkhOeQhu+8jOaEn+iniei/meagt+eahOivnemAn+W6puW6lOivpeavlERvbeW/q++8jOS5n+avlE1P6YCC55So77yM5Zug5Li6TU/pnIDopoHlnKjmnIDlkI7miY3og73osIPnlKjvvIzlrp7nlKjmgKfov5jkuI3lpoJ0aW1lcgovLyDkuYvlkI7vvJrov5jmmK/ph4fnlKhNT+eahOaWueW8j+adpeWkhOeQhgooZnVuY3Rpb24gKCkgewogICAgdmFyIGZhdGhlck5hbWUgPSBuZXcgQXJyYXkoCiAgICAgICAgImMtY29udGFpbmVyIiwgLy9iYWlkdTEKICAgICAgICAicmMiLCAvL2dvb2dsZQogICAgICAgICJiX2FsZ28iLCAvL2JpbmcxCiAgICAgICAgImJfYW5zIiwgLy9iaW5nMgogICAgICAgICJ2cndyYXAiLCAvL3NvZ291MQogICAgICAgICJyYiIsLy9zb2dvdTIKICAgICAgICAicmVzLWxpc3QiLy9zby0zNjAKICAgICk7Ly8gRmF2aWNvbuaUvuWcqHh45L2N572uCiAgICB2YXIgaXNSZWRpcmVjdEVuYWJsZSA9IHRydWU7IC8vIOaYr+WQpuW8gOWQr+mHjeWumuWQkeWKn+iDvQogICAgdmFyIGlzQWRzRW5hYmxlID0gdHJ1ZTsgLy8g5piv5ZCm5byA5ZCv5Y675bm/5ZGK5qih5byPCiAgICB2YXIgQWRzU3R5bGVNb2RlX0JhaWR1ID0gMTsvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgdmFyIEFkc1N0eWxlTW9kZV9Hb29nbGUgPSAxOy8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICB2YXIgQWRzU3R5bGVNb2RlID0gQWRzU3R5bGVNb2RlX0JhaWR1Oy8vIOWAvCA9IGJhaWR1IG9yID0gZ29vZ2xlCiAgICB2YXIgaXNGYXZpY29uRW5hYmxlID0gdHJ1ZTsgLy8g5piv5ZCm5byA5ZCvZmF2aWNvbuWbvuagh+WKn+iDvQogICAgdmFyIGRlZmF1bHRGYXZpY29uVXJsID0gImh0dHBzOi8vd3MxLnNpbmFpbWcuY24vbGFyZ2UvNmExNTU3OTRseTFmb2lqdGR6aHhoajIwMHcwMHdqcjUuanBnIjsKICAgIHZhciBpc1JpZ2h0RGlzcGxheUVuYWJsZSA9IHRydWU7CgogICAgdmFyIGRvRGlzYWJsZVN1ZyA9IHRydWU7CiAgICB2YXIgaXNDb3VudGVyRW5hYmxlID0gZmFsc2U7IC8vIOaYr+WQpuaYvuekuuiuoeaVsOWZqAogICAgdmFyIGlzQUxpbmVFbmFibGUgPSBmYWxzZTsKICAgIHZhciB2YWx1ZUxvY2sgPSBmYWxzZTsgLy8g6YG/5YWN5pWw5o2u5ZCM5pe26K+75Y+W5ZKM5YaZ5YWl5pe25a+86Ie055qE5q276ZSB77yM54S25ZCO6Ie05L2/6aG16Z2i5q275b6q546vCiAgICB2YXIgb25SZXNpemVMb2NrZWQgPSBmYWxzZTsKICAgIHZhciBzb3J0SW5kZXggPSAxOyAvLyDorr7nva7nvJblj7flgLwKICAgIHZhciBpc0RCSGlnaExpZ2h0RW5hYmxlID0gZmFsc2U7CiAgICB2YXIgaXNBdXRvSGlnaExpZ2h0RW5hYmxlID0gZmFsc2U7CiAgICB2YXIgaGFzTmV3RnVuY05lZWREaXNwbGF5ID0gdHJ1ZTsgLy8g6K6+572u5ZmoCiAgICB2YXIgSGlnaHRMaWdodENvbG9yTGlzdCA9IFsiI0ZGRkY4MCIsICIjOTBFRTkwIiwgIiMzM0ZGRkYiLCAiI0ZGNjYwMCIsICIjRkY2OUI0IiwgIiMyMEIyQUEiLCAiIzg0NzBGRiJdOwoKICAgIExvYWRTZXR0aW5nKCk7IC8vIOivu+WPluS4quS6uuiuvue9ruS/oeaBrwoKICAgIHZhciBlbmFibGVEQlNlbGVjdFRleHQgPSBmYWxzZTsKICAgIHZhciBpc1NlYXJjaFdpbmRvd0FjdGl2ZSA9IHRydWU7CiAgICB2YXIgaGFzSW5pdEJ0bkJpbmQgPSBmYWxzZTsKICAgIHZhciBvbGRUZXh0U2VsZWN0SW50ZXJ2YWwgPSAtMTsKICAgIHZhciBTdHlwZV9Ob3JtYWw7IC8vIOWOu+mHjeWumuWQkeeahOmAieaLqQogICAgdmFyIEZhdmljb25UeXBlOyAvLyBmYXZpY29u55qE6YCJ5oupLeWPluW+l+WunumZheWcsOWdgC3lvpfliLBob3N0CiAgICB2YXIgQ291bnRlclR5cGU7IC8vIENvdW50ZXLnmoTpgInmi6kKICAgIHZhciBTaXRlVHlwZUlEOyAvLyDmoIforrDlvZPliY3mmK/lk6rkuKrnq5nngrlb55m+5bqmPTE75pCc54uXPTI7Mz3lpb3mkJw76LC35q2MPTQ75b+F5bqUPTU755+l5LmOPTY75YW25LuWPTddCiAgICB2YXIgU2l0ZVR5cGU9ewogICAgICAgIEJBSURVOjEsCiAgICAgICAgU09HT1U6MiwKICAgICAgICBTTzozLAogICAgICAgIEdPT0dMRTo0LAogICAgICAgIEJJTkc6NSwKICAgICAgICBaSElIVTo2LAogICAgICAgIE9USEVSUzo3CiAgICB9OwogICAgdmFyIEJhaWR1VmVyc2lvbiA9ICIgViIgKyBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uOwogICAgdmFyIGluc2VydExvY2tlZCA9IGZhbHNlOwogICAgdmFyIG9sZENlbnRlcl9jb2xXaWR0aCA9IDA7CiAgICBpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCJ3d3cuYmFpZHUuY29tIikgPiAtMSkgewogICAgICAgIFNpdGVUeXBlSUQgPSBTaXRlVHlwZS5CQUlEVTsKICAgICAgICBTdHlwZV9Ob3JtYWwgPSAiaDMudD5hLCAjcmVzdWx0cyAuYy1jb250YWluZXI+LmMtYmxvY2thIjsgLy9QQyxtb2JpbGUKICAgICAgICBGYXZpY29uVHlwZSA9ICIucmVzdWx0LW9wLCAuYy1zaG93dXJsIjsKICAgICAgICBDb3VudGVyVHlwZSA9ICIjY29udGVudF9sZWZ0PiNkb3VibGU+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSwjY29udGVudF9sZWZ0PmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0iOwogICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluZGV4T2YoInNvZ291IikgPiAtMSkgewogICAgICAgIFNpdGVUeXBlSUQgPSBTaXRlVHlwZS5TT0dPVTsKICAgICAgICBTdHlwZV9Ob3JtYWwgPSAiaDMucHQ+YSwgaDMudnJUaXRsZT5hIjsKICAgICAgICBGYXZpY29uVHlwZSA9ICJjaXRlW2lkKj0nY2FjaGVyZXN1bHRfaW5mb18nXSI7CiAgICAgICAgQ291bnRlclR5cGUgPSAiLnJlc3VsdHM+ZGl2IjsKICAgIH0gIGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZigic28uY29tIikgPiAtMSkgewogICAgICAgIFNpdGVUeXBlSUQgPSBTaXRlVHlwZS5TTzsKICAgICAgICBTdHlwZV9Ob3JtYWwgPSAiLnJlcy1saXN0IGgzPmEiOwogICAgICAgIEZhdmljb25UeXBlID0gIi5yZXMtbGlua2luZm8gY2l0ZSI7CiAgICAgICAgQ291bnRlclR5cGUgPSAiLnJlc3VsdHM+ZGl2IjsKICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCJnb29nbGUiKSA+IC0xKSB7CiAgICAgICAgU2l0ZVR5cGVJRCA9IFNpdGVUeXBlLkdPT0dMRTsKICAgICAgICAvLyBGYXZpY29uVHlwZSA9ICIuX1JtIjsKICAgICAgICBGYXZpY29uVHlwZSA9ICIuaVVoMzAiOwogICAgICAgIENvdW50ZXJUeXBlID0gIi5zcmc+ZGl2W2NsYXNzfj1nXSAqW2NsYXNzfj1yXSwuX3lFPmRpdltjbGFzc349X2trXSI7CiAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZigiYmluZyIpID4gLTEpIHsKICAgICAgICBTaXRlVHlwZUlEID0gU2l0ZVR5cGUuQklORzsKICAgICAgICBGYXZpY29uVHlwZSA9ICIuYl9hdHRyaWJ1dGlvbj5jaXRlIjsKICAgICAgICBDb3VudGVyVHlwZSA9ICIjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2Fuc10sI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXSwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dIjsKICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCJ6aGlodS5jb20iKSA+IC0xKSB7CiAgICAgICAgU2l0ZVR5cGVJRCA9IFNpdGVUeXBlLlpISUhVOwogICAgfSBlbHNlIHsKICAgICAgICBTaXRlVHlwZUlEID0gU2l0ZVR5cGUuT1RIRVJTOwogICAgfQogICAgdHJ5ewogICAgICAgIGlmKFNpdGVUeXBlSUQgIT0gU2l0ZVR5cGUuT1RIRVJTKXsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJhcGlkRGVhbCgpOwogICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgfQogICAgfWNhdGNoIChlKXtjb25zb2xlLmxvZyhlKTt9CiAgICBpZihpc0RCSGlnaExpZ2h0RW5hYmxlID09IHRydWUpeyAvLyDlkK/nlKjlj4zlh7vpq5jkuq4KICAgICAgICBXb3JkQXV0b0hpZ2hMaWdodCgpOwogICAgfQogICAgaWYoaXNBdXRvSGlnaExpZ2h0RW5hYmxlID09IHRydWUpeyAvLyDlkK/nlKjoh6rliqjpq5jkuq4KICAgICAgICAvLyDor7vlj5blhbPplK7or43vvIzpq5jkuq7mmL7npLoKICAgICAgICBEb0hpZ2hMaWdodFdpdGhTZWFyY2hUZXh0KCk7CiAgICAgICAgaWYoU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5PVEhFUlMpewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vIOaMgee7reaLv+WIsOaQnOe0ouWFs+mUruivje+8jOWtmOWFpUdN5Lit77yM6YG/5YWN5YiH5o2i6aG16Z2i5a+86Ie055qE5YWz6ZSu6K+N5Lii5aSxCgogICAgICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQuaGlkZGVuID09IHRydWUpeyAvLyDlj6ropoHmmK/mkJzntKLnqpflj6PkuI3mv4DmtLvvvIzpgqPkuYhmbGFnPWZhbHNlCiAgICAgICAgICAgICAgICAgICAgaXNTZWFyY2hXaW5kb3dBY3RpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmFibGVEQlNlbGVjdFRleHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIOeql+WPo+a/gOa0u+eKtuaAge+8m+aIluiAheaYr+eql+WPo+S5i+WJjeaYr+S4jea/gOa0u++8jOeOsOWcqOa/gOa0u+S6hgogICAgICAgICAgICAgICAgaWYoaXNTZWFyY2hXaW5kb3dBY3RpdmUgPT0gdHJ1ZSB8fCAoaXNTZWFyY2hXaW5kb3dBY3RpdmUgPT0gZmFsc2UgJiYgZG9jdW1lbnQuaGlkZGVuID09IGZhbHNlKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hWYWx1ZSA9ICh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKSArICIiKS5zcGxpdCgiJiIpOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlYXJjaFZhbHVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlfdmFsdWUgPSBzZWFyY2hWYWx1ZVtpXS5zcGxpdCgiPSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoL14od2R8cXxxdWVyeSkkLy50ZXN0KGtleV92YWx1ZVswXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hXb3JkcyA9IGRlY29kZVVSSShrZXlfdmFsdWVbMV0pLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXCsvZywgIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEdNX2dldFZhbHVlKCJzZWFyY2hLZXlXb3JkcyIsICIiKSAhPSBzZWFyY2hXb3JkcyAmJiBlbmFibGVEQlNlbGVjdFRleHQgPT0gZmFsc2UpeyAvLyDpgb/lhY3ph43lpI3mjonnlKjvvIzkuIDnm7TliLfmlrDlhbPplK7or40KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi6K6+5a6a5Li677yaIitzZWFyY2hXb3Jkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoInNlYXJjaEtleVdvcmRzIiwgc2VhcmNoV29yZHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvSGlnaExpZ2h0V2l0aFNlYXJjaFRleHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICB9CiAgICBpZiAoaXNBZHNFbmFibGUpewogICAgICAgIGlmKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQkFJRFUpIEFkc1N0eWxlTW9kZSA9IEFkc1N0eWxlTW9kZV9CYWlkdTsKICAgICAgICBpZihTaXRlVHlwZUlEID09IFNpdGVUeXBlLkdPT0dMRSkgQWRzU3R5bGVNb2RlID0gQWRzU3R5bGVNb2RlX0dvb2dsZTsKICAgICAgICBGU0JhaWR1KCk7IC8vIOa3u+WKoOiuvue9rumhuS3ljZXlj4zliJfmmL7npLoKICAgICAgICBBQ19hZGRTdHlsZSgiI2NvbnRlbnRfcmlnaHQgdGQ+ZGl2Om5vdChbaWRdKXtkaXNwbGF5Om5vbmU7fSIsICJhZHNFbmFibGUiLCAiYm9keSIpOwogICAgfQogICAgaWYoIWlzUmlnaHREaXNwbGF5RW5hYmxlKXsKICAgICAgICAvLyDnp7vpmaTlj7PovrnmoI8KICAgICAgICBBQ19hZGRTdHlsZSgiI2NvbnRlbnRfcmlnaHR7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fS5yZXN1bHQtb3A6bm90KFtpZF0pe2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7fSNyaHN7ZGlzcGxheTpub25lO30iLCAiUmlnaHRSZW1vdmUiLCAiYm9keSIpOwogICAgfQogICAgaWYoIWlzQUxpbmVFbmFibGUpewogICAgICAgIEFDX2FkZFN0eWxlKCJhe3RleHQtZGVjb3JhdGlvbjpub25lfSIsICJOb0xpbmUiLCAiYm9keSIpOy8vIOenu+mZpOi/meS6m+S4quS4i+WIkue6vwogICAgfQogICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnQUMt6YeN5a6a5ZCR6ISa5pys6K6+572uJywgZnVuY3Rpb24gKCkgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICB9KTsKICAgIEFDX2FkZFN0eWxlKAogICAgICAgICIub3ByLXJlY29tbWVuZHMtbWVyZ2UtaW1ndGV4dHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iICsgLy8g56e76Zmk55m+5bqm5rWP6KeI5Zmo5o6o5bm/CiAgICAgICAgIi5yZXNfdG9wX2Jhbm5lcntkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iKyAgLy8g56e76Zmk5Y+v6IO955qE55m+5bqmSFRUUFPliqvmjIHmmL7npLrpl67popgKICAgICAgICAiLmhlYWRCbG9ja3tkaXNwbGF5Om5vbmU7fSIgLy8g56e76Zmk55m+5bqm55qE5pCc57Si57uT5p6c6aG26YOo5LiA5p2h55qE5bu66K6u5paH5a2XCiAgICAgICAgLCAiQUMtc3BlY2lhbC1CQUlEVSIKICAgICAgICAsICJib2R5IgogICAgKTsKICAgIEFDX2FkZFN0eWxlKCcjc3AtYWMtY29udGFpbmVye3otaW5kZXg6OTk5OTk5IWltcG9ydGFudDt0ZXh0LWFsaWduOmxlZnQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6d2hpdGU7fSNzcC1hYy1jb250YWluZXIgKntmb250LXNpemU6MTNweCFpbXBvcnRhbnQ7Y29sb3I6YmxhY2shaW1wb3J0YW50O2Zsb2F0Om5vbmUhaW1wb3J0YW50O30jc3AtYWMtbWFpbi1oZWFke3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudDt0b3A6MCFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDt9I3NwLWFjLXNwYW4taW5mb3twb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7cmlnaHQ6MXB4IWltcG9ydGFudDt0b3A6MCFpbXBvcnRhbnQ7Zm9udC1zaXplOjEwcHghaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEwcHghaW1wb3J0YW50O2JhY2tncm91bmQ6bm9uZSFpbXBvcnRhbnQ7Zm9udC1zdHlsZTppdGFsaWMhaW1wb3J0YW50O2NvbG9yOiM1YTVhNWEhaW1wb3J0YW50O3RleHQtc2hhZG93OndoaXRlIDBweCAxcHggMXB4IWltcG9ydGFudDt9I3NwLWFjLWNvbnRhaW5lciBpbnB1dHt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUhaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lLWJsb2NrIWltcG9ydGFudDtvdXRsaW5lOm5vbmUhaW1wb3J0YW50O2hlaWdodDphdXRvICFpbXBvcnRhbnQ7cGFkZGluZzowcHggIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjBweCAhaW1wb3J0YW50O21hcmdpbi10b3A6IDBweCAhaW1wb3J0YW50O30jc3AtYWMtY29udGFpbmVyIGlucHV0W3R5cGU9Im51bWJlciJde3dpZHRoOjUwcHghaW1wb3J0YW50O3RleHQtYWxpZ246bGVmdCFpbXBvcnRhbnQ7fSNzcC1hYy1jb250YWluZXIgaW5wdXRbdHlwZT0iY2hlY2tib3giXXtib3JkZXI6MXB4IHNvbGlkICNCNEI0QjQhaW1wb3J0YW50O3BhZGRpbmc6MXB4IWltcG9ydGFudDttYXJnaW46M3B4IWltcG9ydGFudDt3aWR0aDoxM3B4IWltcG9ydGFudDtoZWlnaHQ6MTNweCFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlciFpbXBvcnRhbnQ7dmlzaWJpbGl0eTp2aXNpYmxlICFpbXBvcnRhbnQ7cG9zaXRpb246c3RhdGljICFpbXBvcnRhbnQ7fSNzcC1hYy1jb250YWluZXIgaW5wdXRbdHlwZT0iYnV0dG9uIl17Ym9yZGVyOjFweCBzb2xpZCAjY2NjIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlciFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lIWltcG9ydGFudDt3aWR0aDphdXRvIWltcG9ydGFudDtoZWlnaHQ6YXV0byFpbXBvcnRhbnQ7fSNzcC1hYy1jb250YWluZXIgbGl7bGlzdC1zdHlsZTpub25lIWltcG9ydGFudDttYXJnaW46M3B4IDAhaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudDtmbG9hdDpub25lIWltcG9ydGFudDt9I3NwLWFjLWNvbnRhaW5lciBmaWVsZHNldHtib3JkZXI6MnB4IGdyb292ZSAjY2NjIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6M3B4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjNweCFpbXBvcnRhbnQ7cGFkZGluZzo0cHggOXB4IDZweCA5cHghaW1wb3J0YW50O21hcmdpbjoycHghaW1wb3J0YW50O2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50O3dpZHRoOmF1dG8haW1wb3J0YW50O2hlaWdodDphdXRvIWltcG9ydGFudDt9I3NwLWFjLWNvbnRhaW5lciBsZWdlbmR7bGluZS1oZWlnaHQ6MjBweCAhaW1wb3J0YW50O21hcmdpbi1ib3R0b206MHB4ICFpbXBvcnRhbnQ7fSNzcC1hYy1jb250YWluZXIgZmllbGRzZXQ+dWx7cGFkZGluZzowIWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnQ7fSNzcC1hYy1jb250YWluZXIgdWwjc3AtYWMtYV91c2VpZnJhbWUtZXh0ZW5ke3BhZGRpbmctbGVmdDo0MHB4IWltcG9ydGFudDt9I3NwLWFjLXJlY3R7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O2Zsb2F0OnJpZ2h0IWltcG9ydGFudDtoZWlnaHQ6MTBweCFpbXBvcnRhbnQ7d2lkdGg6MTBweCFpbXBvcnRhbnQ7cGFkZGluZzowIWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnQ7LW1vei1ib3JkZXItcmFkaXVzOjNweCFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czozcHghaW1wb3J0YW50O2JvcmRlcjoxcHggc29saWQgd2hpdGUhaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KSFpbXBvcnRhbnQ7LW1vei1ib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpIWltcG9ydGFudDtib3gtc2hhZG93Omluc2V0IDAgNXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDAgMCAzcHggcmdiYSgwLDAsMCwwLjgpIWltcG9ydGFudDtvcGFjaXR5OjAuOCFpbXBvcnRhbnQ7fSNzcC1hYy1kb3QsI3NwLWFjLWN1ci1tb2Rle3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDt6LWluZGV4Ojk5OTkhaW1wb3J0YW50O3dpZHRoOjVweCFpbXBvcnRhbnQ7aGVpZ2h0OjVweCFpbXBvcnRhbnQ7cGFkZGluZzowIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6M3B4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjNweCFpbXBvcnRhbnQ7Ym9yZGVyOjFweCBzb2xpZCB3aGl0ZSFpbXBvcnRhbnQ7b3BhY2l0eToxIWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMCAtMnB4IDFweCByZ2JhKDAsMCwwLDAuMyksaW5zZXQgMCAycHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwcHggMXB4IDJweCByZ2JhKDAsMCwwLDAuOSkhaW1wb3J0YW50Oy1tb3otYm94LXNoYWRvdzppbnNldCAwIC0ycHggMXB4IHJnYmEoMCwwLDAsMC4zKSxpbnNldCAwIDJweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDBweCAxcHggMnB4IHJnYmEoMCwwLDAsMC45KSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzppbnNldCAwIC0ycHggMXB4IHJnYmEoMCwwLDAsMC4zKSxpbnNldCAwIDJweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDBweCAxcHggMnB4IHJnYmEoMCwwLDAsMC45KSFpbXBvcnRhbnQ7fSNzcC1hYy1kb3R7cmlnaHQ6LTNweCFpbXBvcnRhbnQ7dG9wOi0zcHghaW1wb3J0YW50O30jc3AtYWMtY3VyLW1vZGV7bGVmdDotM3B4IWltcG9ydGFudDt0b3A6LTNweCFpbXBvcnRhbnQ7d2lkdGg6NnB4IWltcG9ydGFudDtoZWlnaHQ6NnB4IWltcG9ydGFudDt9I3NwLWFjLWNvbnRlbnR7cGFkZGluZzowIWltcG9ydGFudDttYXJnaW46NXB4IDVweCAwIDAhaW1wb3J0YW50Oy1tb3otYm9yZGVyLXJhZGl1czozcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6M3B4IWltcG9ydGFudDtib3JkZXI6MXB4IHNvbGlkICNBMEEwQTAhaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpIWltcG9ydGFudDstbW96LWJveC1zaGFkb3c6LTJweCAycHggNXB4IHJnYmEoMCwwLDAsMC4zKSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpIWltcG9ydGFudDt9I3NwLWFjLW1haW57cGFkZGluZzo1cHghaW1wb3J0YW50O2JvcmRlcjoxcHggc29saWQgd2hpdGUhaW1wb3J0YW50Oy1tb3otYm9yZGVyLXJhZGl1czozcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6M3B4IWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNGMkYyRjchaW1wb3J0YW50O2JhY2tncm91bmQ6LW1vei1saW5lYXItZ3JhZGllbnQodG9wLCNGQ0ZDRkMsI0YyRjJGNyAxMDAlKSFpbXBvcnRhbnQ7YmFja2dyb3VuZDotd2Via2l0LWdyYWRpZW50KGxpbmVhciwwIDAsMCAxMDAlLGZyb20oI0ZDRkNGQyksdG8oI0YyRjJGNykpIWltcG9ydGFudDt9I3NwLWFjLWZvb3R7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7bWluLWhlaWdodDoyMHB4IWltcG9ydGFudDt9I3NwLWFjLXNhdmVidXR0b257cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtyaWdodDoycHghaW1wb3J0YW50O30jc3AtYWMtY29udGFpbmVyIC5zcC1hYy1zcGFuYnV0dG9ue2JvcmRlcjoxcHggc29saWQgI2NjYyFpbXBvcnRhbnQ7LW1vei1ib3JkZXItcmFkaXVzOjNweCFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czozcHghaW1wb3J0YW50O3BhZGRpbmc6MnB4IDNweCFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXIhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I0Y5RjlGOSFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGUhaW1wb3J0YW50Oy1tb3otYm94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlIWltcG9ydGFudDtib3gtc2hhZG93Omluc2V0IDAgMTBweCA1cHggd2hpdGUhaW1wb3J0YW50O31sYWJlbFtjbGFzcz0ibmV3RnVuYyJde2NvbG9yOmJsdWUgIWltcG9ydGFudDt9JywgImFjLU1FTlUiLCAiYm9keSIpOwogICAgZnVuY3Rpb24gcmFwaWREZWFsKCl7CiAgICAgICAgdHJ5ewogICAgICAgICAgICBpZiAoaW5zZXJ0TG9ja2VkID09IGZhbHNlICYmIFNpdGVUeXBlSUQgIT0gU2l0ZVR5cGUuT1RIRVJTKSB7CiAgICAgICAgICAgICAgICBpbnNlcnRMb2NrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0TG9ja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgU2hvd1NldHRpbmcoKTsKICAgICAgICAgICAgICAgICAgICBBQ0hhbmRsZSgpOwogICAgICAgICAgICAgICAgICAgIGlmKGlzQWRzRW5hYmxlKSBGU0JhaWR1KCk7CiAgICAgICAgICAgICAgICB9LCAyMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9Y2F0Y2ggKGUpe2NvbnNvbGUubG9nKGUpO30KICAgIH0KICAgIGZ1bmN0aW9uIEFDSGFuZGxlKCkgewogICAgICAgIGlmKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuT1RIRVJTKSByZXR1cm47CiAgICAgICAgSW5zZXJ0U2V0dGluZ01lbnUoKTsKICAgICAgICBpZiAoaXNSZWRpcmVjdEVuYWJsZSkgewogICAgICAgICAgICBpZihTdHlwZV9Ob3JtYWwgIT0gbnVsbCAmJiBTdHlwZV9Ob3JtYWwgIT0gIiIpCiAgICAgICAgICAgICAgICByZXNldFVSTE5vcm1hbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFN0eXBlX05vcm1hbCkpOyAvLyDnmb7luqbmkJzni5fljrvph43lrprlkJEt5pmu6YCa5qih5byP44CQ5rOo5oSP5LiN6IO95Li6ZG9jdW1lbnQucXVlcnkuLuOAkQogICAgICAgICAgICBpZihTaXRlVHlwZUlEID09IFNpdGVUeXBlLkdPT0dMRSkKICAgICAgICAgICAgICAgIHJlbW92ZU9uTW91c2VEb3duRnVuYygpOyAvLyDnp7vpmaRvbk1vdXNlRG93buS6i+S7tu+8jOiwt+atjOWOu+mHjeWumuWQkQogICAgICAgICAgICBpZihTaXRlVHlwZUlEID09IFNpdGVUeXBlLlpISUhVKQogICAgICAgICAgICAgICAgcmVtb3ZlTGlua1RhcmdldCgpOyAvLyDnp7vpmaTnn6XkuY7nmoTph43lrprlkJHpl67popgKICAgICAgICAgICAgc2FmZVJlbW92ZSgiLnJlc190b3BfYmFubmVyIik7IC8vIOenu+mZpOeZvuW6puWPr+iDveaYvuekuueahOWKq+aMgQogICAgICAgICAgICBzYWZlUmVtb3ZlKCIuYy1jb250YWluZXIgL2RlZXAvIC5jLWNvbnRhaW5lciIpOyAvLyDnp7vpmaTnmb7luqbnmoTmgbblv4NTaGFkb3cgRE9N77yIU2hhZG93biBSb29077yJCiAgICAgICAgfQogICAgICAgIGlmIChpc0Zhdmljb25FbmFibGUpIHsKICAgICAgICAgICAgYWRkRmF2aWNvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKEZhdmljb25UeXBlKSk7IC8vIOa3u+WKoEZhdmljb27mmL7npLoKICAgICAgICB9CiAgICAgICAgaWYoZG9EaXNhYmxlU3VnKXsKICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDIpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBhY1NldENvb2tpZSgiT1JJR0lOIiwgIiIsIC0xKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzQWRzRW5hYmxlKSB7CiAgICAgICAgICAgIEZTQmFpZHUoKTsKICAgICAgICAgICAgcmVtb3ZlQURfYmFpZHVfc29nb3UoKTsgLy8g56e76Zmk55m+5bqm5bm/5ZGKCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImlucHV0W25hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUnXSIpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAiZGlzYWJsZWQiKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaW5wdXRbbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9nb29nbGUnXSIpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAiZGlzYWJsZWQiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzQ291bnRlckVuYWJsZSkgewogICAgICAgICAgICBhZGRDb3VudGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoQ291bnRlclR5cGUpKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBhY1NldENvb2tpZShjbmFtZSwgY3ZhbHVlLCBleGRheXMpIHsKICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKGV4ZGF5cyoyNCo2MCo2MCoxMDAwKSk7CiAgICAgICAgdmFyIGV4cGlyZXMgPSAiZXhwaXJlcz0iK2QudG9VVENTdHJpbmcoKTsKICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjbmFtZSArICI9IiArIGN2YWx1ZSArICI7ICIgKyBleHBpcmVzKyI7ZG9tYWluPS53d3cuYmFpZHUuY29tIjsKICAgIH0KICAgIGZ1bmN0aW9uIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoKSB7CiAgICAgICAgLy8g5pi+56S677yf6ZqQ6JeP6K6+572u55WM6Z2iCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPT0gJ2Jsb2NrJyl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoInZlcnNpb24iLCBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hYy1uZXd2ZXJzaW9uRGlzcGxheSIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBmdW5jdGlvbiBTaG93U2V0dGluZygpIHsKICAgICAgICBpZihTaXRlVHlwZUlEID09IFNpdGVUeXBlLk9USEVSUykgcmV0dXJuOwogICAgICAgIC8vIOWmguaenOS4jeWtmOWcqOeahOivne+8jOmCo+S5iOiHquW3seWIm+W7uuS4gOS4qi1jb3B5IGZyb20gc3VwZXJQcmVsb2FkCiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250YWluZXIiKSA9PSBudWxsKSB7CiAgICAgICAgICAgIHZhciBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgQ29udGFpbmVyLmlkID0gInNwLWFjLWNvbnRhaW5lciI7CiAgICAgICAgICAgIENvbnRhaW5lci5zdHlsZSA9ICJwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsgdG9wOiAxMCU7cmlnaHQ6IDclOyI7CiAgICAgICAgICAgIENvbnRhaW5lci5pbm5lckhUTUwgPQogICAgICAgICAgICAgICAgIiAgICA8ZGl2IGlkPSdzcC1hYy1jb250ZW50JyBzdHlsZT0nZGlzcGxheTogbm9uZTsnPlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICA8ZGl2IGlkPSdzcC1hYy1tYWluJz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgPGZpZWxkc2V0IGlkPSdzcC1hYy1hdXRvcGFnZXItZmllbGQnIHN0eWxlPSdkaXNwbGF5OmJsb2NrOyc+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8bGVnZW5kIHRpdGxlPSfoh6rliqjnv7vpobXmqKHlvI/nmoTnm7jlhbPorr7nva4nPjxhIGhyZWY9J2h0dHBzOi8vYmJzLmthZmFuLmNuL2ZvcnVtLnBocD9tb2Q9dmlld3RocmVhZCZ0aWQ9MTg2NTkwNycgdGFyZ2V0PSdfYmxhbmsnIHN0eWxlPSdjb2xvcjogcmVkICFpbXBvcnRhbnQ7Jz5BQy3ph43lrprlkJHorr7nva4iK0JhaWR1VmVyc2lvbisiPC9hPjwvbGVnZW5kPlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgPHVsPlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWwgdGl0bGU9J+mHjeWumuWQkeWKn+iDveeahOW8gOWQr+S4juWQpic+PGlucHV0IGlkPSdzcC1hYy1yZWRpcmVjdCcgbmFtZT0nc3AtYWMtYV9zZXBhcmF0b3InIHR5cGU9J2NoZWNrYm94JyAiICsgKGlzUmVkaXJlY3RFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPuS4u+WKn+iDvS3ph43lrprlkJHlip/og708L2xhYmVsPlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDwvbGk+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbCB0aXRsZT0nQUMt5Y675bm/5ZGKJyA+PGlucHV0IGlkPSdzcC1hYy1hZHMnIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKGlzQWRzRW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj7pmYTliqAxLeWOu+W5v+WRiuWKn+iDvTwvbGFiZWw+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPC9saT5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+IiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9J+eZvuW6pi3ljp/lp4vmqKHlvI8nIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Jz48aW5wdXQgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzAnIHR5cGU9J3JhZGlvJyAiICsgKEFkc1N0eWxlTW9kZV9CYWlkdT09MCA/ICdjaGVja2VkJyA6ICcnKSArICI+55m+5bqmLeWOn+Wni+aooeW8jzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHRpdGxlPSfnmb7luqYt5Y2V5YiX5pmu6YCaJyBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1JyB2YWx1ZT0nMScgIHR5cGU9J3JhZGlvJyAiICsgKEFkc1N0eWxlTW9kZV9CYWlkdT09MSA/ICdjaGVja2VkJyA6ICcnKSArICI+55m+5bqmLeWNleWIl+aZrumAmjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICA8QlIvPjxsYWJlbCB0aXRsZT0n55m+5bqmLeWNleWIl+WxheS4rScgc3R5bGU9J21hcmdpbi1sZWZ0OjIwcHgnPjxpbnB1dCAgbmFtZT0nc3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdScgdmFsdWU9JzInICB0eXBlPSdyYWRpbycgIiArIChBZHNTdHlsZU1vZGVfQmFpZHU9PTIgPyAnY2hlY2tlZCcgOiAnJykgKyAiPueZvuW6pi3ljZXliJflsYXkuK08L2xhYmVsPiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfnmb7luqYt5Y+M5YiX5bGF5LitJz48aW5wdXQgIG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfYmFpZHUnIHZhbHVlPSczJyAgdHlwZT0ncmFkaW8nICIgKyAoQWRzU3R5bGVNb2RlX0JhaWR1PT0zID8gJ2NoZWNrZWQnIDogJycpICsgIj7nmb7luqYt5Y+M5YiX5bGF5LitPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxCUi8+PGRpdiBzdHlsZT0naGVpZ2h0OiAxcHg7d2lkdGg6MjA3cHg7bWFyZ2luLWxlZnQ6MjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNkOGQ4ZDg7bWFyZ2luLXRvcDoxcHg7Jz48L2Rpdj4iKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSfosLfmrYwt5Y6f5aeL5qih5byPJyBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+PGlucHV0IG5hbWU9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlJyB2YWx1ZT0nMCcgdHlwZT0ncmFkaW8nICIgKyAoQWRzU3R5bGVNb2RlX0dvb2dsZT09MCA/ICdjaGVja2VkJyA6ICcnKSArICI+6LC35q2MLeWOn+Wni+aooeW8jzwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHRpdGxlPSfosLfmrYwt5Y2V5YiX5pmu6YCaJyBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZScgdmFsdWU9JzEnICB0eXBlPSdyYWRpbycgIiArIChBZHNTdHlsZU1vZGVfR29vZ2xlPT0xID8gJ2NoZWNrZWQnIDogJycpICsgIj7osLfmrYwt5Y2V5YiX5pmu6YCaPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxCUi8+PGxhYmVsIHRpdGxlPSfosLfmrYwt5Y2V5YiX5bGF5LitJyBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+PGlucHV0ICBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZScgdmFsdWU9JzInICB0eXBlPSdyYWRpbycgIiArIChBZHNTdHlsZU1vZGVfR29vZ2xlPT0yID8gJ2NoZWNrZWQnIDogJycpICsgIj7osLfmrYwt5Y2V5YiX5bGF5LitPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0n6LC35q2MLeWPjOWIl+WxheS4rSc+PGlucHV0ICBuYW1lPSdzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZScgdmFsdWU9JzMnICB0eXBlPSdyYWRpbycgIiArIChBZHNTdHlsZU1vZGVfR29vZ2xlPT0zID8gJ2NoZWNrZWQnIDogJycpICsgIj7osLfmrYwt5Y+M5YiX5bGF5LitPC9sYWJlbD4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPC9saT5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsPjxpbnB1dCB0aXRsZT0nQUMt5re75YqgRmF2aWNvbicgaWQ9J3NwLWFjLWZhdmljb24nIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKGlzRmF2aWNvbkVuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgMi1GYXZpY29u5Yqf6IO9PC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWw+PGxhYmVsIHN0eWxlPSdtYXJnaW4tbGVmdDoyMHB4Oyc+RmF2aWNvbum7mOiupOWbvuagh++8mjwvbGFiZWw+PGlucHV0IGlkPSdzcC1hYy1mYXZpY29uVXJsJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB2YWx1ZT0nIitkZWZhdWx0RmF2aWNvblVybCsiJyBzdHlsZT0nd2lkdGg6NTUlO21hcmdpbi10b3A6LTAuM3JlbSAhaW1wb3J0YW50OycgdHlwZT0naW5wdXQnICIgKyAoaXNGYXZpY29uRW5hYmxlID8gJycgOiAnZGlzYWJsZWQ9dHJ1ZScpICsgIj48L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbD48aW5wdXQgdGl0bGU9J0FDLeenu+mZpOaQnOe0oumihOa1iycgaWQ9J3NwLWFjLXN1Z19vcmlnaW4nIG5hbWU9J3NwLWFjLWFfZm9yY2UnIHR5cGU9J2NoZWNrYm94JyAiICsgKGRvRGlzYWJsZVN1ZyA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgMy3np7vpmaTnmb7luqbmkJzntKLpooTmtYso5paH5a2X6Ieq5Yqo5pCc57SiKTwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsPjxpbnB1dCB0aXRsZT0nQUMt5pi+56S65Y+z5L6n5qCPJyBpZD0nc3AtYWMtcmlnaHQnIHR5cGU9J2NoZWNrYm94JyAiICsgKCBpc1JpZ2h0RGlzcGxheUVuYWJsZT8gJ2NoZWNrZWQnIDogJycpICsgIj7pmYTliqA0LeaYvuekuuWPs+S+p+agjzwvbGFiZWw+PC9saT5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICA8bGk+PGxhYmVsIHN0eWxlPSciKyhoYXNOZXdGdW5jTmVlZERpc3BsYXk/ImNvbG9yOmJsdWUgIWltcG9ydGFudDtmb250LXdlaWdodDogMTAwOyI6IiIpKyInPjxpbnB1dCB0aXRsZT0nQUMt5Y+M5Ye76auY5LquJyBpZD0nc3AtYWMtREJoaWdodExpZ2h0JyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB0eXBlPSdjaGVja2JveCcgIiArIChpc0RCSGlnaExpZ2h0RW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj7pmYTliqA1LeWPjOWHu+mrmOS6ri3oh6rliqjlpI3liLY8L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxsYWJlbCBzdHlsZT0nIisoaGFzTmV3RnVuY05lZWREaXNwbGF5PyJjb2xvcjpibHVlICFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6IDEwMDsiOiIiKSsiJz48aW5wdXQgdGl0bGU9J0FDLeiHquWKqOmrmOS6ricgaWQ9J3NwLWFjLWhpZ2hsaWdodCcgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoaXNBdXRvSGlnaExpZ2h0RW5hYmxlID8gJ2NoZWNrZWQnIDogJycpICsgIj7pmYTliqA4LeaQnOe0oumrmOS6ri3oh6rliqjpq5jkuq7mkJzntKLlhbPplK7or408L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0nbWFyZ2luLWxlZnQ6MjBweCc+6auY5LquLeminOiJsuWIl+ihqO+8mjxpbnB1dCB0aXRsZT0n6auY5LquLeminOiJsuiuvuWumicgc3R5bGU9J3dpZHRoOiA2NSU7JyBpZD0nc3AtYWMtaGlnaExpZ2h0Q29sb3JMaXN0JyB2YWx1ZT0nIisoSGlnaHRMaWdodENvbG9yTGlzdCsiIikucmVwbGFjZSgiLCIsICIsICIpKyInPjwvbGFiZWw+IiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy3mt7vliqDnvJblj7cnIGlkPSdzcC1hYy1jb3VudGVyJyBuYW1lPSdzcC1hYy1hX2ZvcmNlJyB0eXBlPSdjaGVja2JveCcgIiArIChpc0NvdW50ZXJFbmFibGUgPyAnY2hlY2tlZCcgOiAnJykgKyAiPumZhOWKoDYt57yW5Y+35Yqf6IO9PC9sYWJlbD48L2xpPlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIDxsaT48bGFiZWw+PGlucHV0IHRpdGxlPSdBQy3mloflrZfkuIvliJLnur8nIGlkPSdzcC1hYy1hbGluZScgbmFtZT0nc3AtYWMtYV9mb3JjZScgdHlwZT0nY2hlY2tib3gnICIgKyAoaXNBTGluZUVuYWJsZSA/ICdjaGVja2VkJyA6ICcnKSArICI+6ZmE5YqgNy3kuIvliJLnur88L2xhYmVsPjwvbGk+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgPGxpPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSdodHRwczovL3NoYW5nLnFxLmNvbS93cGEvcXVud3BhP2lka2V5PTViYmZlOWRlMWU4MWEwOTMwYmQwNTNmMzE1N2FhZDJkYmIzZmE3Yjk5MWFjOWYyMmVhOWYyZTJmNTNlZmRlODAnIHN0eWxlPSdjb2xvcjpyZWQgIWltcG9ydGFudDsnPuiBlOezu+S9nOiAhSzmj5Dlu7rorq4s5a+75rGC5biu5YqpLOiEmuacrOWumuWItueCueaIkTwvYT48L2xpPiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIDwvdWw+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtY2FuY2VsYnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbicgdGl0bGU9J+WPlua2iCcgc3R5bGU9J3Bvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50O2Zsb2F0OiBsZWZ0ICFpbXBvcnRhbnQ7Jz7lj5bmtog8L3NwYW4+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtc2F2ZWJ1dHRvbicgY2xhc3M9J3NwLWFjLXNwYW5idXR0b24nIHRpdGxlPSfkv53lrZjorr7nva4nIHN0eWxlPSdwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDtmbG9hdDogcmlnaHQgIWltcG9ydGFudDsnPuS/neWtmDwvc3Bhbj5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgPC9maWVsZHNldD5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgPC9kaXY+XG4iICsKICAgICAgICAgICAgICAgICIgICAgPC9kaXY+IjsKICAgICAgICAgICAgdHJ5e2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoQ29udGFpbmVyKTt9Y2F0Y2ggKGUpe2NvbnNvbGUubG9nKGUpO30KICAgICAgICB9CiAgICAgICAgdmFyIGFsbE5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmZhdmljb25ULCAuQ291bnRlclQiKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhbGxOb2Rlc1tpXS5nZXRBdHRyaWJ1dGUoJ2FjQ2xpY2snKSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBhbGxOb2Rlc1tpXS5zZXRBdHRyaWJ1dGUoJ2FjQ2xpY2snLCAnMScpOwogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIGFsbE5vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoKTsKICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgICAgIH1jYXRjaCAoZSl7Y29uc29sZS5sb2coZSk7fQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRyeXsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXNhdmVidXR0b24iKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAvLyDkv53lrZjlip/og70KICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJpc1JlZGlyZWN0RW5hYmxlIiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXJlZGlyZWN0IikuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiaXNBZHNFbmFibGUiLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtYWRzIikuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiQWRzU3R5bGVNb2RlX0JhaWR1IiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSJdOmNoZWNrZWQnKS52YWx1ZSk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiQWRzU3R5bGVNb2RlX0dvb2dsZSIsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIl06Y2hlY2tlZCcpLnZhbHVlKTsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJpc0Zhdmljb25FbmFibGUiLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtZmF2aWNvbiIpLmNoZWNrZWQpOwogICAgICAgICAgICAgICAgdmFyIGltZ3VybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1mYXZpY29uVXJsIikudmFsdWUudHJpbSgpOwogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImRlZmF1bHRGYXZpY29uVXJsIiwgKGltZ3VybD09IiJ8fGltZ3VybD09bnVsbCkgPyAiaHR0cHM6Ly93czEuc2luYWltZy5jbi9sYXJnZS82YTE1NTc5NGx5MWZvaWp0ZHpoeGhqMjAwdzAwd2pyNS5qcGciOmltZ3VybCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZG9EaXNhYmxlU3VnIiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLXN1Z19vcmlnaW4iKS5jaGVja2VkKTsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJpc1JpZ2h0RGlzcGxheUVuYWJsZSIsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1yaWdodCIpLmNoZWNrZWQpOwogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImlzREJIaWdoTGlnaHRFbmFibGUiLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtREJoaWdodExpZ2h0IikuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiaXNDb3VudGVyRW5hYmxlIiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvdW50ZXIiKS5jaGVja2VkKTsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJpc0FMaW5lRW5hYmxlIiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWFsaW5lIikuY2hlY2tlZCk7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiaXNBdXRvSGlnaExpZ2h0RW5hYmxlIiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWhpZ2hsaWdodCIpLmNoZWNrZWQpOwogICAgICAgICAgICAgICAgdmFyIGNvbG9yVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1oaWdoTGlnaHRDb2xvckxpc3QiKS52YWx1ZS5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgdmFyIGNvbG9yTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8Y29sb3JUZXh0Lmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgICBjb2xvckxpc3RbaV0gPSBjb2xvclRleHRbaV0udHJpbSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoIkhpZ2h0TGlnaHRDb2xvckxpc3QiLCBjb2xvckxpc3QpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSwgNDAwKTsKICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgIH1jYXRjaCAoZSl7Y29uc29sZS5sb2coZSk7fQogICAgICAgIHRyeXsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNhbmNlbGJ1dHRvbiIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1jb250ZW50Iikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgIH1jYXRjaCAoZSl7Y29uc29sZS5sb2coZSk7fQogICAgfQogICAgZnVuY3Rpb24gTG9hZFNldHRpbmcoKSB7CiAgICAgICAgaXNSZWRpcmVjdEVuYWJsZSA9IEdNX2dldFZhbHVlKCJpc1JlZGlyZWN0RW5hYmxlIiwgdHJ1ZSk7CiAgICAgICAgaXNBZHNFbmFibGUgPSBHTV9nZXRWYWx1ZSgiaXNBZHNFbmFibGUiLCB0cnVlKTsKICAgICAgICBBZHNTdHlsZU1vZGVfQmFpZHUgPSBHTV9nZXRWYWx1ZSgiQWRzU3R5bGVNb2RlX0JhaWR1IiwgMSk7CiAgICAgICAgQWRzU3R5bGVNb2RlX0dvb2dsZSA9IEdNX2dldFZhbHVlKCJBZHNTdHlsZU1vZGVfR29vZ2xlIiwgMSk7CiAgICAgICAgaXNGYXZpY29uRW5hYmxlID0gR01fZ2V0VmFsdWUoImlzRmF2aWNvbkVuYWJsZSIsIHRydWUpOwogICAgICAgIGRlZmF1bHRGYXZpY29uVXJsID0gR01fZ2V0VmFsdWUoImRlZmF1bHRGYXZpY29uVXJsIiwgImh0dHBzOi8vd3MxLnNpbmFpbWcuY24vbGFyZ2UvNmExNTU3OTRseTFmb2lqdGR6aHhoajIwMHcwMHdqcjUuanBnIik7CiAgICAgICAgZG9EaXNhYmxlU3VnID0gR01fZ2V0VmFsdWUoImRvRGlzYWJsZVN1ZyIsIHRydWUpOwogICAgICAgIGlzUmlnaHREaXNwbGF5RW5hYmxlID0gR01fZ2V0VmFsdWUoImlzUmlnaHREaXNwbGF5RW5hYmxlIiwgdHJ1ZSk7CiAgICAgICAgaXNEQkhpZ2hMaWdodEVuYWJsZSA9IEdNX2dldFZhbHVlKCJpc0RCSGlnaExpZ2h0RW5hYmxlIiwgZmFsc2UpOwogICAgICAgIGlzQ291bnRlckVuYWJsZSA9IEdNX2dldFZhbHVlKCJpc0NvdW50ZXJFbmFibGUiLCBmYWxzZSk7CiAgICAgICAgaXNBTGluZUVuYWJsZSA9IEdNX2dldFZhbHVlKCJpc0FMaW5lRW5hYmxlIiwgZmFsc2UpOwogICAgICAgIGlzQXV0b0hpZ2hMaWdodEVuYWJsZSA9IEdNX2dldFZhbHVlKCJpc0F1dG9IaWdoTGlnaHRFbmFibGUiLCBmYWxzZSk7CiAgICAgICAgSGlnaHRMaWdodENvbG9yTGlzdCA9IEdNX2dldFZhbHVlKCJIaWdodExpZ2h0Q29sb3JMaXN0IiwgWyIjRkZGRjgwIiwgIiM5MEVFOTAiLCAiIzMzRkZGRiIsICIjRkY2NjAwIiwgIiNGRjY5QjQiLCAiIzIwQjJBQSIsICIjODQ3MEZGIl0pOwogICAgICAgIHZhciBvbGRWZXJzaW9uID0gR01fZ2V0VmFsdWUoInZlcnNpb24iLCAiIik7CiAgICAgICAgaWYob2xkVmVyc2lvbiA9PSBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uKXsKICAgICAgICAgICAgaGFzTmV3RnVuY05lZWREaXNwbGF5ID0gZmFsc2U7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGhhc05ld0Z1bmNOZWVkRGlzcGxheSA9IG5lZWREaXNwbGF5TmV3RnVuOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJlbW92ZU9uTW91c2VEb3duRnVuYygpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZyAucmMgLnIgYSIpLmZvckVhY2goZnVuY3Rpb24gKG9uZSkgewogICAgICAgICAgICAgICAgb25lLnNldEF0dHJpYnV0ZSgib25tb3VzZWRvd24iLCAiIik7IC8vIOiwt+atjOWOu+mHjeWumuWQkeW5suaJsAogICAgICAgICAgICAgICAgb25lLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOyAvLyDosLfmrYzpk77mjqXmlrDmoIfnrb7miZPlvIAKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiByZW1vdmVMaW5rVGFyZ2V0KCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCLnp7vpmaTnn6XkuY7ph43lrprlkJHpl67popgiKTsKICAgICAgICB2YXIgbm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuUmljaFRleHQgYVtocmVmKj0nLy9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0J10iKTsKICAgICAgICBmb3IodmFyIGk9MDsgaTxub2Rlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIHZhciB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQobm9kZXNbaV0uaHJlZi5yZXBsYWNlKC9odHRwcz86XC9cL2xpbmtcLnpoaWh1XC5jb21cL1w/dGFyZ2V0PS8sICIiKSk7CiAgICAgICAgICAgIG5vZGVzW2ldLmhyZWYgPSB1cmw7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gQUNfYWRkU3R5bGUoY3NzLCBjbGFzc05hbWUsIGFkZFRvVGFyZ2V0LCBpc1JlbG9hZCl7IC8vIOa3u+WKoENTU+S7o+egge+8jOS4jeiAg+iZkeaWh+acrOi9veWFpeaXtumXtO+8jOW4puaciWNsYXNzTmFtZQogICAgICAgIHZhciB0b3V0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYoYWRkVG9UYXJnZXQgPT0gbnVsbCkgYWRkVG9UYXJnZXQgPSAiaGVhZCI7CiAgICAgICAgICAgIGlmKGlzUmVsb2FkID09IG51bGwpIGlzUmVsb2FkID0gZmFsc2U7CiAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkVG9UYXJnZXQpICE9IG51bGwpewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0b3V0KTsKICAgICAgICAgICAgICAgIGlmKGlzUmVsb2FkID09IGZhbHNlICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi4iK2NsYXNzTmFtZSkgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgLy8g6IqC54K55a2Y5ZyoLOW5tuS4lOS4jeWHhuWkh+imhueblgogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoIi4iK2NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICAgICAgICBpZihjbGFzc05hbWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBjc3NOb2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsKICAgICAgICAgICAgICAgIGNzc05vZGUuaW5uZXJIVE1MID0gY3NzOwogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkVG9UYXJnZXQpLmFwcGVuZENoaWxkKGNzc05vZGUpOwogICAgICAgICAgICAgICAgfWNhdGNoIChlKXtjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO30KICAgICAgICAgICAgfQogICAgICAgIH0sIDUwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlc2V0VVJMTm9ybWFsKGxpc3QpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8g5q2k5pa55rOV5piv5byC5q2l77yM5pWF5Zyo57uT5p2f55qE5pe25YCZ5L2/55SoaeS8muWHuumXrumimC3kuKXph40hCiAgICAgICAgICAgIC8vIOmHh+eUqOmXreWMheeahOaWueazleadpei/m+ihjOaVsOaNrueahOS8oOmAkgogICAgICAgICAgICB2YXIgY3VyTm9kZSA9IGxpc3RbaV07CiAgICAgICAgICAgIHZhciBjdXJocmVmID0gY3VyTm9kZS5ocmVmOwogICAgICAgICAgICB2YXIgdHJ1ZVVybE5vQmFpZHUgPSAiIjsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBjdXJOb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIGlmKG5vZGUuY2xhc3NOYW1lLmluZGV4T2YoInJlc3VsdCIpID49IDApewogICAgICAgICAgICAgICAgICAgIHRydWVVcmxOb0JhaWR1ID0gbm9kZS5xdWVyeVNlbGVjdG9yKEZhdmljb25UeXBlKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgdHJ1ZVVybE5vQmFpZHUgPSByZXBsYWNlQWxsKHRydWVVcmxOb0JhaWR1KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWNhdGNoIChlKXsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihJc2luQmFpZHVCbG9ja0xpc3RzKHRydWVVcmxOb0JhaWR1KSl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhW2hyZWYqPSciK2N1cmhyZWYrIiddIikuc2V0QXR0cmlidXRlKCJhY19yZWRpcmVjdFN0YXR1cyIsICItMiIpOyAvLyDkuKLlvIPnibnmrornmoTnmb7luqboh6rouqvnmoTlnLDlnYDjgJDnmb7luqbnn6XpgZPjgIHnmb7luqbotLTlkKfjgJEKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsaXN0W2ldICE9IG51bGwgJiYgbGlzdFtpXS5nZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIikgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgbGlzdFtpXS5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjAiKTsKICAgICAgICAgICAgICAgIGlmIChjdXJocmVmLmluZGV4T2YoInd3dy5iYWlkdS5jb20vbGluayIpID4gLTEgfHwKICAgICAgICAgICAgICAgICAgICBjdXJocmVmLmluZGV4T2YoIm0uYmFpZHUuY29tL2Zyb20iKSA+IC0xIHx8CiAgICAgICAgICAgICAgICAgICAgY3VyaHJlZi5pbmRleE9mKCJ3d3cuc29nb3UuY29tL2xpbmsiKSA+IC0xIHx8CiAgICAgICAgICAgICAgICAgICAgY3VyaHJlZi5pbmRleE9mKCJzby5jb20vbGluayIpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGNfY3Vybm9kZSxjX2N1cmhyZWYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ21SZXF1ZXN0Tm9kZSA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGNfY3VyaHJlZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IkFjY2VwdCI6ICJ0ZXh0L2h0bWwiLCAiUmVmZXJlciI6Y19jdXJocmVmfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ucmVhZHlzdGF0ZWNoYW5nZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTaXRlVHlwZUlEID09IFNpdGVUeXBlLkJBSURVKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5maW5hbFVybCAhPSBjX2N1cmhyZWYgJiYgcmVzcG9uc2UuZmluYWxVcmwhPSIiICYmIHJlc3BvbnNlLmZpbmFsVXJsICE9IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlc3BvbnNlLmZpbmFsVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgImxvY2F0aW9uLnJlcGxhY2VcXChcIihbXlwiXSspXCIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuU09HT1UpIHsgLy/lpoLmnpzmmK/mkJzni5fnmoTnu5PmnpwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlYWxSZWRpcmVjdChnbVJlcXVlc3ROb2RlLCBjX2N1cmhyZWYsIHJlc3BvbnNlLnJlc3BvbnNlVGV4dCwgIlVSTD0nKFteJ10rKSciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuU08pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbFJlZGlyZWN0KGdtUmVxdWVzdE5vZGUsIGNfY3VyaHJlZiwgcmVzcG9uc2UucmVzcG9uc2VUZXh0LCAiVVJMPScoW14nXSspJyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgfSkoY3VyTm9kZSwgY3VyaHJlZik7IC8v5Lyg6YCS5pen55qE572R5Z2A6L+H5Y6777yM6K+75L2cY19jdXJocmVmCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBEZWFsUmVkaXJlY3QocmVxdWVzdCwgY3VyTm9kZUhyZWYsIHJlc3BUZXh0LCBSZWdUZXh0KXsKICAgICAgICBpZihyZXNwVGV4dCA9PSBudWxsIHx8IHR5cGVvZihyZXNwVGV4dCk9PSJ1bmRlZmluZWQiKSByZXR1cm47CiAgICAgICAgdmFyIHJlc3VsdFJlc3BvbnNlVXJsID0gIiI7CiAgICAgICAgaWYoUmVnVGV4dCAhPSBudWxsKXsKICAgICAgICAgICAgcmVzdWx0UmVzcG9uc2VVcmwgPSBSZWdfR2V0KHJlc3BUZXh0LCBSZWdUZXh0KTsKICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgIHJlc3VsdFJlc3BvbnNlVXJsID0gcmVzcFRleHQ7CiAgICAgICAgfQogICAgICAgIGlmKHJlc3VsdFJlc3BvbnNlVXJsICE9IG51bGwgJiYgcmVzdWx0UmVzcG9uc2VVcmwgIT0gIiIpewogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhW2hyZWYqPSciK2N1ck5vZGVIcmVmKyInXSIpLnNldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiLCAiMiIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYVtocmVmKj0nIitjdXJOb2RlSHJlZisiJ10iKS5zZXRBdHRyaWJ1dGUoImhyZWYiLCByZXN1bHRSZXNwb25zZVVybCk7CiAgICAgICAgICAgIH1jYXRjaCAoZSl7fQogICAgICAgICAgICByZXF1ZXN0LmFib3J0KCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gUmVnX0dldChIVE1MLCByZWcpIHsKICAgICAgICB2YXIgUmVnRSA9IG5ldyBSZWdFeHAocmVnKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gUmVnRS5leGVjKEhUTUwpWzFdOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJlbW92ZUFEX2JhaWR1X3NvZ291KCkgeyAvLyDnp7vpmaTnmb7luqboh6rmnInlub/lkYoKICAgICAgICBpZiAoU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5CQUlEVSkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2NvbnRlbnRfbGVmdCIpWzBdICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHZhciBmYXRoZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2NvbnRlbnRfbGVmdCIpWzBdLmNoaWxkTm9kZXM7CiAgICAgICAgICAgICAgICB2YXIgbGFzdElkID0gMDsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmF0aGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IGZhdGhlcnNbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLnRhZ05hbWUgPT0gIkRJViIgJiYgY3VycmVudE5vZGUuZ2V0QXR0cmlidXRlKCJkZWFsQUQiKSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGN1cnJlbnROb2RlLmlkIHx8ICIiID09IGN1cnJlbnROb2RlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnsbPmnIlJROeahOiyjOS8vOmDveaYr+W5v+WRigogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuenu+mZpOW5v+WRijEgQ0xBU1M9IiArIGN1cnJlbnROb2RlLmNsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTsgLy8g5Yqo5oCB56e76Zmk5a+86Ie055qEaeW/hemhu+S4i+mZjQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnROb2RlLmlkID09ICJjbG9uZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElEIOaYvuekuuS4ukNMT05F55qE5Lmf5piv5bm/5ZGKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi56e76Zmk5bm/5ZGKMiBJRD0iICsgY3VycmVudE5vZGUuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07IC8vIOWKqOaAgeenu+mZpOWvvOiHtOeahGnlv4XpobvkuIvpmY0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Tm9kZS5jbGFzc05hbWUuaW5kZXhPZigicmVzdWx0IikgIT0gMCAmJiAvXlxkKyQvLnRlc3QoY3VycmVudE5vZGUuaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGFzc+S4jeaYr3Jlc3VsdC4uLueahO+8jOW5tuS4lGlk5piv57qv57K55pWw5a2X55qEKOW+iOWkpykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnp7vpmaTlub/lkYozIElEPSIgKyBjdXJyZW50Tm9kZS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTsgLy8g5Yqo5oCB56e76Zmk5a+86Ie055qEaeW/hemhu+S4i+mZjQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBjdXJyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCIuZjEzPnNwYW4iKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlICE9IG51bGwgJiYgbm9kZS5pbm5lckhUTUwgPT0gIuW5v+WRiiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi56e76Zmk5bm/5ZGKNCBJRD0iICsgY3VycmVudE5vZGUuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTsgLy8g5Yqo5oCB56e76Zmk5a+86Ie055qEaeW/hemhu+S4i+mZjQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnNldEF0dHJpYnV0ZSgiZGVhbEFEIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChTaXRlVHlwZUlEID09IFNpdGVUeXBlLlNPR09VKSB7CiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNwcm9tb3Rpb25fYWR2X2NvbnRhaW5lciIpOwogICAgICAgICAgICBzYWZlUmVtb3ZlKCIja21hcF9idXNpbmVzc190aXRsZSIpOwogICAgICAgICAgICBzYWZlUmVtb3ZlKCIja21hcF9idXNpbmVzc191bCIpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnJ2ci1tb2RlbFtzdHlsZT0nd2lkdGg6MjUwcHg7J10iKS5zdHlsZSA9ICJkaXNwbGF5Om5vbmUiOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZSBpZiAoU2l0ZVR5cGVJRCA9PSBTaXRlVHlwZS5TTykgewogICAgICAgICAgICBzYWZlUmVtb3ZlKCIjc29fa3ctYWQiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI20tc3ByZWFkLWxlZnQiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI20tc3ByZWFkLWJvdHRvbSIpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIElzTnVtYmVyKHZhbCl7CiAgICAgICAgaWYodmFsID09PSAiIiB8fCB2YWwgPT1udWxsKXsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZighaXNOYU4odmFsKSl7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH1lbHNlewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gYWRkQ291bnRlcihjaXRlTGlzdCkgewogICAgICAgIHZhciBjc3NUZXh0ID0gIm1hcmdpbi1yaWdodDo0cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7YmFja2dyb3VuZDojRkQ5OTk5O2NvbG9yOndoaXRlO2ZvbnQtZmFtaWx5Oiflvq7ova/pm4Xpu5EnO2ZvbnQtc2l6ZToxNnB4O3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjIycHg7bGluZS1oZWlnaHQ6MjJweDtib3JkZXItcmFkaXVzOjUwJTtmbG9hdDpsZWZ0OyI7CiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2l0ZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGNpdGVMaXN0W2ldLmdldEF0dHJpYnV0ZSgnc29ydEluZGV4JykpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2l0ZUxpc3RbaV0uc2V0QXR0cmlidXRlKCdzb3J0SW5kZXgnLCBzb3J0SW5kZXgpOwogICAgICAgICAgICAgICAgY2l0ZUxpc3RbaV0uaW5uZXIgPSBjaXRlTGlzdFtpXS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBpZihJc051bWJlcihjaXRlTGlzdFtpXS5wYXJlbnROb2RlLmlkKSl7CiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv55m+5bqm55qE5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICI8ZGl2IGNsYXNzPSdDb3VudGVyVCcgc3R5bGU9IiArIGNzc1RleHQgKyAiPiIgKyAoY2l0ZUxpc3RbaV0ucGFyZW50Tm9kZS5pZCAlIDEwMCkgKyAiPC9kaXY+IjsKICAgICAgICAgICAgICAgICAgICBjaXRlTGlzdFtpXS5pbm5lckhUTUwgPSBkaXYuaW5uZXJIVE1MICsgY2l0ZUxpc3RbaV0uaW5uZXI7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gIjxkaXYgY2xhc3M9J0NvdW50ZXJUJyBzdHlsZT0iICsgY3NzVGV4dCArICI+IiArIHNvcnRJbmRleCArICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgIGNpdGVMaXN0W2ldLmlubmVySFRNTCA9IGRpdi5pbm5lckhUTUwgKyBjaXRlTGlzdFtpXS5pbm5lcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNvcnRJbmRleCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc2FmZVJlbW92ZShjc3NTZWxlY3Rvcil7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjc3NTZWxlY3RvcikucmVtb3ZlKCk7CiAgICAgICAgfWNhdGNoIChlKXt9fQoKICAgIGZ1bmN0aW9uIHJlcGxhY2VBbGwoc2JlZm9yZSkgewogICAgICAgIHZhciBzZW5kOwogICAgICAgIHZhciByZXN1bHQgPSBzYmVmb3JlLnNwbGl0KCctJyk7CiAgICAgICAgaWYgKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuU09HT1UgJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKCJzb2dvdSIpIDwgMjApIHsKICAgICAgICAgICAgLy8gLS3mkJzni5fkuJPnlKjvvJvlpoLmnpznrKzkuIDkuKrmmK/kuK3mlofnmoTor53vvIzlnLDlnYDlsLHmmK/nrKzkuozkuKoKICAgICAgICAgICAgc2JlZm9yZSA9IHJlc3VsdFsxXTsKICAgICAgICB9CiAgICAgICAgc2VuZCA9IHNiZWZvcmUucmVwbGFjZSgvKFwvW14vXSp8XHMqKS8sICIiKS5yZXBsYWNlKC88W14+XSo+L2csICIiKS5yZXBsYWNlKC9odHRwcz86XC9cLy9nLCAiIikucmVwbGFjZSgvPFwvP3N0cm9uZz4vZywgIiIpLnJlcGxhY2UoLzxcLz9iPi9nLCAiIikucmVwbGFjZSgvPD8+Py9nLCAiIikucmVwbGFjZSgvKCB8XC8pLiovZywgIiIpOwogICAgICAgIHJldHVybiBzZW5kOwogICAgfQogICAgZnVuY3Rpb24gSXNpbkJhaWR1QmxvY2tMaXN0cyh1cmwpewogICAgICAgIGlmKHVybCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYodXJsLmluZGV4T2YoInpoaWRhby5iYWlkdS5jb20iKSA+PSAwKSByZXR1cm4gdHJ1ZTsKICAgICAgICBpZih1cmwuaW5kZXhPZigidGVpYmEuYmFpZHUuY29tIikgPj0gMCkgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgZnVuY3Rpb24gYWRkRmF2aWNvbihjaXRlTGlzdCkgewogICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBjaXRlTGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgdmFyIHVybCA9IHJlcGxhY2VBbGwoY2l0ZUxpc3RbaW5kZXhdLmlubmVySFRNTCk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coaW5kZXgrIi4iK3VybCk7CiAgICAgICAgICAgIGlmIChudWxsID09IGNpdGVMaXN0W2luZGV4XS5nZXRBdHRyaWJ1dGUoImFjX2Zhdmljb25TdGF0dXMiKSkgewogICAgICAgICAgICAgICAgaWYgKHVybCA9PSAiIikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLml6DmlYjlnLDlnYDvvJoiICsgY2l0ZUxpc3RbaW5kZXhdLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICAgICAgY2l0ZUxpc3RbaW5kZXhdLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMSIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGN1ck5vZGUgPSBjaXRlTGlzdFtpbmRleF07CiAgICAgICAgICAgICAgICB2YXIgZmF2aWNvblVybCA9IHVybDsKICAgICAgICAgICAgICAgIHZhciBJST0gMDsKICAgICAgICAgICAgICAgIGZvciAoOyBJSSA8PSA1OyBJSSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY3VyTm9kZSA9IGN1ck5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNJblVybExpc3QoY3VyTm9kZS5jbGFzc05hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coaW5kZXgrIi4iK2Zhdmljb25VcmwrIi0tIitJSSk7CiAgICAgICAgICAgICAgICBpZiAoSUkgPD0gNSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0bXBIVE1MID0gY3VyTm9kZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHRtcEhUTUwuaW5kZXhPZigiZmF2LXVybCIpCiAgICAgICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJmYXZ1cmwiKQogICAgICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigidGl0LWljbyIpCiAgICAgICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJpbWdfZmF2IHJtc19pbWciKQogICAgICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigiYy10b29sLSIpCiAgICAgICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJzcGFuIGNsYXNzPVwiYy1pY29uIGMtaWNvbi0iKTsKICAgICAgICAgICAgICAgICAgICAvL+S7luiHquW3seW3sue7j+WBmuS6hmZhdmljb27kuoYKICAgICAgICAgICAgICAgICAgICBpZiAocG9zID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuW3suacieWbvueJh++8miIgKyBmYXZpY29uVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2l0ZUxpc3RbaW5kZXhdLnNldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIsICItMiIpOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8g54m55q6K5aSE55CGQklORwogICAgICAgICAgICAgICAgICAgIGlmKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuQklORykgY3VyTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcigiaDIiKTsKICAgICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vYXBpLmJ5aS5wdy9mYXZpY29uLz91cmw9Pz8/PyDkuI3nqLPlrpoKICAgICAgICAgICAgICAgICAgICAvL2h0dHA6Ly8iK2Zhdmljb25VcmwrIi9jZG4uaWNvP2RlZmF1bHRpY29uPWh0dHA6Ly9zb3ouaW0vZmF2aWNvbi5pY28g5LiN56iz5a6aCiAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL3d3dy54dHdpbmQuY29tL2FwaS9pbmRleC5waHA/dXJsPT8/Pz8g5oyC5LqG44CC44CC44CCCiAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL3N0YXRpY3MuZG5zcG9kLmNuL3Byb3h5X2Zhdmljb24vXy9mYXZpY29uP2RvbWFpbj1zaW5hLmNuCiAgICAgICAgICAgICAgICAgICAgLy93d3cuZ29vZ2xlLmNvbS9zMi9mYXZpY29ucz9kb21haW49NzY0MzUwMTc3LmxvZnRlci5jb20KICAgICAgICAgICAgICAgICAgICAvL+WmguaenOWcsOWdgOS4jeato+ehru+8jOmCo+S5iOS4ouW8gwogICAgICAgICAgICAgICAgICAgIHZhciBob3N0ID0gZmF2aWNvblVybC5yZXBsYWNlKC9bXi5dK1wuKFteLl0rKVwuKFteLl0rKS8sICIkMS4kMiIpOwogICAgICAgICAgICAgICAgICAgIGlmIChjdXJOb2RlLnF1ZXJ5U2VsZWN0b3IoIi5mYXZpY29uVCIpID09IG51bGwgJiYgaG9zdC5sZW5ndGggPiAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnNOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUgPSBjdXJOb2RlLmNoaWxkcmVuWzBdOyAvL2ZpcnN0Q2hpbGTlrrnmmJPpgYfliLB0ZXh05a+56LGhCiAgICAgICAgICAgICAgICAgICAgICAgIGNpdGVMaXN0W2luZGV4XS5zZXRBdHRyaWJ1dGUoImFjX2Zhdmljb25TdGF0dXMiLCAiMSIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmluc2VydEJlZm9yZShpbnNOb2RlLCBjdXJOb2RlLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLmNsYXNzTmFtZSA9ICJmYXZpY29uVCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUuc3R5bGUgPSAidmVydGljYWwtYWxpZ246c3ViO2hlaWdodDoxNnB4O3dpZHRoOjE2cHg7bWFyZ2luLXJpZ2h0OjVweDttYXJnaW4tYm90dG9tOiAycHg7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zcmMgPSAiaHR0cHM6Ly9mYXZpY29uLnlhbmRleC5uZXQvZmF2aWNvbi8iICsgaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zZXRBdHRyaWJ1dGUoImZhdmljb25JRCIsICIwIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUub25sb2FkID0gZnVuY3Rpb24gKGV2ZU5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVOb2RlLnRhcmdldC5uYXR1cmFsV2lkdGggPCAxNikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZU5vZGUudGFyZ2V0LnNyYyA9IGRlZmF1bHRGYXZpY29uVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZU5vZGUudGFyZ2V0Lm9ubG9hZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGlzSW5VcmxMaXN0KHVybCkgewogICAgICAgICAgICB2YXIgbGVuZyA9IGZhdGhlck5hbWUubGVuZ3RoOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmc7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKGZhdGhlck5hbWVbaV0pID49IDApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gSW5zZXJ0U2V0dGluZ01lbnUoKXsKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciIpID09IG51bGwpIHsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1LCAjZ2J3PmRpdj5kaXYiKTsKICAgICAgICAgICAgICAgIHBhcmVudC5zdHlsZT0id2lkdGg6IGF1dG87IjsKICAgICAgICAgICAgICAgIHZhciB1c2VyQWRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgICAgIHVzZXJBZGl2LnN0eWxlID0gInRleHQtZGVjb3JhdGlvbjogbm9uZTsiOwogICAgICAgICAgICAgICAgdXNlckFkaXYuaW5uZXJIVE1MID0gIjxvbCBpZD0nbXl1c2VyJyBzdHlsZT0nZGlzcGxheTogaW5saW5lLWJsb2NrOyc+PGxpIGNsYXNzPSdteXVzZXJjb25maWcnIHN0eWxlPSdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7aGVpZ2h0OiAxOHB4O2xpbmUtaGVpZ2h0OiAxLjU7YmFja2dyb3VuZDogIzI4NjZiZDtjb2xvcjogI2ZmZjtmb250LXdlaWdodDogYm9sZDt0ZXh0LWFsaWduOiBjZW50ZXI7cGFkZGluZzogNnB4Oyc+6Ieq5a6a5LmJJm5ic3A7PHNwYW4gY2xhc3M9J2FjLW5ld3ZlcnNpb25EaXNwbGF5JyBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjogcmVkO2xlZnQ6IDBweDt0b3A6IDBweDtmbG9hdDogcmlnaHQ7aGVpZ2h0OiA4cHg7d2lkdGg6IDhweDtib3JkZXItcmFkaXVzOiA0cHg7ZGlzcGxheToiKyhoYXNOZXdGdW5jTmVlZERpc3BsYXk/InVuc2V0Ijoibm9uZSIpKyInPiZuYnNwOzwvc3Bhbj48L2xpPjwvb2w+IjsKICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUodXNlckFkaXYsIHBhcmVudC5jaGlsZE5vZGVzWzBdKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteXVzZXIgLm15dXNlcmNvbmZpZyIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQUN0b2dnbGVTZXR0aW5nRGlzcGxheSgpOwogICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgIH1jYXRjaCAoZSl7fQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIEZTQmFpZHUoKSB7IC8vIHRoYW5rcyBmb3IgY29kZSBmcm9tIOa1rueUn0DmnKrmrYcgQHBhZ2UgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzMxNjQyCiAgICAgICAgdmFyIGtleVNpdGUgPSAiYmFpZHUiOwogICAgICAgIGlmKFNpdGVUeXBlSUQgPT0gU2l0ZVR5cGUuR09PR0xFKSBrZXlTaXRlID0gImdvb2dsZSI7CiAgICAgICAgdmFyIFN0eWxlTWFuZ2VyID0gewogICAgICAgICAgICBpbXBvcnRTdHlsZTogZnVuY3Rpb24gKGZpbGVVcmwsIHRvQ2xhc3NOYW1lLCBhZGRUb1RhcmdldCwgaXNSZWxvYWQpIHsKICAgICAgICAgICAgICAgIGlmKGlzUmVsb2FkID09IG51bGwpIGlzUmVsb2FkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZihhZGRUb1RhcmdldCA9PSBudWxsKSBhZGRUb1RhcmdldCA9ICJoZWFkIjsKICAgICAgICAgICAgICAgIGlmKGlzUmVsb2FkPT1mYWxzZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuIit0b0NsYXNzTmFtZSkgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgLy8g5bey57uP5a2Y5ZyoLOW5tuS4lOS4jeWHhuWkh+imhueblgogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQsLmJrV01nZCIpID09IG51bGwpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7CiAgICAgICAgICAgICAgICBzc05vZGUucmVsID0gInN0eWxlc2hlZXQiOwogICAgICAgICAgICAgICAgc3NOb2RlLnR5cGUgPSAidGV4dC9jc3MiOwogICAgICAgICAgICAgICAgc3NOb2RlLmNsYXNzTmFtZSA9IHRvQ2xhc3NOYW1lOwogICAgICAgICAgICAgICAgc3NOb2RlLm1lZGlhID0gInNjcmVlbiI7CiAgICAgICAgICAgICAgICBzc05vZGUuaHJlZiA9IGZpbGVVcmw7CiAgICAgICAgICAgICAgICB0cnl7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZGRUb1RhcmdldCkuYXBwZW5kQ2hpbGQoc3NOb2RlKTt9Y2F0Y2ggKGUpe30KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gLy/liqDovb3mma7pgJrmoLflvI8KICAgICAgICAgICAgLy8gbG9hZENvbW1vblN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vICAgICB0aGlzLmltcG9ydFN0eWxlKCJodHRwOi8vMTI3LjAuMC4xLyIra2V5U2l0ZSsiQ29tbW9uU3R5bGUuY3NzIiwgIkNvbW1vblN0eWxlIiwgIiN3cmFwcGVyPiNoZWFkLCAuanNycCIpOwogICAgICAgICAgICAvLyB9LAogICAgICAgICAgICAvLyAvL+WKoOi9veiHquWumuS5ieiPnOWNleagt+W8jwogICAgICAgICAgICAvLyBsb2FkTXlNZW51U3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gICAgIHRoaXMuaW1wb3J0U3R5bGUoImh0dHA6Ly8xMjcuMC4wLjEvIitrZXlTaXRlKyJNeU1lbnVTdHlsZS5jc3MiLCAiTXlNZW51U3R5bGUiLCAiI3dyYXBwZXI+I2hlYWQsIC5qc3JwIik7CiAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICAgIC8vIC8v5Yqg6L295Y2V6aG15qC35byPCiAgICAgICAgICAgIC8vIGxvYWRPbmVQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gICAgIHRoaXMuaW1wb3J0U3R5bGUoImh0dHA6Ly8xMjcuMC4wLjEvIitrZXlTaXRlKyJPbmVQYWdlU3R5bGUuY3NzIiwgIk9uZVBhZ2VTdHlsZSIsICIjd3JhcHBlcj4jaGVhZCwgLmpzcnAiKTsKICAgICAgICAgICAgLy8gICAgIEdNX2FkZFN0eWxlKCIucmVzdWx0LW9wOm5vdChbaWRdKXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iKTsKICAgICAgICAgICAgLy8gICAgIHRyeXsKICAgICAgICAgICAgLy8gICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcmVzdWx0X2xvZ28gaW1nIikuc2V0QXR0cmlidXRlKCJzcmMiLCAiaHR0cHM6Ly93czEuc2luYWltZy5jbi9sYXJnZS82YTE1NTc5NGx5MWZreDF1aHhmejZqMjAzOTAxMndlbi5qcGciKTsKICAgICAgICAgICAgLy8gICAgIH1jYXRjaCAoZSl7fQogICAgICAgICAgICAvLyB9LAogICAgICAgICAgICAvLyAvL+WKoOi9veWPjOmhteagt+W8jwogICAgICAgICAgICAvLyBsb2FkVHdvUGFnZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vICAgICB0aGlzLmltcG9ydFN0eWxlKCJodHRwOi8vMTI3LjAuMC4xLyIra2V5U2l0ZSsiVHdvUGFnZVN0eWxlLmNzcyIsICJUd29QYWdlU3R5bGUiLCAiI3dyYXBwZXI+I2hlYWQsIC5qc3JwIik7CiAgICAgICAgICAgIC8vICAgICB0cnl7CiAgICAgICAgICAgIC8vICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3Jlc3VsdF9sb2dvIGltZyIpLnNldEF0dHJpYnV0ZSgic3JjIiwgImh0dHBzOi8vd3MxLnNpbmFpbWcuY24vbGFyZ2UvNmExNTU3OTRseTFma3gxdWh4Zno2ajIwMzkwMTJ3ZW4uanBnIik7CiAgICAgICAgICAgIC8vICAgICB9Y2F0Y2ggKGUpe30KICAgICAgICAgICAgLy8gfSwKCiAgICAgICAgICAgIC8v5Yqg6L295pmu6YCa5qC35byPCiAgICAgICAgICAgIGxvYWRDb21tb25TdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoR01fZ2V0UmVzb3VyY2VUZXh0KGtleVNpdGUrIkNvbW1vblN0eWxlIiksICJBQ1N0eWxlLWNvbW1vbiIsICIjd3JhcHBlcj4jaGVhZCwgLmpzcnAiKTsKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcmVzdWx0X2xvZ28gaW1nIikuc2V0QXR0cmlidXRlKCJzcmMiLCAiaHR0cHM6Ly93czEuc2luYWltZy5jbi9sYXJnZS82YTE1NTc5NGx5MWZreDF1aHhmejZqMjAzOTAxMndlbi5qcGciKTsKICAgICAgICAgICAgICAgIH1jYXRjaCAoZSl7fQogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+WKoOi9veiHquWumuS5ieiPnOWNleagt+W8jwogICAgICAgICAgICBsb2FkTXlNZW51U3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKEdNX2dldFJlc291cmNlVGV4dChrZXlTaXRlKyJNeU1lbnVTdHlsZSIpLCAiQUNTdHlsZS1teW1lbnUiLCAiI3dyYXBwZXI+I2hlYWQsIC5qc3JwIik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5Yqg6L295Y2V6aG15qC35byPCiAgICAgICAgICAgIGxvYWRPbmVQYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKEdNX2dldFJlc291cmNlVGV4dChrZXlTaXRlKyJPbmVQYWdlU3R5bGUiKSsiLnJlc3VsdC1vcDpub3QoW2lkXSl7ZGlzcGxheTpub25lIWltcG9ydGFudDt9IiwgIkFDU3R5bGUtb25lcGFnZSIsICIjd3JhcHBlcj4jaGVhZCwgLmpzcnAiKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy/liqDovb3lj4zpobXmoLflvI8KICAgICAgICAgICAgbG9hZFR3b1BhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoR01fZ2V0UmVzb3VyY2VUZXh0KGtleVNpdGUrIlR3b1BhZ2VTdHlsZSIpKyIucmVzdWx0LW9wOm5vdChbaWRdKXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iLCAiQUNTdHlsZS10d29wYWdlIiwgIiN3cmFwcGVyPiNoZWFkLCAuanNycCIpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2FkRXhwYW5kT25lU3R5bGU6ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoCiAgICAgICAgICAgICAgICAgICAgIi5yZXN1bHQtb3A6bm90KFtpZF0pe2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7fSIgKwogICAgICAgICAgICAgICAgICAgICIjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsI2NvbnRlbnRfbGVmdCAucmVzdWx0OmhvdmVye2JveC1zaGFkb3c6MCAwIDJweCBncmF5O2JhY2tncm91bmQ6cmdiYSgyMzAsMjMwLDIzMCwwLjEpIWltcG9ydGFudDt9IiArCiAgICAgICAgICAgICAgICAgICAgIiNjb250ZW50X2xlZnQgLnJlc3VsdCwjY29udGVudF9sZWZ0IC5yZXN1bHQtb3B7d2lkdGg6MTAwJTsgbWluLXdpZHRoOjY3MHB4O21hcmdpbi1ib3R0b206MTRweCFpbXBvcnRhbnQ7fSIgKwogICAgICAgICAgICAgICAgICAgICIuYy1zcGFuMTh7d2lkdGg6NzglIWltcG9ydGFudDttaW4td2lkdGg6NTUwcHg7fSIgKwogICAgICAgICAgICAgICAgICAgICIuYy1zcGFuMjR7d2lkdGg6IGF1dG8haW1wb3J0YW50O30iLCAiQUNTdHlsZS1leHBhbmQiLCAiI3dyYXBwZXI+I2hlYWQsIC5qc3JwIik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciBDb250cm9sTWFuYWdlciA9IHsKICAgICAgICAgICAgdHdvUGFnZURpc3BsYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIOWumuaXtuafpeivogogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQ+LmMtY29udGFpbmVyOm50aC1jaGlsZChldmVuKSwuc3JnPi5nOm50aC1jaGlsZChldmVuKSIpICE9IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbChkb3VibGVDaGVja1RpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pZCA9ImRvdWJsZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NvbnRlbnRfbGVmdD4jZG91YmxlLC5zcmc+I2RvdWJsZSIpID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGVudF9sZWZ0LC5zcmciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNjb250ZW50X2xlZnQ+LmMtY29udGFpbmVyOm50aC1jaGlsZChldmVuKSwuc3JnPi5nOm50aC1jaGlsZChldmVuKSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZGl2LCBwYXJlbnQuY2hpbGROb2Rlc1swXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIERCUCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNkb3VibGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgREJQX2MwID0gREJQLmNoaWxkTm9kZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBzZWxlY3Rvci5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCUC5pbnNlcnRCZWZvcmUoc2VsZWN0b3JbaV0sIERCUF9jMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhbzlrrnoh6rliqjnv7vpobXohJrmnKwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGVudF9sZWZ0Pi5zcC1zZXBhcmF0b3IsIC5tZWQ+LnNwLXNlcGFyYXRvciIpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGVudF9sZWZ0Pi5zcC1zZXBhcmF0b3I6bm90KFtpc0hhbmRsZWRdKSwgLm1lZD4uc3Atc2VwYXJhdG9yOm5vdChbaXNIYW5kbGVkXSkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNjb250ZW50X2xlZnQ+LnNwLXNlcGFyYXRvcjpub3QoW2lzSGFuZGxlZF0pfi5jLWNvbnRhaW5lcjpudGgtY2hpbGQob2RkKSwgLm1lZD4uc3Atc2VwYXJhdG9yOm5vdChbaXNIYW5kbGVkXSl+I2lyZXMgLmc6bnRoLWNoaWxkKG9kZCkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnl7cGFyZW50LnNldEF0dHJpYnV0ZSgiaXNIYW5kbGVkIiwgIjEiKTt9Y2F0Y2ggKGUpe30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgREJQID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2RvdWJsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgc2VsZWN0b3IubGVuZ3RoOyBpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQlAuYXBwZW5kQ2hpbGQoc2VsZWN0b3JbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDUwKTsKICAgICAgICAgICAgICAgIH1jYXRjaCAoZSl7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5bGF5Lit5pi+56S6CiAgICAgICAgICAgIGNlbnRlckRpc3BsYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBBZHNTdHlsZU1vZGUgfHwgbnVsbDsKICAgICAgICAgICAgICAgIGlmKHJlc3VsdCA+IDApIEFDX2FkZFN0eWxlKCIjcmhze2Rpc3BsYXk6bm9uZX0iLCAiQUNTdHlsZS1oaWRlIik7CiAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYWNDc3NMb2FkRmxhZyIpID09IG51bGwgJiYgdmFsdWVMb2NrID09IGZhbHNlKXsKICAgICAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGVudF9sZWZ0LCAuYmtXTWdkIikgPT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHZhbHVlTG9jayA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluc0xvY2tOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGVudF9sZWZ0LCAuYmtXTWdkIikuYXBwZW5kQ2hpbGQoaW5zTG9ja05vZGUpOwogICAgICAgICAgICAgICAgICAgIFN0eWxlTWFuZ2VyLmxvYWRNeU1lbnVTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdCA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgU3R5bGVNYW5nZXIubG9hZEV4cGFuZE9uZVN0eWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09IDIpIHsvL+WNlemhteWxheS4rQogICAgICAgICAgICAgICAgICAgICAgICBTdHlsZU1hbmdlci5sb2FkRXhwYW5kT25lU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgU3R5bGVNYW5nZXIubG9hZENvbW1vblN0eWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0eWxlTWFuZ2VyLmxvYWRPbmVQYWdlU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PSAzKSB7IC8v5Y+M6aG15bGF5LitCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHdvUGFnZURpc3BsYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgU3R5bGVNYW5nZXIubG9hZFR3b1BhZ2VTdHlsZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBTdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVMb2NrID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSwgMzApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlckRpc3BsYXkoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5pdCgpOwogICAgICAgIGZ1bmN0aW9uIG11dGF0aW9uZnVuYygpIHsKICAgICAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5pdCgpOwogICAgICAgICAgICB0cnl7d2luZG93Lm9ucmVzaXplKCk7fWNhdGNoIChlKXt9CiAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNkb3VibGUiKSAhPSBudWxsKXsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgLy8g5Yqo5oCB6K6+572u5bqV6YOo5o6o6I2Q5YWz6ZSu5a2X55qEbWFyZ2luVG9w5bGe5oCnCiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29udGFpbmVyICNycyBkaXYiKS5wYXJlbnROb2RlLnN0eWxlLm1hcmdpblRvcCA9IE1hdGgubWF4KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNkb3VibGUiKS5vZmZzZXRIZWlnaHQsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQiKS5vZmZzZXRIZWlnaHQpLWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNjb250ZW50X2xlZnQiKS5vZmZzZXRIZWlnaHQrInB4IjsKICAgICAgICAgICAgICAgICAgICB9Y2F0Y2ggKGUpe30KICAgICAgICAgICAgICAgIH0sIDEyMDApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKEFkc1N0eWxlTW9kZSA+IDApewogICAgICAgICAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFkc1N0eWxlTW9kZSA9PSAyKS8vIOWNleWIl+WxheS4reaooeW8jwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggLT0gMjAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihvbGRDZW50ZXJfY29sV2lkdGggPT0gd2lkdGgpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYob25SZXNpemVMb2NrZWQgPT0gZmFsc2UpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXNpemVMb2NrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUNfYWRkU3R5bGUoIiNjbnQ+Lm13ICNjZW50ZXJfY29sIC5tZWRbaWQ9J3JlcyddLCAjdGF3e3dpZHRoOiIrd2lkdGgrInB4O30iLCAiQUMtU3R5bGUtYmtXTWdkIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiI2NlbnRlcl9jb2x7d2lkdGg6Iit3aWR0aCsicHggIWltcG9ydGFudDttYXJnaW4tbGVmdDogdW5zZXQgIWltcG9ydGFudDttYXJnaW4tcmlnaHQ6IHVuc2V0ICFpbXBvcnRhbnQ7fSNjZW50ZXJfY29sPip7cGFkZGluZy1sZWZ0OjglO3BhZGRpbmctcmlnaHQ6OCU7fSIsICJBQy1TdHlsZS1ia1dNZ2QiLCBudWxsLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvblJlc2l6ZUxvY2tlZCA9IGZhbHNlOyB9LCAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJMZWZ0ID0gd2lkdGggKiAwLjUgLSA0ODA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBZHNTdHlsZU1vZGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2JvdHRvbWFkc34jZXh0cmFyZXMiKS5zdHlsZSA9ICJtYXJnaW4tbGVmdDoiICsgbWFyTGVmdCArICJweCAhaW1wb3J0YW50IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNmb290Iikuc3R5bGUgPSAibWFyZ2luLWxlZnQ6IiArIChtYXJMZWZ0IC0gMTUwKSArICJweCAhaW1wb3J0YW50IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvbGRDZW50ZXJfY29sV2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBtdXRhdGlvbmZ1bmMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIERvSGlnaExpZ2h0V2l0aFNlYXJjaFRleHQoKXsKICAgICAgICB2YXIgc2VhcmNoVmFsdWUgPSBHTV9nZXRWYWx1ZSgic2VhcmNoS2V5V29yZHMiLCAiIik7CiAgICAgICAgV29yZEF1dG9IaWdoTGlnaHQoc2VhcmNoVmFsdWUpOwogICAgfQogICAgZnVuY3Rpb24gV29yZEF1dG9IaWdoTGlnaHQoc2VhcmNoVGV4dCl7CiAgICAgICAgaWYoIWhhc0luaXRCdG5CaW5kICYmIGlzREJIaWdoTGlnaHRFbmFibGUpewogICAgICAgICAgICBoYXNJbml0QnRuQmluZCA9IHRydWU7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgRG9IaWdoTGlnaHQsIGZhbHNlKTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIERvSGlnaExpZ2h0LCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgRG9IaWdoTGlnaHQsIHRydWUpOwogICAgICAgIH0KICAgICAgICB2YXIgaXNEQkNsaWNrT24gPSB0cnVlOwogICAgICAgIHZhciBlbmFibGVDaGFyQ29kZSA9ICdXJzsKICAgICAgICB2YXIga2V5U2V0cyA9IG5ldyBPYmplY3QoKTsKICAgICAgICB2YXIgY291bnRlciA9IDA7CiAgICAgICAgdmFyIGlzSW5EZWJ1ZyA9IGZhbHNlOwogICAgICAgIGRvSGlnaExpZ2h0VGV4dFMoc2VhcmNoVGV4dCk7CiAgICAgICAgZnVuY3Rpb24gRG9IaWdoTGlnaHQoZSkgewogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSBnZXRTZWxlY3RlZFRleHQodGFyZ2V0KTsKICAgICAgICAgICAgdmFyIHNfZGJsY2xpY2sgPSAoZS50eXBlID09PSAnZGJsY2xpY2snKSAmJiBpc0RCQ2xpY2tPbjsgLy8g5piv5Y+M5Ye76YCJ5LitCiAgICAgICAgICAgIHZhciBzX2tleXVwID0gKGUudHlwZSA9PT0gJ2tleXVwJykgJiYgKGVuYWJsZUNoYXJDb2RlLmNoYXJDb2RlQXQoMCk9PWUua2V5Q29kZSk7Ly8g5piv5oyJ5LiL54m55q6K5oyJ6ZSuCiAgICAgICAgICAgIGlmIChzZWxlY3RlZFRleHQgJiYgZ2V0QkxlbihzZWxlY3RlZFRleHQpID49IDMpIHsKICAgICAgICAgICAgICAgIG15Q29uc29sZUxvZyhzZWxlY3RlZFRleHQpOwogICAgICAgICAgICAgICAgaWYgKHNfa2V5dXApewogICAgICAgICAgICAgICAgICAgIGRvSGlnaExpZ2h0VGV4dFMoc2VsZWN0ZWRUZXh0KTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmIChzX2RibGNsaWNrKSB7CiAgICAgICAgICAgICAgICAgICAgZW5hYmxlREJTZWxlY3RUZXh0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgic2VhcmNoS2V5V29yZHMiLCBzZWxlY3RlZFRleHQpOwogICAgICAgICAgICAgICAgICAgIGRvSGlnaExpZ2h0VGV4dFMoc2VsZWN0ZWRUZXh0LCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBteUNvbnNvbGVMb2codGV4dCl7CiAgICAgICAgICAgIGlmKGlzSW5EZWJ1Zyl7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBkb0hpZ2hMaWdodFRleHRTKHNlbGVjdGVkVGV4dCwgZGJjbGljaykgewogICAgICAgICAgICBpZih0eXBlb2Yoc2VsZWN0ZWRUZXh0KSA9PSAidW5kZWZpbmVkIiB8fCBzZWxlY3RlZFRleHQgPT0gbnVsbCB8fCBzZWxlY3RlZFRleHQgPT0gIiIpIHJldHVybjsKICAgICAgICAgICAgdW5IaWdoTGlnaHRBbGxfVGV4dCgpOwogICAgICAgICAgICBpZihkYmNsaWNrKXsKICAgICAgICAgICAgICAgIG15Q29uc29sZUxvZygi5Y+M5Ye7OiIgKyBzZWxlY3RlZFRleHQpOwogICAgICAgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkKHNlbGVjdGVkVGV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5pdEtleVNldHMoc2VsZWN0ZWRUZXh0KTsKICAgICAgICAgICAgZG9IaWdoTGlnaHRBbGxfQ1NTKCk7CiAgICAgICAgICAgIHRyeXtjbGVhckludGVydmFsKG9sZFRleHRTZWxlY3RJbnRlcnZhbCk7fWNhdGNoIChlKXtjb25zb2xlLmxvZyhlKTt9CiAgICAgICAgICAgIGRvSGlnaExpZ2h0QWxsX1RleHQoKTsKICAgICAgICAgICAgb2xkVGV4dFNlbGVjdEludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGRvSGlnaExpZ2h0QWxsX1RleHQoKTsKICAgICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldFNlbGVjdGVkVGV4dCh0YXJnZXQpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VGV4dFNlbGVjdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSAnJzsKICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlKCJ0eXBlIikpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmdldEF0dHJpYnV0ZSgidHlwZSIpLnRvTG93ZXJDYXNlKCkgPT09ICJjaGVja2JveCIpIHJldHVybiAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRhcmdldC52YWx1ZTsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzdGFydFBvcyA9IHRhcmdldC5zZWxlY3Rpb25TdGFydDsKICAgICAgICAgICAgICAgICAgICB2YXIgZW5kUG9zID0gdGFyZ2V0LnNlbGVjdGlvbkVuZDsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHN0YXJ0UG9zKSAmJiAhaXNOYU4oZW5kUG9zKSkgc2VsZWN0ZWRUZXh0ID0gdmFsdWUuc3Vic3RyaW5nKHN0YXJ0UG9zLCBlbmRQb3MpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZFRleHQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgcmV0dXJuICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFRleHQpIHNlbGVjdGVkVGV4dCA9IGdldFRleHRTZWxlY3Rpb24oKTsKICAgICAgICAgICAgbXlDb25zb2xlTG9nKHNlbGVjdGVkVGV4dCk7CiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZFRleHQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdldEJMZW4oc3RyKSB7CiAgICAgICAgICAgIGlmIChzdHIgPT0gbnVsbCkgcmV0dXJuIDA7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9ICJzdHJpbmciKXsKICAgICAgICAgICAgICAgIHN0ciArPSAiIjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1teXHgwMC1ceGZmXS9nLCIwMSIpLmxlbmd0aDsKICAgICAgICB9CiAgICAgICAgLy8g5Yid5aeL5YyW54K55Ye755qE5paH5a2X5L+h5oGvCiAgICAgICAgZnVuY3Rpb24gaW5pdEtleVNldHMoc2VsZWN0aW9uKXsKICAgICAgICAgICAgLy8gMS5zcGxpdOmAmui/h+eJueauiuWtl+espuWSjOWtl+espui+ueeVjOWIhuWJsuS4slvpnZ5bMC05QS1aYS16XeeJueauiuWtl+espl0KICAgICAgICAgICAgLy8gMi7pgJrov4fnibnlrprlrZfnrKbov57mjqXljp/lp4vkuLLvvIwKICAgICAgICAgICAgLy8gMy4x56e76Zmk5aSa5qyh6YeN5aSN55qE54m55a6a5Liy77yM6Z2e5bi455So5Liy56e76Zmk77yM6YG/5YWN56m65LiyCiAgICAgICAgICAgIC8vIDMuMuenu+mZpOW8gOWktOaIluiAhee7k+WwvueahOeJueWumuS4su+8jOmBv+WFjeWIhuWJsuWQjuWHuueOsOepuueZveaVsOaNru+8jAogICAgICAgICAgICAvLyA0LuaMieeJueWumuS4suWIhuWJsgogICAgICAgICAgICBrZXlTZXRzLmtleXdvcmRzID0gc2VsZWN0aW9uCiAgICAgICAgICAgICAgICAuc3BsaXQoL1xiIHxbXHUwMDAwLVx1MDAyRlx1MDAzQS1cdTAwNDBcdTAwNUItXHUwMDYwXHUwMDdCLVx1MDBGRlx1RkYwMC1cdUZGRkZcdTMwMDAtXHUzMDNGXS9nKQogICAgICAgICAgICAgICAgLmpvaW4oJ0FDc0NBJykKICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXlx1NEUwMC1cdTlGQTV8MC05fGEtenxBLVpfXSsvZywgIiIpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKEFDc0NBKXsyfS9nLCAiQUNzQ0EiKQogICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheQUNzQ0F8QUNzQ0EkKS9nLCAiIikKICAgICAgICAgICAgICAgIC5zcGxpdCgiQUNzQ0EiKTsKICAgICAgICAgICAga2V5U2V0cy5sZW5ndGggPSBrZXlTZXRzLmtleXdvcmRzLmxlbmd0aDsKICAgICAgICAgICAga2V5U2V0cy50ZXh0Y29sb3IgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgLy8ga2V5U2V0cy5iYWNrY29sb3IgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAga2V5U2V0cy52aXNpYmxlID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwga2V5U2V0cy5rZXl3b3Jkcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICBrZXlTZXRzLnRleHRjb2xvcltpXSA9ICJyZ2IoMCwwLDApIjsKICAgICAgICAgICAgICAgIGtleVNldHMudmlzaWJsZVtpXSA9ICJ0cnVlIjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBkb0hpZ2hMaWdodEFsbF9DU1MoKXsgLy8g6aG26YOo55qE6YKj5LiA5aCG5pWw57uECiAgICAgICAgICAgIGlmIChrZXlTZXRzLnZpc2libGVbMF0gPT0gInRydWUiKXsKICAgICAgICAgICAgICAgIHZhciBydWxlID0gIi5hY1dIU2V0e2Rpc3BsYXk6aW5saW5lIWltcG9ydGFudDsiOwogICAgICAgICAgICAgICAgaWYgKGtleVNldHMudGV4dGNvbG9yLmxlbmd0aCA+IDApIHJ1bGUgKz0gImNvbG9yOiIra2V5U2V0cy50ZXh0Y29sb3JbMF0rIjsiOwogICAgICAgICAgICAgICAgcnVsZSArPSAiZm9udC13ZWlnaHQ6aW5oZXJpdDt9IjsKICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBrZXlTZXRzLmtleXdvcmRzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgICBydWxlICs9ICIuYWNXSFNldFtkYXRhPSciK2tleVNldHMua2V5d29yZHNbaV0udG9Mb2NhbGVMb3dlckNhc2UoKSsiJ117YmFja2dyb3VuZC1jb2xvcjoiK0hpZ2h0TGlnaHRDb2xvckxpc3RbaSAlIEhpZ2h0TGlnaHRDb2xvckxpc3QubGVuZ3RoXSsiO30iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUocnVsZSwgIkFDLWhpZ2hMaWdodFJ1bGUiLCAiYm9keSIsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGRvSGlnaExpZ2h0QWxsX1RleHQoKXsKICAgICAgICAgICAgbXlDb25zb2xlTG9nKCLov5nph4wiKTsKICAgICAgICAgICAgaWYoa2V5U2V0cy5rZXl3b3Jkcy5sZW5ndGggPT0gMCkgcmV0dXJuOwogICAgICAgICAgICB2YXIgcGF0RXhwID0gIiI7CiAgICAgICAgICAgIGZvcih2YXIgaW5kZXg9MDsgaW5kZXg8a2V5U2V0cy5rZXl3b3Jkcy5sZW5ndGgtMTsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgcGF0RXhwICs9IGtleVNldHMua2V5d29yZHNbaW5kZXhdKyJ8IjsKICAgICAgICAgICAgfQogICAgICAgICAgICBwYXRFeHAgKz0ga2V5U2V0cy5rZXl3b3Jkc1tpbmRleF07CiAgICAgICAgICAgIHZhciBwYXQgPSBuZXcgUmVnRXhwKCIoIitwYXRFeHArIikiLCAiZ2kiKTsKICAgICAgICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aGRmcmFnJyk7CiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCJ0aGRjb250YWluIiwidHJ1ZSIpOwogICAgICAgICAgICB2YXIgc25hcEVsZW1lbnRzID0gZG9jdW1lbnQuZXZhbHVhdGUoCiAgICAgICAgICAgICAgICAnLi8vdGV4dCgpW25vcm1hbGl6ZS1zcGFjZSgpICE9ICIiICcgKwogICAgICAgICAgICAgICAgJ2FuZCBub3QoYW5jZXN0b3I6OnN0eWxlKSAnICsKICAgICAgICAgICAgICAgICdhbmQgbm90KGFuY2VzdG9yOjpzY3JpcHQpICcgKwogICAgICAgICAgICAgICAgJ2FuZCBub3QoYW5jZXN0b3I6OnRleHRhcmVhKSAnICsKICAgICAgICAgICAgICAgICdhbmQgbm90KGFuY2VzdG9yOjpkaXZbQGlkPSJ0aGR0b3BiYXIiXSkgJyArCiAgICAgICAgICAgICAgICAnYW5kIG5vdChhbmNlc3Rvcjo6ZGl2W0BpZD0ia3doaWVkaXQiXSkgJyArCiAgICAgICAgICAgICAgICAnYW5kIG5vdChwYXJlbnQ6OnRoZGZyYWdbQHR4aGlkeTE1XSldJywKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHksIG51bGwsIFhQYXRoUmVzdWx0LlVOT1JERVJFRF9OT0RFX1NOQVBTSE9UX1RZUEUsIG51bGwpOwogICAgICAgICAgICBpZiAoIXNuYXBFbGVtZW50cy5zbmFwc2hvdEl0ZW0oMCkpIHsgcmV0dXJuOyB9CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzbmFwRWxlbWVudHMuc25hcHNob3RMZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gc25hcEVsZW1lbnRzLnNuYXBzaG90SXRlbShpKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGF0LnRlc3Qobm9kZS5ub2RlVmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdC5sYXN0SW5kZXggPSAwOyAvLyDlv4Xpobvph43nva4KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwID0gc3Bhbi5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kUmVzdWx0ID0gbm9kZS5ub2RlVmFsdWUucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNocyA9IHBhdC5leGVjKGZpbmRSZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVwTm9kZUhUTUwgPSBmaW5kUmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzaFNldCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgbWF0Y2hzLmxlbmd0aDsgaisrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15Q29uc29sZUxvZyhtYXRjaHNbal0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGhhc2hTZXRbbWF0Y2hzW2ldXSkgPT0gInVuZGVmaW5lZCIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hTZXRbbWF0Y2hzW2ldXSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwTm9kZUhUTUwgPSByZXBOb2RlSFRNTC5yZXBsYWNlKG1hdGNoc1tqXSwgJzx0aGRmcmFnIGNsYXNzPSJUSG1vIGFjV0hTZXQiIHR4aGlkeTE1PSJhY1dIU2V0IiBkYXRhPSInK21hdGNoc1tqXS50b0xvY2FsZUxvd2VyQ2FzZSgpKyciPicrbWF0Y2hzW2pdKyc8L3RoZGZyYWc+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3AuaW5uZXJIVE1MID0gcmVwTm9kZUhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoc3AsIG5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3AucGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoInRoZGNvbnRhaW4iKSkgc3Aub3V0ZXJIVE1MID0gc3AuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1bkhpZ2hMaWdodEFsbF9UZXh0KCl7CiAgICAgICAgICAgIHZhciB0Z3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGhkZnJhZ1t0eGhpZHkxNT0iYWNXSFNldCJdJyk7CiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTx0Z3RzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgIHZhciBwYXJub2RlID0gdGd0c1tpXS5wYXJlbnROb2RlLCBwYXJwYXIgPSBwYXJub2RlLnBhcmVudE5vZGUsIHRndHNwYW47CiAgICAgICAgICAgICAgICBpZiAocGFybm9kZS5oYXNBdHRyaWJ1dGUoInRoZGNvbnRhaW4iKSAmJiBwYXJub2RlLmlubmVySFRNTCA9PSB0Z3RzW2ldLm91dGVySFRNTCl7CiAgICAgICAgICAgICAgICAgICAgcGFybm9kZS5vdXRlckhUTUwgPSB0Z3RzW2ldLnRleHRDb250ZW50LnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7Jyk7CiAgICAgICAgICAgICAgICAgICAgdGd0c3BhbiA9IHBhcnBhcjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGd0c1tpXS5vdXRlckhUTUwgPSB0Z3RzW2ldLnRleHRDb250ZW50LnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7Jyk7CiAgICAgICAgICAgICAgICAgICAgdGd0c3BhbiA9IHBhcm5vZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0Z3RzcGFuLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgICAgaWYgKHRndHNwYW4uaGFzQXR0cmlidXRlKCJ0aGRjb250YWluIikpewogICAgICAgICAgICAgICAgICAgIHBhcm5vZGUgPSB0Z3RzcGFuLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcm5vZGUpewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFybm9kZS5oYXNBdHRyaWJ1dGUoInRoZGNvbnRhaW4iKSAmJiBwYXJub2RlLmlubmVySFRNTCA9PSB0Z3RzcGFuLm91dGVySFRNTCAmJiB0Z3RzcGFuLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoZGZyYWdbdHhoaWR5MTVdJykubGVuZ3RoID09IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFybm9kZS5vdXRlckhUTUwgPSB0Z3RzcGFuLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJub2RlLmlubmVySFRNTCA9PSB0Z3RzcGFuLm91dGVySFRNTCAmJiB0Z3RzcGFuLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoZGZyYWdbdHhoaWR5MTVdJykubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcm5vZGUuaW5uZXJIVE1MID0gdGd0c3Bhbi5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG9sZFRncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInRoZGZyYWdbdGhkY29udGFpbj0ndHJ1ZSddIik7CiAgICAgICAgICAgIGNvdW50ZXIgPSAwOwogICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IG9sZFRncy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICB2YXIgY3VyVGcgPSBvbGRUZ3NbaV07CiAgICAgICAgICAgICAgICBtYXJrQ2hpbGRhbmRSZW1vdmUoY3VyVGcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG1hcmtDaGlsZGFuZFJlbW92ZShub2RlKXsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgaWYobm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gInRoZGZyYWciKXsKICAgICAgICAgICAgICAgICAgICBub2RlLm91dGVySFRNTCA9IG5vZGUuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGNoaWxkTGlzdCA9IG5vZGUuY2hpbGROb2RlczsKICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgY2hpbGRMaXN0Lmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBjaGlsZExpc3RbaV07CiAgICAgICAgICAgICAgICAgICAgbWFya0NoaWxkYW5kUmVtb3ZlKG5vZGUpOwogICAgICAgICAgICAgICAgICAgIGlmKG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICJ0aGRmcmFnIil7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUub3V0ZXJIVE1MID0gbm9kZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9Y2F0Y2ggKGUpe30KICAgICAgICB9CiAgICB9Cn0pKCk7"},{"name":"Download Youtube videos and subtitles","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["http://www.youtube.com/embed/*","https://www.youtube.com/embed/*"],"orig_includes":["http://www.youtube.com/*","https://www.youtube.com/*"],"orig_matches":["http://www.youtube.com/*","https://www.youtube.com/*","http://s.ytimg.com/yts/jsbin/html5player*","https://s.ytimg.com/yts/jsbin/html5player*","http://manifest.googlevideo.com/*","https://manifest.googlevideo.com/*","http://*.googlevideo.com/videoplayback*","https://*.googlevideo.com/videoplayback*","http://*.youtube.com/videoplayback*","https://*.youtube.com/videoplayback*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1511228579293,"data":{}},"enabled":false,"position":8,"file_url":"https://greasyfork.org/scripts/8426-download-youtube-videos-and-subtitles/code/Download%20Youtube%20videos%20and%20subtitles.user.js","uuid":"9b5d999b-13ea-4850-9414-1030dab62fc3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICBEb3dubG9hZCBZb3V0dWJlIHZpZGVvcyBhbmQgc3VidGl0bGVzCi8vIEBuYW1lc3BhY2UgIGh0dHBzOi8vd3d3LmZpbmRoYW8ubmV0Ci8vIEB2ZXJzaW9uICAgIDAuMy43Ci8vIEBkZXNjcmlwdGlvbiAg6I635Y+WeW91dHViZeinhumikeWSjOWtl+W5leeahOS4i+i9vemTvuaOpQovLyBAaW5jbHVkZSBodHRwOi8vd3d3LnlvdXR1YmUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cHM6Ly93d3cueW91dHViZS5jb20vKgovLyBAcmVxdWlyZSBodHRwOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuOS4xL2pxdWVyeS5taW4uanMKLy8gQGV4Y2x1ZGUgaHR0cDovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8qCi8vIEBleGNsdWRlIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyoKLy8gQG1hdGNoIGh0dHA6Ly93d3cueW91dHViZS5jb20vKgovLyBAbWF0Y2ggaHR0cHM6Ly93d3cueW91dHViZS5jb20vKgovLyBAbWF0Y2ggaHR0cDovL3MueXRpbWcuY29tL3l0cy9qc2Jpbi9odG1sNXBsYXllcioKLy8gQG1hdGNoIGh0dHBzOi8vcy55dGltZy5jb20veXRzL2pzYmluL2h0bWw1cGxheWVyKgovLyBAbWF0Y2ggaHR0cDovL21hbmlmZXN0Lmdvb2dsZXZpZGVvLmNvbS8qCi8vIEBtYXRjaCBodHRwczovL21hbmlmZXN0Lmdvb2dsZXZpZGVvLmNvbS8qCi8vIEBtYXRjaCBodHRwOi8vKi5nb29nbGV2aWRlby5jb20vdmlkZW9wbGF5YmFjayoKLy8gQG1hdGNoIGh0dHBzOi8vKi5nb29nbGV2aWRlby5jb20vdmlkZW9wbGF5YmFjayoKLy8gQG1hdGNoIGh0dHA6Ly8qLnlvdXR1YmUuY29tL3ZpZGVvcGxheWJhY2sqCi8vIEBtYXRjaCBodHRwczovLyoueW91dHViZS5jb20vdmlkZW9wbGF5YmFjayoKLy8gQGNvcHlyaWdodCAgMjAxOCssIEZpbmQKLy8gQGF1dGhvciBGaW5kSGFvCi8vID09L1VzZXJTY3JpcHQ9PQoKCmJ2ZDJfYnRuX29uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgIHZhciBmb3JtMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgIGZvcm0xLmlkID0gInBvc3QiOwogICAgZm9ybTEubmFtZSA9ICJwb3N0IjsKICAgIGZvcm0xLm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0xLnRhcmdldCA9ICJfYmxhbmsiOwogICAgZm9ybTEuYWN0aW9uID0gImh0dHBzOi8vd3d3LmZpbmR5b3V0dWJlLm5ldC9yZXN1bHQiOwogICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgIGlucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgIGlucHV0Lm5hbWUgPSAidXJsIjsKICAgIGlucHV0LnZhbHVlID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0xKTsKICAgIGZvcm0xLmFwcGVuZENoaWxkKGlucHV0KTsKICAgIGZvcm0xLnN1Ym1pdCgpOwp9OwpnZXRTcGFuID0gZnVuY3Rpb24odGV4dCwgY2xhc3NOYW1lKSB7CiAgICB2YXIgX3RuID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7CiAgICB2YXIgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgIHNwYW4uY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgc3Bhbi5hcHBlbmRDaGlsZChfdG4pOwogICAgcmV0dXJuIHNwYW47Cn07CmZ1bmN0aW9uIHBvbHltZXJJbmplY3QoKXsKCiAgICAvKiBDcmVhdGUgYnV0dG9uICovCiAgICB2YXIgYnV0dG9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBidXR0b25EaXYuaWQgPSAicGFyZW50QnV0dG9uIjsKICAgIGJ1dHRvbkRpdi5jbGFzc05hbWUgPSAic3R5bGUtc2NvcGUiOwogICAgdmFyIGJ2ZDJfYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBidmQyX2J0bi5jbGFzc05hbWUgPSAic3R5bGUtc2NvcGUgYnZkMl9idG4iOwoKCiAgICBpZih0eXBlb2YoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlmcmFtZURvd25sb2FkQnV0dG9uIikpICE9ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpZnJhbWVEb3dubG9hZEJ1dHRvbiIpICE9PSBudWxsKXsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlmcmFtZURvd25sb2FkQnV0dG9uIikucmVtb3ZlKCk7CiAgICB9CgogICAgYnZkMl9idG4uc3R5bGUgPSAiYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47IGJvcmRlcjogc29saWQgMnB4IGdyZWVuOyBib3JkZXItcmFkaXVzOiAycHg7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMHB4IDE1cHg7IGZvbnQtc2l6ZTogMTRweDsgY3Vyc29yOnBvaW50ZXI7IGhlaWdodDozM3B4O21hcmdpbi1yaWdodDogN3B4O21hcmdpbi10b3A6IDdweDtsaW5lLWhlaWdodDogMzNweDtmb250LXdlaWdodDogNTAwOyBkaXNwbGF5OmlubGluZS1ibG9jazsiOwogICAgYnZkMl9idG4uYXBwZW5kQ2hpbGQoZ2V0U3BhbigiRG93bmxvYWQgQnkgRmluZFlvdXR1YmUubmV0IiwgIiIpKTsKCiAgICBidmQyX2J0bi5vbmNsaWNrID0gYnZkMl9idG5fb25jbGljazsKCiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQoYnZkMl9idG4pOwoKICAgIC8qIEZpbmQgYW5kIGFkZCB0byB0YXJnZXQgKi8KICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2lkPSdzdWJzY3JpYmUtYnV0dG9uJ10iKTsKCiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGFyZ2V0RWxlbWVudC5sZW5ndGg7IGkrKyl7CgogICAgICAgIGlmKHRhcmdldEVsZW1lbnRbaV0uY2xhc3NOYW1lLmluZGV4T2YoInl0ZC12aWRlby1zZWNvbmRhcnktaW5mby1yZW5kZXJlciIpID4gLTEpewoKICAgICAgICAgICAgdGFyZ2V0RWxlbWVudFtpXS5hcHBlbmRDaGlsZChidXR0b25EaXYpOwoKICAgICAgICB9CgogICAgfQoKICAgIC8qIEZpeCBoaWRkZW4gZGVzY3JpcHRpb24gYnVnICovCiAgICB2YXIgZGVzY3JpcHRpb25Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJ5dGQtdmlkZW8tc2Vjb25kYXJ5LWluZm8tcmVuZGVyZXIiKTsKICAgIGlmKGRlc2NyaXB0aW9uQm94WzBdLmNsYXNzTmFtZS5pbmRleE9mKCJsb2FkaW5nIikgPiAtMSl7CgogICAgICAgIGRlc2NyaXB0aW9uQm94WzBdLmNsYXNzTGlzdC5yZW1vdmUoImxvYWRpbmciKTsKCiAgICB9Cgp9CgpmdW5jdGlvbiBzdGFuZGFyZEluamVjdCgpIHsKICAgIHZhciBwYWdlY29udGFpbmVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlLWNvbnRhaW5lcicpOwogICAgaWYgKCFwYWdlY29udGFpbmVyKSByZXR1cm47CiAgICBpZiAoL15odHRwcz86XC9cL3d3d1wueW91dHViZS5jb21cL3dhdGNoXD8vLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpKSBydW4oKTsKICAgIHZhciBpc0FqYXg9L2NsYXNzW1x3XHMiJy09XStzcGZcLWxpbmsvLnRlc3QocGFnZWNvbnRhaW5lci5pbm5lckhUTUwpOwogICAgdmFyIGxvZ29jb250YWluZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ28tY29udGFpbmVyJyk7CiAgICBpZiAobG9nb2NvbnRhaW5lciAmJiAhaXNBamF4KSB7IC8vIGZpeCBmb3IgYmxvY2tlZCB2aWRlb3MKICAgICAgICBpc0FqYXg9KCcgJytsb2dvY29udGFpbmVyLmNsYXNzTmFtZSsnICcpLmluZGV4T2YoJyBzcGYtbGluayAnKT49MDsKICAgIH0KICAgIHZhciBjb250ZW50PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7CiAgICBpZiAoaXNBamF4ICYmIGNvbnRlbnQpIHsgLy8gQWpheCBVSQogICAgICAgIHZhciBtbz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgICAgICAgaWYodHlwZW9mIG1vIT09J3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgdmFyIG9ic2VydmVyPW5ldyBtbyhmdW5jdGlvbihtdXRhdGlvbnMpIHsKICAgICAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG11dGF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgaWYobXV0YXRpb24uYWRkZWROb2RlcyE9PW51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzW2ldLmlkPT0nd2F0Y2g3LWNvbnRhaW5lcicgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzW2ldLmlkPT0nd2F0Y2g3LW1haW4tY29udGFpbmVyJykgeyAvLyBvbGQgdmFsdWU6IG1vdmllX3BsYXllcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGNvbnRlbnQsIHtjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWV9KTsgLy8gb2xkIHZhbHVlOiBwYWdlY29udGFpbmVyCiAgICAgICAgfSBlbHNlIHsgLy8gTXV0YXRpb25PYnNlcnZlciBmYWxsYmFjayBmb3Igb2xkIGJyb3dzZXJzCiAgICAgICAgICAgIHBhZ2Vjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgb25Ob2RlSW5zZXJ0ZWQsIGZhbHNlKTsKICAgICAgICB9CiAgICB9Cn0KCmZ1bmN0aW9uIG9uTm9kZUluc2VydGVkKGUpIHsKICAgIGlmIChlICYmIGUudGFyZ2V0ICYmIChlLnRhcmdldC5pZD09J3dhdGNoNy1jb250YWluZXInIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuaWQ9PSd3YXRjaDctbWFpbi1jb250YWluZXInKSkgeyAvLyBvbGQgdmFsdWU6IG1vdmllX3BsYXllcgogICAgICAgIHJ1bigpOwogICAgfQp9CgoKZnVuY3Rpb24gcnVuKCl7CgogICAgaWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYXJlbnRCdXR0b24iKSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcoMCwgMjUpLmluZGV4T2YoInlvdXR1YmUuY29tIikgPiAtMSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJ3YXRjaD8iKSA+IC0xKXsKCiAgICAgICAgdmFyIHBhcmVudEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKICAgICAgICBwYXJlbnRCdXR0b24uY2xhc3NOYW1lID0gInl0LXVpeC1idXR0b24geXQtdWl4LWJ1dHRvbi1kZWZhdWx0IjsKICAgICAgICBwYXJlbnRCdXR0b24uaWQgPSAicGFyZW50QnV0dG9uIjsKCiAgICAgICAgcGFyZW50QnV0dG9uLnN0eWxlLmhlaWdodCA9ICIyM3B4IjsKICAgICAgICBwYXJlbnRCdXR0b24uc3R5bGUubWFyZ2luTGVmdCA9ICIyOHB4IjsKICAgICAgICBwYXJlbnRCdXR0b24uc3R5bGUucGFkZGluZ0JvdHRvbSA9ICIxcHgiOwoKICAgICAgICBwYXJlbnRCdXR0b24ub25jbGljayA9IGJ2ZDJfYnRuX29uY2xpY2s7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndhdGNoNy11c2VyLWhlYWRlciIpLmFwcGVuZENoaWxkKHBhcmVudEJ1dHRvbik7CgogICAgICAgIHZhciBjaGlsZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICBjaGlsZEJ1dHRvbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiRG93bmxvYWQgQnkgRmluZFlvdXR1YmUubmV0IikpOwogICAgICAgIGNoaWxkQnV0dG9uLmNsYXNzTmFtZSA9ICJ5dC11aXgtYnV0dG9uLWNvbnRlbnQiOwogICAgY2hpbGRCdXR0b24uc3R5bGUgPSAiYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47IGJvcmRlcjogc29saWQgMnB4IGdyZWVuOyBib3JkZXItcmFkaXVzOiAycHg7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMHB4IDE1cHg7IGZvbnQtc2l6ZTogMTRweDsgY3Vyc29yOnBvaW50ZXI7IGhlaWdodDozM3B4O21hcmdpbi1yaWdodDogN3B4O21hcmdpbi10b3A6IDdweDtsaW5lLWhlaWdodDogMzNweDtmb250LXdlaWdodDogNTAwOyBkaXNwbGF5OmlubGluZS1ibG9jazsiOwoKICAgICAgICBwYXJlbnRCdXR0b24uYXBwZW5kQ2hpbGQoY2hpbGRCdXR0b24pOwoKICAgIH0KCn0KCmlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwb2x5bWVyLWFwcCIpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXN0aGVhZCIpIHx8IHdpbmRvdy5Qb2x5bWVyKXsKCiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpewoKICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJ3YXRjaD92PSIpIDwgMCl7CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIH0KCiAgICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvdW50IikgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhcmVudEJ1dHRvbiIpID09PSBudWxsKXsKCiAgICAgICAgICAgIHBvbHltZXJJbmplY3QoKTsKCgogICAgICAgIH0KCiAgICB9LCAxMDApOwoKfQoKZWxzZXsKCiAgICBzdGFuZGFyZEluamVjdCgpOwoKfQ=="},{"name":"网页限制解除","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1513351712334,"data":{}},"enabled":true,"position":9,"file_url":"https://greasyfork.org/scripts/14146-%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4/code/%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4.user.js","uuid":"48bf620a-3c2b-481e-9cd8-e5e9f16b68f3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vQ2F0NzM3My8KCi8vIEBuYW1lICAgICAgICAgICAgICDnvZHpobXpmZDliLbop6PpmaQKLy8gQG5hbWU6ZW4gICAgICAgICAgIFJlbW92ZSB3ZWIgbGltaXRzCi8vIEBuYW1lOnpoICAgICAgICAgICDnvZHpobXpmZDliLbop6PpmaQKLy8gQG5hbWU6emgtQ04gICAgICAgIOe9kemhtemZkOWItuino+mZpAovLyBAbmFtZTp6aC1UVyAgICAgICAg57ay6aCB6ZmQ5Yi26Kej6ZmkCi8vIEBuYW1lOmphICAgICAgICAgICDjgqbjgqfjg5bjga7opo/liLbnt6nlkowKCi8vIEBkZXNjcmlwdGlvbiAgICAgICDpgJrmnYDlpKfpg6jliIbnvZHnq5nvvIzlj6/ku6Xop6PpmaTnpoHmraLlpI3liLbjgIHliarliIfjgIHpgInmi6nmlofmnKzjgIHlj7PplK7oj5zljZXnmoTpmZDliLbjgIIKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFBhc3MgdG8ga2lsbCBtb3N0IG9mIHRoZSBzaXRlLCB5b3UgY2FuIGxpZnQgdGhlIHJlc3RyaWN0aW9ucyBwcm9oaWJpdGVkIHRvIGNvcHksIGN1dCwgc2VsZWN0IHRoZSB0ZXh0LCByaWdodC1jbGljayBtZW51LgovLyBAZGVzY3JpcHRpb246emggICAg6YCa5p2A5aSn6YOo5YiG572R56uZ77yM5Y+v5Lul6Kej6Zmk56aB5q2i5aSN5Yi244CB5Ymq5YiH44CB6YCJ5oup5paH5pys44CB5Y+z6ZSu6I+c5Y2V55qE6ZmQ5Yi244CCCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiDpgJrmnYDlpKfpg6jliIbnvZHnq5nvvIzlj6/ku6Xop6PpmaTnpoHmraLlpI3liLbjgIHliarliIfjgIHpgInmi6nmlofmnKzjgIHlj7PplK7oj5zljZXnmoTpmZDliLbjgIIKLy8gQGRlc2NyaXB0aW9uOnpoLVRXIOmAmuauuuWkp+mDqOWIhue2suerme+8jOWPr+S7peino+mZpOemgeatouW+qeWItuOAgeWJquWIh+OAgemBuOaTh+aWh+acrOOAgeWPs+mNteiPnOWWrueahOmZkOWItuOAggovLyBAZGVzY3JpcHRpb246amEgICAg44K144Kk44OI44Gu44G744Go44KT44Gp44KS5q6644GZ44Gf44KB44Gr5rih44GX44CB44GC44Gq44Gf44Gv44CB44Kz44OU44O85YiH44KK5Y+W44KK44CB44OG44Kt44K544OI44CB5Y+z44Kv44Oq44OD44Kv44Oh44OL44Ol44O844KS6YG45oqe44GZ44KL44GT44Go44Gv56aB5q2i44Gu5Yi26ZmQ44KS6Kej6Zmk44GZ44KL44GT44Go44GM44Gn44GN44G+44GZ44CCCgovLyBAaG9tZXBhZ2VVUkwgICAgICAgaHR0cHM6Ly9jYXQ3MzczLmdpdGh1Yi5pby9yZW1vdmUtd2ViLWxpbWl0cy8KLy8gQHN1cHBvcnRVUkwgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9DYXQ3MzczL3JlbW92ZS13ZWItbGltaXRzL2lzc3Vlcy8KCi8vIEBhdXRob3IgICAgICAgICAgICBDYXQ3MwovLyBAdmVyc2lvbiAgICAgICAgICAgMS4zCi8vIEBsaWNlbnNlICAgICAgICAgICBMR1BMdjMKCi8vIEBjb21wYXRpYmxlICAgICAgICBjaHJvbWUgQ2hyb21lXzQ2LjAuMjQ5MC44NiArIFRhbXBlck1vbmtleSArIOiEmuacrF8xLjMg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBmaXJlZm94IEZpcmVmb3hfNDIuMCArIEdyZWFzZU1vbmtleSArIOiEmuacrF8xLjIuMSDmtYvor5XpgJrov4cKLy8gQGNvbXBhdGlibGUgICAgICAgIG9wZXJhIE9wZXJhXzMzLjAuMTk5MC4xMTUgKyBUYW1wZXJNb25rZXkgKyDohJrmnKxfMS4xLjMg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBzYWZhcmkg5pyq5rWL6K+VCgovLyBAbWF0Y2ggICAgICAgICAgICAgKjovLyovKgovLyBAZ3JhbnQgICAgICAgICAgICAgbm9uZQovLyBAcnVuLWF0ICAgICAgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKICAndXNlIHN0cmljdCc7CgogIC8vIOWfn+WQjeinhOWImeWIl+ihqAogIHZhciBydWxlcyA9IHsKICAgIGJsYWNrX3J1bGU6IHsKICAgICAgbmFtZTogImJsYWNrIiwKICAgICAgaG9va19ldmVudE5hbWVzOiAiIiwKICAgICAgdW5ob29rX2V2ZW50TmFtZXM6ICIiCiAgICB9LAogICAgZGVmYXVsdF9ydWxlOiB7CiAgICAgIG5hbWU6ICJkZWZhdWx0IiwKICAgICAgaG9va19ldmVudE5hbWVzOiAiY29udGV4dG1lbnV8c2VsZWN0fHNlbGVjdHN0YXJ0fGNvcHl8Y3V0fGRyYWdzdGFydCIsCiAgICAgIHVuaG9va19ldmVudE5hbWVzOiAibW91c2Vkb3dufG1vdXNldXB8a2V5ZG93bnxrZXl1cCIsCiAgICAgIGRvbTA6IHRydWUsCiAgICAgIGhvb2tfYWRkRXZlbnRMaXN0ZW5lcjogdHJ1ZSwKICAgICAgaG9va19wcmV2ZW50RGVmYXVsdDogdHJ1ZSwKICAgICAgaG9va19zZXRfcmV0dXJuVmFsdWU6IHRydWUsCiAgICAgIGFkZF9jc3M6IHRydWUKICAgIH0KICB9OwogIC8vIOWfn+WQjeWIl+ihqAogIHZhciBsaXN0cyA9IHsKICAgIC8vIOm7keWQjeWNlQogICAgYmxhY2tfbGlzdDogWwogICAgICAvLipcLnlvdXR1YmVcLmNvbS4qLywKICAgICAgLy4qXC53aWtpcGVkaWFcLm9yZy4qLywKICAgICAgL21haWxcLnFxXC5jb20uKi8sCiAgICAgIC90cmFuc2xhdGVcLmdvb2dsZVwuLiovCiAgICBdCiAgfTsKCiAgLy8g6KaB5aSE55CG55qEIGV2ZW50IOWIl+ihqAogIHZhciBob29rX2V2ZW50TmFtZXMsIHVuaG9va19ldmVudE5hbWVzLCBldmVudE5hbWVzOwogIC8vIOWCqOWtmOWQjeensAogIHZhciBzdG9yYWdlTmFtZSA9IGdldFJhbmRTdHIoJ3F3ZXJ0eXVpb3Bhc2RmZ2hqa2x6eGN2Ym5tUVdFUlRZVUlPUEFTREZHSEpLTFpYQ1ZCTk0nLCBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMTIgKyA4KSk7CiAgLy8g5YKo5a2Y6KKrIEhvb2sg55qE5Ye95pWwCiAgdmFyIEV2ZW50VGFyZ2V0X2FkZEV2ZW50TGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjsKICB2YXIgZG9jdW1lbnRfYWRkRXZlbnRMaXN0ZW5lciA9IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI7CiAgdmFyIEV2ZW50X3ByZXZlbnREZWZhdWx0ID0gRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0OwoKICAvLyBIb29rIGFkZEV2ZW50TGlzdGVuZXIgcHJvYwogIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYywgdXNlQ2FwdHVyZSkgewogICAgdmFyIF9hZGRFdmVudExpc3RlbmVyID0gdGhpcyA9PT0gZG9jdW1lbnQgPyBkb2N1bWVudF9hZGRFdmVudExpc3RlbmVyIDogRXZlbnRUYXJnZXRfYWRkRXZlbnRMaXN0ZW5lcjsKICAgIGlmKGhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHJldHVyblRydWUsIHVzZUNhcHR1cmVdKTsKICAgIH0gZWxzZSBpZih1bmhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgdmFyIGZ1bmNzTmFtZSA9IHN0b3JhZ2VOYW1lICsgdHlwZSArICh1c2VDYXB0dXJlID8gJ3QnIDogJ2YnKTsKCiAgICAgIGlmKHRoaXNbZnVuY3NOYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpc1tmdW5jc05hbWVdID0gW107CiAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW3R5cGUsIHVzZUNhcHR1cmUgPyB1bmhvb2tfdCA6IHVuaG9va19mLCB1c2VDYXB0dXJlXSk7CiAgICAgIH0KCiAgICAgIHRoaXNbZnVuY3NOYW1lXS5wdXNoKGZ1bmMpOwogICAgfSBlbHNlIHsKICAgICAgX2FkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICB9CgogIC8vIOa4heeQhuW+queOrwogIGZ1bmN0aW9uIGNsZWFyTG9vcCgpIHsKICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzKCk7CgogICAgZm9yKHZhciBpIGluIGVsZW1lbnRzKSB7CiAgICAgIGZvcih2YXIgaiBpbiBldmVudE5hbWVzKSB7CiAgICAgICAgdmFyIG5hbWUgPSAnb24nICsgZXZlbnROYW1lc1tqXTsKICAgICAgICBpZihlbGVtZW50c1tpXVtuYW1lXSAhPT0gbnVsbCAmJiBlbGVtZW50c1tpXVtuYW1lXSAhPT0gb254eHgpIHsKICAgICAgICAgIGlmKHVuaG9va19ldmVudE5hbWVzLmluZGV4T2YoZXZlbnROYW1lc1tqXSkgPj0gMCkgewogICAgICAgICAgICBlbGVtZW50c1tpXVtzdG9yYWdlTmFtZSArIG5hbWVdID0gZWxlbWVudHNbaV1bbmFtZV07CiAgICAgICAgICAgIGVsZW1lbnRzW2ldW25hbWVdID0gb254eHg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbGVtZW50c1tpXVtuYW1lXSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyDov5Tlm550cnVl55qE5Ye95pWwCiAgZnVuY3Rpb24gcmV0dXJuVHJ1ZShlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gdW5ob29rX3QoZSkgewogICAgcmV0dXJuIHVuaG9vayhlLCB0aGlzLCBzdG9yYWdlTmFtZSArIGUudHlwZSArICd0Jyk7CiAgfQogIGZ1bmN0aW9uIHVuaG9va19mKGUpIHsKICAgIHJldHVybiB1bmhvb2soZSwgdGhpcywgc3RvcmFnZU5hbWUgKyBlLnR5cGUgKyAnZicpOwogIH0KICBmdW5jdGlvbiB1bmhvb2soZSwgc2VsZiwgZnVuY3NOYW1lKSB7CiAgICB2YXIgbGlzdCA9IHNlbGZbZnVuY3NOYW1lXTsKICAgIGZvcih2YXIgaSBpbiBsaXN0KSB7CiAgICAgIGxpc3RbaV0oZSk7CiAgICB9CgogICAgZS5yZXR1cm5WYWx1ZSA9IHRydWU7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gb254eHgoZSkgewogICAgdmFyIG5hbWUgPSBzdG9yYWdlTmFtZSArICdvbicgKyBlLnR5cGU7CiAgICB0aGlzW25hbWVdKGUpOwoKICAgIGUucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLyDojrflj5bpmo/mnLrlrZfnrKbkuLIKICBmdW5jdGlvbiBnZXRSYW5kU3RyKGNocywgbGVuKSB7CiAgICB2YXIgc3RyID0gJyc7CgogICAgd2hpbGUobGVuLS0pIHsKICAgICAgc3RyICs9IGNoc1twYXJzZUludChNYXRoLnJhbmRvbSgpICogY2hzLmxlbmd0aCldOwogICAgfQoKICAgIHJldHVybiBzdHI7CiAgfQoKICAvLyDojrflj5bmiYDmnInlhYPntKAg5YyF5ousZG9jdW1lbnQKICBmdW5jdGlvbiBnZXRFbGVtZW50cygpIHsKICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykpOwogICAgZWxlbWVudHMucHVzaChkb2N1bWVudCk7CgogICAgcmV0dXJuIGVsZW1lbnRzOwogIH0KCiAgLy8g5re75YqgY3NzCiAgZnVuY3Rpb24gYWRkU3R5bGUoY3NzKSB7CiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgc3R5bGUuaW5uZXJIVE1MID0gY3NzOwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgfQoKICAvLyDojrflj5bnm67moIfln5/lkI3lupTor6Xkvb/nlKjnmoTop4TliJkKICBmdW5jdGlvbiBnZXRSdWxlKHVybCkgewogICAgZnVuY3Rpb24gdGVzdFVybChsaXN0LCB1cmwpIHsKICAgICAgZm9yKHZhciBpIGluIGxpc3QpIHsKICAgICAgICBpZihsaXN0W2ldLnRlc3QodXJsKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYodGVzdFVybChsaXN0cy5ibGFja19saXN0LCB1cmwpKSB7CiAgICAgIHJldHVybiBydWxlcy5ibGFja19ydWxlOwogICAgfQoKICAgIHJldHVybiBydWxlcy5kZWZhdWx0X3J1bGU7CiAgfQoKICAvLyDliJ3lp4vljJYKICBmdW5jdGlvbiBpbml0KCkgewogICAgLy8g6I635Y+W5b2T5YmN5Z+f5ZCN55qE6KeE5YiZCiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhvc3QgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICB2YXIgcnVsZSA9IGdldFJ1bGUodXJsKTsKCiAgICAvLyDorr7nva4gZXZlbnQg5YiX6KGoCiAgICBob29rX2V2ZW50TmFtZXMgPSBydWxlLmhvb2tfZXZlbnROYW1lcy5zcGxpdCgifCIpOwogICAgLy8gVE9ETyBBbGxvd2VkIHRvIHJldHVybiB2YWx1ZQogICAgdW5ob29rX2V2ZW50TmFtZXMgPSBydWxlLnVuaG9va19ldmVudE5hbWVzLnNwbGl0KCJ8Iik7CiAgICBldmVudE5hbWVzID0gaG9va19ldmVudE5hbWVzLmNvbmNhdCh1bmhvb2tfZXZlbnROYW1lcyk7CgogICAgLy8g6LCD55So5riF55CGIERPTTAgZXZlbnQg5pa55rOV55qE5b6q546vCiAgICBpZihydWxlLmRvbTApIHsKICAgICAgc2V0SW50ZXJ2YWwoY2xlYXJMb29wLCAzMCAqIDEwMDApOwogICAgICBzZXRUaW1lb3V0KGNsZWFyTG9vcCwgMjUwMCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2xlYXJMb29wLCB0cnVlKTsKICAgICAgY2xlYXJMb29wKCk7CiAgICB9CgogICAgLy8gaG9vayBhZGRFdmVudExpc3RlbmVyCiAgICBpZihydWxlLmhvb2tfYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICBFdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPSBhZGRFdmVudExpc3RlbmVyOwogICAgfQoKICAgIC8vIGhvb2sgcHJldmVudERlZmF1bHQKICAgIGlmKHJ1bGUuaG9va19wcmV2ZW50RGVmYXVsdCkgewogICAgICBFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZihldmVudE5hbWVzLmluZGV4T2YodGhpcy50eXBlKSA8IDApIHsKICAgICAgICAgIEV2ZW50X3ByZXZlbnREZWZhdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICB9OwogICAgfQoKICAgIC8vIEhvb2sgc2V0IHJldHVyblZhbHVlCiAgICBpZihydWxlLmhvb2tfc2V0X3JldHVyblZhbHVlKSB7CiAgICAgIEV2ZW50LnByb3RvdHlwZS5fX2RlZmluZVNldHRlcl9fKCdyZXR1cm5WYWx1ZScsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmKHRoaXMucmV0dXJuVmFsdWUgIT09IHRydWUgJiYgZXZlbnROYW1lcy5pbmRleE9mKHRoaXMudHlwZSkgPj0gMCkgewogICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBjb25zb2xlLmRlYnVnKCd1cmw6ICcgKyB1cmwsICdzdG9yYWdlTmFtZe+8micgKyBzdG9yYWdlTmFtZSwgJ3J1bGU6ICcgKyBydWxlLm5hbWUpOwoKICAgIC8vIOa3u+WKoENTUwogICAgaWYocnVsZS5hZGRfY3NzKSB7CiAgICAgIGFkZFN0eWxlKCdodG1sLCAqIHstd2Via2l0LXVzZXItc2VsZWN0OnRleHQhaW1wb3J0YW50OyAtbW96LXVzZXItc2VsZWN0OnRleHQhaW1wb3J0YW50O30nKTsKICAgIH0KICB9CgogIGluaXQoKTsKfSkoKTs="},{"name":"Userscript+ : Show Site All UserJS","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["cdn.bootcss.com","raw.githubusercontent.com","gist.githubusercontent.com","greasyfork.org"],"orig_excludes":["http://www.dev/Show-Site-All-UserJS/ui.html"],"orig_includes":["*"],"orig_matches":[],"orig_noframes":true,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1513352248493,"data":{}},"enabled":false,"position":10,"file_url":"https://greasyfork.org/scripts/24508-userscript-show-site-all-userjs/code/Userscript+%20:%20Show%20Site%20All%20UserJS.user.js","uuid":"c51c478d-4bde-4bfe-ae0a-81b6fbf70829","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBVc2Vyc2NyaXB0KyA6IFNob3cgU2l0ZSBBbGwgVXNlckpTCi8vIEBuYW1lOnpoICAgICAgVXNlcnNjcmlwdCsgOiDmmL7npLrlvZPliY3nvZHnq5nmiYDmnInlj6/nlKjnmoRVc2VySlPohJrmnKwgSmFlZ2VyCi8vIEBuYW1lOnpoLUNOICAgVXNlcnNjcmlwdCsgOiDmmL7npLrlvZPliY3nvZHnq5nmiYDmnInlj6/nlKjnmoRVc2VySlPohJrmnKwgSmFlZ2VyCi8vIEBuYW1lOnpoLVRXICAgVXNlcnNjcmlwdCsgOiDpoa/npLrnlbbliY3ntrLnq5nmiYDmnInlj6/nlKjnmoRVc2VySlPohbPmnKwgSmFlZ2VyCi8vIEBuYW1lOmphICAgVXNlcnNjcmlwdCAr77ya54++5Zyo44Gu44K144Kk44OI44Gu5Yip55So5Y+v6IO944Gq44GZ44G544Gm44GuVXNlckpT44K544Kv44Oq44OX44OI44KS6KGo56S644GZ44KLSmFlZ2VyCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9naXRodWIuY29tL2phZS1qYWUvVXNlcnNjcmlwdC1QbHVzCi8vIEB2ZXJzaW9uICAgICAgMi4zLjAKLy8gQGRlc2NyaXB0aW9uICAgICAgICAgU2hvdyBjdXJyZW50IHNpdGUgYWxsIFVzZXJKU++8jFRoZSBlYXNpZXIgd2F5IHRvIGluc3RhbGwgVXNlckpzIGZvciBUYW1wZXJtb25rZXkuCi8vIEBkZXNjcmlwdGlvbjp6aCAgICAgIOaYvuekuuW9k+WJjee9keermeeahOaJgOacieWPr+eUqFVzZXJKUyhUYW1wZXJtb25rZXkp6ISa5pysLOS6pOa1gVFR576kOjEwNDI2NzM4MwovLyBAZGVzY3JpcHRpb246emgtQ04gICDmmL7npLrlvZPliY3nvZHnq5nnmoTmiYDmnInlj6/nlKhVc2VySlMoVGFtcGVybW9ua2V5KeiEmuacrCzkuqTmtYFRUee+pDoxMDQyNjczODMKLy8gQGRlc2NyaXB0aW9uOnpoLVRXICAg6aGv56S655W25YmN57ay56uZ55qE5omA5pyJ5Y+v55SoVXNlckpTKFRhbXBlcm1vbmtleSnohbPmnKws5Lqk5rWBUVHnvqQ6MTA0MjY3MzgzCi8vIEBkZXNjcmlwdGlvbjpqYSAgIOePvuWcqOOBruOCteOCpOODiOOBp+WIqeeUqOWPr+iDveOBquOBmeOBueOBpuOBrlVzZXJKU++8iFRhbXBlcm1vbmtlee+8ieOCueOCr+ODquODl+ODiOOCkuihqOekuuOBl+OBvuOBmeOAggovLyBAYXV0aG9yICAgICAgIEphZWdlciA8SmFlZ2VyQ29kZUBnbWFpbC5jb20+Ci8vIEBpY29uICAgICAgICAgZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUJtSkxSMFFBL3dEL0FQK2d2YWVUQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFCM1JKVFVVSDNnZ0VCQ1FITTNmWHNBQUFBVmRKUkVGVU9NdWRrejJxd2tBVWhjL2dvQmFHSkJnVXRCQ1p5ajBJTGtwd0FXN0J3czR5TzNBSExpQ3RFRkQ4S1ZSRWtvaUZ4WnpYNUEyS0dmTjRGMDR6TU4rY2UrNWM0TE1VZ0RtQU5ZQm5yblYrcGxCU2krRnd5SHE5VGdBMkxRcHZDaUVpQUJ3TUJ0enY5NVJTZm9ORUh5OERZQnpIck5WcVZFcjlCV0tjcU5Gb3hGNnZ4M2E3emMxbVl5QzczYTRNb2dCZzd2cyt6K2N6TzUwT1c2MFd0OXN0SzVVS3A5TXBqOGNqcTlXcURUQkhuakFkeHpHUVpyUEp3K0hBMzFvdWx6YkFXZ0xvQTBDV1pWQktJWTVqekdZemRMdGRFOURsY3JGTnJZOTh6b2JxT0E2VEpLSFcyamc0blU1c05CcEZEcDZtaFZlNXJzdlZhc1V3REhtOVhxbTE1dTEybysvN0h5MGdEOEthdE9kNXZOL3YxRm96VFZONm5rY2h4RnVJNmhzQUFJTWc0T1B4TUpDWGR0VGJSN0pKQ01FZ0NKaGxHVWx5UEI0WGZ1bW96SW5ydXB4TUpwUlNSdFpsS29OWWwrbS82L3dEdVdBanRQZnNRdXdBQUFBQVNVVk9SSzVDWUlJPQovLyBAaW5jbHVkZSAgICAgICAgKgovLyBAZXhjbHVkZSAgICAgIGh0dHA6Ly93d3cuZGV2L1Nob3ctU2l0ZS1BbGwtVXNlckpTL3VpLmh0bWwKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjM0MTktbC1qcy9jb2RlL2xqcy5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8yMzQyMC11c2VyanMtYmFzZS1qcy9jb2RlL3VzZXJqcy1iYXNlanMuanMKLy8gQHJlc291cmNlICAgICB1aSAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2phZS1qYWUvU2hvdy1TaXRlLUFsbC1Vc2VySlMvbWFzdGVyL2Rpc3QvdWkuaHRtbD9fPTE1MjE3ODQwNDE4MTkKLy8gQHJlc291cmNlICAgICB1aUpzICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2phZS1qYWUvU2hvdy1TaXRlLUFsbC1Vc2VySlMvbWFzdGVyL2Rpc3QvdWkuanM/Xz0xNTIxNzg0MDQxODE5Ci8vIEByZXNvdXJjZSAgICAgY291bnQgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy9ieS1zaXRlLmpzb24KLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIEdNX2dldFJlc291cmNlVGV4dAovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQG5vZnJhbWVzCi8vIEBjb25uZWN0ICAgICBjZG4uYm9vdGNzcy5jb20KLy8gQGNvbm5lY3QgICAgIHJhdy5naXRodWJ1c2VyY29udGVudC5jb20KLy8gQGNvbm5lY3QgICAgIGdpc3QuZ2l0aHVidXNlcmNvbnRlbnQuY29tCi8vIEBjb25uZWN0ICAgICBncmVhc3lmb3JrLm9yZwovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtZW5kCi8vID09L1VzZXJTY3JpcHQ9PQoKdW5zYWZlV2luZG93LkdtQWpheCA9IEdNX3htbGh0dHBSZXF1ZXN0OwoKKGZ1bmN0aW9uKCkgewoKICAgICd1c2Ugc3RyaWN0JzsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgRmV0Y2hVc2VyanMgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBGZXRjaFVzZXJqcygpIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmV0Y2hVc2VyanMpOwoKICAgICAgICB0aGlzLmhvc3QgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuc3BsaXQoJy4nKS5zcGxpY2UoLTIpLmpvaW4oJy4nKTsKICAgICAgICB0aGlzLnNob3dUaW1lID0gMTA7CiAgICAgICAgdGhpcy5xdWlldEtleSA9ICdqYWVfZmV0Y2hfdXNlcmpzX3F1aWV0JzsKICAgICAgICB0aGlzLmNvdW50S2V5ID0gJ2phZV9mZXRjaF91c2VyanNfY291bnQnOwogICAgICAgIHRoaXMudHBsQm94ID0gJzxkaXYgaWQ9ImphZV91c2Vyc2NyaXB0X2JveCI+PHN0eWxlPi5qYWUtdXNlcnNjcmlwdHtwb3NpdGlvbjpmaXhlZDt3aWR0aDozNzBweDtib3R0b206MTBweDtyaWdodDoyMHB4O3otaW5kZXg6OTk5OTk5OTk5OTtoZWlnaHQ6NTZweH0uamFlLXVzZXJzY3JpcHQtc2hhZG93e2JveC1zaGFkb3c6MCAxcHggNHB4IHJnYmEoMCwwLDAsLjMpLFxcdFxcdFxcdFxcdDBweCAwIDIwcHggcmdiYSgwLDAsMCwuMSkgaW5zZXR9LmphZS11c2Vyc2NyaXB0LXNoYWRvdzo6YmVmb3JlLC5qYWUtdXNlcnNjcmlwdC1zaGFkb3c6OmFmdGVye2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMX0uamFlLXVzZXJzY3JpcHQtc2hhZG93OjpiZWZvcmUsLmphZS11c2Vyc2NyaXB0LXNoYWRvdzo6YWZ0ZXJ7Y29udGVudDoiIjtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Oi0xO2JvdHRvbToxNXB4O2xlZnQ6MTBweDt3aWR0aDo1MCU7aGVpZ2h0OjIwJX0uamFlLXVzZXJzY3JpcHQtc2hhZG93OjpiZWZvcmUsLmphZS11c2Vyc2NyaXB0LXNoYWRvdzo6YWZ0ZXJ7Y29udGVudDoiIjtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Oi0xO2JvdHRvbToxNXB4O2xlZnQ6MTBweDt3aWR0aDo1MCU7aGVpZ2h0OjIwJTtib3gtc2hhZG93OjAgMTVweCAxMHB4IHJnYmEoMCwwLDAsLjcpO3RyYW5zZm9ybTpyb3RhdGUoLTNkZWcpfS5qYWUtdXNlcnNjcmlwdC1zaGFkb3c6OmFmdGVye3JpZ2h0OjEwcHg7bGVmdDphdXRvO3RyYW5zZm9ybTpyb3RhdGUoM2RlZyl9PC9zdHlsZT48ZGl2IGNsYXNzPSJqYWUtdXNlcnNjcmlwdCIgY2xhc3M9IiI+PC9kaXY+PC9kaXY+JzsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoRmV0Y2hVc2VyanMsIFt7CiAgICAgICAga2V5OiAnZ2V0Q291bnREYXRhJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q291bnREYXRhKGhvc3QpIHsKICAgICAgICAgICAgdmFyIGNvdW50RGF0YSA9IEdNX2dldFJlc291cmNlVGV4dCgnY291bnQnKTsKICAgICAgICAgICAgY291bnREYXRhID0gSlNPTi5wYXJzZShjb3VudERhdGEpOwogICAgICAgICAgICB2YXIgY291bnQgPSBjb3VudERhdGFbaG9zdF07CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0odGhpcy5jb3VudEtleSwgY291bnQpOwogICAgICAgICAgICByZXR1cm4gY291bnQ7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ3NldFNpemUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTaXplKHcsIGgpIHsKICAgICAgICAgICAgJCgnLmphZS11c2Vyc2NyaXB0JykuY3NzKHsKICAgICAgICAgICAgICAgIHdpZHRoOiB3LAogICAgICAgICAgICAgICAgaGVpZ2h0OiBoCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdhZGRFdmVudExpc3RlbmVyJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2phZV91c2Vyc2NyaXB0X2JveCcpLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnYmluZEV2ZW50JywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZEV2ZW50KCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgdGhpcy50aW1lSWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQoJyNqYWVfdXNlcnNjcmlwdF9ib3gnKS5yZW1vdmUoKTsKICAgICAgICAgICAgfSwgdGhpcy5zaG93VGltZSAqIDEwMDApOwoKICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdtYXgnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTaXplKDg2MCwgNDkyKTsKICAgICAgICAgICAgICAgICQoJy5qYWUtdXNlcnNjcmlwdCcpLmFkZENsYXNzKCdqYWUtdXNlcnNjcmlwdC1zaGFkb3cnKTsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy50aW1lSWQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignbWluJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnLmphZS11c2Vyc2NyaXB0JykucmVtb3ZlQ2xhc3MoJ2phZS11c2Vyc2NyaXB0LXNoYWRvdycpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFNpemUoMzcwLCA1Nik7CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKF90aGlzLnF1aWV0S2V5LCAxKTsKICAgICAgICAgICAgICAgICQoJyNqYWVfdXNlcnNjcmlwdF9ib3gnKS5yZW1vdmUoKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRpbmcnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZUlkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2V4ZWNGcmFtZUpzJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXhlY0ZyYW1lSnMoZnJhbWVXaW5kb3cpIHsKICAgICAgICAgICAgdmFyIHVpSnMgPSBHTV9nZXRSZXNvdXJjZVRleHQoJ3VpSnMnKTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChqc1N0cikgewogICAgICAgICAgICAgICAgZnJhbWVXaW5kb3cuZXZhbChqc1N0cik7CiAgICAgICAgICAgIH0uY2FsbChmcmFtZVdpbmRvdywgdWlKcyk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ3JlbmRlcicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmlzUXVpZXQpIHsKICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IHRoaXMuZ2V0Q291bnREYXRhKHRoaXMuaG9zdCk7CiAgICAgICAgICAgICAgICBpZiAoY291bnQpIHsKICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRoaXMudHBsQm94KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHVpID0gR01fZ2V0UmVzb3VyY2VUZXh0KCd1aScpOwogICAgICAgICAgICAgICAgICAgIHZhciBkb20gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdqYWUtdXNlcnNjcmlwdCcpWzBdOwogICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSAnPGlmcmFtZSBuYW1lPSJqYWVGZXRjaFVzZXJKU0ZyYW1lIiBzcmM9ImFib3V0OmJsYW5rIiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6MHB4O2Rpc3BsYXk6IGJsb2NrIWltcG9ydGFudDsiIGFsbG93VHJhbnNwYXJlbmN5PSJ0cnVlIj48L2lmcmFtZT4nOwogICAgICAgICAgICAgICAgICAgIGRvbS5pbm5lckhUTUwgPSB0cGw7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlmcmFtZURvbSA9IGRvbS5jaGlsZHJlblswXTsKICAgICAgICAgICAgICAgICAgICBpZnJhbWUud3JpdGUoaWZyYW1lRG9tLCB1aSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY0ZyYW1lSnMoamFlRmV0Y2hVc2VySlNGcmFtZS53aW5kb3cpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRFdmVudCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ2lzUXVpZXQnLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICB2YXIgcXVpZXQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHRoaXMucXVpZXRLZXkpOwogICAgICAgICAgICByZXR1cm4gcXVpZXQgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBGZXRjaFVzZXJqczsKfSgpOwoKbGpzLmV4ZWMoWydqUXVlcnknLCAnaWZyYW1lJ10sIGZ1bmN0aW9uICgpIHsKICAgIHZhciBmdSA9IG5ldyBGZXRjaFVzZXJqcygpOwogICAgZnUucmVuZGVyKCk7Cn0pOwoKfSkoKTs="},{"name":"Direct download from Google Play","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://play.google.com/*","http://play.google.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1513352452644,"data":{}},"enabled":true,"position":11,"file_url":"https://greasyfork.org/scripts/33005-direct-download-from-google-play/code/Direct%20download%20from%20Google%20Play.user.js","uuid":"4a4af82f-54a4-4e51-bf7c-68b4b3740606","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBEaXJlY3QgZG93bmxvYWQgZnJvbSBHb29nbGUgUGxheQovLyBAbmFtZXNwYWNlICAgIFN0ZXBoZW5QCi8vIEB2ZXJzaW9uICAgICAgMi4wLjAKLy8gQGRlc2NyaXB0aW9uICBBZGRzIEFQS1B1cmUsIEFQS01pcnJvciwgQVBLLURMIGFuZCBFdm96aSBkb3dubG9hZCBidXR0b25zIHRvIEdvb2dsZSBQbGF5IHdoZW4gYnJvd3NpbmcgYXBwcy4gVGhpcyBzY3JpcHQgaXMgYmFzZWQgb24geXVyZW5jaGVuJ3MgImdvb2dsZSBwbGF5IGFwayBkb3dubG9hZGVyIi4KLy8gQGF1dGhvciAgICAgICBTdGVwaGVuUAovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vcGxheS5nb29nbGUuY29tLyoKLy8gQG1hdGNoICAgICAgICBodHRwOi8vcGxheS5nb29nbGUuY29tLyoKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQp2YXIgdWk7CnZhciB3bEJ1dHRvbjsKdmFyIHBhZ2VVUkw7CnZhciB0aXRsZTsKdmFyIGFwcEN3aXo7CihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHVpPWNoZWNrVUkoKTsKICAgIHBhZ2VVUkw9bG9jYXRpb24uaHJlZjsKICAgIHRpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYWluLXRpdGxlIikuaW5uZXJIVE1MOwogICAgaWYodWk+PTMpewogICAgICAgIHZhciBidXR0b25zU3R5bGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICB2YXIgc3R5bGVTdHJpbmc9Jy5kZGxCdXR0b246dmlzaXRlZHtjb2xvcjogd2hpdGU7fSAuZGRsQnV0dG9uOmhvdmVye29wYWNpdHk6IDAuODt9IC5kZGxCdXR0b246YWN0aXZle29wYWNpdHk6IDAuNjt9IC5kZGxCdXR0b257Y29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMXB4OyBmb250LXNpemU6IDE0cHg7IGhlaWdodDogNDZweDsgcGFkZGluZzogOXB4IDIwcHg7IGZvbnQtd2VpZ2h0OiA1MDA7IGZvbnQtZmFtaWx5OiAiUm9ib3RvIixzYW5zLXNlcmlmOyBwb3NpdGlvbjogcmVsYXRpdmU7IHRleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDQ2cHg7JzsKICAgICAgICBpZih1aT09Myl7CiAgICAgICAgICAgIHN0eWxlU3RyaW5nKz0nIG1hcmdpbi1yaWdodDogNHB4O30nOwogICAgICAgICAgICBidXR0b25zU3R5bGUuaW5uZXJIVE1MPXN0eWxlU3RyaW5nOwogICAgICAgIH0KICAgICAgICBpZih1aT09NCl7CiAgICAgICAgICAgIHN0eWxlU3RyaW5nKz0nIG1hcmdpbi1sZWZ0OiA0cHg7fSc7CiAgICAgICAgICAgIGJ1dHRvbnNTdHlsZS5pbm5lckhUTUw9c3R5bGVTdHJpbmc7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uc1N0eWxlKTsKICAgIH0KICAgIGlmKHBhZ2VVUkwuaW5jbHVkZXMoImRldGFpbHM/aWQ9IikpewogICAgICAgYWRkQnV0dG9ucygpOwogICAgfQogICAgc2V0SW50ZXJ2YWwoY2hlY2tSZWxvYWQsIDMwMDApOwp9KSgpOwpmdW5jdGlvbiB3YWl0Rm9yUmVtb3ZpbmdCdXR0b25zKCl7CiAgICBpZih0aXRsZSE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1haW4tdGl0bGUiKS5pbm5lckhUTUwpewogICAgICAgIHRpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYWluLXRpdGxlIikuaW5uZXJIVE1MOwogICAgICAgIHBhZ2VVUkw9bG9jYXRpb24uaHJlZjsKICAgICAgICB3bEJ1dHRvbj1udWxsOwogICAgICAgIGlmKGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoImRldGFpbHM/aWQ9IikpewogICAgICAgICAgICBpZih1aT49Myl7CiAgICAgICAgICAgICAgICByZW1vdmVQcmV2aW91c0N3aXooKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhZGRCdXR0b25zKCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZXsKICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JSZW1vdmluZ0J1dHRvbnMsIDEwMDApOwogICAgfQp9CmZ1bmN0aW9uIGNoZWNrUmVsb2FkKCl7CiAgICBpZihwYWdlVVJMIT1sb2NhdGlvbi5ocmVmKXsKICAgICAgICAgICAgd2FpdEZvclJlbW92aW5nQnV0dG9ucygpOwogICAgfQp9CmZ1bmN0aW9uIGFkZEJ1dHRvbnMoKXsKICAgIHZhciBwcmljZT0tMTsKICAgIHZhciBpbnN0YWxsQnV0dG9uPW51bGw7CiAgICB2YXIgaW5zdFdpc2hCdXR0b25zPVtdOwogICAgaWYodWk8PTIpewogICAgICAgIGluc3RhbGxCdXR0b249ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYnV5IilbMF07CiAgICAgICAgcHJpY2U9aW5zdGFsbEJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiTUVUQSIpWzFdLmNvbnRlbnQ7CiAgICB9CiAgICBlbHNlewogICAgICAgIGluc3RXaXNoQnV0dG9ucz1nZXRVZ2x5VUlCdXR0b25zKCk7CiAgICAgICAgaW5zdGFsbEJ1dHRvbj1pbnN0V2lzaEJ1dHRvbnNbMV07CiAgICAgICAgZG97CiAgICAgICAgICAgIGluc3RhbGxCdXR0b249aW5zdGFsbEJ1dHRvbi5wYXJlbnROb2RlOwogICAgICAgIH13aGlsZShpbnN0YWxsQnV0dG9uLnRhZ05hbWUhPSJDLVdJWiIpOwogICAgICAgIHByaWNlPWluc3RhbGxCdXR0b24uZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIk1FVEEiKVsxXS5jb250ZW50OwogICAgICAgIC8vZGV0ZXJtaW5hIGMtd2l6IGRlbGwnYXBwIHBlciBwb3RlcmxvIHJhZGVyZSBhbCBzdW9sbyBhbCBjYW1iaW8gZGkgcGFnaW5hCiAgICAgICAgdmFyIGN1cnJlbnROb2RlOwogICAgICAgIGN1cnJlbnROb2RlPWluc3RhbGxCdXR0b24ucGFyZW50Tm9kZTsKICAgICAgICBkb3sKICAgICAgICAgICAgaWYoY3VycmVudE5vZGUudGFnTmFtZT09IkMtV0laIil7CiAgICAgICAgICAgICAgICBhcHBDd2l6PWN1cnJlbnROb2RlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN1cnJlbnROb2RlPWN1cnJlbnROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgfXdoaWxlKGN1cnJlbnROb2RlLnRhZ05hbWUhPSJCT0RZIik7CiAgICB9CiAgICAgICAgaWYocHJpY2U9PTApewogICAgICAgICAgICB2YXIgaHRtbDsKICAgICAgICAgICAgdmFyIGJ1dHRvbnNsaXN0OwogICAgICAgICAgICB2YXIgaWQ9bG9jYXRpb24uc2VhcmNoLm1hdGNoKC9pZD0oLiopLylbMV0uc3BsaXQoIiYiLCAxKTsKICAgICAgICAgICAgdmFyIGFwa3B1cmVVUkw9J2h0dHBzOi8vbS5hcGtwdXJlLmNvbS9nZW5lcmljQXBwLycraWQrJy9kb3dubG9hZCc7CiAgICAgICAgICAgIHZhciBldm96aVVSTD0naHR0cHM6Ly9hcHBzLmV2b3ppLmNvbS9hcGstZG93bmxvYWRlci8/aWQ9JytpZDsKICAgICAgICAgICAgdmFyIGFwa2RsVVJMPSdodHRwOi8vYXBrZmluZC5jb20vc3RvcmUvY2FwdGNoYT9hcHA9JytpZDsKICAgICAgICAgICAgdmFyIGFwa21pcnJvclVSTD0naHR0cHM6Ly93d3cuYXBrbWlycm9yLmNvbS8/cG9zdF90eXBlPWFwcF9yZWxlYXNlJnNlYXJjaHR5cGU9YXBrJnM9JytpZDsKICAgICAgICAgICAgd2xCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICAgIHZhciB3aXNoTGlzdEJ1dHRvbjsKICAgICAgICAgICAgaWYodWk8PTIpewogICAgICAgICAgICAgICAgd2lzaExpc3RCdXR0b249ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaWQtd2lzaGxpc3QtZGlzcGxheSIpWzBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICB3aXNoTGlzdEJ1dHRvbj1pbnN0V2lzaEJ1dHRvbnNbMF07CiAgICAgICAgICAgICAgICBkb3sKICAgICAgICAgICAgICAgICAgICB3aXNoTGlzdEJ1dHRvbj13aXNoTGlzdEJ1dHRvbi5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgfXdoaWxlKHdpc2hMaXN0QnV0dG9uLnRhZ05hbWUhPSJDLVdJWiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdsQnV0dG9uLmFwcGVuZENoaWxkKHdpc2hMaXN0QnV0dG9uKTsKICAgICAgICAgICAgaWYodWk9PTEpewogICAgICAgICAgICAgICAgYnV0dG9uc2xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJkZXRhaWxzLWFjdGlvbnMiKVswXTsKICAgICAgICAgICAgICAgIGh0bWw9JzxzcGFuIGlkPSJhcGtwdXJlYnV0dG9uIj48YSBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzI0Y2Q3NyIgY2xhc3M9Im1lZGl1bSBwbGF5LWJ1dHRvbiBkb3dubG9hZC1hcGstYnV0dG9uIGFwcHMgIj5BUEtQdXJlPC9hPjwvc3Bhbj48c3BhbiBpZD0iYXBrZGxidXR0b24iPjxhIGhyZWY9IicrYXBrZGxVUkwrJyIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMwMDk2ODgiIGNsYXNzPSJtZWRpdW0gcGxheS1idXR0b24gZG93bmxvYWQtYXBrLWJ1dHRvbiBhcHBzICI+QVBLLURMPC9hPjwvc3Bhbj48c3Bhbj48YSBocmVmPSInK2V2b3ppVVJMKyciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMjg2MDkwIiBjbGFzcz0ibWVkaXVtIHBsYXktYnV0dG9uIGRvd25sb2FkLWFway1idXR0b24gYXBwcyAiPkV2b3ppPC9hPjwvc3Bhbj48c3Bhbj48YSBocmVmPSInK2Fwa21pcnJvclVSTCsnIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI0ZGOEIxNCIgY2xhc3M9Im1lZGl1bSBwbGF5LWJ1dHRvbiBkb3dubG9hZC1hcGstYnV0dG9uIGFwcHMgIj5BUEtNaXJyb3I8L2E+PC9zcGFuPic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih1aT09Mil7CiAgICAgICAgICAgICAgICBidXR0b25zbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImRldGFpbHMtYWN0aW9ucy1yaWdodCIpWzBdOwogICAgICAgICAgICAgICAgaHRtbD0nPHNwYW4gaWQ9ImFwa3B1cmVidXR0b24iPjxwIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMjRjZDc3IiBjbGFzcz0ibGFyZ2UgcGxheS1idXR0b24gZG93bmxvYWQtYXBrLWJ1dHRvbiBhcHBzICI+QVBLUHVyZTwvcD48L3NwYW4+PHNwYW4gaWQ9ImFwa2RsYnV0dG9uIj48YSBocmVmPSInK2Fwa2RsVVJMKyciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMDA5Njg4IiBjbGFzcz0ibGFyZ2UgcGxheS1idXR0b24gZG93bmxvYWQtYXBrLWJ1dHRvbiBhcHBzICI+QVBLLURMPC9hPjwvc3Bhbj48c3Bhbj48YSBocmVmPSInK2V2b3ppVVJMKyciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMjg2MDkwIiBjbGFzcz0ibGFyZ2UgcGxheS1idXR0b24gZG93bmxvYWQtYXBrLWJ1dHRvbiBhcHBzICI+RXZvemk8L2E+PC9zcGFuPjxzcGFuPjxhIGhyZWY9IicrYXBrbWlycm9yVVJMKyciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjRkY4QjE0IiBjbGFzcz0ibGFyZ2UgcGxheS1idXR0b24gZG93bmxvYWQtYXBrLWJ1dHRvbiBhcHBzICI+QVBLTWlycm9yPC9hPjwvc3Bhbj4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBidXR0b25zbGlzdCA9IGluc3RhbGxCdXR0b24ucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIGh0bWw9JzxzcGFuIGlkPSJhcGtwdXJlYnV0dG9uIj48YSBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzI0Y2Q3NyIgY2xhc3M9ImRkbEJ1dHRvbiI+QVBLUHVyZTwvYT48L3NwYW4+PHNwYW4gaWQ9ImFwa2RsYnV0dG9uIj48YSBocmVmPSInK2Fwa2RsVVJMKyciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMDA5Njg4IiBjbGFzcz0iZGRsQnV0dG9uIj5BUEstREw8L2E+PC9zcGFuPjxzcGFuPjxhIGhyZWY9IicrZXZvemlVUkwrJyIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMyODYwOTAiIGNsYXNzPSJkZGxCdXR0b24iPkV2b3ppPC9hPjwvc3Bhbj48c3Bhbj48YSBocmVmPSInK2Fwa21pcnJvclVSTCsnIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI0ZGOEIxNCIgY2xhc3M9ImRkbEJ1dHRvbiI+QVBLTWlycm9yPC9hPjwvc3Bhbj4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1dHRvbnNsaXN0LmlubmVySFRNTD1idXR0b25zbGlzdC5pbm5lckhUTUwraHRtbDsKICAgICAgICAgICAgYnV0dG9uc2xpc3QuYXBwZW5kQ2hpbGQod2xCdXR0b24pOwogICAgICAgICAgICB2YXIgYXBrcHVyZUJ1dHRvbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBrcHVyZWJ1dHRvbiIpOwogICAgICAgICAgICBhcGtwdXJlQnV0dG9uLm9uY2xpY2s9ZnVuY3Rpb24oKXtwdXJlRERMKGFwa3B1cmVVUkwpO307CiAgICAgICAgfQp9CmZ1bmN0aW9uIHB1cmVEREwoYXBrcHVyZVVSTCl7CiAgICB0cnl7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBrcHVyZUZyYW1lJykpOwogICAgfQogICAgY2F0Y2goZXJyKXsKICAgIH0KICAgIGZpbmFsbHl7CiAgICAgICAgdmFyIGhpZGRlbkZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgICAgIGhpZGRlbkZyYW1lLnN0eWxlLndpZHRoPSIwIjsKICAgICAgICBoaWRkZW5GcmFtZS5zdHlsZS5oZWlnaHQ9IjAiOwogICAgICAgIGhpZGRlbkZyYW1lLnNldEF0dHJpYnV0ZSgnaWQnLCAnYXBrcHVyZUZyYW1lJyk7CiAgICAgICAgaGlkZGVuRnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBhcGtwdXJlVVJMKTsKICAgICAgICBoaWRkZW5GcmFtZS5zZXRBdHRyaWJ1dGUoJ2ZyYW1lYm9yZGVyJywgIjAiKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhpZGRlbkZyYW1lKTsKICAgIH0KfQpmdW5jdGlvbiBnZXRVZ2x5VUlCdXR0b25zKCkKewogIHZhciBtYXRjaGluZ0VsZW1lbnRzPVtdOwogIHZhciBhbGxFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdidXR0b24nKTsKICBmb3IgKHZhciBpID0gMCwgbiA9IGFsbEVsZW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykKICB7CiAgICBpZiAoYWxsRWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCJkYXRhLWl0ZW0taWQiKSE9PW51bGwpCiAgICB7CiAgICAgIGlmIChhbGxFbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoImRhdGEtaXRlbS1pZCIpLnN0YXJ0c1dpdGgoIiUuQC4iKT09PXRydWUpewogICAgICAgICAgbWF0Y2hpbmdFbGVtZW50cy5wdXNoKGFsbEVsZW1lbnRzW2ldKTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gbWF0Y2hpbmdFbGVtZW50czsKfQpmdW5jdGlvbiBjaGVja1VJKCl7CiAgICAvL0RpZmZlcmVudCBVSXM6CiAgICAvLzE9TW9iaWxlIEhUTUwKICAgIC8vMj1EZXNrdG9wIEhUTUwKICAgIC8vMz1Nb2JpbGUgVWdseVVJCiAgICAvLzQ9RGVza3RvcCBVZ2x5VUkKICAgIHZhciBjaGVjazsKICAgIHRyeXsKICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhY3Rpb24tYmFyLW1lbnUtYnV0dG9uIikubGVuZ3RoPjApewogICAgICAgICAgICBjaGVjaz0xOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJkZXRhaWxzLWluZm8iKS5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICBjaGVjaz0yOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBjaGVjaz00OwogICAgICAgICAgICAgICAgdmFyIG1ldGFUYWdzPWRvY3VtZW50LmhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8bWV0YVRhZ3MubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaWYobWV0YVRhZ3NbaV0uZ2V0QXR0cmlidXRlKCJuYW1lIik9PSJtb2JpbGUtd2ViLWFwcC1jYXBhYmxlIil7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrPTM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBjYXRjaChlcnIpewogICAgICAgIGFsZXJ0KCdUaGUgdXNlciBpbnRlcmZhY2Ugb2YgR29vZ2xlIFBsYXkgU3RvcmUgd2FzIG5vdCByZWNvZ25pemVkIGJ5ICJEaXJlY3QgRG93bmxvYWQgZnJvbSBHb29nbGUgUGxheSIgc2NyaXB0LiBUaGlzIG1pZ2h0IHJlc3VsdCBpbiB1bmV4cGVjdGVkIGJlaGF2aW91ciBvZiB0aGUgcGFnZS4gUGxlYXNlIHJlcG9ydCB0aGUgZXJyb3IgdG8gdGhlIGF1dGhvciBvbiBHcmVhc3lmb3JrLiBFcnJvcjogJytlcnIpOwogICAgfQogICAgcmV0dXJuIGNoZWNrOwp9CmZ1bmN0aW9uIHJlbW92ZVByZXZpb3VzQ3dpeigpewogICAgYXBwQ3dpei5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGFwcEN3aXopOwp9"},{"name":"Feedly Full Feed","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://feedly.com/*","https://feedly.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":["wedata.net","urls.api.twitter.com","www.solidot.org","cn.engadget.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1513352691384,"data":{}},"enabled":true,"position":12,"file_url":"https://greasyfork.org/scripts/896-feedly-full-feed/code/Feedly%20Full%20Feed.user.js","uuid":"114e2a35-ca38-4dfc-a6eb-57b8e0292302","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgRmVlZGx5IEZ1bGwgRmVlZAovLyBAZGVzY3JpcHRpb24gICAgUmVhZCBmdWxsIHN0b3J5IGluIEZlZWRseS4gLyBGZWVkbHnjgafoqJjkuovjga7lhajmlofjgpLooajnpLrjgZfjgb7jgZnjgIIKLy8gQGlkICAgIEZlZWRseUZ1bGxGZWVkCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly91c2Vyc2NyaXB0cy5vcmcvc2NyaXB0cy9zaG93LzE3MTg2OAovLyBAaG9tZXBhZ2UgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzg5NgovLyBAaW5jbHVkZSAgICBodHRwOi8vZmVlZGx5LmNvbS8qCi8vIEBpbmNsdWRlICAgIGh0dHBzOi8vZmVlZGx5LmNvbS8qCi8vIEBncmFudCAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgR01fbG9nCi8vIEBncmFudCAgICBHTV9vcGVuSW5UYWIKLy8gQGdyYW50ICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQGdyYW50ICAgIEdNX3NldENsaXBib2FyZAovLyBAZ3JhbnQgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQHZlcnNpb24gICAgMC4zNAovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKCi8vID09IFtDU1NdID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KdmFyIENTUyA9IFsKICAnI3RpbWVsaW5lIC5lbnRyeVRpdGxlIGltZyB7IGJvcmRlcjogbm9uZTsgdmVydGljYWwtYWxpZ246IHRleHQtdG9wOyB9JywKICAnI3RpbWVsaW5lIC5lbnRyeVRpdGxlIHNwYW4gYSB7IG1hcmdpbjogMCAzcHg7IH0nLAogICcjdGltZWxpbmUgLmVudHJ5Qm9keSAuY2xlYXIgeyBmb250LXNpemU6IGluaGVyaXQgIWltcG9ydGFudDsgaGVpZ2h0OiBhdXRvICFJbXBvcnRhbnQ7IHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7IH0nLAogICcudTEwMEVudHJ5IC50aXRsZSB7IGRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50OyB9JywKICAnLmdtX2Z1bGxmZWVkX2xvYWRpbmcgeyBib3JkZXItY29sb3I6IGxpbWVncmVlbiAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kLWNvbG9yOiBsaW1lZ3JlZW4gIWltcG9ydGFudDsgfScsCiAgJy5nbV9mdWxsZmVlZF9sb2FkZWQgKiB7IHBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsgfScsCiAgJy5nbV9mdWxsZmVlZF9vcGVuZWQgeyBib3JkZXItY29sb3I6IGdvbGQgIWltcG9ydGFudDsgYmFja2dyb3VuZC1jb2xvcjogZ29sZCAhaW1wb3J0YW50OyB9JywKICAnLmdtX2Z1bGxmZWVkX2FwX29uIHsgY29sb3I6ICMwMDk5MDA7IH0nLAogICcuZ21fZnVsbGZlZWRfYXBfb2ZmIHsgY29sb3I6ICM5OTAwMDA7IH0nLAogICcuZ21fZnVsbGZlZWRfcGFnZXIgeyBtYXJnaW46IDNlbSAwOyB9JywKICAnLmdtX2Z1bGxmZWVkX3BhZ2VyIGhyIHsgbWFyZ2luLWJvdHRvbTogNXB4OyB9JywKICAnLmdtX2Z1bGxmZWVkX3BhZ2VyX2RpZmZlcmVudGhvc3QgeyBtYXJnaW4tbGVmdDogMmVtOyBmb250LXdlaWdodDogYm9sZDsgfScsCiAgJy5nbV9mdWxsZmVlZF9lbnRyeV91cmwgeyBmb250LXNpemU6IDgwJTsgfScsCiAgJy5nbV9mdWxsZmVlZF9oaWRkZW4geyBkaXNwbGF5OiBub25lOyB9JywKICAnI2dtX2Z1bGxmZWVkX21lc3NhZ2UgeyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogNHB4OyByaWdodDogMzAwcHg7IHotaW5kZXg6IDkwOTAwOyBjb2xvcjogYmxhY2s7IGJhY2tncm91bmQtY29sb3I6ICNGRkVFQUE7IGJveC1zaGFkb3c6IDFweCAxcHggMnB4ICNDQ0NDQ0M7IHBhZGRpbmc6IDRweCA4cHg7IH0nLAogICcuZ21fZnVsbGZlZWRfd2FybmluZyB7IGJhY2tncm91bmQtY29sb3I6ICNGRjk5OTkgIWltcG9ydGFudDsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkIHsgbWFyZ2luLXJpZ2h0OiA0cHg7IH0nLAogICcuZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uIHsgY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDAuOGVtOyBtYXJnaW4tbGVmdDogMWVtOyBwYWRkaW5nOiAwIDEuMjVlbTsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IGN1cnNvcjogcG9pbnRlcjsgcG9zaXRpb246IHJlbGF0aXZlOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyBib3JkZXItcmFkaXVzOiAzcHg7IGJveC1zaGFkb3c6IDFweCAxcHggMnB4ICNDQ0NDQ0M7IH0nLAogICcuZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uOmFjdGl2ZSB7IGJveC1zaGFkb3c6IG5vbmU7IH0nLAogICcuZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uX2luZm8geyBiYWNrZ3JvdW5kOiAjRkZDQzAwOyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjRkZDQzAwLCAjRkY5OTAwKTsgYm9yZGVyOiAxcHggc29saWQgI0VFODgwMDsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkX2ljb25faW5mbzpob3ZlciB7IGJhY2tncm91bmQ6ICNGRkVFMDA7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0b3AsICNGRkVFMDAsICNGRkJCMDApOyBib3JkZXI6IDFweCBzb2xpZCAjRUVBQTAwOyB9JywKICAnLmdtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9ub2luZm8geyBiYWNrZ3JvdW5kOiAjQ0NDQ0NDOyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjQ0NDQ0NDLCAjOTk5OTk5KTsgYm9yZGVyOiAxcHggc29saWQgIzg4ODg4ODsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fbm9pbmZvOmhvdmVyIHsgYmFja2dyb3VuZDogI0VFRUVFRTsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvcCwgI0VFRUVFRSwgI0JCQkJCQik7IGJvcmRlcjogMXB4IHNvbGlkICNBQUFBQUE7IH0nLAogICcuZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uX25leHQgeyBiYWNrZ3JvdW5kOiAjNzdDQzc3OyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjNzdDQzc3LCAjNTVBQTU1KTsgYm9yZGVyOiAxcHggc29saWQgIzQ0OTk0NDsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fbmV4dDpob3ZlciB7IGJhY2tncm91bmQ6ICM5OUVFOTk7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0b3AsICM5OUVFOTksICM3N0NDNzcpOyBib3JkZXI6IDFweCBzb2xpZCAjNjZCQjY2OyB9JywKICAnLmdtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9ub25leHQgeyBiYWNrZ3JvdW5kOiAjQkJFRUJCOyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjQkJFRUJCLCAjOTlDQzk5KTsgYm9yZGVyOiAxcHggc29saWQgIzg4QkI4ODsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fbm9uZXh0OmhvdmVyIHsgYmFja2dyb3VuZDogI0RERkZERDsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvcCwgI0RERkZERCwgI0JCRUVCQik7IGJvcmRlcjogMXB4IHNvbGlkICNBQUREQUE7IH0nLAogICcuZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uX2FzX25leHQgeyBiYWNrZ3JvdW5kOiAjNzc3N0NDOyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjNzc3N0NDLCAjNTU1NUFBKTsgYm9yZGVyOiAxcHggc29saWQgIzQ0NDQ5OTsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fYXNfbmV4dDpob3ZlciB7IGJhY2tncm91bmQ6ICM5OTk5RUU7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0b3AsICM5OTk5RUUsICM3Nzc3Q0MpOyBib3JkZXI6IDFweCBzb2xpZCAjNjY2NkJCOyB9JywKICAnLmdtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9hc19ub25leHQgeyBiYWNrZ3JvdW5kOiAjQkJCQkVFOyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG9wLCAjQkJCQkVFLCAjOTk5OUNDKTsgYm9yZGVyOiAxcHggc29saWQgIzg4ODhCQjsgfScsCiAgJy5nbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fYXNfbm9uZXh0OmhvdmVyIHsgYmFja2dyb3VuZDogI0RERERGRjsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvcCwgI0RERERGRiwgI0JCQkJFRSk7IGJvcmRlcjogMXB4IHNvbGlkICNBQUFBREQ7IH0nLAogICcuZ21fZnVsbGZlZWRfc29jaWFsaWNvbiB7IGZvbnQtc2l6ZTogMTJweDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncyB7IGJhY2tncm91bmQtY29sb3I6ICNGRkNDNjY7IHotaW5kZXg6IDkwMDAwOyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogOHB4OyBsZWZ0OiA4cHg7IHBhZGRpbmc6IDRweDsgd2lkdGg6IDYwMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IH0nLAogICcjZ21fZnVsbGZlZWRfc2V0dGluZ3MgaW5wdXQsICNnbV9mdWxsZmVlZF9zZXR0aW5ncyB0ZXh0YXJlYSB7IHBhZGRpbmc6IDJweDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncyBmaWVsZHNldCB7IGJvcmRlcjogMXB4IHNvbGlkICNGRkNDNjY7IG1hcmdpbjogNHB4IDJweDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1oZWFkZXIgeyBwYWRkaW5nOiAwIDRweCA4cHggNHB4OyB9JywKICAnI2dtX2Z1bGxmZWVkX3NldHRpbmdzLWhlYWRlcl90aXRsZSB7IGZvbnQtc2l6ZTogMTIwJTsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0nLAogICcjZ21fZnVsbGZlZWRfc2V0dGluZ3MtaGVhZGVyX3RpdGxlIGEgeyBjb2xvcjogIzIyNDQ4ODsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9JywKICAnI2dtX2Z1bGxmZWVkX3NldHRpbmdzLWhlYWRlcl9idXR0b24geyBmb250LXNpemU6IDkwJTsgZmxvYXQ6IHJpZ2h0OyB9JywKICAnI2dtX2Z1bGxmZWVkX3NldHRpbmdzLWhlYWRlciBpbnB1dCB7IG1hcmdpbjogMCA0cHg7IHdpZHRoOiA3ZW07IH0nLAogICcjZ21fZnVsbGZlZWRfc2V0dGluZ3MtdGFiIHsgb3ZlcmZsb3c6IGF1dG87IG1hcmdpbjogMDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy10YWIgLnNlbGVjdGVkIHsgcGFkZGluZzogNHB4IDhweCA2cHggOHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGN0Q3OyBjb2xvcjogYmxhY2s7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfScsCiAgJy5nbV9mdWxsZmVlZF9zZXR0aW5ncy10aXRsZSB7IGZsb2F0OiBsZWZ0OyBwYWRkaW5nOiA0cHggOHB4OyBtYXJnaW46IDA7IGNvbG9yOiAjMjI0NDg4OyBjdXJzb3I6IHBvaW50ZXI7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXNpemU6IDEwMCU7IH0nLAogICcjZ21fZnVsbGZlZWRfc2V0dGluZ3MtbGlzdCB7IGJhY2tncm91bmQtY29sb3I6ICNGRkY3RDc7IHBhZGRpbmc6IDhweCA0cHggNHB4IDRweDsgbWFyZ2luOiAwOyBib3JkZXItcmFkaXVzOiAwIDAgNHB4IDRweDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1mb290ZXIgeyB0ZXh0LWFsaWduOiByaWdodDsgcGFkZGluZzogNHB4OyB9JywKICAnLmdtX2Z1bGxmZWVkX3NldHRpbmdzLWZvb3RlciBpbnB1dCB7IG1hcmdpbjogMCA0cHg7IH0nLAogICcjZ21fZnVsbGZlZWRfc2V0dGluZ3Mtb2sgeyBwYWRkaW5nOiAwIDJlbTsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX2tleSwgI2dtX2Z1bGxmZWVkX3NldHRpbmdzLWdlbmVyYWxfYXBoZWlnaHQgeyB3aWR0aDogN2V4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1yaWdodDogMWV4OyBpbWUtbW9kZTogZGlzYWJsZWQgIWltcG9ydGFudDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX2tleWhlbHBpY29uIHsgbWFyZ2luLWxlZnQ6IDFlbTsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX2tleWhlbHBib2R5IHsgbWFyZ2luLXRvcDogMC41ZW07IGRpc3BsYXk6IG5vbmU7IH0nLAogICcjZ21fZnVsbGZlZWRfc2V0dGluZ3MtZ2VuZXJhbF9jYW50ZGlzcGxheSB7IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9JywKICAnI2dtX2Z1bGxmZWVkX3NldHRpbmdzLWdlbmVyYWxfbm90cmVhZCB7IHdpZHRoOiA1MzZweDsgbWFyZ2luLWJvdHRvbTogMC44ZW07fScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mbyBkaXYgeyBtYXJnaW46IDAgMCAxZW0gMDsgfScsCiAgJy5nbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19saW5rIHsgY29sb3I6ICMyMjQ0ODg7IHBhZGRpbmc6IDAgMC41ZW07IGN1cnNvcjogcG9pbnRlcjsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mbyAuc2VsZWN0ZWQgeyBjb2xvcjogYmxhY2s7IGJvcmRlci1ib3R0b206IG1lZGl1bSBzb2xpZCAjRkZDQzY2OyB9JywKICAnI2dtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvIGZpZWxkc2V0IHsgZGlzcGxheTogbm9uZTsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mbyB0ZXh0YXJlYSB7IHdpZHRoOiA1NjBweDsgaGVpZ2h0OiAxMGVtOyB9JywKICAnLmdtX2Z1bGxmZWVkX3NldHRpbmdzLWF1dG9sb2FkX3RpdGxlIHsgd2lkdGg6IDQ1MHB4OyBtYXJnaW4tcmlnaHQ6IDhweDsgfScsCiAgJy5nbV9mdWxsZmVlZF9zZXR0aW5ncy1hdXRvbG9hZF9saXN0IHsgd2lkdGg6IDU2MHB4OyBoZWlnaHQ6IDhlbTsgbWFyZ2luLXRvcDogOHB4OyB9JywKICAnI2dtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2Rpc2FibGVpdGVtbGlzdCB7IHdpZHRoOiA1NjBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1ldGMgYnV0dG9uIHsgbWFyZ2luOiAwIDRweDsgbGV0dGVyLXNwYWNpbmc6IDFweDsgfScsCiAgJy5nbV9mdWxsZmVlZF9zaXRlaW5mb3VybF9saXN0IGZpZWxkc2V0IHsgYmFja2dyb3VuZC1jb2xvcjogI0ZGRjdENzsgfScsCiAgJyNnbV9mdWxsZmVlZF9zZXR0aW5ncy1zZWN1cml0eSBpbnB1dFt0eXBlPSJ0ZXh0Il0sICNnbV9mdWxsZmVlZF9zZXR0aW5ncy1ldGMgaW5wdXRbdHlwZT0idGV4dCJdIHsgd2lkdGg6IDU2MHB4OyB9JywKICAnLmdtX2Z1bGxmZWVkX3R3aXR0ZXIsIC5nbV9mdWxsZmVlZF9kZWxpY2lvdXMsIC5nbV9mdWxsZmVlZF9mYWNlYm9vaywgLmdtX2Z1bGxmZWVkX2hhdGVuYSB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgcGFkZGluZzogMnB4IDRweDsgfScsCiAgJy5nbV9mdWxsZmVlZF90d2l0dGVyIGltZywgLmdtX2Z1bGxmZWVkX2RlbGljaW91cyBpbWcsIC5nbV9mdWxsZmVlZF9mYWNlYm9vayBpbWcsIC5nbV9mdWxsZmVlZF9oYXRlbmEgaW1nIHsgd2lkdGg6IDE2cHg7IGhlaWdodDogMTZweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfScsCiAgJy5nbV9mdWxsZmVlZF90d2l0dGVyIHNwYW4sIC5nbV9mdWxsZmVlZF9kZWxpY2lvdXMgc3BhbiwgLmdtX2Z1bGxmZWVkX2ZhY2Vib29rIHNwYW4sIC5nbV9mdWxsZmVlZF9oYXRlbmEgc3BhbiB7IHBhZGRpbmc6IDBweCAzcHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0nLAogICcuZ21fZnVsbGZlZWRfdHdpdHRlcjEgc3BhbiB7IGNvbG9yOiAjMzNDQ0ZGICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfdHdpdHRlcjIgc3BhbiB7IGNvbG9yOiAjMjJBQUZGICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfdHdpdHRlcjMgc3BhbiB7IGNvbG9yOiAjMTE4OEZGICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfdHdpdHRlcjQgc3BhbiB7IGNvbG9yOiAjMDA2NkZGICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfZGVsaWNpb3VzIHNwYW4geyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgfScsCiAgJy5nbV9mdWxsZmVlZF9kZWxpY2lvdXMxIHNwYW4geyBiYWNrZ3JvdW5kLWNvbG9yOiAjNzNBREZGICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfZGVsaWNpb3VzMiBzcGFuIHsgYmFja2dyb3VuZC1jb2xvcjogIzU1OTJFOSAhaW1wb3J0YW50OyB9JywKICAnLmdtX2Z1bGxmZWVkX2RlbGljaW91czMgc3BhbiB7IGJhY2tncm91bmQtY29sb3I6ICMzMjc0RDAgIWltcG9ydGFudDsgfScsCiAgJy5nbV9mdWxsZmVlZF9kZWxpY2lvdXM0IHNwYW4geyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjI2MUEwICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfaGF0ZW5hMSBzcGFuIHsgY29sb3I6ICNGRjY1NjMgIWltcG9ydGFudDsgYmFja2dyb3VuZC1jb2xvcjogI0ZGRjBGMCAhaW1wb3J0YW50OyB9JywKICAnLmdtX2Z1bGxmZWVkX2hhdGVuYTIgc3BhbiB7IGNvbG9yOiAjRkY0NDQ0ICFpbXBvcnRhbnQ7IGJhY2tncm91bmQtY29sb3I6ICNGRkVFRUUgIWltcG9ydGFudDsgfScsCiAgJy5nbV9mdWxsZmVlZF9oYXRlbmEzIHNwYW4geyBjb2xvcjogI0ZGMjIyMiAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZEREREICFpbXBvcnRhbnQ7IH0nLAogICcuZ21fZnVsbGZlZWRfaGF0ZW5hNCBzcGFuIHsgY29sb3I6ICNGRjAwMDAgIWltcG9ydGFudDsgYmFja2dyb3VuZC1jb2xvcjogI0ZGQ0NDQyAhaW1wb3J0YW50OyB9JwpdLmpvaW4oJycpOwoKLy8gPT0gW0xvY2FsZV0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQp2YXIgbG9jYWxlX2phID0gWwogICflhajmlofjgpLoqq3jgb/ovrzjgb/kuK3igKYnLAogICflhajmlofjgpLoqq3jgb/ovrzjgb/kuK3igKYgQXV0byBTZWFyY2jigKYnLAogICflhajmlofjgpLoqq3jgb/ovrzjgb/kuK3igKYg5a6M5LqGJywKICAn44K144Kk44OI5oOF5aCx44GM5Y+k44GE44GL6ZaT6YGV44Gj44Gm44GE44KL44Gf44KB44CB5YWo5paH44KS6KGo56S644Gn44GN44G+44Gb44KTJywKICAn5qyh44Gu44Oa44O844K444KS6Kqt44G/6L6844G/5Lit4oCmJywKICAn5qyh44Gu44Oa44O844K444KS6Kqt44G/6L6844G/5Lit4oCmIOWujOS6hicsCiAgJ+acgOW+jOOBruODmuODvOOCuOOCkuiqreOBv+i+vOOBv+S4reKApiDlrozkuoYnLAogICfmrKHjga7jg5rjg7zjgrjjga/opovjgaTjgYvjgorjgb7jgZvjgpMnLAogICfoqq3jgb/ovrzjgb/jgpLjg5bjg63jg4Pjgq/jgZfjgb7jgZfjgZ8nLAogICfjgZnjgafjgavlhajmlofjgpLoqq3jgb/ovrzjgb/jgb7jgZfjgZ8nLAogICflhajmlofjgpLooajnpLrjgZnjgovjgZ/jgoHjga7mg4XloLHjgYzopovjgaTjgYvjgonjgarjgYTjgZ/jgoHjgIHmlrDjgZfjgYTjgr/jg5bjgafplovjgY3jgb7jgZfjgZ8nLAogICfjgq3jg6Pjg4Pjgrfjg6XjgpLjg6rjgrvjg4Pjg4jjgZfjgabjgYTjgb7jgZnigKYnLAogICfjgq3jg6Pjg4Pjgrfjg6XjgpLjg6rjgrvjg4Pjg4jjgZfjgabjgYTjgb7jgZnigKYg5a6M5LqGJywKICAn44Od44OD44OX44Ki44OD44OX44Gn44GN44G+44Gb44KTJywKICAn44Ko44Op44O877ya44K144O844OQ44O844GL44KJ44Kt44Oj44OD44K344Ol44KS6Kqt44G/6L6844KB44G+44Gb44KT44Gn44GX44GfJywKICAn44Kt44Oj44OD44K344Ol44KS44Oq44K744OD44OI44GX44G+44GZ44GL77yfJywKICAn44Kt44Oj44OD44K344Ol44KS5raI5Y6744GX44G+44GZ44GL77yfJywKICAn44Ko44Op44O877yaSlNPTlDjga/jgrXjg53jg7zjg4jjgZfjgabjgYTjgb7jgZvjgpMnLAogICflhajmlofoqq3jgb/ovrzjgb8nLAogICfjga/jgabjgarjg5bjg4Pjgq/jg57jg7zjgq8nLAogICdsaXZlZG9vciDjgq/jg6rjg4Pjg5cnLAogICfoqK3lrponLAogICfjgq3jg6Pjg7Pjgrvjg6snLAogICfjgrfjg6fjg7zjg4jjgqvjg4Pjg4jjgq3jg7wnLAogICfjgq3jg7wnLAogICfjgq3jg7zjgrPjg7zjg4knLAogICdBdXRvIExvYWQg5YiH5pu/JywKICAnYXV0b1BhZ2VyaXplIOWIh+abvycsCiAgJ+ioreWumuashOOCkuihqOekuicsCiAgJ+OCreODo+ODg+OCt+ODpeODquOCu+ODg+ODiCcsCiAgJ0Z1bGwgRmVlZCBVUkwnLAogICdBdXRvUGFnZXJpemUgVVJMJywKICAnRnVsbCBGZWVkIOODpuODvOOCtuODvFNJVEVfSU5GTycsCiAgJ0F1dG9QYWdlcml6ZSDjg6bjg7zjgrbjg7xTSVRFX0lORk8nLAogICfmrKHjga7jg5rjg7zjgrjjgpLoqq3jgb/ovrzjgb/kuK3igKYgQXV0byBTZWFyY2jigKYg5a6M5LqGJywKICAn5pyA5b6M44Gu44Oa44O844K444KS6Kqt44G/6L6844G/5Lit4oCmIEF1dG8gU2VhcmNo4oCmIOWujOS6hicsCiAgJ+ODm+ODr+OCpOODiOODquOCueODiCcsCiAgJ+ODleOCo+ODvOODieOCv+OCpOODiOODqyAo5q2j6KaP6KGo54++KScsCiAgJ+i/veWKoCcsCiAgJ+ODm+ODr+OCpOODiOODquOCueODiC/jg5bjg6njg4Pjgq/jg6rjgrnjg4jjgavov73liqAnLAogICfjgq/jg6rjg4Pjgq8nLAogICfmrKHjga7jg5rjg7zjgrjjgpLoqq3jgb/ovrzjgoAnLAogICdub3NjcmlwdOOCv+OCsOWGheOBruOCs+ODs+ODhuODs+ODhOOCkuihqOekuicsCiAgJ+iHquWLleeahOOBq+WFqOaWh+OCkuiqreOBv+i+vOOCgOOCouOCpOODhuODoCcsCiAgJ+OBmeOBueOBpicsCiAgJ+ODm+ODr+OCpOODiOODquOCueODiOOBruOBvycsCiAgJ+OBquOBlycsCiAgJ+WFqOaWh+OCkuiqreOBv+i+vOOBvuOBquOBhOOCouOCpOODhuODoCAo5q2j6KaP6KGo54++KScsCiAgJ+iqreOBv+i+vOOBvuOBquOBhOS7o+OCj+OCiuOBq+aWsOOBl+OBhOOCv+ODluOBp+mWi+OBjycsCiAgJ+aWsOOBl+OBhOOCv+ODluOBp+mWi+OBjeOBvuOBl+OBnycsCiAgJ+ODh+ODkOODg+OCsOODreOCsCcsCiAgJ+WFqOaWh+OCkuiqreOBv+i+vOOBv+S4reKApiBBdXRvIFNlYXJjaOKApiDlrozkuoYnLAogICfjgqTjg7Pjg6njgqTjg7Pjg5Xjg6zjg7zjg6DjgpLlj5bjgorpmaTjgY8nLAogICfjgqjjg6njg7zvvJpkb20uc3RvcmFnZS5lbmFibGVk44KSdHJ1ZeOBq+ioreWumuOBl+OBpuOBj+OBoOOBleOBhCcsCiAgJ+OBiuW+heOBoeOBj+OBoOOBleOBhOKApicsCiAgJ+OCveODvOOCt+ODo+ODq+OCouOCpOOCs+ODs+OCkuihqOekuicsCiAgJ1lhaG9vIeODluODg+OCr+ODnuODvOOCrycsCiAgJ0J1enp1cmwgW+ODkOOCtuODvOODq10nLAogICdGQzLjg5bjg4Pjgq/jg57jg7zjgq8nLAogICforablkYrvvJrmrKHjg5rjg7zjgrjjgpLntpnjgY7otrPjgZfjgabjgoLjgojjgo3jgZfjgYTjgafjgZnjgYvvvJ9cblxu5LuK44Gu44Oa44O844K477yaJywKICAnXG7mrKHjga7jg5rjg7zjgrjvvJonLAogICfmrKHjg5rjg7zjgrjjgpLntpnjgY7otrPjgZfjgb7jgZvjgpMnLAogICfmrKHjg5rjg7zjgrjjga7ntpnjgY7otrPjgZfjgpLoqLHlj6/jgZnjgotVUkwgKOato+imj+ihqOePviknLAogICfmrKHjg5rjg7zjgrjjga7ntpnjgY7otrPjgZfjgpLnpoHmraLjgZnjgotVUkwgKOato+imj+ihqOePviknLAogICfjgrXjgqTjg4jmg4XloLHjgYzjgarjgY/jgabjgoLlhajmlofjga7oqq3jgb/ovrzjgb/jgpLoqabjgb/jgosnLAogICfooajnpLrjgpLoqLHlj6/jgZnjgovjgqTjg7Pjg6njgqTjg7Pjg5Xjg6zjg7zjg6Djga7jgr3jg7zjgrlVUkwgKOato+imj+ihqOePviknLAogICfoqK3lrprjgpLjgqjjgq/jgrnjg53jg7zjg4jjgZfjgabjgq/jg6rjg4Pjg5fjg5zjg7zjg4njgbjjgrPjg5Tjg7zjgZfjgb7jgZnjgYvvvJ8nLAogICfjgq/jg6rjg4Pjg5fjg5zjg7zjg4njgbjjgrPjg5Tjg7zjgZfjgb7jgZfjgZ8nLAogICfoqK3lrprjgpLjgqjjgq/jgrnjg53jg7zjg4jjgZfjgb7jgZfjgZ/jgIJcbuS7peS4i+OBruaWh+Wtl+WIl+OCkuOCs+ODlOODvOOBl+OBpuOBj+OBoOOBleOBhFxuXG4nLAogICfjgqjjgq/jgrnjg53jg7zjg4jjgZfjgZ/mloflrZfliJfjgpLlhaXlipvjgZfjgabjgY/jgaDjgZXjgYQnLAogICfoqK3lrprjgpLjgqTjg7Pjg53jg7zjg4jjgZfjgb7jgZfjgZ8nLAogICfjgqTjg7Pjg53jg7zjg4jjgafjgY3jgb7jgZvjgpMnLAogICfoqK3lrprjgpLjg6rjgrvjg4Pjg4jjgZfjgb7jgZnjgYvvvJ8nLAogICfoqK3lrprjgpLjg6rjgrvjg4Pjg4jjgZfjgb7jgZfjgZ8nLAogICfjgrXjgqTjg4jmg4XloLHjgYzopovjgaTjgYvjgonjgarjgYTjgZ/jgoHlhajmlofjgpLooajnpLrjgafjgY3jgb7jgZvjgpMnLAogICflhajmlofjgpLooajnpLrjgafjgY3jgarjgYTjgajjgY3jga/mlrDjgZfjgYTjgr/jg5bjgafplovjgY8nLAogICfjg5bjg6njg4Pjgq/jg6rjgrnjg4gnLAogICfjg5bjg6njg4Pjgq/jg6rjgrnjg4jku6XlpJYnCl07CnZhciBsb2NhbGVfZW4gPSBbCiAgJ0xvYWRpbmcgRnVsbCBGZWVkLi4uJywKICAnTG9hZGluZyBGdWxsIEZlZWQuLi4gQXV0byBTZWFyY2guLi4nLAogICdMb2FkaW5nIEZ1bGwgRmVlZC4uLiBEb25lJywKICAnVGhpcyBzaXRlIGluZm8gaXMgdW5tYXRjaGVkIHRvIHRoaXMgZW50cnknLAogICdMb2FkaW5nIG5leHQgcGFnZS4uLicsCiAgJ0xvYWRpbmcgbmV4dCBwYWdlLi4uIERvbmUnLAogICdMb2FkaW5nIGxhc3QgcGFnZS4uLiBEb25lJywKICAnTmV4dCBwYWdlIGlzIG5vdCBmb3VuZCcsCiAgJ0Jsb2NrZWQgbG9hZGluZyBmdWxsIHN0b3J5JywKICAnVGhpcyBlbnRyeSBoYXMgYmVlbiBhbHJlYWR5IGxvYWRlZCcsCiAgJ0luZm9ybWF0aW9uIHRvIGRpc3BsYXkgZnVsbCBzdG9yeSBpcyBub3QgZm91bmQsIE9wZW5lZCBpbiBuZXcgdGFiJywKICAnUmVzZXR0aW5nIGNhY2hlLiBQbGVhc2Ugd2FpdC4uLicsCiAgJ1Jlc2V0dGluZyBjYWNoZS4gUGxlYXNlIHdhaXQuLi4gRG9uZScsCiAgJ0Nhbm5vdCBwb3B1cCcsCiAgJ0NhY2hlIFJlcXVlc3QgRXJyb3InLAogICdSZXNldCBjYWNoZT8nLAogICdEZWxldGUgY2FjaGU/JywKICAnRXJyb3I6IG5vdCBzdXBwb3J0IEpTT05QJywKICAncmVhZCBmdWxsIHN0b3J5JywKICAnSGF0ZW5hIEJvb2ttYXJrJywKICAnbGl2ZWRvb3IgY2xpcCcsCiAgJ1NldHRpbmdzJywKICAnQ2FuY2VsJywKICAnc2hvcnRjdXQga2V5JywKICAna2V5JywKICAna2V5IGNvZGUnLAogICdjaGFuZ2UgQXV0byBMb2FkJywKICAnY2hhbmdlIGF1dG9QYWdlcml6ZScsCiAgJ3ZpZXcgc2V0dGluZ3MnLAogICdyZXNldCBjYWNoZScsCiAgJ0Z1bGwgRmVlZCBVUkwnLAogICdBdXRvUGFnZXJpemUgVVJMJywKICAnRnVsbCBGZWVkIHVzZXIgU0lURV9JTkZPJywKICAnQXV0b1BhZ2VyaXplIHVzZXIgU0lURV9JTkZPJywKICAnTG9hZGluZyBuZXh0IHBhZ2UuLi4gQXV0byBTZWFyY2guLi4gRG9uZScsCiAgJ0xvYWRpbmcgbGFzdCBwYWdlLi4uIEF1dG8gU2VhcmNoLi4uIERvbmUnLAogICdXaGl0ZWxpc3QnLAogICdGZWVkIHRpdGxlIChyZWd1bGFyIGV4cHJlc3Npb24pJywKICAnQWRkJywKICAnQWRkIHdoaXRlbGlzdC9ibGFja2xpc3QnLAogICdDbGljaycsCiAgJ0xvYWRpbmcgbmV4dCBwYWdlJywKICAnRGlzcGxheSBjb250ZW50IGluIG5vc2NyaXB0IHRhZ3MnLAogICdSZWFkIGZ1bGwgc3RvcnkgYXV0b21hdGljYWxseScsCiAgJ0FsbCcsCiAgJ1doaXRlbGlzdCBvbmx5JywKICAnTm9uZScsCiAgJ0l0ZW0gd2hpY2ggZG9lcyBub3QgcmVhZCBmdWxsIHN0b3J5IChyZWd1bGFyIGV4cHJlc3Npb24pJywKICAnSW5zdGVhZCBvZiBub3QgcmVhZGluZywgb3BlbiBpbiBuZXcgdGFiJywKICAnT3BlbmVkIGluIG5ldyB0YWInLAogICdEZWJ1ZyBsb2cnLAogICdMb2FkaW5nIEZ1bGwgRmVlZC4uLiBBdXRvIFNlYXJjaC4uLiBEb25lJywKICAnUmVtb3ZlIGlmcmFtZScsCiAgJ0Vycm9yOiBQbGVhc2Ugc2V0ICJkb20uc3RvcmFnZS5lbmFibGVkIiBpbiAidHJ1ZSIuJywKICAnV2FpdC4uLicsCiAgJ0Rpc3BsYXkgc29jaWFsIGljb24nLAogICdZYWhvbyEgSkFQQU4gQm9va21hcmtzJywKICAnQnV6enVybCcsCiAgJ0ZDMiBCb29rbWFyaycsCiAgJ1dhcm5pbmc6IEFkZCB0aGUgbmV4dCBwYWdlP1xuXG5yZWFkaW5nIHBhZ2U6ICcsCiAgJ1xubmV4dCBwYWdlOiAnLAogICdEbyBub3QgYWRkIHRoZSBuZXh0IHBhZ2UnLAogICdVUkwgdG8gYWxsb3cgdGhlIGFkZGl0aW9uIG9mIHRoZSBuZXh0IHBhZ2UgKHJlZ3VsYXIgZXhwcmVzc2lvbiknLAogICdVUkwgdG8gZGVueSB0aGUgYWRkaXRpb24gb2YgdGhlIG5leHQgcGFnZSAocmVndWxhciBleHByZXNzaW9uKScsCiAgJ1RyeSBsb2FkaW5nIGZ1bGwgc3Rvcnkgd2l0aG91dCBhIHNpdGUgaW5mbycsCiAgJ1RoZSBzb3VyY2UgVVJMIG9mIHRoZSBpbmxpbmUgZnJhbWUgdG8gZGlzcGxheSAocmVndWxhciBleHByZXNzaW9uKScsCiAgJ0V4cG9ydCBzZXR0aW5ncyBhbmQgY29weSBpdCB0byBjbGlwYm9hcmQ/JywKICAnQ29waWVkIGl0IHRvIGNsaXBib2FyZCcsCiAgJ0V4cG9ydGVkIHNldHRpbmdzLlxuUGxlYXNlIGNvcHkgdGhlIGZvbGxvd2luZyBjaGFyYWN0ZXIgc3RyaW5nXG5cbicsCiAgJ1BsZWFzZSBpbnB1dCB0aGUgY2hhcmFjdGVyIHN0cmluZyB0aGF0IGV4cG9ydGVkJywKICAnSW1wb3J0ZWQgc2V0dGluZ3MnLAogICdDYW5ub3QgaW1wb3J0JywKICAnUmVzZXQgc2V0dGluZ3M/JywKICAnUmVzZXQgc2V0dGluZ3MnLAogICdTaXRlIGluZm8gdG8gZGlzcGxheSBmdWxsIHN0b3J5IGlzIG5vdCBmb3VuZCcsCiAgJ09wZW4gaW4gbmV3IHRhYiBpZiBjYW5ub3QgZGlzcGxheSBmdWxsIHN0b3J5JywKICAnYmxhY2tsaXN0JywKICAnRXhjZXB0IGJsYWNrbGlzdCcKXTsKdmFyIGxvYyA9ICh3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlID09PSAnamEnKSA/IGxvY2FsZV9qYSA6IGxvY2FsZV9lbjsKCi8vID09IFtBcHBsaWNhdGlvbl0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KdHJ5IHsgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93LmFsZXJ0KGxvY1s1M10pOyB9CmNhdGNoKGUpIHsgcmV0dXJuIHdpbmRvdy5hbGVydChsb2NbNTNdKTsgfQp2YXIgJGlkID0gZnVuY3Rpb24oaWQpIHsgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgfTsKdmFyICRpZHMgPSBmdW5jdGlvbihpZCkgeyByZXR1cm4gJGlkKCdnbV9mdWxsZmVlZF9zZXR0aW5ncy0nICsgaWQpOyB9OwoKdmFyIEZ1bGxGZWVkID0gZnVuY3Rpb24oaW5mbywgYywgZmxhZykgewogIHN0YXRlID0gJ3JlYWR5JzsKICB0aGlzLml0ZW1JbmZvID0gYzsKICB0aGlzLmluZm8gPSBpbmZvOwogIHRoaXMucmVxdWVzdFVSTCA9IHRoaXMuaXRlbUluZm8uaXRlbVVSTDsKICAKICB2YXIgdSA9IHRoaXMucmVxdWVzdFVSTDsKICBpZiAoL15odHRwcz86XC9cL3d3d1wuZmVlZGx5XC5jb21cL2hvbWUjc3Vic2NyaXB0aW9uXC9mZWVkXC9odHRwcz86XC9cLy4rLy50ZXN0KHUpKSB7CiAgICB1ID0gdS5zbGljZSh1LmluZGV4T2YoJy9mZWVkLycpKzYpOwogICAgdGhpcy5yZXF1ZXN0VVJMID0gZGVjb2RlVVJJQ29tcG9uZW50KHUuc2xpY2UoMCwgdS5pbmRleE9mKCcmJykpKTsKICB9IGVsc2UgaWYgKC9eaHR0cDpcL1wvcmRcLnlhaG9vXC5jb1wuanBcL3Jzc1wvbFwvLisvLnRlc3QodSkpIHsKICAgIGlmICgvXC9cKlwtaHR0cC8udGVzdCh1KSkKICAgICAgdGhpcy5yZXF1ZXN0VVJMID0gZGVjb2RlVVJJQ29tcG9uZW50KHUuc2xpY2UodS5pbmRleE9mKCcqLWh0dHAnKSsyKSk7CiAgICBlbHNlIGlmICgvXC9cKmh0dHAvLnRlc3QodSkpCiAgICAgIHRoaXMucmVxdWVzdFVSTCA9IGRlY29kZVVSSUNvbXBvbmVudCh1LnNsaWNlKHUuaW5kZXhPZignKmh0dHAnKSsxKSk7CiAgfQogIHRoaXMuaXRlbUluZm8uaXRlbV9ib2R5ID0gZ2V0Rmlyc3RFbGVtZW50QnlYUGF0aChyZXR1cm5YcGF0aEVudHJ5KCkgKyAnLy9kaXZbY29udGFpbnMoY29uY2F0KCIgIiwgQGNsYXNzLCAiICIpLCAiIGVudHJ5Qm9keSAiKV0nKTsKICB2YXIgZW5jb2RlID0gdGhpcy5pbmZvLmVuYyB8fCBkb2N1bWVudC5jaGFyYWN0ZXJTZXQ7CiAgaWYgKGZsYWcgPT09ICduZXh0JyAmJiB0aGlzLml0ZW1JbmZvLmlubmVyQ29udGVudHMpIHsKICAgIHRoaXMuaXRlbUluZm8uaW5uZXJDb250ZW50cy5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLnNvbWUoZnVuY3Rpb24oaSkgewogICAgICBpZiAoIS9eZW50cnl8XmdtX3xeaHR0cC8udGVzdChpKSkgewogICAgICAgIGVuY29kZSA9IGk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0pOwogIH0KICB0aGlzLm1pbWUgPSAndGV4dC9odG1sOyBjaGFyc2V0PScgKyBlbmNvZGU7CiAgaWYgKGZsYWcgPT09ICdzZWFyY2gnKSB0aGlzLnJlcXVlc3QoJ0hFQUQnLCBjKTsKICBlbHNlIHRoaXMucmVxdWVzdCgnR0VUJywgYyk7CiAgaWYgKGRlYnVnTG9nKSB7CiAgICB0cnkgewogICAgICBHTV9sb2cobmV3IERhdGUoKSk7CiAgICAgIEdNX2xvZygnSXRlbSBUaXRsZTogJyArIGMuaXRlbS50aXRsZSk7CiAgICAgIEdNX2xvZygnSXRlbSBVUkw6ICcgKyBjLml0ZW0udXJsKTsKICAgICAgR01fbG9nKCdGZWVkIFVSTDogJyArIGMuZmVlZC51cmwpOwogICAgICBHTV9sb2coJ0Z1bGxGZWVkIFVSTDogJyArIGluZm8udXJsKTsKICAgICAgR01fbG9nKCdGdWxsRmVlZCBYUGF0aDogJyArIGluZm8ueHBhdGgpOwogICAgICBHTV9sb2coJ0Z1bGxGZWVkIEVuY29kZTogJyArIGluZm8uZW5jKTsKICAgICAgR01fbG9nKHRoaXMuaW5mbyk7CiAgICB9IGNhdGNoKGUpIHt9CiAgfQp9OwoKRnVsbEZlZWQucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbihtLCBjKSB7CiAgaWYgKCF0aGlzLnJlcXVlc3RVUkwpIHJldHVybjsKICBzdGF0ZSA9ICdyZXF1ZXN0JzsKICB2YXIgc2VsZiA9IHRoaXM7CiAgdmFyIHJldHJ5ID0gMDsKICB2YXIgb3B0ID0gewogICAgbWV0aG9kOiBtLAogICAgdXJsOiB0aGlzLnJlcXVlc3RVUkwsCiAgICBvdmVycmlkZU1pbWVUeXBlOiB0aGlzLm1pbWUsCiAgICBvbmVycm9yOiBmdW5jdGlvbigpIHsKICAgICAgc3RhdGUgPSBudWxsOwogICAgICBzZWxmLnJlcXVlc3RFcnJvci5hcHBseShzZWxmLCBbJ1JlcXVlc3QgRXJyb3InXSk7CiAgICB9LAogICAgb25sb2FkOiBmdW5jdGlvbihyZXMpIHsKICAgICAgaWYgKChyZXMuc3RhdHVzID49IDMwMSAmJiByZXMuc3RhdHVzIDw9IDMwMykgfHwgcmVzLnN0YXR1cyA9PT0gMzA3KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG9wdC51cmwgPSAvXHNMb2NhdGlvbjpccysoXFMrKS8uZXhlYyhyZXMucmVzcG9uc2VIZWFkZXJzKVsxXTsKICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KG9wdCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBjYXRjaChlcikgewogICAgICAgICAgc3RhdGUgPSBudWxsOwogICAgICAgICAgc2VsZi5yZXF1ZXN0RXJyb3IuYXBwbHkoc2VsZiwgWydSZXF1ZXN0IEVycm9yIDogJyArIHJlcy5zdGF0dXNdKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgaWYgKHJlcy5maW5hbFVybCkgb3B0LnVybCA9IHRoaXMucmVxdWVzdFVSTCA9IHJlcy5maW5hbFVybDsKICAgICAgICByZWFkaW5nUGFnZVVybCA9IGMuaW5uZXJDb250ZW50cy5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLmZpbHRlcihmdW5jdGlvbihpKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgvXmh0dHAvKS50ZXN0KGkpOwogICAgICAgIH0pLnNsaWNlKC0xKTsKICAgICAgICByZWFkaW5nUGFnZVVybCA9IChyZWFkaW5nUGFnZVVybC5sZW5ndGgpID8gcmVhZGluZ1BhZ2VVcmwudG9TdHJpbmcoKSA6IG9wdC51cmw7CiAgICAgICAgdmFyIGNzZXQgPSAvY29udGVudC10eXBlOlxzP1xTK1xzP2NoYXJzZXQ9XFMrL2kuZXhlYyhyZXMucmVzcG9uc2VIZWFkZXJzKTsKICAgICAgICBpZiAoY3NldCkgY3NldCA9IGNzZXRbMF0uc2xpY2UoY3NldFswXS5sYXN0SW5kZXhPZignPScpICsgMSk7CiAgICAgICAgaWYgKG9wdC5tZXRob2QgPT09ICdHRVQnKSB7CiAgICAgICAgICBpZiAoY3NldCAmJiAhbmV3IFJlZ0V4cChjc2V0LCAnaScpLnRlc3Qoc2VsZi5pbmZvLmVuYykgJiYgcmV0cnkgPCAyKSB7CiAgICAgICAgICAgIHNlbGYuaW5mby5lbmMgPSBjc2V0OwogICAgICAgICAgICBvcHQub3ZlcnJpZGVNaW1lVHlwZSA9ICd0ZXh0L2h0bWw7IGNoYXJzZXQ9JyArIGNzZXQ7CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KG9wdCk7CiAgICAgICAgICAgIHJldHJ5ICsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGgxID0gcmVhZGluZ1BhZ2VVcmwuc3BsaXQoJy8nKVsyXSwgaDIgPSBvcHQudXJsLnNwbGl0KCcvJylbMl07CiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoc3QuYWxsb3duZXh0dXJsLCAnaScpOwogICAgICAgICAgICBpZiAoaDEgPT09IGgyIHx8IChzdC5hbGxvd25leHR1cmwgJiYgcmUudGVzdChyZWFkaW5nUGFnZVVybCkpKQogICAgICAgICAgICAgIHNlbGYucmVxdWVzdExvYWQuY2FsbChzZWxmLCByZXMsIGMpOwogICAgICAgICAgICBlbHNlIGlmICh3aW5kb3cuY29uZmlybShsb2NbNTldICsgcmVhZGluZ1BhZ2VVcmwgKyBsb2NbNjBdICsgb3B0LnVybCkpCiAgICAgICAgICAgICAgc2VsZi5yZXF1ZXN0TG9hZC5jYWxsKHNlbGYsIHJlcywgYyk7CiAgICAgICAgICAgIGVsc2Ugc2VsZi5yZXF1ZXN0RW5kKGMsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKG9wdC5tZXRob2QgPT09ICdIRUFEJykgewogICAgICAgICAgaWYgKGNzZXQgJiYgc3QuYXV0b3NlYXJjaCkgewogICAgICAgICAgICBzZWxmLmluZm8uZW5jID0gY3NldDsKICAgICAgICAgICAgb3B0Lm1ldGhvZCA9ICdHRVQnOwogICAgICAgICAgICBvcHQub3ZlcnJpZGVNaW1lVHlwZSA9ICd0ZXh0L2h0bWw7IGNoYXJzZXQ9JyArIGNzZXQ7CiAgICAgICAgICAgIG1lc3NhZ2UobG9jWzFdLCAtMSk7CiAgICAgICAgICAgIGxvYWRpbmdTdHlsZSgnYWRkJywgYy5hcnRpY2xlQ29udGFpbmVyKTsKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3Qob3B0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRlID0gbnVsbDsKICAgICAgICAgICAgaWYgKHN0LmNhbnRkaXNwbGF5KSB7CiAgICAgICAgICAgICAgbWVzc2FnZShsb2NbMTBdLCAyMDAwKTsKICAgICAgICAgICAgICBsb2FkaW5nU3R5bGUoJ29wZW4nLCBjLmFydGljbGVDb250YWluZXIpOwogICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgR01fb3BlbkluVGFiKG9wdC51cmwsIHRydWUpOwogICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGxvYWRpbmdTdHlsZSgncmVtb3ZlJywgYy5hcnRpY2xlQ29udGFpbmVyKTsKICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgfSBlbHNlIG1lc3NhZ2UobG9jWzc0XSwgMzAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlID0gbnVsbDsKICAgICAgICB2YXIgc3RhdCA9IChyZXMuc3RhdHVzKSA/ICcgOiAnICsgcmVzLnN0YXR1cyA6ICcnOwogICAgICAgIHNlbGYucmVxdWVzdEVycm9yLmFwcGx5KHNlbGYsIFsnUmVxdWVzdCBFcnJvcicgKyBzdGF0XSk7CiAgICAgIH0KICAgIH0KICB9OwogIGlmIChvcHQubWV0aG9kID09PSAnSEVBRCcpIG1lc3NhZ2UobG9jWzU0XSwgLTEpOwogIGVsc2UgaWYgKG9wdC5tZXRob2QgPT09ICdHRVQnKSB7CiAgICBtZXNzYWdlKGxvY1swXSwgLTEpOwogICAgbG9hZGluZ1N0eWxlKCdhZGQnLCBjLmFydGljbGVDb250YWluZXIpOwogIH0KICBpZiAob3B0LnVybC5pbmRleE9mKCdodHRwOicpICE9PSAwICYmIHRoaXMuaW5mby5iYXNlKQogICAgb3B0LnVybCA9IHBhdGhUb1VSTCh0aGlzLmluZm8uYmFzZSwgb3B0LnVybCk7CiAgR01feG1saHR0cFJlcXVlc3Qob3B0KTsKfTsKCkZ1bGxGZWVkLnByb3RvdHlwZS5yZXF1ZXN0TG9hZCA9IGZ1bmN0aW9uKHJlcywgYykgewogIHN0YXRlID0gJ2xvYWRpbmcnOwogIHZhciB0ZXh0ID0gcmVzLnJlc3BvbnNlVGV4dDsKICB2YXIgaHRtbCA9IGNyZWF0ZUhUTUxEb2N1bWVudEJ5U3RyaW5nKHRleHQpOwogIHZhciB0bXBFbG0gPSAodGhpcy5pbmZvLnhwYXRoKSA/IGdldEVsZW1lbnRzQnlYUGF0aCh0aGlzLmluZm8ueHBhdGgsIGh0bWwpIDogbnVsbDsKICBpZiAodG1wRWxtKSB7CiAgICB2YXIgZG9jLCB0bXBOb2RlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTsKICAgIHRyeSB7CiAgICAgIGRvYyA9IGRvY3VtZW50LmNsb25lTm9kZShmYWxzZSk7CiAgICAgIGRvYy5hcHBlbmRDaGlsZChkb2MuaW1wb3J0Tm9kZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGZhbHNlKSk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCAnaHRtbCcsIG51bGwpOwogICAgfQogICAgdHJ5IHsKICAgICAgdG1wTm9kZSA9IGRvYy5hZG9wdE5vZGUodG1wTm9kZSk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgdG1wTm9kZSA9IGRvYy5pbXBvcnROb2RlKHRtcE5vZGUsIHRydWUpOwogICAgfQogICAgdG1wRWxtLmZvckVhY2goZnVuY3Rpb24oZWxtKSB7CiAgICAgIHRtcE5vZGUuYXBwZW5kQ2hpbGQoZWxtKTsKICAgIH0pOwogICAgaWYgKHRtcE5vZGUuaW5uZXJIVE1MKSB0ZXh0ID0gdG1wTm9kZS5pbm5lckhUTUw7CiAgfQogIFsnaGVhZCcsICdpc2luZGV4JywgJ2xpbmsnLCAnc2NyaXB0JywgJ3N0eWxlJywgJ3RpdGxlJ10uZm9yRWFjaChmdW5jdGlvbih0KSB7CiAgICB2YXIgciA9IG5ldyBSZWdFeHAoJzwoPzohLS1cXHMqKT8nICsgdCArICcoPzpcXHNbXj5dKz8pPz5bXFxTXFxzXSo/PFxcLycgKyB0ICsgJ1xccyo+JywgJ2dpJyk7CiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHIsICcnKTsKICB9KTsKICB2YXIgcmUgPSAvKDxbXj5dKz9bXHMiJ10pKD86b24oPzooPzp1bik/bG9hZHwoPzpkYmwpP2NsaWNrfG1vdXNlKD86ZG93bnx1cHxvdmVyfG1vdmV8b3V0KXxrZXkoPzpwcmVzc3xkb3dufHVwKXxmb2N1c3xibHVyfHN1Ym1pdHxyZXNldHxzZWxlY3R8Y2hhbmdlfGVycm9yKXxzdWJtaXR8dGFyZ2V0fHVzZW1hcHxmb3JtYWN0aW9uKVxzKj1ccyooPzoiKD86XFwifFteIl0pKiI/fCcoXFwnfFteJ10pKic/fFteXHM+XSsoPz1bXHM+XXw8XHcpKSg/PVtePl0qPz58PFx3fFxzKiQpL2dpOwogIHdoaWxlIChyZS50ZXN0KHRleHQpKSB7CiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlLCAnJDEnKTsKICB9CiAgaWYgKHN0Lm5vc2NyaXB0dGFnKSB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88bm9zY3JpcHQoPzpcc1tePl0rPyk/PihbXFNcc10qPyk8XC9ub3NjcmlwdFxzKj4vZ2ksICc8ZGl2PiQxPC9kaXY+Jyk7CiAgZWxzZSB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88bm9zY3JpcHQoPzpcc1tePl0rPyk/PihbXFNcc10qPyk8XC9ub3NjcmlwdFxzKj4vZ2ksICcnKTsKICB2YXIgaHRtbGRvYyA9IGNyZWF0ZUhUTUxEb2N1bWVudEJ5U3RyaW5nKHRleHQpOwogIGlmIChzdC5pZnJhbWV0YWcpIHsKICAgIHZhciBpZnJhbWUgPSBnZXRFbGVtZW50c0J5WFBhdGgoJy8vaWZyYW1lJywgaHRtbGRvYyk7CiAgICBpZiAoaWZyYW1lKSBpZnJhbWUuZm9yRWFjaChmdW5jdGlvbihhKSB7CiAgICAgIGlmICghc3QuYWxsb3dpZnJhbWV1cmwgfHwgKGEuc3JjICYmICFuZXcgUmVnRXhwKHN0LmFsbG93aWZyYW1ldXJsKS50ZXN0KGEuc3JjKSkpIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTsKICAgIH0pOwogIH0KICByZW1vdmVYU1NSaXNrcyhodG1sZG9jKTsKICBpZiAocmVzLmZpbmFsVXJsKSB0aGlzLnJlcXVlc3RVUkwgPSByZXMuZmluYWxVcmw7CiAgcmVsYXRpdmVUb0Fic29sdXRlUGF0aChodG1sZG9jLCB0aGlzLnJlcXVlc3RVUkwpOwogIHZhciBzZWxmID0gdGhpcywgZW50cnk7CiAgRnVsbEZlZWQuZG9jdW1lbnRGaWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oZmlsdGVyKSB7CiAgICBmaWx0ZXIoaHRtbGRvYywgdGhpcy5yZXF1ZXN0VVJMLCB0aGlzLmluZm8pOwogIH0pOwogIHRyeSB7CiAgICBlbnRyeSA9IGdldEVsZW1lbnRzQnlYUGF0aCgnLy9odG1sL2NoaWxkOjpub2RlKCknLCBodG1sZG9jKTsKICB9IGNhdGNoKGVyMSkgewogICAgbWVzc2FnZShlcjEsIDUwMDAsICd3YXJuaW5nJyk7CiAgICByZXR1cm47CiAgfQogIGlmICghdG1wRWxtKSB7CiAgICBpZiAoc3QuYXV0b3NlYXJjaCkgewogICAgICBpZiAoZGVidWdMb2cpIHRyeSB7IEdNX2xvZygnQXV0byBTZWFyY2gnKTsgfSBjYXRjaChlcjIpIHt9CiAgICAgIG1lc3NhZ2UobG9jWzFdLCAtMSk7CiAgICAgIGVudHJ5ID0gc2VhcmNoRW50cnkoaHRtbGRvYyk7CiAgICB9IGVsc2UgewogICAgICBzdGF0ZSA9IG51bGw7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIEdNX29wZW5JblRhYihzZWxmLnJlcXVlc3RVUkwsIHRydWUpOwogICAgICB9LCAxMCk7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGxvYWRpbmdTdHlsZSgncmVtb3ZlJywgYy5hcnRpY2xlQ29udGFpbmVyKTsKICAgICAgfSwgMTAwMCk7CiAgICAgIHJldHVybiBtZXNzYWdlKGxvY1sxMF0sIDIwMDApOwogICAgfQogIH0KICBpZiAoZW50cnkpIHsKICAgIGlmICghaGFzQ2xhc3MoYy5pbm5lckNvbnRlbnRzLCAnZ21fZnVsbGZlZWRfbG9hZGVkJykpCiAgICAgIHRoaXMucmVtb3ZlRW50cnkoKTsKICAgIGVudHJ5ID0gdGhpcy5hZGRFbnRyeShlbnRyeSwgYyk7CiAgICBpZiAoIXRtcEVsbSAmJiBzdC5hdXRvc2VhcmNoKSB0aGlzLnJlcXVlc3RFbmQoYywgdHJ1ZSk7CiAgICBlbHNlIHRoaXMucmVxdWVzdEVuZChjKTsKICB9IGVsc2UgewogICAgc3RhdGUgPSBudWxsOwogICAgdGhpcy5yZXF1ZXN0RXJyb3IobG9jWzNdKTsKICB9Cn07CgpGdWxsRmVlZC5wcm90b3R5cGUucmVxdWVzdEVuZCA9IGZ1bmN0aW9uKGMsIGFzLCBoYWx0KSB7CiAgc3RhdGUgPSAnbG9hZGVkJzsKICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIHN0YXRlID0gJ3dhaXQnOwogIH0sIDEwMDApOwogIGxvYWRpbmdTdHlsZSgncmVtb3ZlJywgYy5hcnRpY2xlQ29udGFpbmVyKTsKICBhZGRDbGFzcyhjLmlubmVyQ29udGVudHMsIHRoaXMuaW5mby5lbmMgfHwgZG9jdW1lbnQuY2hhcmFjdGVyU2V0KTsKICByZW1vdmVDbGFzcyhjLmlubmVyQ29udGVudHMsICdlbnRyeS1ib2R5LWVtcHR5Jyk7CiAgYWRkQ2xhc3MoYy5pbm5lckNvbnRlbnRzLCAnZ21fZnVsbGZlZWRfbG9hZGVkJyk7CiAgdG9nZ2xlQ2xhc3MoYy5pbm5lckNvbnRlbnRzLCB0aGlzLnJlcXVlc3RVUkwpOwogIHZhciBlbCA9IGdldEZpcnN0RWxlbWVudEJ5WFBhdGgocmV0dXJuWHBhdGhFbnRyeSgpICsgJy8vc3Bhbltjb250YWlucyhjb25jYXQoIiAiLCBAY2xhc3MsICIgIiksICIgZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uICIpXScpOwogIEZ1bGxGZWVkLmNoZWNrTmV4dFBhZ2UoYy5pbm5lckNvbnRlbnRzKTsKICBpZiAoYy5pbm5lckNvbnRlbnRzLmNsYXNzTmFtZS5zcGxpdCgvXHMrLykuZmlsdGVyKGZ1bmN0aW9uKGkpIHsKICAgIHJldHVybiBuZXcgUmVnRXhwKC9eaHR0cC8pLnRlc3QoaSk7CiAgfSkubGVuZ3RoID4gMSkgewogICAgaWYgKG5leHRQYWdlTGluaykgewogICAgIGlmIChhcykgbWVzc2FnZShsb2NbMzRdLCAzMDAwKTsKICAgICBlbHNlIG1lc3NhZ2UobG9jWzVdKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChhcykgbWVzc2FnZShsb2NbMzVdLCAzMDAwKTsKICAgICAgZWxzZSBtZXNzYWdlKGxvY1s2XSk7CiAgICAgIGlmIChlbCkgewogICAgICAgIHJlbW92ZUNsYXNzKGVsLCAnZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uX25leHQnKTsKICAgICAgICByZW1vdmVDbGFzcyhlbCwgJ2dtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9hc19uZXh0Jyk7CiAgICAgICAgaWYgKGFzKSBhZGRDbGFzcyhlbCwgJ2dtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9hc19ub25leHQnKTsKICAgICAgICBlbHNlIGFkZENsYXNzKGVsLCAnZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uX25vbmV4dCcpOwogICAgICAgIGVsLnRpdGxlID0gJ0N0cmwrJyArIGxvY1s0MF0gKyAnIDogJyArIGxvY1szOV07CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgaWYgKGFzKSBtZXNzYWdlKGxvY1s1MV0sIDMwMDApOwogICAgZWxzZSBtZXNzYWdlKGxvY1syXSk7CiAgICBpZiAoZWwpIHsKICAgICAgcmVtb3ZlQ2xhc3MoZWwsICdnbV9mdWxsZmVlZF9jaGVja2VkX2ljb25faW5mbycpOwogICAgICByZW1vdmVDbGFzcyhlbCwgJ2dtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9ub2luZm8nKTsKICAgICAgaWYgKG5leHRQYWdlTGluaykgewogICAgICAgIGlmIChhcykgYWRkQ2xhc3MoZWwsICdnbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fYXNfbmV4dCcpOwogICAgICAgIGVsc2UgYWRkQ2xhc3MoZWwsICdnbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fbmV4dCcpOwogICAgICAgIGVsLnRpdGxlID0gbG9jWzQwXSArICcgOiAnICsgbG9jWzQxXSArICcgLyBDdHJsKycgKyBsb2NbNDBdICsgJyA6ICcgKyBsb2NbMzldOwogICAgICAgIGlmIChzdC5hdXRvcGFnZXJpemUpIHsKICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBGdWxsRmVlZC5jaGVja1Njcm9sbCgpOwogICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChhcykgYWRkQ2xhc3MoZWwsICdnbV9mdWxsZmVlZF9jaGVja2VkX2ljb25fYXNfbm9uZXh0Jyk7CiAgICAgICAgZWxzZSBhZGRDbGFzcyhlbCwgJ2dtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9ub25leHQnKTsKICAgICAgICBlbC50aXRsZSA9ICdDdHJsKycgKyBsb2NbNDBdICsgJyA6ICcgKyBsb2NbMzldOwogICAgICB9CiAgICB9CiAgfQogIGlmIChoYWx0KSBtZXNzYWdlKGxvY1s2MV0sIDMwMDApOwp9OwoKRnVsbEZlZWQuY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpIHsKICBpZiAoIW5leHRQYWdlTGluayB8fCAoc3RhdGUgJiYgKHN0YXRlICE9PSAnbG9hZGVkJyAmJiBzdGF0ZSAhPT0gJ3dhaXQnKSkpIHJldHVybjsKICB3aW5kb3cuY2xlYXJUaW1lb3V0KHNjcm9sbEludGVydmFsKTsKICBzY3JvbGxJbnRlcnZhbCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgdmFyIGUxID0gJGlkKCdib3gnKSwgZTIgPSBnZXRGaXJzdEVsZW1lbnRCeVhQYXRoKHJldHVyblhwYXRoRW50cnkoKSksCiAgICAgIGUzID0gJGlkKCdmbG9hdGluZ0VudHJ5JyksIHJlbWFpbjsKICAgIGlmICghZTEgfHwgIWUyKSByZXR1cm47CiAgICBpZiAoZTMgJiYgZTMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2xpZGVFbnRyeUNvbnRlbnQnKS5sZW5ndGgpCiAgICAgIHJlbWFpbiA9IG5leHRQYWdlTGluay5vZmZzZXRUb3AgLSBlMi5jbGllbnRIZWlnaHQgLSBlMi5zY3JvbGxUb3A7CiAgICBlbHNlIHJlbWFpbiA9IGUyLm9mZnNldFRvcCArIG5leHRQYWdlTGluay5vZmZzZXRUb3AgLSBlMS5jbGllbnRIZWlnaHQgLSBlMS5zY3JvbGxUb3A7CiAgICBpZiAocmVtYWluIDwgc3QuYXBoZWlnaHQpIHsKICAgICAgbmV4dFBhZ2VMaW5rID0gbnVsbDsKICAgICAgaW5pdEZ1bGxGZWVkKCk7CiAgICB9CiAgfSwgMTAwKTsKfTsKCkZ1bGxGZWVkLmNoZWNrTmV4dFBhZ2UgPSBmdW5jdGlvbihjb24pIHsKICB2YXIgY29uMiA9IGNvbi5jbG9uZU5vZGUodHJ1ZSk7CiAgdmFyIGFDbGFzcyA9IGNvbi5jbGFzc05hbWUuc3BsaXQoL1xzKy8pOwogIHZhciBmaW5hbFVybCA9IGFDbGFzc1thQ2xhc3MubGVuZ3RoIC0gMV07CiAgdmFyIGMgPSBuZXcgZ2V0Q3VycmVudEl0ZW0oKTsKICB2YXIgYk1hdGNoOwogIHZhciBjaGVjayA9IGZ1bmN0aW9uKGRhdGEsIGZsYWcpIHsKICAgIHZhciBuZXh0RWwsIG5leHRFbDI7CiAgICBpZiAoZGF0YS5zb21lKGZ1bmN0aW9uKGluZm8pIHsKICAgICAgaWYgKGluZm8udXJsICYmIGluZm8udXJsLmxlbmd0aCA8PSAxMiAmJiAhL15cXj9odHRwcz8vaS50ZXN0KGluZm8udXJsKSkgewogICAgICAgIGlmIChuZXcgUmVnRXhwKCdeOi8vJywgJ2knKS50ZXN0KGluZm8udXJsKSkgaW5mby51cmwgPSAnXmh0dHBzPycgKyBpbmZvLnVybDsKICAgICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKCdeLy8nLCAnaScpLnRlc3QoaW5mby51cmwpKSBpbmZvLnVybCA9ICdeaHR0cHM/OicgKyBpbmZvLnVybDsKICAgICAgICBlbHNlIGluZm8udXJsID0gJ15odHRwcz86Ly8nICsgaW5mby51cmw7CiAgICAgIH0KICAgICAgaWYgKCFiTWF0Y2ggJiYgbmV3IFJlZ0V4cChpbmZvLnVybCkudGVzdChmaW5hbFVybCkgJiYgaW5mby51cmwubGVuZ3RoID4gMTIpIHsKICAgICAgICB2YXIgZWxtcywgZWxtczIsIGJDYWNoZSwgYkxpc3QsIG5leHRMaW5rID0gaW5mby5uZXh0TGluazsKICAgICAgICBpZiAobmV4dExpbmspIG5leHRMaW5rID0gbmV4dExpbmsucmVwbGFjZSgvaWRcKChbXildKylcKS9nLCAnLy8qW0BpZD0kMV0nKTsKICAgICAgICBpZiAobmV4dExpbmspIHsKICAgICAgICAgIGVsbXMyID0gZ2V0RWxlbWVudHNCeVhQYXRoKG5leHRMaW5rLCBjb24yKTsKICAgICAgICAgIGVsbXMgPSBnZXRFbGVtZW50c0J5WFBhdGgobmV4dExpbmssIGNvbik7CiAgICAgICAgfQogICAgICAgIGlmICghZWxtczIpIGVsbXMyID0gZ2V0RWxlbWVudHNCeVhQYXRoKCcvL2FbQHJlbD0ibmV4dCJdJywgY29uMik7CiAgICAgICAgaWYgKCFlbG1zKSBlbG1zID0gZ2V0RWxlbWVudHNCeVhQYXRoKCcvL2FbQHJlbD0ibmV4dCJdJywgY29uKTsKICAgICAgICBpZiAoZWxtczIgJiYgZWxtczIubGVuZ3RoID4gMCkgbmV4dEVsMiA9IGVsbXMyW2VsbXMyLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChlbG1zICYmIGVsbXMubGVuZ3RoID4gMCAmJiBuZXh0RWwyICYmIG5leHRFbDIuaHJlZikgewogICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgZm9yICh2YXIgaT0wLGo9ZWxtcy5sZW5ndGg7IGk8ajsgaSsrKSB7CiAgICAgICAgICAgIGlmIChuZXh0RWwyLmhyZWYgPT09IGVsbXNbaV0uaHJlZikgYXJyLnB1c2goZWxtc1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBuZXh0RWwgPSAoYXJyLmxlbmd0aCkgPyBhcnJbYXJyLmxlbmd0aCAtIDFdIDogZWxtc1tlbG1zLmxlbmd0aCAtIDFdOwogICAgICAgIH0KICAgICAgICBpZiAobmV4dEVsMiAmJiBmaW5hbFVybCAhPT0gbmV4dEVsMi5ocmVmKSB7CiAgICAgICAgICBpZiAoZmxhZyA9PT0gJ2NhY2hlJykgewogICAgICAgICAgICBpZiAodXNlckNhY2hlTGlzdEFQLnNvbWUoZnVuY3Rpb24odSkgewogICAgICAgICAgICAgIGlmICh1ID09PSBjLmZlZWQudXJsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgdXNlckNhY2hlQVAuc29tZShmdW5jdGlvbih1KSB7CiAgICAgICAgICAgICAgICBpZiAodSA9PT0gaW5mbykgewogICAgICAgICAgICAgICAgICBiTWF0Y2ggPSB0cnVlOwogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGJNYXRjaCA9IHRydWU7CiAgICAgICAgICBpZiAoZmxhZyA9PT0gJ2Z1bGwnKSB7CiAgICAgICAgICAgIGlmICh1c2VyQ2FjaGVMaXN0QVAuc29tZShmdW5jdGlvbih1KSB7CiAgICAgICAgICAgICAgaWYgKHUgPT09IGMuZmVlZC51cmwpIHsKICAgICAgICAgICAgICAgIGJMaXN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICB1c2VyQ2FjaGVBUC5zb21lKGZ1bmN0aW9uKHUpIHsKICAgICAgICAgICAgICAgIGlmICh1ID09PSBpbmZvKSB7CiAgICAgICAgICAgICAgICAgIGJDYWNoZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghYkNhY2hlKSB7CiAgICAgICAgICAgICAgZGVsZXRlIGluZm8uZXhhbXBsZVVybDsKICAgICAgICAgICAgICBkZWxldGUgaW5mby5pbnNlcnRCZWZvcmU7CiAgICAgICAgICAgICAgdXNlckNhY2hlQVAucHVzaChpbmZvKTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX3VzZXJDYWNoZUFQJywgSlNPTi5zdHJpbmdpZnkodXNlckNhY2hlQVApKTsKICAgICAgICAgICAgICAgIGlmICghYkxpc3QpIHsKICAgICAgICAgICAgICAgICAgdXNlckNhY2hlTGlzdEFQLnB1c2goYy5mZWVkLnVybCk7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdGZWVkbHlGdWxsRmVlZF91c2VyQ2FjaGVMaXN0QVAnLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2FjaGVMaXN0QVApKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoKGVyKSB7fQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlOwogICAgfSkpIG5leHRQYWdlTGluayA9IChuZXh0RWwpID8gbmV4dEVsIDogbnVsbDsKICB9OwogIGNoZWNrKHVzZXJTaXRlSW5mb0FQLCAnc2V0Jyk7CiAgaWYgKCFiTWF0Y2gpIGNoZWNrKHVzZXJDYWNoZUFQLCAnY2FjaGUnKTsKICBpZiAoIWJNYXRjaCkgewogICAgc2l0ZUluZm9BUC5zb21lKGZ1bmN0aW9uKGN0eCkgewogICAgICBpZiAoY2FjaGVBUEluZm9bY3R4LnVybF0pIHsKICAgICAgICBjaGVjayhjYWNoZUFQSW5mb1tjdHgudXJsXS5pbmZvLCAnZnVsbCcpOwogICAgICAgIGlmIChiTWF0Y2gpIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9KTsKICB9CiAgaWYgKGJNYXRjaCAmJiBuZXh0UGFnZUxpbmsgJiYgc3QuZGVueW5leHR1cmwpIHsKICAgIHZhciByZSA9IG5ldyBSZWdFeHAoc3QuZGVueW5leHR1cmwsICdpJyk7CiAgICBpZiAocmUudGVzdChuZXh0UGFnZUxpbmsuaHJlZikpIG5leHRQYWdlTGluayA9IG51bGw7CiAgfQp9OwoKRnVsbEZlZWQucHJvdG90eXBlLnJlcXVlc3RFcnJvciA9IGZ1bmN0aW9uKGUpIHsKICBzdGF0ZSA9IG51bGw7CiAgbWVzc2FnZSgnRXJyb3I6ICcgKyBlLCA1MDAwLCAnd2FybmluZycpOwogIGxvYWRpbmdTdHlsZSgncmVtb3ZlJywgdGhpcy5pdGVtSW5mby5hcnRpY2xlQ29udGFpbmVyKTsKICBhZGRDbGFzcyh0aGlzLml0ZW1JbmZvLmlubmVyQ29udGVudHMsICdnbV9mdWxsZmVlZF9lcnJvcicpOwp9OwoKRnVsbEZlZWQucHJvdG90eXBlLnJlbW92ZUVudHJ5ID0gZnVuY3Rpb24oKSB7CiAgaWYgKHRoaXMuaXRlbUluZm8gJiYgdGhpcy5pdGVtSW5mby5pdGVtX2JvZHkpIHsKICAgIHdoaWxlICh0aGlzLml0ZW1JbmZvLml0ZW1fYm9keS5maXJzdENoaWxkKSB7CiAgICAgIHRoaXMuaXRlbUluZm8uaXRlbV9ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaXRlbUluZm8uaXRlbV9ib2R5LmZpcnN0Q2hpbGQpOwogICAgfQogIH0KfTsKCkZ1bGxGZWVkLnByb3RvdHlwZS5hZGRFbnRyeSA9IGZ1bmN0aW9uKGVudHJ5LCBjKSB7CiAgdmFyIHVybCA9IHRoaXMucmVxdWVzdFVSTCB8fCBjLml0ZW1VUkw7CiAgdmFyIGljID0gKGMuaW5uZXJDb250ZW50cy5pZCkgPyAkaWQoYy5pbm5lckNvbnRlbnRzLmlkKSA6IGMuaW5uZXJDb250ZW50czsKICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgaWYgKGljICYmIGljLmhhc0NoaWxkTm9kZXMoKSkgewogICAgZGl2LmNsYXNzTmFtZSA9ICdnbV9mdWxsZmVlZF9wYWdlcic7CiAgICB2YXIgaHR0cCA9IGMuaW5uZXJDb250ZW50cy5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLmZpbHRlcihmdW5jdGlvbihpKSB7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKC9eaHR0cC8pLnRlc3QoaSk7CiAgICB9KTsKICAgIHZhciBob3N0ID0gKHJlYWRpbmdQYWdlVXJsLnNwbGl0KCcvJylbMl0gIT09IHVybC5zcGxpdCgnLycpWzJdKSA/ICc8c3BhbiBjbGFzcz0iZ21fZnVsbGZlZWRfcGFnZXJfZGlmZmVyZW50aG9zdCI+KCAnICsgcmVhZGluZ1BhZ2VVcmwuc3BsaXQoJy8nKVsyXSArICcgJnJhcnI7ICcgKyB1cmwuc3BsaXQoJy8nKVsyXSArICcgKTwvc3Bhbj4nIDogJyc7CiAgICBkaXYuaW5uZXJIVE1MID0gJzxociAvPnBhZ2U6IDxhIGhyZWY9IicgKyB1cmwgKyAnIiB0YXJnZXQ9Il9ibGFuayI+JyArIChodHRwLmxlbmd0aCArIDEpICsgJzwvYT4nICsgaG9zdDsKICAgIGljLmFwcGVuZENoaWxkKGRpdik7CiAgfSBlbHNlIHsKICAgIGRpdi5jbGFzc05hbWUgPSAnZ21fZnVsbGZlZWRfZW50cnlfdXJsJzsKICAgIGRpdi5pbm5lckhUTUwgPSAnPGEgaHJlZj0iJyArIHVybCArICciIHRhcmdldD0iX2JsYW5rIj4nICsgdXJsICsgJzwvYT4nOwogICAgdHJ5IHsKICAgICAgaWYgKGljKSBpYy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkaXYsIGljKTsKICAgIH0gY2F0Y2goZXIpIHsKICAgICAgbWVzc2FnZSgnRXJyb3I6ICcgKyBlciwgNTAwMCwgJ3dhcm5pbmcnKTsKICAgIH0KICB9CiAgcmV0dXJuIGVudHJ5Lm1hcChmdW5jdGlvbihpKSB7CiAgICB2YXIgcGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKGksIHRydWUpOwogICAgaWYgKGljKSBpYy5hcHBlbmRDaGlsZChwZSk7CiAgICByZXR1cm4gcGU7CiAgfSk7Cn07CgpGdWxsRmVlZC5yZXNldENhY2hlID0gZnVuY3Rpb24oKSB7CiAgbWVzc2FnZShsb2NbMTFdLCAtMSk7CiAgdmFyIGdldFNpdGVpbmZvID0gZnVuY3Rpb24oZGF0YSwgZmxhZykgewogICAgdmFyIG5DYWNoZSA9IDA7CiAgICB2YXIgbkNhY2hlcyA9IChmbGFnKSA/IHNpdGVJbmZvLmxlbmd0aCA6IHNpdGVJbmZvQVAubGVuZ3RoOwogICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGN0eCkgewogICAgICB2YXIgb3B0ID0gewogICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgdXJsOiBjdHgudXJsLAogICAgICAgIGlnbm9yZUNhY2hlOiB0cnVlLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICBuQ2FjaGUgKys7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgICAgICAgRnVsbEZlZWQuc2V0Q2FjaGUocmVzLCBjdHgsICdjYWNoZScpOwogICAgICAgICAgICAgIGlmIChuQ2FjaGUgPT09IG5DYWNoZXMpIGdldFNpdGVpbmZvKHNpdGVJbmZvQVApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChuQ2FjaGUgPT09IG5DYWNoZXMpIEZ1bGxGZWVkLnNldENhY2hlKHJlcywgY3R4LCAnY2FjaGVBUCcsIHRydWUpOwogICAgICAgICAgICAgIGVsc2UgRnVsbEZlZWQuc2V0Q2FjaGUocmVzLCBjdHgsICdjYWNoZUFQJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoZmxhZyAmJiBuQ2FjaGUgPT09IG5DYWNoZXMpIGdldFNpdGVpbmZvKHNpdGVJbmZvQVApOwogICAgICAgIH0sCiAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBuQ2FjaGUgKys7CiAgICAgICAgICBpZiAoZmxhZyAmJiBuQ2FjaGUgPT09IG5DYWNoZXMpIGdldFNpdGVpbmZvKHNpdGVJbmZvQVApOwogICAgICAgIH0KICAgICAgfTsKICAgICAgR01feG1saHR0cFJlcXVlc3Qob3B0KTsKICAgIH0pOwogIH07CiAgZ2V0U2l0ZWluZm8oc2l0ZUluZm8sIHRydWUpOwp9OwoKRnVsbEZlZWQucmVtb3ZlQ2FjaGUgPSBmdW5jdGlvbigpIHsKICBpZiAod2luZG93LmNvbmZpcm0obG9jWzE2XSkpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdGZWVkbHlGdWxsRmVlZF9jYWNoZScpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX2NhY2hlQVAnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdGZWVkbHlGdWxsRmVlZF91c2VyQ2FjaGUnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdGZWVkbHlGdWxsRmVlZF91c2VyQ2FjaGVBUCcpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX3VzZXJDYWNoZUxpc3QnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdGZWVkbHlGdWxsRmVlZF91c2VyQ2FjaGVMaXN0QVAnKTsKICAgIGNhY2hlSW5mbyA9IHt9OyBjYWNoZUFQSW5mbyA9IHt9OwogICAgdXNlckNhY2hlID0gW107IHVzZXJDYWNoZUFQID0gW107CiAgICB1c2VyQ2FjaGVMaXN0ID0gW107IHVzZXJDYWNoZUxpc3RBUCA9IFtdOwogIH0KfTsKCkZ1bGxGZWVkLnNldENhY2hlID0gZnVuY3Rpb24ocmVzLCBjdHgsIGl0ZW0sIGZsYWcpIHsKICB2YXIgaW5mbyA9IFtdOwogIHZhciBzZXRKc29uID0gZnVuY3Rpb24odCkgewogICAgdHJ5IHsKICAgICAgaW5mbyA9IEpTT04ucGFyc2UodCkKICAgICAgICAuc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICBhID0gbmV3IERhdGUoYS51cGRhdGVkX2F0KS5nZXRUaW1lKCk7CiAgICAgICAgICBiID0gbmV3IERhdGUoYi51cGRhdGVkX2F0KS5nZXRUaW1lKCk7CiAgICAgICAgICBpZiAoIWlzTmFOKGEpICYmICFpc05hTihiKSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGIpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEpLmdldFRpbWUoKTsKICAgICAgICAgIGVsc2UgcmV0dXJuIGI7CiAgICAgICAgfSkKICAgICAgICAubWFwKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkuZGF0YTsgfSkKICAgICAgICAuc29ydChmdW5jdGlvbihsaHMsIHJocykgeyByZXR1cm4gcmhzLnByaW9yaXR5IC0gbGhzLnByaW9yaXR5OyB9KTsKICAgIH0gY2F0Y2goZXIxKSB7fQogIH07CiAgc3dpdGNoIChjdHguZm9ybWF0LnRvVXBwZXJDYXNlKCkpIHsKICAgIGNhc2UgJ0pTT04nOgogICAgICBzZXRKc29uKHJlcy5yZXNwb25zZVRleHQpOwogICAgICBicmVhazsKICAgIGNhc2UgJ0pTT05QJzoKICAgICAgaWYgKGN0eC5jYWxsYmFjaykgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgdHh0ID0gcmVzLnJlc3BvbnNlVGV4dDsKICAgICAgICAgIHR4dCA9IHR4dC5yZXBsYWNlKG5ldyBSZWdFeHAoY3R4LmNhbGxiYWNrICsgJ1xccypcXChcXHMqXFxbXFxzKlxceycsICdnbScpLCBjdHguY2FsbGJhY2sgKyAnKFt7JykucmVwbGFjZSgvXH1ccypcXVxzKlwpL2dtLCAnfV0pJyk7CiAgICAgICAgICB0eHQgPSB0eHQuc2xpY2UodHh0LmluZGV4T2YoY3R4LmNhbGxiYWNrICsgJyhbeycpICsgY3R4LmNhbGxiYWNrLmxlbmd0aCArIDEpOwogICAgICAgICAgdHh0ID0gdHh0LnNsaWNlKDAsIHR4dC5sYXN0SW5kZXhPZignfV0pJykgKyAyKTsKICAgICAgICAgIHNldEpzb24odHh0KTsKICAgICAgICB9IGNhdGNoKGVyMikge30KICAgICAgfSBlbHNlIG1lc3NhZ2UobG9jWzE3XSwgNTAwMCwgJ3dhcm5pbmcnKTsKICAgICAgYnJlYWs7CiAgfQogIGlmIChpbmZvLmxlbmd0aCA+IDApIHsKICAgIGlmIChpdGVtID09PSAnY2FjaGUnKSB7CiAgICAgIGNhY2hlSW5mb1tjdHgudXJsXSA9IHsKICAgICAgICB1cmw6IGN0eC51cmwsCiAgICAgICAgaW5mbzogaW5mbwogICAgICB9OwogICAgICB0cnkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdGZWVkbHlGdWxsRmVlZF9jYWNoZScsIEpTT04uc3RyaW5naWZ5KGNhY2hlSW5mbykpOwogICAgICB9IGNhdGNoKGVyMykgewogICAgICAgIGlmIChlcjMgJiYgZXIzLm5hbWUgJiYgZXIzLm1lc3NhZ2UpIHdpbmRvdy5hbGVydChlcjMubmFtZSArICdcbicgKyBlcjMubWVzc2FnZSk7CiAgICAgIH0KICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX3VzZXJDYWNoZScpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnRmVlZGx5RnVsbEZlZWRfdXNlckNhY2hlTGlzdCcpOwogICAgICB1c2VyQ2FjaGUgPSBbXTsKICAgICAgdXNlckNhY2hlTGlzdCA9IFtdOwogICAgfSBlbHNlIGlmIChpdGVtID09PSAnY2FjaGVBUCcpIHsKICAgICAgY2FjaGVBUEluZm9bY3R4LnVybF0gPSB7CiAgICAgICAgdXJsOiBjdHgudXJsLAogICAgICAgIGluZm86IGluZm8KICAgICAgfTsKICAgICAgdHJ5IHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnRmVlZGx5RnVsbEZlZWRfY2FjaGVBUCcsIEpTT04uc3RyaW5naWZ5KGNhY2hlQVBJbmZvKSk7CiAgICAgIH0gY2F0Y2goZXI0KSB7CiAgICAgICAgaWYgKGVyNCAmJiBlcjQubmFtZSAmJiBlcjQubWVzc2FnZSkgd2luZG93LmFsZXJ0KGVyNC5uYW1lICsgJ1xuJyArIGVyNC5tZXNzYWdlKTsKICAgICAgfQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnRmVlZGx5RnVsbEZlZWRfdXNlckNhY2hlQVAnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX3VzZXJDYWNoZUxpc3RBUCcpOwogICAgICB1c2VyQ2FjaGVBUCA9IFtdOwogICAgICB1c2VyQ2FjaGVMaXN0QVAgPSBbXTsKICAgIH0KICAgIGlmIChmbGFnKSB7CiAgICAgIHZhciBoYXNGRiA9IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRmVlZGx5RnVsbEZlZWRfY2FjaGUnKSkgPyB0cnVlIDogZmFsc2U7CiAgICAgIHZhciBoYXNBUCA9IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRmVlZGx5RnVsbEZlZWRfY2FjaGVBUCcpKSA/IHRydWUgOiBmYWxzZTsKICAgICAgaWYgKGhhc0ZGICYmIGhhc0FQKSBtZXNzYWdlKGxvY1sxMl0sIDUwMDApOwogICAgICBlbHNlIG1lc3NhZ2UobG9jWzE0XSwgNTAwMCwgJ3dhcm5pbmcnKTsKICAgIH0KICB9Cn07CgpGdWxsRmVlZC5nZXRDYWNoZSA9IGZ1bmN0aW9uKGtleSkgewogIHZhciBqcyA9ICd7fSc7CiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdGZWVkbHlGdWxsRmVlZF8nICsga2V5KSkKICAgIGpzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0ZlZWRseUZ1bGxGZWVkXycgKyBrZXkpOwogIGVsc2UgaWYgKC9eY2FjaGUuKy8udGVzdChrZXkpKSBGdWxsRmVlZC5yZXNldENhY2hlKCk7CiAgZWxzZSBpZiAoL151c2VyLisvLnRlc3Qoa2V5KSkganMgPSAnW10nOwogIHRyeSB7CiAgICByZXR1cm4gSlNPTi5wYXJzZShqcyk7CiAgfSBjYXRjaChlcikgewogICAgaWYgKC9edXNlci4rLy50ZXN0KGtleSkpIHJldHVybiBbXTsKICAgIGVsc2UgcmV0dXJuIHt9OwogIH0KfTsKCkZ1bGxGZWVkLnNhdmVTZXR0aW5ncyA9IGZ1bmN0aW9uKCkgewogIHRyeSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnRmVlZGx5RnVsbEZlZWRfc2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShzdCkpOwogIH0gY2F0Y2goZXIpIHsKICAgIHdpbmRvdy5hbGVydCgnRXJyb3I6IFNhdmUgU2V0dGluZ3MnKTsKICB9Cn07CgpGdWxsRmVlZC5sb2FkU2V0dGluZ3MgPSBmdW5jdGlvbihkYXRhKSB7CiAgaWYgKGRhdGEgPT09ICdyZXNldCcpIHN0ID0ge307CiAgZWxzZSBpZiAoZGF0YSkgc3QgPSBkYXRhOwogIGVsc2UgewogICAgc3QgPSB7fTsKICAgIHRyeSB7CiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRmVlZGx5RnVsbEZlZWRfc2V0dGluZ3MnKSkKICAgICAgICBzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX3NldHRpbmdzJykpOwogICAgfSBjYXRjaChlcjEpIHt9CiAgfQogIHZhciBub3RBID0gZnVuY3Rpb24oYSkgewogICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkgIT09ICdbb2JqZWN0IEFycmF5XScpID8gdHJ1ZSA6IGZhbHNlOwogIH07CiAgdmFyIG5vdEIgPSBmdW5jdGlvbihhKSB7CiAgICByZXR1cm4gKHR5cGVvZiBhICE9PSAnYm9vbGVhbicpID8gdHJ1ZSA6IGZhbHNlOwogIH07CiAgdmFyIG5vdE4gPSBmdW5jdGlvbihhKSB7CiAgICByZXR1cm4gKHR5cGVvZiBhICE9PSAnbnVtYmVyJykgPyB0cnVlIDogZmFsc2U7CiAgfTsKICB2YXIgbm90UyA9IGZ1bmN0aW9uKGEpIHsKICAgIHJldHVybiAodHlwZW9mIGEgIT09ICdzdHJpbmcnKSA/IHRydWUgOiBmYWxzZTsKICB9OwogIGlmIChub3RTKHN0LmFsbG93aWZyYW1ldXJsKSkgc3QuYWxsb3dpZnJhbWV1cmwgPSAnJzsKICBpZiAobm90UyhzdC5hbGxvd25leHR1cmwpKSBzdC5hbGxvd25leHR1cmwgPSAnJzsKICBpZiAobm90TihzdC5hcGhlaWdodCkgfHwgc3QuYXBoZWlnaHQgPCAyMDAgfHwgc3QuYXBoZWlnaHQgPiAyMDAwKSBzdC5hcGhlaWdodCA9IDUwMDsKICBpZiAobm90TihzdC5hdXRvbG9hZCkgfHwgc3QuYXV0b2xvYWQgPCAwIHx8IHN0LmF1dG9sb2FkID4gMykgc3QuYXV0b2xvYWQgPSAyOwogIGlmIChub3RBKHN0LmF1dG9sb2FkZmVlZCkpIHN0LmF1dG9sb2FkZmVlZCA9IFtdOwogIGlmIChub3RCKHN0LmF1dG9wYWdlcml6ZSkpIHN0LmF1dG9wYWdlcml6ZSA9IHRydWU7CiAgaWYgKG5vdEIoc3QuYXV0b3NlYXJjaCkpIHN0LmF1dG9zZWFyY2ggPSB0cnVlOwogIGlmIChub3RCKHN0LmNhbnRkaXNwbGF5KSkgc3QuY2FudGRpc3BsYXkgPSBmYWxzZTsKICBpZiAoaXNGaW5pdGUoc3QuYmFzZWtleSkpIHN0LmJhc2VrZXkgPSArc3QuYmFzZWtleTsKICBlbHNlIGlmICh0eXBlb2Ygc3QuYmFzZWtleSA9PT0gJ3N0cmluZycgJiYgc3QuYmFzZWtleS5sZW5ndGggPT09IDEpIHN0LmJhc2VrZXkgPSBzdC5iYXNla2V5LnRvVXBwZXJDYXNlKCk7CiAgZWxzZSBzdC5iYXNla2V5ID0gJ1onOwogIGlmIChub3RTKHN0LmRlbnluZXh0dXJsKSkgc3QuZGVueW5leHR1cmwgPSAnJzsKICBpZiAobm90QShzdC5kaXNhYmxlaXRlbSkpIHN0LmRpc2FibGVpdGVtID0gW107CiAgaWYgKG5vdEIoc3QuaWZyYW1ldGFnKSkgc3QuaWZyYW1ldGFnID0gdHJ1ZTsKICBpZiAobm90QihzdC5ub3NjcmlwdHRhZykpIHN0Lm5vc2NyaXB0dGFnID0gdHJ1ZTsKICBpZiAobm90QShzdC5ub3Rsb2FkZmVlZCkpIHN0Lm5vdGxvYWRmZWVkID0gW107CiAgaWYgKG5vdFMoc3Qubm90cmVhZCkpIHN0Lm5vdHJlYWQgPSAnJzsKICBpZiAobm90QihzdC5vcGVuaXRlbSkpIHN0Lm9wZW5pdGVtID0gZmFsc2U7CiAgaWYgKG5vdFMoc3QucmVwbGFjZWZ1bGxmZWVkdXJsKSkgc3QucmVwbGFjZWZ1bGxmZWVkdXJsID0gJyc7CiAgaWYgKG5vdEIoc3Quc29jaWFsaWNvbikpIHN0LnNvY2lhbGljb24gPSB0cnVlOwogIGlmIChub3RCKHN0LnNvY2lhbGJ1enp1cmwpKSBzdC5zb2NpYWxidXp6dXJsID0gZmFsc2U7CiAgaWYgKG5vdEIoc3Quc29jaWFsZGVsaWNpb3VzKSkgc3Quc29jaWFsZGVsaWNpb3VzID0gZmFsc2U7CiAgaWYgKG5vdEIoc3Quc29jaWFsZmFjZWJvb2spKSBzdC5zb2NpYWxmYWNlYm9vayA9IGZhbHNlOwogIGlmIChub3RCKHN0LnNvY2lhbGZjMikpIHN0LnNvY2lhbGZjMiA9IGZhbHNlOwogIGlmIChub3RCKHN0LnNvY2lhbGhhdGVuYSkpIHN0LnNvY2lhbGhhdGVuYSA9IGZhbHNlOwogIGlmIChub3RCKHN0LnNvY2lhbGxpdmVkb29yKSkgc3Quc29jaWFsbGl2ZWRvb3IgPSBmYWxzZTsKICBpZiAobm90QihzdC50d2l0dGVyKSkgc3Quc29jaWFsdHdpdHRlciA9IHRydWU7CiAgaWYgKG5vdEIoc3Quc29jaWFseWFob28pKSBzdC5zb2NpYWx5YWhvbyA9IGZhbHNlOwogIHRyeSB7CiAgICBzaXRlSW5mbyA9IEpTT04ucGFyc2Uoc3Quc2l0ZWluZm8pOwogIH0gY2F0Y2goZXIyKSB7CiAgICBzaXRlSW5mbyA9IFt7ImZvcm1hdCI6ICJKU09OIiwgInVybCI6ICJodHRwOi8vd2VkYXRhLm5ldC9kYXRhYmFzZXMvTERSRnVsbEZlZWQvaXRlbXMuanNvbiJ9XTsKICAgIHN0LnNpdGVpbmZvID0gSlNPTi5zdHJpbmdpZnkoc2l0ZUluZm8pOwogIH0KICB0cnkgewogICAgc2l0ZUluZm9BUCA9IEpTT04ucGFyc2Uoc3Quc2l0ZWluZm9hcCk7CiAgfSBjYXRjaChlcjMpIHsKICAgIHNpdGVJbmZvQVAgPSBbeyJmb3JtYXQiOiAiSlNPTiIsICJ1cmwiOiAiaHR0cDovL3dlZGF0YS5uZXQvZGF0YWJhc2VzL0F1dG9QYWdlcml6ZS9pdGVtcy5qc29uIn1dOwogICAgc3Quc2l0ZWluZm9hcCA9IEpTT04uc3RyaW5naWZ5KHNpdGVJbmZvQVApOwogIH0KICB0cnkgewogICAgdXNlclNpdGVJbmZvID0gSlNPTi5wYXJzZShzdC51c2Vyc2l0ZWluZm8pOwogIH0gY2F0Y2goZXI0KSB7CiAgICB1c2VyU2l0ZUluZm8gPSBbeyJ1cmwiOiAiIiwgInhwYXRoIjogIiIsICJ0eXBlIjogIiIsICJlbmMiOiAiIn1dOwogICAgc3QudXNlcnNpdGVpbmZvID0gSlNPTi5zdHJpbmdpZnkodXNlclNpdGVJbmZvKTsKICB9CiAgdHJ5IHsKICAgIHVzZXJTaXRlSW5mb0FQID0gSlNPTi5wYXJzZShzdC51c2Vyc2l0ZWluZm9hcCk7CiAgfSBjYXRjaChlcjUpIHsKICAgIHVzZXJTaXRlSW5mb0FQID0gW3sidXJsIjogIiIsICJuZXh0TGluayI6ICIiLCAicGFnZUVsZW1lbnQiOiAiIn1dOwogICAgc3QudXNlcnNpdGVpbmZvYXAgPSBKU09OLnN0cmluZ2lmeSh1c2VyU2l0ZUluZm9BUCk7CiAgfQp9OwoKRnVsbEZlZWQuY3JlYXRlU2V0dGluZ3MgPSBmdW5jdGlvbigpIHsKICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZGl2LmlkID0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzJzsKICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICBkaXYuaW5uZXJIVE1MID0gJzxkaXYgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWhlYWRlciI+PHNwYW4gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWhlYWRlcl90aXRsZSI+PGEgaHJlZj0iaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzg5Ni1mZWVkbHktZnVsbC1mZWVkIiB0YXJnZXQ9Il9ibGFuayI+RmVlZGx5IEZ1bGwgRmVlZCAnICsgbG9jWzIxXSArICc8L2E+PC9zcGFuPjxzcGFuIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1oZWFkZXJfYnV0dG9uIj48aW5wdXQgdHlwZT0iYnV0dG9uIiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtb2siIHZhbHVlPSJPSyI+PGlucHV0IHR5cGU9ImJ1dHRvbiIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWNhbmNlbCIgdmFsdWU9IicgKyBsb2NbMjJdICsgJyI+PC9zcGFuPjwvZGl2PjxkaXYgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXRhYiI+PC9kaXY+PHVsIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1saXN0Ij48L3VsPic7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpOwogIHZhciBsaXN0ID0gWwogICAge3RhYjogJ0dlbmVyYWwnLCBpZDogJ2dlbmVyYWwnLCBib2R5OiAnPGZpZWxkc2V0PjxsZWdlbmQ+JyArIGxvY1syM10gKyAnPC9sZWdlbmQ+JyArIGxvY1sxOF0gKyAnIDogPGlucHV0IHR5cGU9InRleHQiIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX2tleSI+PHNwYW4gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWdlbmVyYWxfa2V5ZGVzYyI+PC9zcGFuPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX2tleWhlbHBpY29uIj5bID8gXTwvYT48ZGl2IGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX2tleWhlbHBib2R5Ij4nICsgbG9jWzI2XSArICcgOiBDdHJsKyAoJyArIGxvY1sxOF0gKyAnKSAnICsgbG9jWzI0XSArICc8YnI+JyArIGxvY1syN10gKyAnIDogU2hpZnQrICgnICsgbG9jWzE4XSArICcpICcgKyBsb2NbMjRdICsgJzxicj4nICsgbG9jWzI4XSArICcgOiBDdHJsK1NoaWZ0KyAoJyArIGxvY1sxOF0gKyAnKSAnICsgbG9jWzI0XSArICc8YnI+JyArIGxvY1syOV0gKyAnIDogQWx0K0N0cmwrU2hpZnQrICgnICsgbG9jWzE4XSArICcpICcgKyBsb2NbMjRdICsgJzwvZGl2PjwvZmllbGRzZXQ+PGZpZWxkc2V0PjxsZWdlbmQ+JyArIGxvY1sxOF0gKyAnPC9sZWdlbmQ+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWdlbmVyYWxfYXV0b3BhZ2VyaXplIj4nICsgbG9jWzQxXSArICc8L2xhYmVsPjxsYWJlbD4gKCA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWdlbmVyYWxfYXBoZWlnaHQiPnB4ICk8L2xhYmVsPjxicj48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtZ2VuZXJhbF9hdXRvc2VhcmNoIj4nICsgbG9jWzY0XSArICc8L2xhYmVsPjxicj48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtZ2VuZXJhbF9jYW50ZGlzcGxheSI+JyArIGxvY1s3NV0gKyAnPC9sYWJlbD48ZmllbGRzZXQ+PGxlZ2VuZD4nICsgbG9jWzQ3XSArICcgOiA8L2xlZ2VuZD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWdlbmVyYWxfbm90cmVhZCI+PGJyPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1nZW5lcmFsX29wZW5pdGVtIj4nICsgbG9jWzQ4XSArICc8L2xhYmVsPjwvZmllbGRzZXQ+PC9maWVsZHNldD4nfSwKICAgIHt0YWI6ICdTSVRFIElORk8nLCBpZDogJ3NpdGVpbmZvJywgYm9keTogJzxkaXY+PHNwYW4gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2Z1bGxmZWVkX2xpbmsiIGNsYXNzPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19saW5rIj5GRiBVUkw8L3NwYW4+PHNwYW4gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2F1dG9wYWdlcml6ZV9saW5rIiBjbGFzcz0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc2l0ZWluZm9fbGluayI+QVAgVVJMPC9zcGFuPjxzcGFuIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb191c2VyZnVsbGZlZWRfbGluayIgY2xhc3M9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2xpbmsiPkZGIFNpdGVJbmZvPC9zcGFuPjxzcGFuIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb191c2VyYXV0b3BhZ2VyaXplX2xpbmsiIGNsYXNzPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19saW5rIj5BUCBTaXRlSW5mbzwvc3Bhbj48c3BhbiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc2l0ZWluZm9fZGlzYWJsZWl0ZW1fbGluayIgY2xhc3M9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2xpbmsiPmRpc2FibGUgSXRlbTwvc3Bhbj48L2Rpdj48ZmllbGRzZXQ+PGxlZ2VuZD4nICsgbG9jWzMwXSArICc8L2xlZ2VuZD48dGV4dGFyZWEgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2Z1bGxmZWVkIj48L3RleHRhcmVhPjwvZmllbGRzZXQ+PGZpZWxkc2V0PjxsZWdlbmQ+JyArIGxvY1szMV0gKyAnPC9sZWdlbmQ+PHRleHRhcmVhIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19hdXRvcGFnZXJpemUiPjwvdGV4dGFyZWE+PC9maWVsZHNldD48ZmllbGRzZXQ+PGxlZ2VuZD4nICsgbG9jWzMyXSArICc8L2xlZ2VuZD48dGV4dGFyZWEgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX3VzZXJmdWxsZmVlZCI+PC90ZXh0YXJlYT48L2ZpZWxkc2V0PjxmaWVsZHNldD48bGVnZW5kPicgKyBsb2NbMzNdICsgJzwvbGVnZW5kPjx0ZXh0YXJlYSBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc2l0ZWluZm9fdXNlcmF1dG9wYWdlcml6ZSI+PC90ZXh0YXJlYT48L2ZpZWxkc2V0PjxmaWVsZHNldD48bGVnZW5kPicgKyAnZGlzYWJsZSBTSVRFX0lORk8gSXRlbScgKyAnPC9sZWdlbmQ+PGRpdiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc2l0ZWluZm9fZGlzYWJsZWl0ZW1saXN0Ij48L2Rpdj48dGV4dGFyZWEgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvX2Rpc2FibGVpdGVtIj48L3RleHRhcmVhPjwvZmllbGRzZXQ+J30sCiAgICB7dGFiOiAnQXV0byBMb2FkJywgaWQ6ICdhdXRvbG9hZCcsIGJvZHk6ICc8bGFiZWw+JyArIGxvY1s0M10gKyAnIDogPHNlbGVjdCBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtYXV0b2xvYWRfbW9kZSI+PG9wdGlvbj4nICsgbG9jWzQ0XSArICc8L29wdGlvbj48b3B0aW9uPicgKyBsb2NbNzddICsgJzwvb3B0aW9uPjxvcHRpb24+JyArIGxvY1s0NV0gKyAnPC9vcHRpb24+PG9wdGlvbj4nICsgbG9jWzQ2XSArICc8L29wdGlvbj48L3NlbGVjdD48L2xhYmVsPjxmaWVsZHNldCBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtYXV0b2xvYWRfd2hpdGVsaXN0Ij48bGVnZW5kPicgKyBsb2NbMzZdICsgJzwvbGVnZW5kPicgKyBsb2NbMzddICsgJyA6IDxicj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWF1dG9sb2FkX3doaXRlbGlzdF90aXRsZSIgY2xhc3M9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWF1dG9sb2FkX3RpdGxlIj48aW5wdXQgdHlwZT0iYnV0dG9uIiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtYXV0b2xvYWRfd2hpdGVsaXN0X2FkZCIgdmFsdWU9IicgKyBsb2NbMzhdICsgJyI+PGJyPjx0ZXh0YXJlYSBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtYXV0b2xvYWRfd2hpdGVsaXN0X2xpc3QiIGNsYXNzPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1hdXRvbG9hZF9saXN0Ij48L3RleHRhcmVhPjwvZmllbGRzZXQ+PGZpZWxkc2V0IGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1hdXRvbG9hZF9ibGFja2xpc3QiPjxsZWdlbmQ+JyArIGxvY1s3Nl0gKyAnPC9sZWdlbmQ+JyArIGxvY1szN10gKyAnIDogPGJyPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtYXV0b2xvYWRfYmxhY2tsaXN0X3RpdGxlIiBjbGFzcz0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtYXV0b2xvYWRfdGl0bGUiPjxpbnB1dCB0eXBlPSJidXR0b24iIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1hdXRvbG9hZF9ibGFja2xpc3RfYWRkIiB2YWx1ZT0iJyArIGxvY1szOF0gKyAnIj48YnI+PHRleHRhcmVhIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1hdXRvbG9hZF9ibGFja2xpc3RfbGlzdCIgY2xhc3M9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWF1dG9sb2FkX2xpc3QiPjwvdGV4dGFyZWE+PC9maWVsZHNldD4nfSwKICAgIHt0YWI6ICdTZWN1cml0eScsIGlkOiAnc2VjdXJpdHknLCBib2R5OiAnPGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNlY3VyaXR5X25vc2NyaXB0dGFnIj4nICsgbG9jWzQyXSArICc8L2xhYmVsPjxicj48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc2VjdXJpdHlfaWZyYW1ldGFnIj4nICsgbG9jWzUyXSArICc8L2xhYmVsPjxmaWVsZHNldD48bGVnZW5kPicgKyBsb2NbNjVdICsgJyA6IDwvbGVnZW5kPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc2VjdXJpdHlfYWxsb3dpZnJhbWV1cmwiPjwvZmllbGRzZXQ+PGZpZWxkc2V0PjxsZWdlbmQ+JyArIGxvY1s2M10gKyAnIDogPC9sZWdlbmQ+PGlucHV0IHR5cGU9InRleHQiIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zZWN1cml0eV9kZW55bmV4dHVybCI+PC9maWVsZHNldD48ZmllbGRzZXQ+PGxlZ2VuZD4nICsgbG9jWzYyXSArICcgOiA8L2xlZ2VuZD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNlY3VyaXR5X2FsbG93bmV4dHVybCI+PC9maWVsZHNldD4nfSwKICAgIHt0YWI6ICdTb2NpYWwnLCBpZDogJ3NvY2lhbCcsIGJvZHk6ICc8ZmllbGRzZXQ+PGxlZ2VuZD48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3Mtc29jaWFsX3NvY2lhbGljb24iPicgKyBsb2NbNTVdICsgJzwvbGFiZWw+PC9sZWdlbmQ+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNvY2lhbF90d2l0dGVyIj5Ud2l0dGVyPC9sYWJlbD48YnI+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNvY2lhbF9kZWxpY2lvdXMiPkRlbGljaW91czwvbGFiZWw+PGJyPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zb2NpYWxfZmFjZWJvb2siPkZhY2Vib29rPC9sYWJlbD48YnI+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNvY2lhbF9oYXRlbmEiPicgKyBsb2NbMTldICsgJzwvbGFiZWw+PGJyPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zb2NpYWxfbGl2ZWRvb3IiPicgKyBsb2NbMjBdICsgJzwvbGFiZWw+PGJyPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zb2NpYWxfeWFob28iPicgKyBsb2NbNTZdICsgJzwvbGFiZWw+PGJyPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1zb2NpYWxfYnV6enVybCI+JyArIGxvY1s1N10gKyAnPC9sYWJlbD48YnI+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNvY2lhbF9mYzIiPicgKyBsb2NbNThdICsgJzwvbGFiZWw+PC9maWVsZHNldD4nfSwKICAgIHt0YWI6ICdFdGMnLCBpZDogJ2V0YycsIGJvZHk6ICc8bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtZXRjX2RlYnVnbG9nIj4nICsgbG9jWzUwXSArICc8L2xhYmVsPjxicj48ZmllbGRzZXQ+PGxlZ2VuZD5TZXR0aW5ncyBEYXRhPC9sZWdlbmQ+PGJ1dHRvbiBpZD0iZ21fZnVsbGZlZWRfc2V0dGluZ3MtZXRjX3NldHRpbmdzaW1wb3J0Ij5JbXBvcnQ8L2J1dHRvbj48YnV0dG9uIGlkPSJnbV9mdWxsZmVlZF9zZXR0aW5ncy1ldGNfc2V0dGluZ3NleHBvcnQiPkV4cG9ydDwvYnV0dG9uPjxidXR0b24gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWV0Y19zZXR0aW5nc3Jlc2V0Ij5SZXNldDwvYnV0dG9uPjwvZmllbGRzZXQ+PGZpZWxkc2V0PjxsZWdlbmQ+Q2FjaGUgRGF0YTwvbGVnZW5kPjxidXR0b24gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWV0Y19jYWNoZXJlc2V0Ij5SZXNldCBDYWNoZTwvYnV0dG9uPjxidXR0b24gaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWV0Y19jYWNoZWRlbGV0ZSI+RGVsZXRlIENhY2hlPC9idXR0b24+PC9maWVsZHNldD48ZmllbGRzZXQ+PGxlZ2VuZD5SZXBsYWNlIEZ1bGwgRmVlZCBVUkwgOiA8L2xlZ2VuZD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLWV0Y19yZXBsYWNlZnVsbGZlZWR1cmwiPjwvZmllbGRzZXQ+J30KICBdOwogIGxpc3QuZm9yRWFjaChmdW5jdGlvbihpKSB7CiAgICB2YXIgaDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpOwogICAgaDMuY2xhc3NOYW1lID0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLXRpdGxlJzsKICAgIGgzLmlubmVySFRNTCA9IGkudGFiOwogICAgJGlkcygndGFiJykuYXBwZW5kQ2hpbGQoaDMpOwogICAgdmFyIGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgIGxpLmlkID0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLScgKyBpLmlkOwogICAgbGkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGxpLmlubmVySFRNTCA9IGkuYm9keTsKICAgICRpZHMoJ2xpc3QnKS5hcHBlbmRDaGlsZChsaSk7CiAgfSk7CiAgdmFyIGVUYWJzID0gJGlkKCdmZWVkbHlUYWJzJyksIGVJdGVtOwogIGlmIChlVGFicykgewogICAgZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGVJdGVtLmNsYXNzTmFtZSA9ICd0YWInOwogICAgZUl0ZW0uaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImhlYWRlciB0YXJnZXQiPjxkaXYgaWQ9ImdtX2Z1bGxmZWVkX3NldHRpbmdzLW1lbnUiIGNsYXNzPSJsYWJlbCBwcmltYXJ5IGljb25sZXNzIj5GdWxsIEZlZWQgJyArIGxvY1syMV0gKyAnPC9kaXY+PC9kaXY+JzsKICAgIGVUYWJzLmFwcGVuZENoaWxkKGVJdGVtKTsKICB9CiAgJGlkcygnZ2VuZXJhbF9rZXknKS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUxKSB7CiAgICBlMS5wcmV2ZW50RGVmYXVsdCgpOwogIH0sIGZhbHNlKTsKICAkaWRzKCdhdXRvbG9hZF9tb2RlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgc2kgPSAkaWRzKCdhdXRvbG9hZF9tb2RlJykuc2VsZWN0ZWRJbmRleDsKICAgIGlmIChzaSA9PT0gMSkgewogICAgICAkaWRzKCdhdXRvbG9hZF9ibGFja2xpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgJGlkcygnYXV0b2xvYWRfd2hpdGVsaXN0Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIH0gZWxzZSBpZiAoc2kgPT09IDIpIHsKICAgICAgJGlkcygnYXV0b2xvYWRfYmxhY2tsaXN0Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgJGlkcygnYXV0b2xvYWRfd2hpdGVsaXN0Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICB9IGVsc2UgewogICAgICAkaWRzKCdhdXRvbG9hZF9ibGFja2xpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAkaWRzKCdhdXRvbG9hZF93aGl0ZWxpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfQogIH0sIGZhbHNlKTsKfTsKCkZ1bGxGZWVkLnZpZXdTZXR0aW5ncyA9IGZ1bmN0aW9uKGlkKSB7CiAgaWYgKCRpZCgnZ21fZnVsbGZlZWRfc2V0dGluZ3MnKSAmJiAkaWQoJ2dtX2Z1bGxmZWVkX3NldHRpbmdzJykuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykgewogICAgJGlkKCdnbV9mdWxsZmVlZF9zZXR0aW5ncycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICByZXR1cm47CiAgfQogIHZhciB0YWIgPSAkaWRzKCd0YWInKS5jaGlsZE5vZGVzOwogIHZhciBsaXN0ID0gJGlkcygnbGlzdCcpLmNoaWxkTm9kZXM7CiAgJGlkcygnZ2VuZXJhbF9rZXknKS52YWx1ZSA9IHN0LmJhc2VrZXk7CiAgJGlkcygnZ2VuZXJhbF9rZXlkZXNjJykudGV4dENvbnRlbnQgPSAoaXNOYU4oc3QuYmFzZWtleSkpID8gbG9jWzI0XSA6ICcoJyArIGxvY1syNV0gKyAnKSc7CiAgJGlkcygnZ2VuZXJhbF9hdXRvcGFnZXJpemUnKS5jaGVja2VkID0gKHN0LmF1dG9wYWdlcml6ZSkgPyB0cnVlIDogZmFsc2U7CiAgJGlkcygnZ2VuZXJhbF9hcGhlaWdodCcpLnZhbHVlID0gc3QuYXBoZWlnaHQ7CiAgJGlkcygnZ2VuZXJhbF9hdXRvc2VhcmNoJykuY2hlY2tlZCA9IChzdC5hdXRvc2VhcmNoKSA/IHRydWUgOiBmYWxzZTsKICAkaWRzKCdnZW5lcmFsX2NhbnRkaXNwbGF5JykuY2hlY2tlZCA9IChzdC5jYW50ZGlzcGxheSkgPyB0cnVlIDogZmFsc2U7CiAgJGlkcygnZ2VuZXJhbF9ub3RyZWFkJykudmFsdWUgPSBzdC5ub3RyZWFkOwogICRpZHMoJ2dlbmVyYWxfb3Blbml0ZW0nKS5jaGVja2VkID0gKHN0Lm9wZW5pdGVtKSA/IHRydWUgOiBmYWxzZTsKICB2YXIgc2lmZiA9ICRpZHMoJ3NpdGVpbmZvX2Z1bGxmZWVkJyk7CiAgdmFyIHNpYXAgPSAkaWRzKCdzaXRlaW5mb19hdXRvcGFnZXJpemUnKTsKICB2YXIgc2l1ZmYgPSAkaWRzKCdzaXRlaW5mb191c2VyZnVsbGZlZWQnKTsKICB2YXIgc2l1YXAgPSAkaWRzKCdzaXRlaW5mb191c2VyYXV0b3BhZ2VyaXplJyk7CiAgdmFyIGJlYXV0aWZpZXIgPSBmdW5jdGlvbihzdHIpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpLnJlcGxhY2UoL15cWy9nLCAnW1xuJykucmVwbGFjZSgvXHtcIi9nLCAnICB7XG4gICAgIicpLnJlcGxhY2UoL1wiXH0vZywgJyJcbiAgfScpLnJlcGxhY2UoL1x9LC9nLCAnfSxcbicpLnJlcGxhY2UoL1wiLC9nLCAnIixcbiAgICAnKS5yZXBsYWNlKC9ce1wiL2csICd7XG4gICAgIicpLnJlcGxhY2UoL1xdJC9nLCAnXG5dJyk7CiAgICB9IGNhdGNoKGVyKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0KICB9OwogIHNpZmYudmFsdWUgPSBiZWF1dGlmaWVyKHNpdGVJbmZvKTsKICBzaWFwLnZhbHVlID0gYmVhdXRpZmllcihzaXRlSW5mb0FQKTsKICBzaXVmZi52YWx1ZSA9IGJlYXV0aWZpZXIodXNlclNpdGVJbmZvKTsKICBzaXVhcC52YWx1ZSA9IGJlYXV0aWZpZXIodXNlclNpdGVJbmZvQVApOwogIHZhciBjaGtsaXN0ID0gJyc7CiAgaXRlbVNpdGVJbmZvLmZvckVhY2goZnVuY3Rpb24oYSkgewogICAgY2hrbGlzdCArPSAnPGxhYmVsIHRpdGxlPSInICsgYS51cmwgKyAnIj48aW5wdXQgdHlwZT0iY2hlY2tib3giJzsKICAgIGlmIChpdGVtU2l0ZUluZm8ubGVuZ3RoID09PSAxKSBjaGtsaXN0ICs9ICcgZGlzYWJsZWQ9ImRpc2FibGVkIic7CiAgICBlbHNlIHsKICAgICAgc3QuZGlzYWJsZWl0ZW0uZm9yRWFjaChmdW5jdGlvbihiKSB7CiAgICAgICAgaWYgKGEudXJsID09PSBiKSBjaGtsaXN0ICs9ICcgY2hlY2tlZCc7CiAgICAgIH0pOwogICAgfQogICAgY2hrbGlzdCArPSAnPicgKyBhLnVybCArICc8L2xhYmVsPjxicj4nOwogIH0pOwogICRpZHMoJ3NpdGVpbmZvX2Rpc2FibGVpdGVtbGlzdCcpLmlubmVySFRNTCA9IGNoa2xpc3Q7CiAgaWYgKHN0LmRpc2FibGVpdGVtKSAkaWRzKCdzaXRlaW5mb19kaXNhYmxlaXRlbScpLnZhbHVlID0gc3QuZGlzYWJsZWl0ZW0uam9pbignXG4nKTsKICB2YXIgdGl0bGU7CiAgJGlkcygnYXV0b2xvYWRfbW9kZScpLnNlbGVjdGVkSW5kZXggPSBzdC5hdXRvbG9hZDsKICB0cnkgewogICAgdGl0bGUgPSBnZXRGaXJzdEVsZW1lbnRCeVhQYXRoKHJldHVyblhwYXRoRW50cnkoKSArICcvL2FbQGNsYXNzPSJzb3VyY2VUaXRsZSJdJykudGV4dENvbnRlbnQ7CiAgfSBjYXRjaChlcikge30KICBpZiAodGl0bGUpIHsKICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvKFsqKz8uKClcW1xdXFx8XF4kXSkvZywgJ1xcJDEnKTsKICAgICRpZHMoJ2F1dG9sb2FkX3doaXRlbGlzdF90aXRsZScpLnZhbHVlID0gJ14nICsgdGl0bGUgKyAnJCc7CiAgICAkaWRzKCdhdXRvbG9hZF9ibGFja2xpc3RfdGl0bGUnKS52YWx1ZSA9ICdeJyArIHRpdGxlICsgJyQnOwogIH0KICBpZiAoc3QuYXV0b2xvYWRmZWVkKSAkaWRzKCdhdXRvbG9hZF93aGl0ZWxpc3RfbGlzdCcpLnZhbHVlID0gc3QuYXV0b2xvYWRmZWVkLmpvaW4oJ1xuJyk7CiAgaWYgKHN0Lm5vdGxvYWRmZWVkKSAkaWRzKCdhdXRvbG9hZF9ibGFja2xpc3RfbGlzdCcpLnZhbHVlID0gc3Qubm90bG9hZGZlZWQuam9pbignXG4nKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYi5sZW5ndGg7IGkrKykgewogICAgaWYgKGhhc0NsYXNzKHRhYltpXSwgJ3NlbGVjdGVkJykpIHsKICAgICAgcmVtb3ZlQ2xhc3ModGFiW2ldLCAnc2VsZWN0ZWQnKTsKICAgICAgbGlzdFtpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfQogIH0KICAkaWRzKCdhdXRvbG9hZF93aGl0ZWxpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICRpZHMoJ2F1dG9sb2FkX2JsYWNrbGlzdCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgaWYgKHN0LmF1dG9sb2FkID09PSAxKSAkaWRzKCdhdXRvbG9hZF9ibGFja2xpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICBlbHNlIGlmIChzdC5hdXRvbG9hZCA9PT0gMikgJGlkcygnYXV0b2xvYWRfd2hpdGVsaXN0Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgJGlkcygnc2VjdXJpdHlfbm9zY3JpcHR0YWcnKS5jaGVja2VkID0gKHN0Lm5vc2NyaXB0dGFnKSA/IHRydWUgOiBmYWxzZTsKICAkaWRzKCdzZWN1cml0eV9pZnJhbWV0YWcnKS5jaGVja2VkID0gKHN0LmlmcmFtZXRhZykgPyB0cnVlIDogZmFsc2U7CiAgJGlkcygnc2VjdXJpdHlfYWxsb3dpZnJhbWV1cmwnKS52YWx1ZSA9IHN0LmFsbG93aWZyYW1ldXJsOwogICRpZHMoJ3NlY3VyaXR5X2RlbnluZXh0dXJsJykudmFsdWUgPSBzdC5kZW55bmV4dHVybDsKICAkaWRzKCdzZWN1cml0eV9hbGxvd25leHR1cmwnKS52YWx1ZSA9IHN0LmFsbG93bmV4dHVybDsKICBpZiAoJGlkcygnc2VjdXJpdHlfaWZyYW1ldGFnJykuY2hlY2tlZCkgewogICAgJGlkcygnc2VjdXJpdHlfYWxsb3dpZnJhbWV1cmwnKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgJGlkcygnc2VjdXJpdHlfYWxsb3dpZnJhbWV1cmwnKS5wYXJlbnROb2RlLnN0eWxlLmNvbG9yID0gJ2JsYWNrJzsKICB9IGVsc2UgewogICAgJGlkcygnc2VjdXJpdHlfYWxsb3dpZnJhbWV1cmwnKS5kaXNhYmxlZCA9IHRydWU7CiAgICAkaWRzKCdzZWN1cml0eV9hbGxvd2lmcmFtZXVybCcpLnBhcmVudE5vZGUuc3R5bGUuY29sb3IgPSAnZ3JheSc7CiAgfQogICRpZHMoJ3NvY2lhbF9zb2NpYWxpY29uJykuY2hlY2tlZCA9IChzdC5zb2NpYWxpY29uKSA/IHRydWUgOiBmYWxzZTsKICAkaWRzKCdzb2NpYWxfYnV6enVybCcpLmNoZWNrZWQgPSAoc3Quc29jaWFsYnV6enVybCkgPyB0cnVlIDogZmFsc2U7CiAgJGlkcygnc29jaWFsX2RlbGljaW91cycpLmNoZWNrZWQgPSAoc3Quc29jaWFsZGVsaWNpb3VzKSA/IHRydWUgOiBmYWxzZTsKICAkaWRzKCdzb2NpYWxfZmFjZWJvb2snKS5jaGVja2VkID0gKHN0LnNvY2lhbGZhY2Vib29rKSA/IHRydWUgOiBmYWxzZTsKICAkaWRzKCdzb2NpYWxfZmMyJykuY2hlY2tlZCA9IChzdC5zb2NpYWxmYzIpID8gdHJ1ZSA6IGZhbHNlOwogICRpZHMoJ3NvY2lhbF9oYXRlbmEnKS5jaGVja2VkID0gKHN0LnNvY2lhbGhhdGVuYSkgPyB0cnVlIDogZmFsc2U7CiAgJGlkcygnc29jaWFsX2xpdmVkb29yJykuY2hlY2tlZCA9IChzdC5zb2NpYWxsaXZlZG9vcikgPyB0cnVlIDogZmFsc2U7CiAgJGlkcygnc29jaWFsX3R3aXR0ZXInKS5jaGVja2VkID0gKHN0LnNvY2lhbHR3aXR0ZXIpID8gdHJ1ZSA6IGZhbHNlOwogICRpZHMoJ3NvY2lhbF95YWhvbycpLmNoZWNrZWQgPSAoc3Quc29jaWFseWFob28pID8gdHJ1ZSA6IGZhbHNlOwogIFsnYnV6enVybCcsICdkZWxpY2lvdXMnLCAnZmFjZWJvb2snLCAnZmMyJywgJ2hhdGVuYScsICdsaXZlZG9vcicsICd0d2l0dGVyJywgJ3lhaG9vJ10uZm9yRWFjaChmdW5jdGlvbihhKSB7CiAgICBpZiAoJGlkcygnc29jaWFsX3NvY2lhbGljb24nKS5jaGVja2VkKSB7CiAgICAgICRpZHMoJ3NvY2lhbF8nICsgYSkuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgJGlkcygnc29jaWFsXycgKyBhKS5wYXJlbnROb2RlLnN0eWxlLmNvbG9yID0gJ2JsYWNrJzsKICAgIH0gZWxzZSB7CiAgICAgICRpZHMoJ3NvY2lhbF8nICsgYSkuZGlzYWJsZWQgPSB0cnVlOwogICAgICAkaWRzKCdzb2NpYWxfJyArIGEpLnBhcmVudE5vZGUuc3R5bGUuY29sb3IgPSAnZ3JheSc7CiAgICB9CiAgfSk7CiAgJGlkcygnZXRjX3JlcGxhY2VmdWxsZmVlZHVybCcpLnZhbHVlID0gc3QucmVwbGFjZWZ1bGxmZWVkdXJsOwogIAogIGlmIChpZCkgewogICAgLy/igLsgY3JlYXRlU2V0dGluZ3MoKeOBrmxpc3TjgajkuKbjgbPpoIbjgpLlkIjjgo/jgZvjgovjgZPjgagKICAgIHZhciBpZGxpc3QgPSBbJ2dlbmVyYWwnLCAnc2l0ZWluZm8nLCAnYXV0b2xvYWQnLCAnc2VjdXJpdHknLCAnc29jaWFsJywgJ2V0YyddOwogICAgaWRsaXN0LmZvckVhY2goZnVuY3Rpb24ocywgaSkgewogICAgICBpZiAoaWQgPT09IHMpIHsKICAgICAgICBhZGRDbGFzcyh0YWJbaV0sICdzZWxlY3RlZCcpOwogICAgICAgIGxpc3RbaV0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIH0KICAgIH0pOwogIH0gZWxzZSB7CiAgICBhZGRDbGFzcyh0YWJbMF0sICdzZWxlY3RlZCcpOwogICAgbGlzdFswXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICB9CiAgJGlkKCdnbV9mdWxsZmVlZF9zZXR0aW5ncycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwp9OwoKRnVsbEZlZWQuY2hlY2tSZWdpc3RlciA9IGZ1bmN0aW9uKCkgewogIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgdmFyIGN1cnJlbnRJdGVtID0gZ2V0X2FjdGl2ZV9pdGVtKHRydWUpOwogICAgaWYgKGN1cnJlbnRJdGVtICYmIGN1cnJlbnRJdGVtLnVybCkgewogICAgICBGdWxsRmVlZC5yZWdpc3RlcldpZGdldHMoY3VycmVudEl0ZW0pOwogICAgICBGdWxsRmVlZC5yZWdpc3RlclNvY2lhbEljb25zKGN1cnJlbnRJdGVtKTsKICAgIH0KICB9LCAxMCk7Cn07CgpGdWxsRmVlZC5yZWdpc3RlcldpZGdldHMgPSBmdW5jdGlvbigpIHsKICB2YXIgZWwsIGZsYWcgPSBmYWxzZSwgYyA9IG5ldyBnZXRDdXJyZW50SXRlbSgpOwogIGlmICghYy5pbm5lckNvbnRlbnRzKSByZXR1cm47CiAgdmFyIHhlID0gcmV0dXJuWHBhdGhFbnRyeSgpOwogIGVsID0gZ2V0RWxlbWVudHNCeVhQYXRoKHhlICsgJy8vZGl2W0BjbGFzcz0ibWV0YWRhdGEiXS9zcGFuJyk7CiAgaWYgKGVsKSB7CiAgICBlbC5zb21lKGZ1bmN0aW9uKGkpIHsKICAgICAgaWYgKGhhc0NsYXNzKGksICdnbV9mdWxsZmVlZF9jaGVja2VkJykpIHsKICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgfQogIGlmIChmbGFnKSByZXR1cm47CiAgdmFyIGNvbnRhaW5lciA9IGdldEZpcnN0RWxlbWVudEJ5WFBhdGgoeGUgKyAnLy9kaXZbQGNsYXNzPSJtZXRhZGF0YSJdJyk7CiAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICBpdGVtU2l0ZUluZm8gPSBbXTsKICB2YXIgZGVzY3JpcHRpb24gPSBsb2NbNDBdICsgJyA6ICcgKyBsb2NbMThdICsgJyAvIEN0cmwrJyArIGxvY1s0MF0gKyAnIDogJyArIGxvY1szOV07CiAgdmFyIGZlZWQgPSBjLmZlZWQ7CiAgdmFyIGJGb3VuZCA9IGZhbHNlOwogIHZhciBjaGVjayA9IGZ1bmN0aW9uKGIpIHsKICAgIGJGb3VuZCA9IHRydWU7CiAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgIGljb24udGl0bGUgPSBkZXNjcmlwdGlvbjsKICAgIGljb24uaW5uZXJIVE1MID0gJ0YnOwogICAgYWRkQ2xhc3MoaWNvbiwgJ2dtX2Z1bGxmZWVkX2NoZWNrZWQnKTsKICAgIGFkZENsYXNzKGljb24sICdnbV9mdWxsZmVlZF9jaGVja2VkX2ljb24nKTsKICAgIGlmIChiKSBhZGRDbGFzcyhpY29uLCAnZ21fZnVsbGZlZWRfY2hlY2tlZF9pY29uX2luZm8nKTsKICAgIGVsc2UgYWRkQ2xhc3MoaWNvbiwgJ2dtX2Z1bGxmZWVkX2NoZWNrZWRfaWNvbl9ub2luZm8nKTsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTsKICAgIGlmIChzdC5hdXRvbG9hZCA9PT0gMCkgaW5pdEZ1bGxGZWVkKCk7CiAgICBlbHNlIGlmIChzdC5hdXRvbG9hZCA9PT0gMSAmJiBmZWVkLnRpdGxlKSB7CiAgICAgIGlmIChzdC5ub3Rsb2FkZmVlZC5zb21lKGZ1bmN0aW9uKGkpIHsKICAgICAgICBpZiAoIWkpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAobmV3IFJlZ0V4cChpKS50ZXN0KGZlZWQudGl0bGUpKSByZXR1cm4gdHJ1ZTsKICAgICAgfSkpIGZsYWcgPSB0cnVlOwogICAgICBpZiAoIWZsYWcpIGluaXRGdWxsRmVlZCgpOwogICAgfSBlbHNlIGlmIChzdC5hdXRvbG9hZCA9PT0gMiAmJiBmZWVkLnRpdGxlKSB7CiAgICAgIGlmIChzdC5hdXRvbG9hZGZlZWQuc29tZShmdW5jdGlvbihpKSB7CiAgICAgICAgaWYgKCFpKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKG5ldyBSZWdFeHAoaSkudGVzdChmZWVkLnRpdGxlKSkgcmV0dXJuIHRydWU7CiAgICAgIH0pKSBpbml0RnVsbEZlZWQoKTsKICAgIH0KICB9OwogIHVzZXJTaXRlSW5mby5zb21lKGZ1bmN0aW9uKGkpIHsKICAgIHRyeSB7CiAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKGkudXJsKTsKICAgICAgaWYgKGkudXJsICYmIChyZWcudGVzdChjLml0ZW1VUkwpIHx8IHJlZy50ZXN0KGZlZWQudXJsKSkpIHsKICAgICAgICBjaGVjayh0cnVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSBjYXRjaChlcjEpIHsKICAgICAgR01fbG9nKCdTSVRFSU5GTyBFcnJvcjogJyArIGkudXJsKTsKICAgIH0KICB9KTsKICBpZiAoIWJGb3VuZCkgewogICAgaWYgKHVzZXJDYWNoZUxpc3Quc29tZShmdW5jdGlvbihpKSB7CiAgICAgIGlmIChpID09PSBmZWVkLnVybCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9KSkgewogICAgICB1c2VyQ2FjaGUuc29tZShmdW5jdGlvbihpKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKGkudXJsKTsKICAgICAgICAgIGlmIChpLnVybCAmJiAocmVnLnRlc3QoYy5pdGVtVVJMKSB8fCByZWcudGVzdChmZWVkLnVybCkpKSB7CiAgICAgICAgICAgIGNoZWNrKHRydWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoKGVyMikgewogICAgICAgICAgR01fbG9nKCJTSVRFSU5GTyBFcnJvcjogIiArIGkudXJsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KICBpZiAoIWJGb3VuZCkgewogICAgc2l0ZUluZm8uc29tZShmdW5jdGlvbihjdHgpIHsKICAgICAgaWYgKGNhY2hlSW5mb1tjdHgudXJsXSkgewogICAgICAgIGNhY2hlSW5mb1tjdHgudXJsXS5pbmZvLnNvbWUoZnVuY3Rpb24oaSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoaS51cmwpOwogICAgICAgICAgICBpZiAoaS51cmwgJiYgKHJlZy50ZXN0KGMuaXRlbVVSTCkgfHwgcmVnLnRlc3QoZmVlZC51cmwpKSkgewogICAgICAgICAgICAgIGNoZWNrKHRydWUpOwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoKGVyMykgewogICAgICAgICAgICBHTV9sb2coIlNJVEVJTkZPIEVycm9yOiAiICsgaS51cmwpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgaWYgKCFiRm91bmQpIGNoZWNrKCk7Cn07CgpGdWxsRmVlZC5yZWdpc3RlclNvY2lhbEljb25zID0gZnVuY3Rpb24oKSB7CiAgaWYgKCFzdC5zb2NpYWxpY29uKSByZXR1cm47CiAgdmFyIGVsLCBjID0gbmV3IGdldEN1cnJlbnRJdGVtKCk7CiAgaWYgKCFjLmlubmVyQ29udGVudHMpIHJldHVybjsKICB2YXIgeGUgPSByZXR1cm5YcGF0aEVudHJ5KCk7CiAgZWwgPSBnZXRGaXJzdEVsZW1lbnRCeVhQYXRoKHhlICsgJy8vZGl2W0BjbGFzcz0ibWV0YWRhdGEiXS9zcGFuW0BjbGFzcz0iZ21fZnVsbGZlZWRfc29jaWFsaWNvbiJdJyk7CiAgaWYgKGVsKSByZXR1cm47CiAgdmFyIGNvbnRhaW5lciA9IGdldEZpcnN0RWxlbWVudEJ5WFBhdGgoeGUgKyAnLy9kaXZbQGNsYXNzPSJtZXRhZGF0YSJdJyk7CiAgdmFyIGl0ZW1TY2hlbWUgPSBjLml0ZW1VUkwuc2xpY2UoMCwgYy5pdGVtVVJMLmluZGV4T2YoIjovLyIpKzMpOwogIHZhciBpdGVtVXJsMiA9IGMuaXRlbVVSTC5zbGljZShjLml0ZW1VUkwuaW5kZXhPZigiOi8vIikrMykucmVwbGFjZSgvIy9nLCAnJTIzJyk7CiAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICB2YXIgdHdpdHRlciA9IHsKICAgIG1ldGhvZDogJ2dldCcsCiAgICB1cmw6ICdodHRwOi8vdXJscy5hcGkudHdpdHRlci5jb20vMS91cmxzL2NvdW50Lmpzb24/dXJsPScgKyBjLml0ZW1VUkwsCiAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlcykgewogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgdmFyIGluZm87CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGluZm8gPSBKU09OLnBhcnNlKHJlcy5yZXNwb25zZVRleHQpOwogICAgICAgIH0gY2F0Y2goZXIpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHRvdGFsID0gaW5mby5jb3VudDsKICAgICAgICBpZiAoaXNOYU4odG90YWwpIHx8IHRvdGFsIDw9IDApIHJldHVybjsKICAgICAgICB2YXIgc3RyID0gKHRvdGFsID4gMSkgPyAncycgOiAnJzsKICAgICAgICB2YXIgc3R5bGUgPSAodG90YWwgPCAxMCkgPyAnMScgOgogICAgICAgICAgKHRvdGFsIDwgMTAwKSA/ICcyJyA6CiAgICAgICAgICAodG90YWwgPCAxMDAwKSA/ICczJyA6ICc0JzsKICAgICAgICBzVC5pbm5lckhUTUwgPSAnPGEgaHJlZj0iaHR0cDovL3RvcHN5LmNvbS8nICsgaXRlbVVybDIgKyAnIiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9IlR3aXR0ZXI6ICcgKyB0b3RhbCArICcgdHdlZXQnICsgc3RyICsgJyIgY2xhc3M9ImdtX2Z1bGxmZWVkX3R3aXR0ZXIgZ21fZnVsbGZlZWRfdHdpdHRlcicgKyBzdHlsZSArICciPjxpbWcgc3JjPSJodHRwczovL3R3aXR0ZXIuY29tL2Zhdmljb24uaWNvIj48c3Bhbj4nICsgdG90YWwgKyAnPC9zcGFuPjwvYT4nOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgZGVsaWNpb3VzID0gewogICAgbWV0aG9kOiAnZ2V0JywKICAgIHVybDogJ2h0dHA6Ly9iYWRnZXMuZGVsLmljaW8udXMvZmVlZHMvanNvbi91cmwvZGF0YT91cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChjLml0ZW1VUkwpLAogICAgb25sb2FkOiBmdW5jdGlvbihyZXMpIHsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgIHZhciBpbmZvOwogICAgICAgIHRyeSB7CiAgICAgICAgICBpbmZvID0gSlNPTi5wYXJzZShyZXMucmVzcG9uc2VUZXh0KTsKICAgICAgICB9IGNhdGNoKGVyKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghaW5mbyB8fCAhaW5mby5sZW5ndGgpIHJldHVybjsKICAgICAgICB2YXIgdG90YWwgPSBpbmZvWzBdLnRvdGFsX3Bvc3RzOwogICAgICAgIGlmIChpc05hTih0b3RhbCkgfHwgdG90YWwgPD0gMCkgcmV0dXJuOwogICAgICAgIHZhciBzdHIgPSAodG90YWwgPiAxKSA/ICcgcGVvcGxlJyA6ICcgcGVyc29uJzsKICAgICAgICB2YXIgc3R5bGUgPSAodG90YWwgPCAxMCkgPyAnMScgOgogICAgICAgICAgKHRvdGFsIDwgMTAwKSA/ICcyJyA6CiAgICAgICAgICAodG90YWwgPCAxMDAwKSA/ICczJyA6ICc0JzsKICAgICAgICBzRC5pbm5lckhUTUwgPSAnPGEgaHJlZj0iaHR0cDovL2RlbGljaW91cy5jb20vdXJsP3VybD0nICsgaW5mb1swXS51cmwgKyAnIiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9IkRlbGljaW91czogJyArIHRvdGFsICsgc3RyICsgJyIgY2xhc3M9ImdtX2Z1bGxmZWVkX2RlbGljaW91cyBnbV9mdWxsZmVlZF9kZWxpY2lvdXMnICsgc3R5bGUgKyAnIj48aW1nIHNyYz0iaHR0cHM6Ly9kZWxpY2lvdXMuY29tL2ltZy9mYXZpY29uLmljbyI+PHNwYW4+JyArIHRvdGFsICsgJzwvc3Bhbj48L2E+JzsKICAgICAgfQogICAgfQogIH07CiAgdmFyIGZhY2Vib29rID0gewogICAgbWV0aG9kOiAnZ2V0JywKICAgIHVybDogJ2h0dHBzOi8vYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvZnFsLnF1ZXJ5P2Zvcm1hdD1qc29uJnF1ZXJ5PXNlbGVjdCtsaWtlX2NvdW50K2Zyb20rbGlua19zdGF0K3doZXJlK3VybD0lMjInICsgZW5jb2RlVVJJQ29tcG9uZW50KGMuaXRlbVVSTCkgKyAnJTIyJywKICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKSB7CiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICB2YXIgaW5mbzsKICAgICAgICB0cnkgewogICAgICAgICAgaW5mbyA9IEpTT04ucGFyc2UocmVzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgfSBjYXRjaChlcikgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgdG90YWwgPSBpbmZvWzBdLmxpa2VfY291bnQ7CiAgICAgICAgaWYgKGlzTmFOKHRvdGFsKSB8fCB0b3RhbCA8PSAwKSByZXR1cm47CiAgICAgICAgc0YuaW5uZXJIVE1MID0gJzxzcGFuIHRpdGxlPSJGYWNlYm9vazogJyArIHRvdGFsICsgJyBsaWtlIiBjbGFzcz0iZ21fZnVsbGZlZWRfZmFjZWJvb2siPjxpbWcgc3JjPSJodHRwczovL3d3dy5mYWNlYm9vay5jb20vZmF2aWNvbi5pY28iPjxzcGFuPicgKyB0b3RhbCArICc8L3NwYW4+PC9zcGFuPic7CiAgICAgIH0KICAgIH0KICB9OwogIHZhciBoYXRlbmEgPSB7CiAgICBtZXRob2Q6ICdnZXQnLAogICAgdXJsOiAnaHR0cDovL2FwaS5iLnN0LWhhdGVuYS5jb20vZW50cnkuY291bnQ/dXJsPScgKyBpdGVtU2NoZW1lICsgaXRlbVVybDIsCiAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlcykgewogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgdmFyIHRvdGFsID0gTnVtYmVyKHJlcy5yZXNwb25zZVRleHQpOwogICAgICAgIGlmIChpc05hTih0b3RhbCkgfHwgdG90YWwgPD0gMCkgcmV0dXJuOwogICAgICAgIHZhciBzdHIgPSAodG90YWwgPiAxKSA/ICcgdXNlcnMnIDogJyB1c2VyJzsKICAgICAgICB2YXIgc3R5bGUgPSAodG90YWwgPCAxMCkgPyAnMScgOgogICAgICAgICAgKHRvdGFsIDwgMTAwKSA/ICcyJyA6CiAgICAgICAgICAodG90YWwgPCAxMDAwKSA/ICczJyA6ICc0JzsKICAgICAgICB2YXIgc3NsID0gKGl0ZW1TY2hlbWUgPT09ICdodHRwczovLycpID8gJ3MvJyA6ICcnOwogICAgICAgIHNILmlubmVySFRNTCA9ICc8YSBocmVmPSJodHRwOi8vYi5oYXRlbmEubmUuanAvZW50cnkvJyArIHNzbCArIGl0ZW1VcmwyICsgJyIgdGFyZ2V0PSJfYmxhbmsiIHRpdGxlPSInICsgbG9jWzE5XSArICc6ICcgKyB0b3RhbCArIHN0ciArICciIGNsYXNzPSJnbV9mdWxsZmVlZF9oYXRlbmEgZ21fZnVsbGZlZWRfaGF0ZW5hJyArIHN0eWxlICsgJyI+PGltZyBzcmM9Imh0dHA6Ly9iLmhhdGVuYS5uZS5qcC9mYXZpY29uLmljbyI+PHNwYW4+JyArIHRvdGFsICsgJzwvc3Bhbj48L2E+JzsKICAgICAgfQogICAgfQogIH07CiAgdmFyIGxpdmVkb29yID0gJzxhIGhyZWY9Imh0dHA6Ly9jbGlwLmxpdmVkb29yLmNvbS9wYWdlLycgKyBjLml0ZW1VUkwgKyAnIiB0YXJnZXQ9Il9ibGFuayI+PGltZyBzcmM9Imh0dHA6Ly9pbWFnZS5jbGlwLmxpdmVkb29yLmNvbS9jb3VudGVyLycgKyBjLml0ZW1VUkwgKyAnIiB0aXRsZT0iJyArIGxvY1syMF0gKyAnIi8+PC9hPic7CiAgdmFyIHlhaG9vID0gJzxhIGhyZWY9Imh0dHA6Ly9ib29rbWFya3MueWFob28uY28uanAvdXJsP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGMuaXRlbVVSTCkgKyAnIiB0YXJnZXQ9Il9ibGFuayI+PGltZyBzcmM9Imh0dHA6Ly9udW0uYm9va21hcmtzLnlhaG9vLmNvLmpwL2ltYWdlL3NtYWxsLycgKyBjLml0ZW1VUkwgKyAnIiB0aXRsZT0iJyArIGxvY1s1N10gKyAnIi8+PC9hPic7CiAgdmFyIGJ1enp1cmwgPSAnPGEgaHJlZj0iaHR0cDovL2J1enp1cmwuanAvZW50cnkvJyArIGMuaXRlbVVSTCArICciIHRhcmdldD0iX2JsYW5rIj48aW1nIHNyYz0iaHR0cDovL2FwaS5idXp6dXJsLmpwL2FwaS9jb3VudGVyL3YxL2ltYWdlP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGMuaXRlbVVSTCkgKyAnIiB0aXRsZT0iJyArIGxvY1s1OF0gKyAnIi8+PC9hPic7CiAgdmFyIGZjMiA9ICc8YSBocmVmPSJodHRwOi8vYm9va21hcmsuZmMyLmNvbS9zZWFyY2gvZGV0YWlsP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGMuaXRlbVVSTCkgICsgJyIgdGFyZ2V0PSJfYmxhbmsiPjxpbWcgc3JjPSJodHRwOi8vYm9va21hcmsuZmMyLmNvbS9pbWFnZS91c2Vycy8nICsgYy5pdGVtVVJMICsgJyIgdGl0bGU9IicgKyBsb2NbNTldICsgJyIvPjwvYT4nOwogIHZhciBjZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICB9OwogIHZhciBzVCA9IGNlKCksIHNEID0gY2UoKSwgc0YgPSBjZSgpLCBzSCA9IGNlKCksIHNMID0gY2UoKSwgc1kgPSBjZSgpLCBzQiA9IGNlKCksIHNDID0gY2UoKTsKICBzVC5jbGFzc05hbWUgPSBzRC5jbGFzc05hbWUgPSBzRi5jbGFzc05hbWUgPSBzSC5jbGFzc05hbWUgPSBzTC5jbGFzc05hbWUgPSBzWS5jbGFzc05hbWUgPSBzQi5jbGFzc05hbWUgPSBzQy5jbGFzc05hbWUgPSAnZ21fZnVsbGZlZWRfc29jaWFsaWNvbic7CiAgdmFyIGFjMSA9IGZ1bmN0aW9uKHMsIGYpIHsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzKTsKICAgIEdNX3htbGh0dHBSZXF1ZXN0KGYpOwogIH07CiAgdmFyIGFjMiA9IGZ1bmN0aW9uKHMsIGYpIHsKICAgIHMuaW5uZXJIVE1MID0gZjsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzKTsKICB9OwogIGlmIChzdC5zb2NpYWx0d2l0dGVyKSBhYzEoc1QsIHR3aXR0ZXIpOwogIGlmIChzdC5zb2NpYWxkZWxpY2lvdXMpIGFjMShzRCwgZGVsaWNpb3VzKTsKICBpZiAoc3Quc29jaWFsZmFjZWJvb2spIGFjMShzRiwgZmFjZWJvb2spOwogIGlmIChzdC5zb2NpYWxoYXRlbmEpIGFjMShzSCwgaGF0ZW5hKTsKICBpZiAoc3Quc29jaWFsbGl2ZWRvb3IpIGFjMihzTCwgbGl2ZWRvb3IpOwogIGlmIChzdC5zb2NpYWx5YWhvbykgYWMyKHNZLCB5YWhvbyk7CiAgaWYgKHN0LnNvY2lhbGJ1enp1cmwpIGFjMihzQiwgYnV6enVybCk7CiAgaWYgKHN0LnNvY2lhbGZjMikgYWMyKHNDLCBmYzIpOwogIHZhciBpbnRlciwgcmVwZWF0ID0gMCwgY2hlY2sgPSBmdW5jdGlvbigpIHsKICAgIHZhciBlID0gZ2V0RWxlbWVudHNCeVhQYXRoKHhlICsgJy8vZGl2W0BjbGFzcz0ibWV0YWRhdGEiXS9zcGFuW0BjbGFzcz0iZ21fZnVsbGZlZWRfc29jaWFsaWNvbiJdL2EvaW1nJyksIGYgPSB0cnVlOwogICAgcmVwZWF0ICsrOwogICAgaWYgKGUpIHsKICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uKGkpIHsKICAgICAgICBpZiAoaS5jbGllbnRIZWlnaHQgPT09IDEpIGkucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkucGFyZW50Tm9kZSk7CiAgICAgICAgZWxzZSBpZiAoaS5jbGllbnRIZWlnaHQgPT09IDAgJiYgcmVwZWF0IDwgMTApIGYgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgICBpZiAoZikgd2luZG93LmNsZWFySW50ZXJ2YWwoaW50ZXIpOwogIH07CiAgaW50ZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICBjaGVjaygpOwogIH0sIDEwMDApOwp9OwoKRnVsbEZlZWQuZG9jdW1lbnRGaWx0ZXJzID0gWwovLyBhZGRUYXJnZXRBdHRyCiAgKGZ1bmN0aW9uKGRvYykgewogICAgdmFyIGFuY2hvcnMgPSBnZXRFbGVtZW50c0J5WFBhdGgoJ2Rlc2NlbmRhbnQtb3Itc2VsZjo6YScsIGRvYyk7CiAgICBpZiAoYW5jaG9ycykgewogICAgICBhbmNob3JzLmZvckVhY2goZnVuY3Rpb24oaSkgewogICAgICAgIGkudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgIH0pOwogICAgfQogIH0pCl07Cgp2YXIgZ2V0X2FjdGl2ZV9pdGVtID0gZnVuY3Rpb24oKSB7CiAgdmFyIGl0ZW0gPSB7fTsKICB2YXIgZXhwID0gZ2V0Rmlyc3RFbGVtZW50QnlYUGF0aChyZXR1cm5YcGF0aEVudHJ5KCkgKyAnLy9kaXZbQGNsYXNzPSJlbnRyeUhlYWRlciJdL2EnKTsKICBpZiAoZXhwKSB7CiAgICBpdGVtLnVybCA9ICAoZXhwLmhyZWYgJiYgL14oaHR0cHM/fGZ0cCk6XC9cLy4rJC8udGVzdChleHAuaHJlZikpID8gZXhwLmhyZWYgOiAnJzsKICAgIGl0ZW0udGl0bGUgPSAoZXhwLnRleHRDb250ZW50KSA/IGV4cC50ZXh0Q29udGVudCA6ICcnOwogIH0KICByZXR1cm4gaXRlbTsKfTsKCnZhciBnZXRfYWN0aXZlX2ZlZWQgPSBmdW5jdGlvbigpIHsKICB2YXIgZmVlZCA9IHt9OwogIGZlZWQudXJsID0gJyc7IGZlZWQudGl0bGUgPSAnJzsKICB0cnkgewogICAgdmFyIGVzdCA9IGdldEZpcnN0RWxlbWVudEJ5WFBhdGgocmV0dXJuWHBhdGhFbnRyeSgpICsgJy8vYVtAY2xhc3M9InNvdXJjZVRpdGxlIl0nKTsKICAgIGlmIChlc3QpIHsKICAgICAgZmVlZC51cmwgPSBkZWNvZGVVUklDb21wb25lbnQoZXN0LmhyZWYucmVwbGFjZSgvXi4qXC8oPz1odHRwKS8sICcnKSk7CiAgICAgIGZlZWQudGl0bGUgPSBlc3QudGV4dENvbnRlbnQ7CiAgICB9CiAgfSBjYXRjaChlKSB7fQogIHJldHVybiBmZWVkOwp9OwoKdmFyIGhhc0NsYXNzID0gZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NuYW1lKSB7CiAgaWYgKCFlbGVtZW50KSByZXR1cm4gZmFsc2U7CiAgdmFyIGNsID0gZWxlbWVudC5jbGFzc05hbWU7CiAgaWYgKCFjbCkgcmV0dXJuIGZhbHNlOwogIHZhciBjbHMgPSBjbC5zcGxpdCgvXHMrLyk7CiAgcmV0dXJuIGNscy5pbmRleE9mKGNsYXNzbmFtZSkgIT09IC0xOwp9OwoKdmFyIHRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NuYW1lKSB7CiAgaWYgKCFlbGVtZW50KSByZXR1cm47CiAgaWYgKGhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzbmFtZSkpIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzbmFtZSk7CiAgZWxzZSBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc25hbWUpOwp9OwoKdmFyIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NuYW1lKSB7CiAgaWYgKCFlbGVtZW50KSByZXR1cm47CiAgdmFyIGNsID0gZWxlbWVudC5jbGFzc05hbWU7CiAgdmFyIGNscyA9IGNsLnNwbGl0KC9ccysvKTsKICBlbGVtZW50LmNsYXNzTmFtZSA9IGNscy5yZW1vdmUoY2xhc3NuYW1lKS5qb2luKCcgJyk7Cn07Cgp2YXIgYWRkQ2xhc3MgPSBmdW5jdGlvbihlbGVtZW50LCBjbGFzc25hbWUpIHsKICBpZiAoIWVsZW1lbnQpIHJldHVybjsKICB2YXIgY2wgPSBlbGVtZW50LmNsYXNzTmFtZTsKICBpZiAoIWNvbnRhaW4oY2wsIGNsYXNzbmFtZSkpIHsKICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzbmFtZTsKICB9Cn07Cgp2YXIgY29udGFpbiA9IGZ1bmN0aW9uKHNlbGYsIG90aGVyKSB7CiAgaWYgKGlzU3RyaW5nKHNlbGYpICYmIGlzU3RyaW5nKG90aGVyKSkgewogICAgcmV0dXJuIHNlbGYuaW5kZXhPZihvdGhlcikgIT09IC0xOwogIH0KICBpZiAoaXNSZWdFeHAob3RoZXIpKSByZXR1cm4gb3RoZXIudGVzdChzZWxmKTsKfTsKCnZhciBpc1N0cmluZyA9IGZ1bmN0aW9uKG9iaikgewogIHJldHVybiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJyB8fCBvYmogaW5zdGFuY2VvZiBTdHJpbmc7Cn07Cgp2YXIgaXNSZWdFeHAgPSBmdW5jdGlvbihvYmopIHsKICByZXR1cm4gb2JqIGluc3RhbmNlb2YgUmVnRXhwOwp9OwoKQXJyYXkucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHRvX3JlbW92ZSkgewogIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbCAhPT0gdG9fcmVtb3ZlOyB9KTsKfTsKCi8vIGl0ZW3jga7mg4XloLHjgpLmoLzntI3jgZnjgotvYmplY3Tjga5jb25zdHJ1Y3Rvcgp2YXIgZ2V0Q3VycmVudEl0ZW0gPSBmdW5jdGlvbigpIHsKICB0aGlzLml0ZW0gPSBnZXRfYWN0aXZlX2l0ZW0odHJ1ZSk7CiAgdGhpcy5mZWVkID0gZ2V0X2FjdGl2ZV9mZWVkKCk7CiAgdGhpcy5pdGVtVVJMID0gdGhpcy5pdGVtLnVybDsKICB2YXIgdSA9IHRoaXMuaXRlbVVSTCwgeGUgPSByZXR1cm5YcGF0aEVudHJ5KCk7CiAgaWYgKC9eaHR0cHM/OlwvXC93d3dcLmZlZWRseVwuY29tXC9ob21lI3N1YnNjcmlwdGlvblwvZmVlZFwvaHR0cHM/OlwvXC8uKy8udGVzdCh1KSkgewogICAgdSA9IHUuc2xpY2UodS5pbmRleE9mKCcvZmVlZC8nKSs2KTsKICAgIHRoaXMuaXRlbVVSTCA9IGRlY29kZVVSSUNvbXBvbmVudCh1LnNsaWNlKDAsIHUuaW5kZXhPZignJicpKSk7CiAgfSBlbHNlIGlmICgvXmh0dHA6XC9cL3JkXC55YWhvb1wuY29cLmpwXC9yc3NcL2xcLy4rLy50ZXN0KHUpKSB7CiAgICBpZiAoL1wvXCpcLWh0dHAvLnRlc3QodSkpCiAgICAgIHRoaXMuaXRlbVVSTCA9IGRlY29kZVVSSUNvbXBvbmVudCh1LnNsaWNlKHUuaW5kZXhPZignKi1odHRwJykrMikpOwogICAgZWxzZSBpZiAoL1wvXCpodHRwLy50ZXN0KHUpKQogICAgICB0aGlzLml0ZW1VUkwgPSBkZWNvZGVVUklDb21wb25lbnQodS5zbGljZSh1LmluZGV4T2YoJypodHRwJykrMSkpOwogIH0KICB0aGlzLmFydGljbGVDb250YWluZXIgPSBnZXRGaXJzdEVsZW1lbnRCeVhQYXRoKHhlKTsKICB0aGlzLmlubmVyQ29udGVudHMgPSBnZXRGaXJzdEVsZW1lbnRCeVhQYXRoKHhlICsgJy8vZGl2W2NvbnRhaW5zKGNvbmNhdCgiICIsIEBjbGFzcywgIiAiKSwgIiBlbnRyeUJvZHkgIildJyk7CiAgdGhpcy5mb3VuZCA9IGZhbHNlOwp9OwoKdmFyIGxhdW5jaEZ1bGxGZWVkID0gZnVuY3Rpb24obGlzdCwgYywgZmxhZykgewogIGlmICh0eXBlb2YgbGlzdC5zb21lICE9PSAnZnVuY3Rpb24nKSByZXR1cm47CiAgc3RhdGUgPSAnbGF1bmNoJzsKICBpdGVtU2l0ZUluZm8gPSBbXTsKICB2YXIgYkNhY2hlLCBiTGlzdDsKICB2YXIgY2hlY2sgPSBmdW5jdGlvbihsaXMpIHsKICAgIGxpcy5mb3JFYWNoKGZ1bmN0aW9uKGkpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChpLnVybCk7CiAgICAgICAgaWYgKGkudXJsICYmIChpLnVybC5sZW5ndGggPD0gMTIgfHwgIS9eXF4/aHR0cHM/L2kudGVzdChpLnVybCkpKSB7CiAgICAgICAgICBpZiAobmV3IFJlZ0V4cCgnXjovLycsICdpJykudGVzdChpLnVybCkpIGkudXJsID0gJ15odHRwcz8nICsgaS51cmw7CiAgICAgICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKCdeLy8nLCAnaScpLnRlc3QoaS51cmwpKSBpLnVybCA9ICdeaHR0cHM/OicgKyBpLnVybDsKICAgICAgICAgIGVsc2UgaS51cmwgPSAnXmh0dHBzPzovLycgKyBpLnVybDsKICAgICAgICB9CiAgICAgICAgaWYgKChyZWcudGVzdChjLml0ZW1VUkwpIHx8IHJlZy50ZXN0KGMuZmVlZC51cmwpKSAmJiBpLnVybC5sZW5ndGggPiAxMikgewogICAgICAgICAgaWYgKGZsYWcgPT09ICdjYWNoZScpIHsKICAgICAgICAgICAgaWYgKHVzZXJDYWNoZUxpc3Quc29tZShmdW5jdGlvbih1KSB7CiAgICAgICAgICAgICAgaWYgKHUgPT09IGMuZmVlZC51cmwpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICBjLmZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBpdGVtU2l0ZUluZm8ucHVzaChpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYy5mb3VuZCA9IHRydWU7CiAgICAgICAgICAgIGl0ZW1TaXRlSW5mby5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaChlcjEpIHsKICAgICAgICBHTV9sb2coIlNJVEVJTkZPIEVycm9yOiAiICsgaS51cmwpOwogICAgICB9CiAgICB9KTsKICB9OwogIGNoZWNrKGxpc3QpOwogIGlmICgvXm5leHR8XnNlYXJjaC8udGVzdChmbGFnKSkgewogICAgaWYgKCFjLmZvdW5kKSB7CiAgICAgIHNpdGVJbmZvQVAuc29tZShmdW5jdGlvbihjdHgpIHsKICAgICAgICBpZiAoY2FjaGVBUEluZm9bY3R4LnVybF0pIHsKICAgICAgICAgIGNoZWNrKGNhY2hlQVBJbmZvW2N0eC51cmxdLmluZm8pOwogICAgICAgICAgcmV0dXJuIGMuZm91bmQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGlmICghYy5mb3VuZCkgY2hlY2soW3sidXJsIjpuZXh0UGFnZUxpbmsuaHJlZiwgInhwYXRoIjoiIn1dKTsKICB9CiAgbmV4dFBhZ2VMaW5rID0gbnVsbDsKICBpdGVtU2l0ZUluZm8uc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICB2YXIgcmVBID0gbmV3IFJlZ0V4cChhLnVybCk7CiAgICB2YXIgcmVCID0gbmV3IFJlZ0V4cChiLnVybCk7CiAgICB2YXIgYTEgPSAocmVBLnRlc3QoYy5pdGVtVVJMKSkgPyByZUEuc291cmNlLmxlbmd0aCA6IDA7CiAgICB2YXIgYjEgPSAocmVCLnRlc3QoYy5pdGVtVVJMKSkgPyByZUIuc291cmNlLmxlbmd0aCA6IDA7CiAgICB2YXIgYTIgPSAocmVBLnRlc3QoYy5mZWVkLnVybCkpID8gcmVBLnNvdXJjZS5sZW5ndGggOiAwOwogICAgdmFyIGIyID0gKHJlQi50ZXN0KGMuZmVlZC51cmwpKSA/IHJlQi5zb3VyY2UubGVuZ3RoIDogMDsKICAgIGlmIChhLnVybC5zZWFyY2goL1xcd3xcLlwrfFwuXCp8XFtcXlwuP1wvP1xdXCsvKSAhPT0gLTEpIHJldHVybiB0cnVlOwogICAgZWxzZSBpZiAoYi51cmwuc2VhcmNoKC9cXHd8XC5cK3xcLlwqfFxbXF5cLj9cLz9cXVwrLykgIT09IC0xKSByZXR1cm4gZmFsc2U7CiAgICBlbHNlIHJldHVybiAoKGIxID49IGIyKSA/IGIxIDogYjIpIC0gKChhMSA+PSBhMikgPyBhMSA6IGEyKTsKICB9KTsKICB2YXIgdHlwZSA9IFsnXklORCcsICdeU1VCJywgJ15HRU4nXTsKICBpdGVtU2l0ZUluZm8uc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICB2YXIgbjEgPSAwLCBuMiA9IDA7CiAgICB0eXBlLmZvckVhY2goZnVuY3Rpb24oYywgaSkgewogICAgICBpZiAobmV3IFJlZ0V4cChjKS50ZXN0KGEudHlwZSkpIG4xID0gaTsKICAgICAgaWYgKG5ldyBSZWdFeHAoYykudGVzdChiLnR5cGUpKSBuMiA9IGk7CiAgICB9KTsKICAgIHJldHVybiBuMSAtIG4yOwogIH0pOwogIGlmIChmbGFnID09PSAnZnVsbCcpIHsKICAgIGlmICghYkNhY2hlICYmIGl0ZW1TaXRlSW5mby5sZW5ndGggPiAwKSB7CiAgICAgIHVzZXJDYWNoZS5zb21lKGZ1bmN0aW9uKHUpIHsKICAgICAgICBpZiAodSA9PT0gaXRlbVNpdGVJbmZvWzBdKSB7CiAgICAgICAgICBiQ2FjaGUgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdXNlckNhY2hlTGlzdC5zb21lKGZ1bmN0aW9uKHUpIHsKICAgICAgICBpZiAodSA9PT0gYy5mZWVkLnVybCkgewogICAgICAgICAgYkxpc3QgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKCFiQ2FjaGUpIHsKICAgICAgICBkZWxldGUgaXRlbVNpdGVJbmZvWzBdLmJhc2U7CiAgICAgICAgZGVsZXRlIGl0ZW1TaXRlSW5mb1swXS5taWNyb2Zvcm1hdHM7CiAgICAgICAgZGVsZXRlIGl0ZW1TaXRlSW5mb1swXS5wcmlvcml0eTsKICAgICAgICB1c2VyQ2FjaGUucHVzaChpdGVtU2l0ZUluZm9bMF0pOwogICAgICAgIHRyeSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnRmVlZGx5RnVsbEZlZWRfdXNlckNhY2hlJywgSlNPTi5zdHJpbmdpZnkodXNlckNhY2hlKSk7CiAgICAgICAgfSBjYXRjaChlcjIpIHt9CiAgICAgIH0KICAgICAgaWYgKCFiTGlzdCkgewogICAgICAgIHVzZXJDYWNoZUxpc3QucHVzaChjLmZlZWQudXJsKTsKICAgICAgICB0cnkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0ZlZWRseUZ1bGxGZWVkX3VzZXJDYWNoZUxpc3QnLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2FjaGVMaXN0KSk7CiAgICAgICAgfSBjYXRjaChlcjMpIHt9CiAgICAgIH0KICAgIH0KICB9CiAgaWYgKGMuZm91bmQgJiYgaXRlbVNpdGVJbmZvLmxlbmd0aCA+IDApIHsKICAgIHZhciBkYXRhLCBib29sOwogICAgaWYgKGl0ZW1TaXRlSW5mby5zb21lKGZ1bmN0aW9uKGEpIHsKICAgICAgZGF0YSA9IGE7IGJvb2wgPSB0cnVlOwogICAgICBzdC5kaXNhYmxlaXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGIpIHsKICAgICAgICBpZiAoYS51cmwgPT09IGIpIGJvb2wgPSBmYWxzZTsKICAgICAgfSk7CiAgICAgIGlmIChib29sKSByZXR1cm4gdHJ1ZTsKICAgIH0pKSBuZXcgRnVsbEZlZWQoZGF0YSwgYywgZmxhZyk7CiAgICBlbHNlIG5ldyBGdWxsRmVlZChpdGVtU2l0ZUluZm9bMF0sIGMsIGZsYWcpOwogIH0gZWxzZSBzdGF0ZSA9IG51bGw7Cn07Cgp2YXIgaW5pdEZ1bGxGZWVkID0gZnVuY3Rpb24oc2Nyb2xsKSB7CiAgdmFyIGMgPSBuZXcgZ2V0Q3VycmVudEl0ZW0oKTsKICBpZiAoKHN0YXRlICYmIChzdGF0ZSAhPT0gJ2xvYWRlZCcgJiYgc3RhdGUgIT09ICd3YWl0JykpIHx8ICFjLml0ZW0udGl0bGUgfHwgIWMuaW5uZXJDb250ZW50cykgcmV0dXJuOwogIG1lc3NhZ2UobG9jWzU0XSwgLTEpOwogIGlmIChzdC5ub3RyZWFkKSB7CiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHN0Lm5vdHJlYWQpOwogICAgaWYgKHJlLnRlc3QoYy5pdGVtLnRpdGxlKSB8fCByZS50ZXN0KGMuaXRlbS51cmwpIHx8IHJlLnRlc3QoYy5mZWVkLnRpdGxlKSkgewogICAgICBpZiAoc3Qub3Blbml0ZW0pIHsKICAgICAgICBsb2FkaW5nU3R5bGUoJ29wZW4nLCBjLmFydGljbGVDb250YWluZXIpOwogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgR01fb3BlbkluVGFiKGMuaXRlbVVSTCwgdHJ1ZSk7CiAgICAgICAgfSwgMTApOwogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgbG9hZGluZ1N0eWxlKCdyZW1vdmUnLCBjLmFydGljbGVDb250YWluZXIpOwogICAgICAgIH0sIDEwMDApOwogICAgICAgIHJldHVybiBtZXNzYWdlKGxvY1s0OV0sIDIwMDApOwogICAgICB9IGVsc2UgcmV0dXJuIG1lc3NhZ2UobG9jWzhdKTsKICAgIH0KICB9CiAgdmFyIGxhdW5jaCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKGhhc0NsYXNzKGMuaW5uZXJDb250ZW50cywgJ2dtX2Z1bGxmZWVkX2xvYWRlZCcpKSB7CiAgICAgIGlmIChzdC5hdXRvcGFnZXJpemUpIHsKICAgICAgICBGdWxsRmVlZC5jaGVja05leHRQYWdlKGMuaW5uZXJDb250ZW50cyk7CiAgICAgICAgaWYgKG5leHRQYWdlTGluaykgewogICAgICAgICAgYy5pdGVtVVJMID0gbmV4dFBhZ2VMaW5rLmhyZWY7CiAgICAgICAgICBsYXVuY2hGdWxsRmVlZCh1c2VyU2l0ZUluZm8sIGMsICdzZXQnKTsKICAgICAgICAgIGlmICghYy5mb3VuZCkgbGF1bmNoRnVsbEZlZWQodXNlckNhY2hlLCBjLCAnY2FjaGUnKTsKICAgICAgICAgIGlmICghYy5mb3VuZCkgewogICAgICAgICAgICBzaXRlSW5mby5zb21lKGZ1bmN0aW9uKGN0eCkgewogICAgICAgICAgICAgIGlmIChjYWNoZUluZm9bY3R4LnVybF0pIHsKICAgICAgICAgICAgICAgIGxhdW5jaEZ1bGxGZWVkKGNhY2hlSW5mb1tjdHgudXJsXS5pbmZvLCBjLCAnbmV4dCcpOwogICAgICAgICAgICAgICAgcmV0dXJuIGMuZm91bmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghYy5mb3VuZCkgbGF1bmNoRnVsbEZlZWQoW10sIGMsICdzZWFyY2gnKTsKICAgICAgICAgIGxvYWRpbmdTdHlsZSgnYWRkJywgYy5hcnRpY2xlQ29udGFpbmVyKTsKICAgICAgICAgIHJldHVybiBtZXNzYWdlKGxvY1s0XSwgLTEpOwogICAgICAgIH0gZWxzZSBpZiAoIXNjcm9sbCkgewogICAgICAgICAgaWYgKGMuaW5uZXJDb250ZW50cy5jbGFzc05hbWUuc3BsaXQoL1xzKy8pLmZpbHRlcihmdW5jdGlvbihpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKC9eaHR0cC8pLnRlc3QoaSk7CiAgICAgICAgICB9KS5sZW5ndGggPiAxKSByZXR1cm4gbWVzc2FnZShsb2NbN10pOwogICAgICAgICAgZWxzZSByZXR1cm4gbWVzc2FnZShsb2NbOV0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghc2Nyb2xsKSByZXR1cm4gbWVzc2FnZShsb2NbOV0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHNjcm9sbCkgcmV0dXJuOwogICAgICBsYXVuY2hGdWxsRmVlZCh1c2VyU2l0ZUluZm8sIGMsICdzZXQnKTsKICAgICAgaWYgKCFjLmZvdW5kKSBsYXVuY2hGdWxsRmVlZCh1c2VyQ2FjaGUsIGMsICdjYWNoZScpOwogICAgICBpZiAoIWMuZm91bmQgJiYgIXNpdGVJbmZvLnNvbWUoZnVuY3Rpb24oY3R4KSB7CiAgICAgICAgaWYgKGNhY2hlSW5mb1tjdHgudXJsXSkgewogICAgICAgICAgbGF1bmNoRnVsbEZlZWQoY2FjaGVJbmZvW2N0eC51cmxdLmluZm8sIGMsICdmdWxsJyk7CiAgICAgICAgICByZXR1cm4gYy5mb3VuZDsKICAgICAgICB9CiAgICAgIH0pKSBuZXcgRnVsbEZlZWQoe30sIGMsICdzZWFyY2gnKTsKICAgIH0KICB9OwogIHZhciBsb25ndXJsID0gZnVuY3Rpb24odSkgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICB1cmw6ICdodHRwOi8vYXBpLmxvbmd1cmwub3JnL3YyL2V4cGFuZD9mb3JtYXQ9anNvbiZ1cmw9JyArIHUsCiAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGxvbmdVcmwgPSBKU09OLnBhcnNlKHJlcy5yZXNwb25zZVRleHQpWydsb25nLXVybCddOwogICAgICAgICAgICBpZiAobG9uZ1VybCAmJiAvXmh0dHBzPzovLnRlc3QobG9uZ1VybCkgJiYgbG9uZ1VybC5yZXBsYWNlKCdcLycsICcvJykgIT09IGMuaXRlbVVSTCkgewogICAgICAgICAgICAgIGMuaXRlbVVSTCA9IGMuZmVlZC51cmwgPSBsb25nVXJsOwogICAgICAgICAgICAgIGNoZWNrU2hvcnRVcmwoKTsKICAgICAgICAgICAgfSBlbHNlIHVuc2hvcnRlbml0KHUpOwogICAgICAgICAgfSBjYXRjaChlcikgeyB1bnNob3J0ZW5pdCh1KTsgfQogICAgICAgIH0gZWxzZSB1bnNob3J0ZW5pdCh1KTsKICAgICAgfSwKICAgICAgb25lcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgdW5zaG9ydGVuaXQodSk7CiAgICAgIH0KICAgIH0pOwogIH07CiAgdmFyIHVuc2hvcnRlbml0ID0gZnVuY3Rpb24odSkgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICB1cmw6ICdodHRwOi8vd3d3LnVuc2hvcnRlbi5pdC9hcGkxLjAucGhwP3Jlc3BvbnNlRm9ybWF0PXRleHQmc2hvcnRVUkw9JyArIHUsCiAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGxvbmdVcmwgPSByZXMucmVzcG9uc2VUZXh0OwogICAgICAgICAgICBpZiAobG9uZ1VybCAmJiAvXmh0dHBzPzovLnRlc3QobG9uZ1VybCkpIHsKICAgICAgICAgICAgICBjLml0ZW1VUkwgPSBjLmZlZWQudXJsID0gbG9uZ1VybDsKICAgICAgICAgICAgfSBlbHNlIGNoZWNrU2hvcnRVcmwoKTsKICAgICAgICAgIH0gY2F0Y2goZXIpIHt9CiAgICAgICAgICBjaGVja1Nob3J0VXJsKCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBvbmVycm9yOiBmdW5jdGlvbigpIHsKICAgICAgICBjaGVja1Nob3J0VXJsKCk7CiAgICAgIH0KICAgIH0pOwogIH07CiAgdmFyIGNoZWNrU2hvcnRVcmwgPSBmdW5jdGlvbigpIHsKICAgIGlmIChjLml0ZW1VUkwgIT09IHRlbXBVcmwpIHsKICAgICAgdGVtcFVybCA9IGMuaXRlbVVSTDsKICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogJ0hFQUQnLAogICAgICAgIHVybDogYy5pdGVtVVJMLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5maW5hbFVybCkgewogICAgICAgICAgICBpZiAoL15odHRwcz86XC9cL3QuY29cLy4rLy50ZXN0KHJlcy5maW5hbFVybCkpIGxvbmd1cmwocmVzLmZpbmFsVXJsKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgYy5pdGVtVVJMID0gYy5mZWVkLnVybCA9IHJlcy5maW5hbFVybDsKICAgICAgICAgICAgICBsYXVuY2goKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICgoKHJlcy5zdGF0dXMgPj0gMzAxICYmIHJlcy5zdGF0dXMgPD0gMzAzKSB8fCByZXMuc3RhdHVzID09PSAzMDcpICYmIHJlcy5maW5hbFVybCkgewogICAgICAgICAgICBpZiAoWyd0LmNvJywgJ2JpdC5seScsICdnb28uZ2wnLCAnaXMuZ2QnLCAnai5tcCcsICdvdy5seScsICd0aW55dXJsLmNvbSddLnNvbWUoZnVuY3Rpb24oYSkgewogICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKCdeaHR0cHM/Oi8vJyArIGEgKyAnLy4rJykudGVzdChyZXMuZmluYWxVcmwpKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSkpIGxvbmd1cmwocmVzLmZpbmFsVXJsKTsKICAgICAgICAgICAgZWxzZSB1bnNob3J0ZW5pdChyZXMuZmluYWxVcmwpOwogICAgICAgICAgfSBlbHNlIGxhdW5jaCgpOwogICAgICAgIH0sCiAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBsYXVuY2goKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIGxhdW5jaCgpOwogIH07CiAgaWYgKCFzdC5yZXBsYWNlZnVsbGZlZWR1cmwpIHsKICAgIGxhdW5jaCgpOwogICAgcmV0dXJuOwogIH0KICB2YXIgdGVtcFVybCA9IGMuaXRlbVVSTDsKICB2YXIgcmVwID0gc3QucmVwbGFjZWZ1bGxmZWVkdXJsLnJlcGxhY2UoL1xzKy9nLCAnICcpLnNwbGl0KCcgJyk7CiAgaWYgKHJlcC5sZW5ndGggPj0gMikgewogICAgdmFyIGV4Y2x1ZGVVcmwgPSBmdW5jdGlvbihlKSB7CiAgICAgIGUuc29tZShmdW5jdGlvbihhKSB7CiAgICAgICAgaWYgKGEuaHJlZi5zcGxpdCgnLycpWzJdLmluZGV4T2YoJ3huLS0nKSA9PT0gLTEgJiYgL15odHRwcz86XC9cLy4rLy50ZXN0KGEudGV4dENvbnRlbnQpKSB7CiAgICAgICAgICBjLml0ZW1VUkwgPSBjLmZlZWQudXJsID0gYS5ocmVmOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgZm9yKHZhciBpPTA7IGk8cmVwLmxlbmd0aC0xOyBpPWkrMikgewogICAgICBpZiAocmVwW2ldICYmIG5ldyBSZWdFeHAocmVwW2ldKS50ZXN0KGMuaXRlbVVSTCkpIHsKICAgICAgICBpZiAocmVwW2kgKyAxXSAmJiAvXmh0dHAvLnRlc3QocmVwW2kgKyAxXSkpIHsKICAgICAgICAgIGMuaXRlbVVSTCA9IGMuaXRlbVVSTC5yZXBsYWNlKG5ldyBSZWdFeHAocmVwW2ldKSwgcmVwW2kgKyAxXSk7CiAgICAgICAgICBjLmZlZWQudXJsID0gYy5pdGVtVVJMOwogICAgICAgIH0gZWxzZSBpZiAocmVwW2kgKyAxXSA9PT0gJ0xpbmsnKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgdSA9IGdldEVsZW1lbnRzQnlYUGF0aChyZXR1cm5YcGF0aEVudHJ5KCkgKyAnLy9kaXZbY29udGFpbnMoY29uY2F0KCIgIiwgQGNsYXNzLCAiICIpLCAiIGVudHJ5Qm9keSAiKV0vL2EnKTsKICAgICAgICAgICAgaWYgKHUpIGV4Y2x1ZGVVcmwodSk7CiAgICAgICAgICB9IGNhdGNoKGVyKSB7fQogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0gZWxzZSBsYXVuY2goKTsKICBjaGVja1Nob3J0VXJsKCk7Cn07Cgp2YXIgbG9hZGluZ1N0eWxlID0gZnVuY3Rpb24oZmxhZywgZWxtKSB7CiAgaWYgKCFlbG0pIHJldHVybjsKICB2YXIgczEgPSAnZ21fZnVsbGZlZWRfbG9hZGluZyc7CiAgdmFyIHMyID0gJ2dtX2Z1bGxmZWVkX29wZW5lZCc7CiAgaWYgKGZsYWcgPT09ICdhZGQnKSBhZGRDbGFzcyhlbG0sIHMxKTsKICBlbHNlIGlmIChmbGFnID09PSAnb3BlbicpIGFkZENsYXNzKGVsbSwgczIpOwogIGVsc2UgaWYgKGZsYWcgPT09ICdyZW1vdmUnKSB7CiAgICByZW1vdmVDbGFzcyhlbG0sIHMxKTsKICAgIHJlbW92ZUNsYXNzKGVsbSwgczIpOwogIH0KfTsKCnZhciBjcmVhdGVNZXNzYWdlQm94ID0gZnVuY3Rpb24oKSB7CiAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGRpdi5pZCA9ICdnbV9mdWxsZmVlZF9tZXNzYWdlJzsKICBkaXYuY2xhc3NOYW1lID0gJ2dtX2Z1bGxmZWVkX2hpZGRlbic7CiAgZGl2LmlubmVySFRNTCA9ICcnOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsKfTsKCnZhciByZXR1cm5YcGF0aEVudHJ5ID0gZnVuY3Rpb24oKSB7CiAgaWYgKCRpZCgnZmxvYXRpbmdFbnRyeScpICYmICRpZCgnZmxvYXRpbmdFbnRyeScpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zsb2F0aW5nRW50cnlTY3JvbGxlcicpLmxlbmd0aCkKICAgIHJldHVybiAnaWQoImZsb2F0aW5nRW50cnkiKS8vZGl2W2NvbnRhaW5zKGNvbmNhdCgiICIsIEBjbGFzcywgIiAiKSwgIiBmbG9hdGluZ0VudHJ5Q29udGVudCAiKV1bbGFzdCgpXS8vZGl2W2NvbnRhaW5zKGNvbmNhdCgiICIsIEBjbGFzcywgIiAiKSwgIiBmbG9hdGluZ0VudHJ5U2Nyb2xsZXIgIildJzsKICBpZiAoJGlkKCd0aW1lbGluZScpICYmICRpZCgndGltZWxpbmUnKS5jbGFzc0xpc3QuY29udGFpbnMoJ3UxMDBFbnRyeUxpc3QnKSkKICAgIHJldHVybiAnaWQoInRpbWVsaW5lIikvL2Rpdltjb250YWlucyhjb25jYXQoIiAiLCBAY2xhc3MsICIgIiksICIgc2VsZWN0ZWRFbnRyeSAiKV0nOwogIHJldHVybiAnLy9kaXZbY29udGFpbnMoY29uY2F0KCIgIiwgQGNsYXNzLCAiICIpLCAiIGlubGluZUZyYW1lICIpXSc7Cn07Cgp2YXIgZGVidWdMb2cgPSBmYWxzZTsKdmFyIGl0ZW1TaXRlSW5mbyA9IFtdOwp2YXIgbWVzc2FnZUludGVydmFsLCBzY3JvbGxJbnRlcnZhbCwgaW5pdEludGVydmFsOwp2YXIgbmV4dFBhZ2VMaW5rID0gbnVsbCwgcmVhZGluZ1BhZ2VVcmwgPSBudWxsLCBzdGF0ZSA9IG51bGw7CnZhciBzdCwgc2l0ZUluZm8sIHNpdGVJbmZvQVAsIHVzZXJTaXRlSW5mbywgdXNlclNpdGVJbmZvQVA7CnZhciBjYWNoZUluZm8sIGNhY2hlQVBJbmZvLCB1c2VyQ2FjaGUsIHVzZXJDYWNoZUFQLCB1c2VyQ2FjaGVMaXN0LCB1c2VyQ2FjaGVMaXN0QVA7Cgp2YXIgaW5pdCA9IGZ1bmN0aW9uKCkgewogIEZ1bGxGZWVkLmxvYWRTZXR0aW5ncygpOwogIGNhY2hlSW5mbyA9IEZ1bGxGZWVkLmdldENhY2hlKCdjYWNoZScpOwogIGNhY2hlQVBJbmZvID0gRnVsbEZlZWQuZ2V0Q2FjaGUoJ2NhY2hlQVAnKTsKICB1c2VyQ2FjaGUgPSBGdWxsRmVlZC5nZXRDYWNoZSgndXNlckNhY2hlJyk7CiAgdXNlckNhY2hlQVAgPSBGdWxsRmVlZC5nZXRDYWNoZSgndXNlckNhY2hlQVAnKTsKICB1c2VyQ2FjaGVMaXN0ID0gRnVsbEZlZWQuZ2V0Q2FjaGUoJ3VzZXJDYWNoZUxpc3QnKTsKICB1c2VyQ2FjaGVMaXN0QVAgPSBGdWxsRmVlZC5nZXRDYWNoZSgndXNlckNhY2hlTGlzdEFQJyk7CiAgaWYgKEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgJiYgdHlwZW9mIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQgPT09ICdmdW5jdGlvbicpIHsKICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoJ0ZlZWRseSBGdWxsIEZlZWQgLSByZXNldCBjYWNoZScsIGZ1bmN0aW9uKCkgewogICAgICBpZiAod2luZG93LmNvbmZpcm0obG9jWzE1XSkpIEZ1bGxGZWVkLnJlc2V0Q2FjaGUoKTsKICAgIH0pOwogICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnRmVlZGx5IEZ1bGwgRmVlZCAtIGRlbGV0ZSBjYWNoZScsIGZ1bmN0aW9uKCkgewogICAgICBGdWxsRmVlZC5yZW1vdmVDYWNoZSgpOwogICAgfSk7CiAgfQogIEdNX2FkZFN0eWxlKENTUyk7CiAgRnVsbEZlZWQuY3JlYXRlU2V0dGluZ3MoKTsKICBjcmVhdGVNZXNzYWdlQm94KCk7CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihlKSB7CiAgICB2YXIga2V5ID0gKGlzTmFOKHN0LmJhc2VrZXkpKSA/IHN0LmJhc2VrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApIDogTnVtYmVyKHN0LmJhc2VrZXkpOwogICAgdmFyIGVsMSA9ICRpZHMoJ2dlbmVyYWxfa2V5JyksIGVsMiwgZmxhZyA9IGZhbHNlOwogICAgaWYgKGUudGFyZ2V0LmlkID09PSAnZ21fZnVsbGZlZWRfc2V0dGluZ3MtZ2VuZXJhbF9rZXknKSB7CiAgICAgIGVsMiA9ICRpZHMoJ2dlbmVyYWxfa2V5ZGVzYycpOwogICAgICB2YXIgY29kZSA9IGUua2V5Q29kZTsKICAgICAgdmFyIGNoYSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7CiAgICAgIGlmICgvW0EtWl0vLnRlc3QoY2hhKSkgewogICAgICAgIGVsMS52YWx1ZSA9IGNoYTsKICAgICAgICBlbDIudGV4dENvbnRlbnQgPSBsb2NbMjRdOwogICAgICB9IGVsc2UgaWYgKGNvZGUgPCAxNiB8fCBjb2RlID4gMTgpIHsKICAgICAgICBlbDEudmFsdWUgPSBjb2RlOwogICAgICAgIGVsMi50ZXh0Q29udGVudCA9IGxvY1syNV07CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBrZXkgJiYgIS9eaW5wdXR8XnRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSkgewogICAgICBpZiAoZS5hbHRLZXkgJiYgZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkpIHsKICAgICAgICBpZiAod2luZG93LmNvbmZpcm0obG9jWzE1XSkpIEZ1bGxGZWVkLnJlc2V0Q2FjaGUoKTsKICAgICAgfSBlbHNlIGlmIChlLmN0cmxLZXkgJiYgZS5zaGlmdEtleSkgewogICAgICAgIGVsMiA9IGdldEVsZW1lbnRzQnlYUGF0aChyZXR1cm5YcGF0aEVudHJ5KCkgKyAnLy9zcGFuW0BjbGFzcz0iIGdtX2Z1bGxmZWVkX2NoZWNrZWQiXScsIGRvY3VtZW50KTsKICAgICAgICBpZiAoZWwyKSB7CiAgICAgICAgICBlbDIuZm9yRWFjaChmdW5jdGlvbihpKSB7CiAgICAgICAgICAgIGlmIChoYXNDbGFzcyhpLCAnZ21fZnVsbGZlZWRfY2hlY2tlZCcpKSBmbGFnID0gdHJ1ZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoZmxhZykgRnVsbEZlZWQudmlld1NldHRpbmdzKCdhdXRvbG9hZCcpOwogICAgICAgIGVsc2UgRnVsbEZlZWQudmlld1NldHRpbmdzKCk7CiAgICAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5KSB7CiAgICAgICAgaWYgKHN0LmF1dG9sb2FkID09PSAwKSBzdC5hdXRvbG9hZCA9IDE7CiAgICAgICAgZWxzZSBpZiAoc3QuYXV0b2xvYWQgPT09IDEpIHN0LmF1dG9sb2FkID0gMjsKICAgICAgICBlbHNlIGlmIChzdC5hdXRvbG9hZCA9PT0gMikgc3QuYXV0b2xvYWQgPSAzOwogICAgICAgIGVsc2Ugc3QuYXV0b2xvYWQgPSAwOwogICAgICAgIEZ1bGxGZWVkLnNhdmVTZXR0aW5ncygpOwogICAgICAgIG1lc3NhZ2UoJ0F1dG8gTG9hZCA6ICcgKyAoKHN0LmF1dG9sb2FkID09PSAwKSA/IGxvY1s0NF0gOiAoc3QuYXV0b2xvYWQgPT09IDEpID8gbG9jWzc3XSA6IChzdC5hdXRvbG9hZCA9PT0gMikgPyBsb2NbNDVdIDogbG9jWzQ2XSkpOwogICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkpIHsKICAgICAgICBzdC5hdXRvcGFnZXJpemUgPSAhc3QuYXV0b3BhZ2VyaXplOwogICAgICAgIEZ1bGxGZWVkLnNhdmVTZXR0aW5ncygpOwogICAgICAgIG1lc3NhZ2UoJ0F1dG9QYWdlcml6ZSA6ICcgKyAoKHN0LmF1dG9wYWdlcml6ZSkgPyAnPHNwYW4gY2xhc3M9ImdtX2Z1bGxmZWVkX2FwX29uIj5PTjwvc3Bhbj4nIDogJzxzcGFuIGNsYXNzPSJnbV9mdWxsZmVlZF9hcF9vZmYiPk9GRjwvc3Bhbj4nKSk7CiAgICAgIH0gZWxzZSBpbml0RnVsbEZlZWQoKTsKICAgIH0KICAgIEZ1bGxGZWVkLmNoZWNrUmVnaXN0ZXIoKTsKICB9LCBmYWxzZSk7CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICBpZiAoZS5idXR0b24gPj0gMikgcmV0dXJuOwogICAgaWYgKGUuYnV0dG9uID09PSAwICYmIGUudGFyZ2V0LmlkICYmIC9eZ21fZnVsbGZlZWRfc2V0dGluZ3MtLy50ZXN0KGUudGFyZ2V0LmlkKSkgewogICAgICB2YXIgc2V0ID0gJGlkKCdnbV9mdWxsZmVlZF9zZXR0aW5ncycpOwogICAgICB2YXIgd2xUaXRsZSA9ICRpZHMoJ2F1dG9sb2FkX3doaXRlbGlzdF90aXRsZScpOwogICAgICB2YXIgd2xMaXN0ID0gJGlkcygnYXV0b2xvYWRfd2hpdGVsaXN0X2xpc3QnKTsKICAgICAgdmFyIGJsVGl0bGUgPSAkaWRzKCdhdXRvbG9hZF9ibGFja2xpc3RfdGl0bGUnKTsKICAgICAgdmFyIGJsTGlzdCA9ICRpZHMoJ2F1dG9sb2FkX2JsYWNrbGlzdF9saXN0Jyk7CiAgICAgIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLW1lbnUnKSB7CiAgICAgICAgRnVsbEZlZWQudmlld1NldHRpbmdzKCk7CiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1tZW51MicgfHwgZS50YXJnZXQuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1tZW51MmNoaWxkJykgewogICAgICAgICRpZCgnc2V0dGluZ3MtYnV0dG9uJykuYmx1cigpOwogICAgICAgIEZ1bGxGZWVkLnZpZXdTZXR0aW5ncygpOwogICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmlkID09PSAnZ21fZnVsbGZlZWRfc2V0dGluZ3MtZ2VuZXJhbF9rZXloZWxwaWNvbicpIHsKICAgICAgICBpZiAoZS50YXJnZXQubmV4dFNpYmxpbmcuc3R5bGUuZGlzcGxheSAhPT0gJ2Jsb2NrJykKICAgICAgICAgIGUudGFyZ2V0Lm5leHRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGVsc2UgZS50YXJnZXQubmV4dFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLWF1dG9sb2FkX3doaXRlbGlzdF9hZGQnKSB7CiAgICAgICAgaWYgKHdsVGl0bGUudmFsdWUpIHsKICAgICAgICAgIGlmICh3bExpc3QudmFsdWUpIHdsTGlzdC52YWx1ZSArPSAnXG4nICsgd2xUaXRsZS52YWx1ZTsKICAgICAgICAgIGVsc2Ugd2xMaXN0LnZhbHVlID0gd2xUaXRsZS52YWx1ZTsKICAgICAgICAgIHdsVGl0bGUudmFsdWUgPSBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLWF1dG9sb2FkX2JsYWNrbGlzdF9hZGQnKSB7CiAgICAgICAgaWYgKGJsVGl0bGUudmFsdWUpIHsKICAgICAgICAgIGlmIChibExpc3QudmFsdWUpIGJsTGlzdC52YWx1ZSArPSAnXG4nICsgYmxUaXRsZS52YWx1ZTsKICAgICAgICAgIGVsc2UgYmxMaXN0LnZhbHVlID0gYmxUaXRsZS52YWx1ZTsKICAgICAgICAgIGJsVGl0bGUudmFsdWUgPSBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19saW5rJykgewogICAgICAgIGdldEVsZW1lbnRzQnlYUGF0aCgnaWQoImdtX2Z1bGxmZWVkX3NldHRpbmdzLXNpdGVpbmZvIikvL2ZpZWxkc2V0JywgZG9jdW1lbnQpLmZvckVhY2goZnVuY3Rpb24oaSkgewogICAgICAgICAgaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICAgIGdldEVsZW1lbnRzQnlYUGF0aCgnLy9zcGFuW2NvbnRhaW5zKGNvbmNhdCgiICIsIEBjbGFzcywgIiAiKSwgIiBnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19saW5rICIpXScsIGRvY3VtZW50KS5mb3JFYWNoKGZ1bmN0aW9uKGkpIHsKICAgICAgICAgIGlmIChoYXNDbGFzcyhpLCAnc2VsZWN0ZWQnKSkgcmVtb3ZlQ2xhc3MoaSwgJ3NlbGVjdGVkJyk7CiAgICAgICAgfSk7CiAgICAgICAgYWRkQ2xhc3MoZS50YXJnZXQsICdzZWxlY3RlZCcpOwogICAgICAgICRpZChlLnRhcmdldC5pZC5zbGljZSgwLCAtNSkpLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1zZWN1cml0eV9pZnJhbWV0YWcnKSB7CiAgICAgICAgaWYgKCRpZHMoJ3NlY3VyaXR5X2lmcmFtZXRhZycpLmNoZWNrZWQpIHsKICAgICAgICAgICRpZHMoJ3NlY3VyaXR5X2FsbG93aWZyYW1ldXJsJykuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICRpZHMoJ3NlY3VyaXR5X2FsbG93aWZyYW1ldXJsJykucGFyZW50Tm9kZS5zdHlsZS5jb2xvciA9ICdibGFjayc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICRpZHMoJ3NlY3VyaXR5X2FsbG93aWZyYW1ldXJsJykuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgJGlkcygnc2VjdXJpdHlfYWxsb3dpZnJhbWV1cmwnKS5wYXJlbnROb2RlLnN0eWxlLmNvbG9yID0gJ2dyYXknOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLXNvY2lhbF9zb2NpYWxpY29uJykgewogICAgICAgIFsnYnV6enVybCcsICdkZWxpY2lvdXMnLCAnZmFjZWJvb2snLCAnZmMyJywgJ2hhdGVuYScsICdsaXZlZG9vcicsICd0d2l0dGVyJywgJ3lhaG9vJ10uZm9yRWFjaChmdW5jdGlvbihhKSB7CiAgICAgICAgICBpZiAoJGlkcygnc29jaWFsX3NvY2lhbGljb24nKS5jaGVja2VkKSB7CiAgICAgICAgICAgICRpZHMoJ3NvY2lhbF8nICsgYSkuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgJGlkcygnc29jaWFsXycgKyBhKS5wYXJlbnROb2RlLnN0eWxlLmNvbG9yID0gJ2JsYWNrJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRpZHMoJ3NvY2lhbF8nICsgYSkuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAkaWRzKCdzb2NpYWxfJyArIGEpLnBhcmVudE5vZGUuc3R5bGUuY29sb3IgPSAnZ3JheSc7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1ldGNfc2V0dGluZ3NleHBvcnQnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBHTV9zZXRDbGlwYm9hcmQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGlmICh3aW5kb3cuY29uZmlybShsb2NbNjZdKSkgewogICAgICAgICAgICBHTV9zZXRDbGlwYm9hcmQoSlNPTi5zdHJpbmdpZnkoc3QpKTsKICAgICAgICAgICAgbWVzc2FnZShsb2NbNjddLCAzMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2Ugd2luZG93LmNvbmZpcm0obG9jWzY4XSArIEpTT04uc3RyaW5naWZ5KHN0KSk7CiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1ldGNfc2V0dGluZ3NpbXBvcnQnKSB7CiAgICAgICAgdmFyIGltcCA9IHdpbmRvdy5wcm9tcHQobG9jWzY5XSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChpbXAgJiYgaW1wLmxlbmd0aCA+IDEwMCAmJiBKU09OLnBhcnNlKGltcCkpIHsKICAgICAgICAgICAgRnVsbEZlZWQubG9hZFNldHRpbmdzKEpTT04ucGFyc2UoaW1wKSk7CiAgICAgICAgICAgIEZ1bGxGZWVkLnNhdmVTZXR0aW5ncygpOwogICAgICAgICAgICBzZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgbWVzc2FnZShsb2NbNzBdLCAzMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoKGVyMSkgewogICAgICAgICAgbWVzc2FnZShsb2NbNzFdLCAzMDAwLCAnd2FybmluZycpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLWV0Y19zZXR0aW5nc3Jlc2V0JykgewogICAgICAgIGlmICh3aW5kb3cuY29uZmlybShsb2NbNzJdKSkgewogICAgICAgICAgRnVsbEZlZWQubG9hZFNldHRpbmdzKCdyZXNldCcpOwogICAgICAgICAgRnVsbEZlZWQuc2F2ZVNldHRpbmdzKCk7CiAgICAgICAgICBzZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIG1lc3NhZ2UobG9jWzczXSwgMzAwMCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmlkID09PSAnZ21fZnVsbGZlZWRfc2V0dGluZ3MtZXRjX2NhY2hlcmVzZXQnKSB7CiAgICAgICAgaWYgKHdpbmRvdy5jb25maXJtKGxvY1sxNV0pKSBGdWxsRmVlZC5yZXNldENhY2hlKCk7CiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1ldGNfY2FjaGVkZWxldGUnKSB7CiAgICAgICAgRnVsbEZlZWQucmVtb3ZlQ2FjaGUoKTsKICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLW9rJykgewogICAgICAgIHZhciBrZXkgPSAkaWRzKCdnZW5lcmFsX2tleScpLCBoZWkgPSAkaWRzKCdnZW5lcmFsX2FwaGVpZ2h0Jyk7CiAgICAgICAgdmFyIHYgPSBrZXkudmFsdWUsIGggPSBoZWkudmFsdWUsIHByb2JsZW0gPSBmYWxzZTsKICAgICAgICBpZiAodiAmJiAoKGlzTmFOKHYpICYmIHYubGVuZ3RoID09PSAxKSB8fCAoIWlzTmFOKHYpICYmICh2IDwgMTYgfHwgdiA+IDE4KSkpKSBzdC5iYXNla2V5ID0gdjsKICAgICAgICBzdC5hdXRvcGFnZXJpemUgPSAkaWRzKCdnZW5lcmFsX2F1dG9wYWdlcml6ZScpLmNoZWNrZWQ7CiAgICAgICAgaWYgKGggJiYgIWlzTmFOKGgpKSBzdC5hcGhlaWdodCA9IChoIDwgMjAwKSA/IDIwMCA6IChoID4gMjAwMCkgPyAyMDAwIDogaDsKICAgICAgICBzdC5hdXRvc2VhcmNoID0gJGlkcygnZ2VuZXJhbF9hdXRvc2VhcmNoJykuY2hlY2tlZDsKICAgICAgICBzdC5jYW50ZGlzcGxheSA9ICRpZHMoJ2dlbmVyYWxfY2FudGRpc3BsYXknKS5jaGVja2VkOwogICAgICAgIHN0Lm5vdHJlYWQgPSAkaWRzKCdnZW5lcmFsX25vdHJlYWQnKS52YWx1ZTsKICAgICAgICBzdC5vcGVuaXRlbSA9ICRpZHMoJ2dlbmVyYWxfb3Blbml0ZW0nKS5jaGVja2VkOwogICAgICAgIHZhciByZXAgPSBmdW5jdGlvbihzdHIpIHsKICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXihccypceykvZywgJ1skMScpLnJlcGxhY2UoLyhcfSksPyhccyopJC9nLCAnJDEkMl0nKS5yZXBsYWNlKC9cXFxcL2csICdcXCcpLnJlcGxhY2UoL1xcL2csICdcXFxcJykucmVwbGFjZSgvXFxcXFwvXFxcXFwvL2csICdcXC9cXC8nKS5yZXBsYWNlKC8iL2csICInIikucmVwbGFjZSgvKFx7XHMqfDpccyp8J1xzKixccyp8XH1ccyosXHMqKScvZywgJyQxIicpLnJlcGxhY2UoLycoXHMqOnxccyosXHMqInxccyosP1xzKlx9KS9nLCAnIiQxJykucmVwbGFjZSgvKCJccyopLChccypcfSkvZywgJyQxJDInKS5yZXBsYWNlKC9cfShccyopXHsvZywgJ30sJDF7Jyk7CiAgICAgICAgfTsKICAgICAgICB2YXIgc2lmZj0gJGlkcygnc2l0ZWluZm9fZnVsbGZlZWQnKTsKICAgICAgICB2YXIgc2lhcCA9ICRpZHMoJ3NpdGVpbmZvX2F1dG9wYWdlcml6ZScpOwogICAgICAgIHZhciBzaXVmZj0gJGlkcygnc2l0ZWluZm9fdXNlcmZ1bGxmZWVkJyk7CiAgICAgICAgdmFyIHNpdWFwID0gJGlkcygnc2l0ZWluZm9fdXNlcmF1dG9wYWdlcml6ZScpOwogICAgICAgIGlmICghc2lmZi52YWx1ZSkgc2lmZi52YWx1ZSA9ICdbeyJmb3JtYXQiOiAiSlNPTiIsICJ1cmwiOiAiaHR0cDovL3dlZGF0YS5uZXQvZGF0YWJhc2VzL0xEUkZ1bGxGZWVkL2l0ZW1zLmpzb24ifV0nOwogICAgICAgIGlmICghc2lhcC52YWx1ZSkgc2lhcC52YWx1ZSA9ICdbeyJmb3JtYXQiOiAiSlNPTiIsICJ1cmwiOiAiaHR0cDovL3dlZGF0YS5uZXQvZGF0YWJhc2VzL0F1dG9QYWdlcml6ZS9pdGVtcy5qc29uIn1dJzsKICAgICAgICBpZiAoIXNpdWZmLnZhbHVlKSBzaXVmZi52YWx1ZSA9ICdbeyJ1cmwiOiAiIiwgInhwYXRoIjogIiIsICJ0eXBlIjogIiIsICJlbmMiOiAiIn1dJzsKICAgICAgICBpZiAoIXNpdWFwLnZhbHVlKSBzaXVhcC52YWx1ZSA9ICdbeyJ1cmwiOiAiIiwgIm5leHRMaW5rIjogIiIsICJwYWdlRWxlbWVudCI6ICIifV0nOwogICAgICAgIHRyeSB7CiAgICAgICAgICBzaXRlSW5mbyA9IEpTT04ucGFyc2UocmVwKHNpZmYudmFsdWUpKTsKICAgICAgICAgIHN0LnNpdGVpbmZvID0gSlNPTi5zdHJpbmdpZnkoc2l0ZUluZm8pOwogICAgICAgICAgc2lmZi5wYXJlbnROb2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG51bGw7CiAgICAgICAgfSBjYXRjaChlcjIpIHsKICAgICAgICAgIHByb2JsZW0gPSB0cnVlOwogICAgICAgICAgc2lmZi5wYXJlbnROb2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRkNDJzsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHNpdGVJbmZvQVAgPSBKU09OLnBhcnNlKHJlcChzaWFwLnZhbHVlKSk7CiAgICAgICAgICBzdC5zaXRlaW5mb2FwID0gSlNPTi5zdHJpbmdpZnkoc2l0ZUluZm9BUCk7CiAgICAgICAgICBzaWFwLnBhcmVudE5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbnVsbDsKICAgICAgICB9IGNhdGNoKGVyMykgewogICAgICAgICAgcHJvYmxlbSA9IHRydWU7CiAgICAgICAgICBzaWFwLnBhcmVudE5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNGQ0MnOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgdXNlclNpdGVJbmZvID0gSlNPTi5wYXJzZShyZXAoc2l1ZmYudmFsdWUpKTsKICAgICAgICAgIHN0LnVzZXJzaXRlaW5mbyA9IEpTT04uc3RyaW5naWZ5KHVzZXJTaXRlSW5mbyk7CiAgICAgICAgICBzaXVmZi5wYXJlbnROb2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG51bGw7CiAgICAgICAgfSBjYXRjaChlcjQpIHsKICAgICAgICAgIHByb2JsZW0gPSB0cnVlOwogICAgICAgICAgc2l1ZmYucGFyZW50Tm9kZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZDQyc7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICB1c2VyU2l0ZUluZm9BUCA9IEpTT04ucGFyc2UocmVwKHNpdWFwLnZhbHVlKSk7CiAgICAgICAgICBzdC51c2Vyc2l0ZWluZm9hcCA9IEpTT04uc3RyaW5naWZ5KHVzZXJTaXRlSW5mb0FQKTsKICAgICAgICAgIHNpdWFwLnBhcmVudE5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbnVsbDsKICAgICAgICB9IGNhdGNoKGVyNSkgewogICAgICAgICAgcHJvYmxlbSA9IHRydWU7CiAgICAgICAgICBzaXVhcC5wYXJlbnROb2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRkNDJzsKICAgICAgICB9CiAgICAgICAgdmFyIHNpZHUgPSAkaWRzKCdzaXRlaW5mb19kaXNhYmxlaXRlbScpOwogICAgICAgIGlmIChzaWR1KSB7CiAgICAgICAgICBzdC5kaXNhYmxlaXRlbSA9IHNpZHUudmFsdWUuc3BsaXQoJ1xuJykuZmlsdGVyKGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgaWYgKGkpIHJldHVybiBpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHN0LmF1dG9sb2FkID0gJGlkcygnYXV0b2xvYWRfbW9kZScpLnNlbGVjdGVkSW5kZXg7CiAgICAgICAgaWYgKHdsTGlzdCkgewogICAgICAgICAgc3QuYXV0b2xvYWRmZWVkID0gd2xMaXN0LnZhbHVlLnNwbGl0KCdcbicpLmZpbHRlcihmdW5jdGlvbihpKSB7CiAgICAgICAgICAgIGlmIChpKSByZXR1cm4gaTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoYmxMaXN0KSB7CiAgICAgICAgICBzdC5ub3Rsb2FkZmVlZCA9IGJsTGlzdC52YWx1ZS5zcGxpdCgnXG4nKS5maWx0ZXIoZnVuY3Rpb24oaSkgewogICAgICAgICAgICBpZiAoaSkgcmV0dXJuIGk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgd2xUaXRsZS52YWx1ZSA9IG51bGw7CiAgICAgICAgYmxUaXRsZS52YWx1ZSA9IG51bGw7CiAgICAgICAgc3Qubm9zY3JpcHR0YWcgPSAkaWRzKCdzZWN1cml0eV9ub3NjcmlwdHRhZycpLmNoZWNrZWQ7CiAgICAgICAgc3QuaWZyYW1ldGFnID0gJGlkcygnc2VjdXJpdHlfaWZyYW1ldGFnJykuY2hlY2tlZDsKICAgICAgICBzdC5hbGxvd2lmcmFtZXVybCA9ICRpZHMoJ3NlY3VyaXR5X2FsbG93aWZyYW1ldXJsJykudmFsdWU7CiAgICAgICAgc3QuZGVueW5leHR1cmwgPSAkaWRzKCdzZWN1cml0eV9kZW55bmV4dHVybCcpLnZhbHVlOwogICAgICAgIHN0LmFsbG93bmV4dHVybCA9ICRpZHMoJ3NlY3VyaXR5X2FsbG93bmV4dHVybCcpLnZhbHVlOwogICAgICAgIHN0LnNvY2lhbGljb24gPSAkaWRzKCdzb2NpYWxfc29jaWFsaWNvbicpLmNoZWNrZWQ7CiAgICAgICAgc3Quc29jaWFsYnV6enVybCA9ICRpZHMoJ3NvY2lhbF9idXp6dXJsJykuY2hlY2tlZDsKICAgICAgICBzdC5zb2NpYWxkZWxpY2lvdXMgPSAkaWRzKCdzb2NpYWxfZGVsaWNpb3VzJykuY2hlY2tlZDsKICAgICAgICBzdC5zb2NpYWxmYWNlYm9vayA9ICRpZHMoJ3NvY2lhbF9mYWNlYm9vaycpLmNoZWNrZWQ7CiAgICAgICAgc3Quc29jaWFsZmMyID0gJGlkcygnc29jaWFsX2ZjMicpLmNoZWNrZWQ7CiAgICAgICAgc3Quc29jaWFsaGF0ZW5hID0gJGlkcygnc29jaWFsX2hhdGVuYScpLmNoZWNrZWQ7CiAgICAgICAgc3Quc29jaWFsbGl2ZWRvb3IgPSAkaWRzKCdzb2NpYWxfbGl2ZWRvb3InKS5jaGVja2VkOwogICAgICAgIHN0LnNvY2lhbHR3aXR0ZXIgPSAkaWRzKCdzb2NpYWxfdHdpdHRlcicpLmNoZWNrZWQ7CiAgICAgICAgc3Quc29jaWFseWFob28gPSAkaWRzKCdzb2NpYWxfeWFob28nKS5jaGVja2VkOwogICAgICAgIGRlYnVnTG9nID0gJGlkcygnZXRjX2RlYnVnbG9nJykuY2hlY2tlZDsKICAgICAgICBzdC5yZXBsYWNlZnVsbGZlZWR1cmwgPSAkaWRzKCdldGNfcmVwbGFjZWZ1bGxmZWVkdXJsJykudmFsdWU7CiAgICAgICAgaWYgKCFwcm9ibGVtKSB7CiAgICAgICAgICBzZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIEZ1bGxGZWVkLnNhdmVTZXR0aW5ncygpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dtX2Z1bGxmZWVkX3NldHRpbmdzLWNhbmNlbCcpIHsKICAgICAgICBzZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfQogICAgfSBlbHNlIGlmIChlLmJ1dHRvbiA9PT0gMCAmJiBlLnRhcmdldC5jbGFzc05hbWUgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy10aXRsZScpIHsKICAgICAgdmFyIHRhYiA9ICRpZHMoJ3RhYicpLmNoaWxkTm9kZXM7CiAgICAgIHZhciBsaXN0ID0gJGlkcygnbGlzdCcpLmNoaWxkTm9kZXM7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGhhc0NsYXNzKHRhYltpXSwgJ3NlbGVjdGVkJykpIHsKICAgICAgICAgIHJlbW92ZUNsYXNzKHRhYltpXSwgJ3NlbGVjdGVkJyk7CiAgICAgICAgICBsaXN0W2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQogICAgICAgIGlmICh0YWJbaV0udGV4dENvbnRlbnQgPT09IGUudGFyZ2V0LnRleHRDb250ZW50KSB7CiAgICAgICAgICBhZGRDbGFzcyh0YWJbaV0sICdzZWxlY3RlZCcpOwogICAgICAgICAgbGlzdFtpXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaGFzQ2xhc3MoZS50YXJnZXQsICdnbV9mdWxsZmVlZF9jaGVja2VkX2ljb24nKSkgewogICAgICBpZiAoKGUuYnV0dG9uID09PSAwICYmIGUuY3RybEtleSkgfHwgZS5idXR0b24gPT09IDEpIEZ1bGxGZWVkLnZpZXdTZXR0aW5ncygnYXV0b2xvYWQnKTsKICAgICAgZWxzZSBpZiAoZS5idXR0b24gPT09IDApIGluaXRGdWxsRmVlZCgpOwogICAgfSBlbHNlIGlmIChlLmJ1dHRvbiA9PT0gMCAmJiBlLnRhcmdldC5wYXJlbnROb2RlICYmIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSAmJiBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQgPT09ICdnbV9mdWxsZmVlZF9zZXR0aW5ncy1zaXRlaW5mb19kaXNhYmxlaXRlbWxpc3QnICYmIGUudGFyZ2V0Lm5vZGVOYW1lID09PSAnSU5QVVQnKSB7CiAgICAgIHZhciB0ZW1wID0gJGlkcygnc2l0ZWluZm9fZGlzYWJsZWl0ZW0nKS52YWx1ZS5zcGxpdCgnXG4nKTsKICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICB2YXIgY2hrYm94ID0gZ2V0RWxlbWVudHNCeVhQYXRoKCcvL2lucHV0JywgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsb25lTm9kZSh0cnVlKSk7CiAgICAgICAgaWYgKGNoa2JveCAmJiAhY2hrYm94LnNvbWUoZnVuY3Rpb24oYSkgewogICAgICAgICAgaWYgKCFhLmNoZWNrZWQpIHJldHVybiB0cnVlOwogICAgICAgIH0pKSB7CiAgICAgICAgICBlLnRhcmdldC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHRlbXAucHVzaChlLnRhcmdldC5uZXh0U2libGluZy50ZXh0Q29udGVudCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGVtcCA9IHRlbXAuZmlsdGVyKGZ1bmN0aW9uKGEpIHsKICAgICAgICAgIHJldHVybiBhICE9PSBlLnRhcmdldC5uZXh0U2libGluZy50ZXh0Q29udGVudDsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0ZW1wID0gdGVtcC5maWx0ZXIoZnVuY3Rpb24oYSkgewogICAgICAgIHJldHVybiAhL15ccyokLy50ZXN0KGEpOwogICAgICB9KTsKICAgICAgJGlkcygnc2l0ZWluZm9fZGlzYWJsZWl0ZW0nKS52YWx1ZSA9IHRlbXAuam9pbignXG4nKTsKICAgIH0gZWxzZSBpZiAoZS5idXR0b24gPT09IDApIEZ1bGxGZWVkLmNoZWNrUmVnaXN0ZXIoKTsKICB9LCB0cnVlKTsKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHsKICAgIGlmIChzdC5hdXRvcGFnZXJpemUpIEZ1bGxGZWVkLmNoZWNrU2Nyb2xsKCk7CiAgfSwgdHJ1ZSk7Cn07Cgppbml0SW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgdmFyIGUgPSAkaWQoJ2ZlZWRseVRpdGxlQmFyJyk7CiAgaWYgKGUgJiYgZS5oYXNDaGlsZE5vZGVzKCkpIHsKICAgIHdpbmRvdy5jbGVhckludGVydmFsKGluaXRJbnRlcnZhbCk7CiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgaW5pdCgpOwogICAgfSwgMTAwMCk7CiAgfQp9LCA1MDApOwoKLy8gPT0gW1V0aWxpdHldID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiByZW1vdmVYU1NSaXNrcyhodG1sZG9jKSB7CiAgdmFyIGF0dHIgPSAnYWxsb3dTY3JpcHRBY2Nlc3MnOwogIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaHRtbGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZW1iZWQnKSwgZnVuY3Rpb24oZW1iZWQpIHsKICAgIGlmIChlbWJlZC5oYXNBdHRyaWJ1dGUoYXR0cikpIGVtYmVkLnNldEF0dHJpYnV0ZShhdHRyLCAnbmV2ZXInKTsKICB9KTsKICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGh0bWxkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcmFtJyksIGZ1bmN0aW9uKHBhcmFtKSB7CiAgICBpZiAocGFyYW0uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09IGF0dHIpIHBhcmFtLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnbmV2ZXInKTsKICB9KTsKfQoKZnVuY3Rpb24gc2VhcmNoRW50cnkoaHRtbGRvYykgewogIHZhciBhck0gPSBbJ2hlbnRyeScsICd4Zm9sa2VudHJ5JywgJ2F1dG9wYWdlcml6ZV9wYWdlX2VsZW1lbnQnXTsKICB2YXIgYXIxID0gWydhcnRpY2xlYm9keScsICdhcnRpY2xlYm94JywgJ2FydGljbGVzZWN0aW9uJywgJ2FydGljbGV0YWJsZScsICdhcnRpY2xlc2JvZHknLCAnYXJ0aWNsZXNib3gnLCAnYXJ0aWNsZXNzZWN0aW9uJywgJ2FydGljbGVzdGFibGUnLCAnYmxvY2tzdG9yeScsICdibG9nYm9keScsICdjZW50ZXInLCAnZW50bHlib2R5JywgJ2VudGx5dGV4dCcsICdlbnRyeWJvZHknLCAnZW50cnljb250ZW50JywgJ2VudHJ5dGFibGUnLCAnZW50cnl0ZXh0JywgJ21haW5hcnRpY2xlJywgJ21haW50ZXh0JywgJ21haW50eHQnLCAnc2luZ2xlY29udGVudCcsICdzdG9yeWNvbnRlbnQnLCAneWptdCddOwogIHZhciBhcjIgPSBbJ2Jsb2NrbGVhZicsICdib3hjb250ZW50JywgJ2NvbnRlbnRib2R5JywgJ2NvbnRlbnRib3gnLCAnY29udGVudGlubmVyJywgJ2NvbnRlbnR0ZXh0JywgJ2NvbnRlbnRzYm9keScsICdjb250ZW50c2JveCcsICdjb250ZW50c2lubmVyJywgJ2NvbnRlbnRzdGV4dCcsICdtYWluY29udGVudCcsICdtYWluZnJhbWUnLCAnbWlkZGxlY29udGVudCcsICdtaWRkbGVjb250YWluZXInLCAnbmV3c2JvZHknLCAncG9zdGJvZHknLCAncG9zdGNvbnRlbnQnLCAndGV4dGJvZHknLCAna2lqaScsICduZXdhcnQnXTsKICB2YXIgYXIzID0gWydhcnRpY2xlJywgJ2Jsb2cnLCAnYm9keScsICdjb2x1bW4nLCAnY29udGVudCcsICdlbnRyeScsICdtYWluJywgJ21pZGRsZScsICdwYWdlJywgJ3Bvc3QnLCAnc2VjdGlvbicsICdzdG9yeScsICd0ZXh0JywgJ2VudHJpZXMnXTsKICB2YXIgczEgPSAnLy8qW2NvbnRhaW5zKHRyYW5zbGF0ZShjb25jYXQoJzsKICB2YXIgczIgPSAnQGlkLCAiICIsIEBjbGFzcyc7CiAgdmFyIHMzID0gJyksICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWi1fICIsICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIpLCAiJzsKICB2YXIgczQgPSAnIildJzsKICB2YXIgbk0gPSBhck0ubGVuZ3RoLCBuMSA9IGFyMS5sZW5ndGgsIG4yID0gYXIyLmxlbmd0aCwgbjMgPSBhcjMubGVuZ3RoOwogIHZhciBtYWtlWHBhdGggPSBmdW5jdGlvbihhciwgbGVuLCBzcCkgewogICAgdmFyIHggPSBbXTsKICAgIGFyLmZvckVhY2goZnVuY3Rpb24oYSwgaSkgewogICAgICBpZiAoc3ApIHgucHVzaChzMSArICciICIsICcgKyBzMiArICcsICIgIicgKyBzMyArICcgJyArIGEgKyAnICcgKyBzNCk7CiAgICAgIGVsc2UgeC5wdXNoKHMxICsgczIgKyBzMyArIGEgKyBzNCk7CiAgICAgIGlmIChsZW4gPiBpICsgMSkgeC5wdXNoKCd8Jyk7CiAgICB9KTsKICAgIHJldHVybiB4LmpvaW4oJycpOwogIH07CiAgdmFyIHhwYXRoID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgYXIgPSBbJ2RhdGUnLCAnZm9vdCcsICdoZWFkJywgJ21lZGlhJywgJ21lbnUnLCAnbmF2YmFyJywgJ25hdmknLCAnc2lkZScsICd0b29sJywgJ3dpZGdldCddOwogICAgdmFyIHMxID0gJ1tub3QoKC58Li8vKnxhbmNlc3Rvci1vci1zZWxmOjoqKVtjb250YWlucyh0cmFuc2xhdGUoY29uY2F0KEBpZCwgIiAiLCBAY2xhc3MpLCAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVotXyIsICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIpLCAiJzsKICAgIHZhciBzMiA9ICciKV0pXSc7CiAgICB2YXIgeCA9IFsnLy8qW25vdCguLy9oZWFkfGFuY2VzdG9yLW9yLXNlbGY6OmhlYWQpXVtub3QoLi8vbGlua3xhbmNlc3Rvci1vci1zZWxmOjpsaW5rKV1bbm90KC4vL3N0eWxlfGFuY2VzdG9yLW9yLXNlbGY6OnN0eWxlKV0nXTsKICAgIGFyLmZvckVhY2goZnVuY3Rpb24oYSkgewogICAgICB4LnB1c2goczEgKyBhICsgczIpOwogICAgfSk7CiAgICByZXR1cm4geC5qb2luKCcnKTsKICB9OwogIAogIHRyeSB7CiAgICB2YXIgbWF4ID0gMCwgZGF0YTsKICAgIHZhciBlbG1zID0gZ2V0RWxlbWVudHNCeVhQYXRoKG1ha2VYcGF0aChhck0sIG5NLCB0cnVlKSwgaHRtbGRvYyk7CiAgICBpZiAoIWVsbXMpIGVsbXMgPSBnZXRFbGVtZW50c0J5WFBhdGgobWFrZVhwYXRoKGFyMSwgbjEsIHRydWUpLCBodG1sZG9jKTsKICAgIGlmICghZWxtcykgZWxtcyA9IGdldEVsZW1lbnRzQnlYUGF0aChtYWtlWHBhdGgoYXIxLCBuMSwgZmFsc2UpLCBodG1sZG9jKTsKICAgIGlmICghZWxtcykgZWxtcyA9IGdldEVsZW1lbnRzQnlYUGF0aChtYWtlWHBhdGgoYXIyLCBuMiwgdHJ1ZSksIGh0bWxkb2MpOwogICAgaWYgKCFlbG1zKSBlbG1zID0gZ2V0RWxlbWVudHNCeVhQYXRoKG1ha2VYcGF0aChhcjIsIG4yLCBmYWxzZSksIGh0bWxkb2MpOwogICAgaWYgKCFlbG1zKSBlbG1zID0gZ2V0RWxlbWVudHNCeVhQYXRoKG1ha2VYcGF0aChhcjMsIG4zLCB0cnVlKSwgaHRtbGRvYyk7CiAgICBpZiAoIWVsbXMpIGVsbXMgPSBnZXRFbGVtZW50c0J5WFBhdGgobWFrZVhwYXRoKGFyMywgbjMsIGZhbHNlKSwgaHRtbGRvYyk7CiAgICBpZiAoIWVsbXMpIGVsbXMgPSBnZXRFbGVtZW50c0J5WFBhdGgoeHBhdGgoKSwgaHRtbGRvYyk7CiAgICBpZiAoIWVsbXMpIHJldHVybiBudWxsOwogICAgZWxtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgaWYgKHR5cGVvZiBlLnRleHRDb250ZW50ICE9PSAnc3RyaW5nJykgcmV0dXJuOwogICAgICB2YXIgbiA9IGUudGV4dENvbnRlbnQucmVwbGFjZSgvXlxzK3xccyskfCg/OlxyP1xufFxyKXsyLH0vZywgJycpLmxlbmd0aDsKICAgICAgaWYgKG1heCA8IG4pIHsKICAgICAgICBtYXggPSBuOwogICAgICAgIGRhdGEgPSBlOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiAoZGF0YSkgPyBbZGF0YV0gOiBudWxsOwogIH0gY2F0Y2goZSkgewogICAgcmV0dXJuIG51bGw7CiAgfQp9CgpmdW5jdGlvbiByZWxhdGl2ZVRvQWJzb2x1dGVQYXRoKGh0bWxkb2MsIGJhc2UpIHsKICB2YXIgdG9wID0gL15odHRwcz86XC9cL1teXC9dKy8uZXhlYyhiYXNlKVswXTsKICB2YXIgY3VycmVudCA9IGJhc2UucmVwbGFjZSgvXC9bXlwvXSskLywgJy8nKSwgdXJsOwogIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaHRtbGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpLCBmdW5jdGlvbihhKSB7CiAgICB1cmwgPSBhLmdldEF0dHJpYnV0ZSgnaHJlZicpOwogICAgaWYgKHVybCkgewogICAgICBpZiAodXJsLmluZGV4T2YoJyAnKSA9PT0gMCkgdXJsID0gdXJsLnJlcGxhY2UoL15ccysoLispLywgIiQxIik7CiAgICAgIGEuaHJlZiA9IF9yZWwyYWJzKHVybCwgdG9wLCBjdXJyZW50LCBiYXNlKTsKICAgIH0KICB9KTsKICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGh0bWxkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpLCBmdW5jdGlvbihpbWcpIHsKICAgIHVybCA9IGltZy5nZXRBdHRyaWJ1dGUoJ3NyYycpOwogICAgaWYgKHVybCkgewogICAgICBpZiAodXJsLmluZGV4T2YoJyAnKSA9PT0gMCkgdXJsID0gdXJsLnJlcGxhY2UoL15ccysoLispLywgIiQxIik7CiAgICAgIGltZy5zcmMgPSBfcmVsMmFicyh1cmwsIHRvcCwgY3VycmVudCwgYmFzZSk7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIF9yZWwyYWJzKHVybCwgdG9wLCBjdXJyZW50LCBiYXNlKSB7CiAgcmV0dXJuIChuZXcgUmVnRXhwKCdeaHR0cHM/Oi8vJykudGVzdCh1cmwpKSA/IHVybCA6CiAgICAgICh1cmwuaW5kZXhPZignLycpID09PSAwKSA/IHRvcCArIHVybCA6CiAgICAgICh1cmwuaW5kZXhPZignIycpID09PSAwKSA/IGJhc2UgKyB1cmwgOiBjdXJyZW50ICsgdXJsOwp9CgpmdW5jdGlvbiBtZXNzYWdlKG1lcywgZHVyLCB0eXApIHsKICB2YXIgYm94ID0gJGlkKCdnbV9mdWxsZmVlZF9tZXNzYWdlJyk7CiAgaWYgKCFib3gpIHJldHVybjsKICB2YXIgZHVyYSA9IChkdXIgPCAwKSA/IDMwMDAwMCA6ICghZHVyKSA/IDE1MDAgOiBkdXI7CiAgdmFyIHR5cGUgPSB0eXA7CiAgYm94LmlubmVySFRNTCA9IG1lczsKICBpZiAoaGFzQ2xhc3MoYm94LCAnZ21fZnVsbGZlZWRfd2FybmluZycpKSByZW1vdmVDbGFzcyhib3gsICdnbV9mdWxsZmVlZF93YXJuaW5nJyk7CiAgaWYgKHR5cGUpIGFkZENsYXNzKGJveCwgJ2dtX2Z1bGxmZWVkXycgKyB0eXBlKTsKICBpZiAoaGFzQ2xhc3MoYm94LCAnZ21fZnVsbGZlZWRfaGlkZGVuJykpIHJlbW92ZUNsYXNzKGJveCwgJ2dtX2Z1bGxmZWVkX2hpZGRlbicpOwogIHdpbmRvdy5jbGVhclRpbWVvdXQobWVzc2FnZUludGVydmFsKTsKICBtZXNzYWdlSW50ZXJ2YWwgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIGFkZENsYXNzKGJveCwgJ2dtX2Z1bGxmZWVkX2hpZGRlbicpOwogICAgaWYgKHR5cGUpIHJlbW92ZUNsYXNzKGJveCwgJ2dtX2Z1bGxmZWVkXycgKyB0eXBlKTsKICAgIGJveC5pbm5lckhUTUwgPSAnJzsKICB9LCBkdXJhKTsKfQoKLy8gQXV0b1BhZ2VyaXplIChjKSBpZDpzd2R5aApmdW5jdGlvbiBjcmVhdGVIVE1MRG9jdW1lbnRCeVN0cmluZyhzdHIpIHsKICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAnSFRNTCcpCiAgICByZXR1cm4gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhzdHIsICdhcHBsaWNhdGlvbi94aHRtbCt4bWwnKTsKICB2YXIgaHRtbCA9IHN0cmlwX2h0bWxfdGFnKHN0ciksIGh0bWxEb2M7CiAgdHJ5IHsKICAgIGh0bWxEb2MgPSBkb2N1bWVudC5jbG9uZU5vZGUoZmFsc2UpOwogICAgaHRtbERvYy5hcHBlbmRDaGlsZChodG1sRG9jLmltcG9ydE5vZGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBmYWxzZSkpOwogIH0gY2F0Y2goZSkgewogICAgaHRtbERvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJywgJ2h0bWwnLCBudWxsKTsKICB9CiAgdmFyIGZyYWdtZW50ID0gY3JlYXRlRG9jdW1lbnRGcmFnbWVudEJ5U3RyaW5nKGh0bWwpOwogIHRyeSB7CiAgICBmcmFnbWVudCA9IGh0bWxEb2MuYWRvcHROb2RlKGZyYWdtZW50KTsKICB9IGNhdGNoKGUpIHsKICAgIGZyYWdtZW50ID0gaHRtbERvYy5pbXBvcnROb2RlKGZyYWdtZW50LCB0cnVlKTsKICB9CiAgaHRtbERvYy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpOwogIHJldHVybiBodG1sRG9jOwp9CgovLyBBdXRvUGFnZXJpemUgKGMpIGlkOnN3ZHloCmZ1bmN0aW9uIGdldEVsZW1lbnRzQnlYUGF0aCh4cGF0aCwgbm9kZSkgewogIHZhciBzcyA9IGdldFhQYXRoUmVzdWx0KHhwYXRoLCBub2RlLCA3KTsKICB2YXIgZGF0YSA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgc3Muc25hcHNob3RMZW5ndGg7IGkrKykgZGF0YS5wdXNoKHNzLnNuYXBzaG90SXRlbShpKSk7CiAgcmV0dXJuIChkYXRhLmxlbmd0aCA+IDApID8gZGF0YSA6IG51bGw7Cn0KCi8vIEF1dG9QYWdlcml6ZSAoYykgaWQ6c3dkeWgKZnVuY3Rpb24gZ2V0Rmlyc3RFbGVtZW50QnlYUGF0aCh4cGF0aCwgbm9kZSkgewogIHZhciByZXN1bHQgPSBnZXRYUGF0aFJlc3VsdCh4cGF0aCwgbm9kZSwgOSk7CiAgcmV0dXJuIHJlc3VsdC5zaW5nbGVOb2RlVmFsdWU7Cn0KCi8vIEF1dG9QYWdlcml6ZSAoYykgaWQ6c3dkeWgKZnVuY3Rpb24gZ2V0WFBhdGhSZXN1bHQoeHBhdGgsIG5vZCwgcmVzdWx0VHlwZSkgewogIHZhciBub2RlID0gbm9kIHx8IGRvY3VtZW50OwogIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZTsKICB2YXIgcmVzb2x2ZXIgPSBkb2MuY3JlYXRlTlNSZXNvbHZlcihub2RlLmRvY3VtZW50RWxlbWVudCB8fCBub2RlKTsKICB2YXIgZGVmYXVsdE5TID0gbnVsbDsKICB0cnkgewogICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IG5vZGUuRE9DVU1FTlRfTk9ERSkgZGVmYXVsdE5TID0gbm9kZS5kb2N1bWVudEVsZW1lbnQubG9va3VwTmFtZXNwYWNlVVJJKG51bGwpOwogICAgZWxzZSBkZWZhdWx0TlMgPSBub2RlLmxvb2t1cE5hbWVzcGFjZVVSSShudWxsKTsKICB9IGNhdGNoKGUpIHt9CiAgaWYgKGRlZmF1bHROUykgewogICAgdmFyIGRlZmF1bHRQcmVmaXggPSAnX19kZWZhdWx0X18nOwogICAgeHBhdGggPSBhZGREZWZhdWx0UHJlZml4KHhwYXRoLCBkZWZhdWx0UHJlZml4KTsKICAgIHZhciBkZWZhdWx0UmVzb2x2ZXIgPSByZXNvbHZlcjsKICAgIHJlc29sdmVyID0gZnVuY3Rpb24ocHJlZml4KSB7CiAgICAgIHJldHVybiAocHJlZml4ID09PSBkZWZhdWx0UHJlZml4KSA/IGRlZmF1bHROUyA6IGRlZmF1bHRSZXNvbHZlci5sb29rdXBOYW1lc3BhY2VVUkkocHJlZml4KTsKICAgIH07CiAgfQogIHJldHVybiBkb2MuZXZhbHVhdGUoeHBhdGgsIG5vZGUsIHJlc29sdmVyLCByZXN1bHRUeXBlLCBudWxsKTsKfQoKLy8gQXV0b1BhZ2VyaXplIChjKSBpZDpzd2R5aApmdW5jdGlvbiBhZGREZWZhdWx0UHJlZml4KHhwYXRoLCBwcmVmaXgpIHsKICB2YXIgdG9rZW5QYXR0ZXJuID0gLyhbQS1aYS16X1x1MDBjMC1cdWZmZmRdW1x3XC0uXHUwMGI3LVx1ZmZmZF0qfFwqKVxzKig6Oj98XCgpP3woIi4qPyJ8Jy4qPyd8XGQrKD86XC5cZCopP3xcLig/OlwufFxkKyk/fFtcKVxdXSl8KFwvXC8/fCE9fFs8Pl09P3xbXChcW3wsPStcLV0pfChbQCRdKS9nOwogIHZhciBURVJNID0gMSwgT1BFUkFUT1IgPSAyLCBNT0RJRklFUiA9IDM7CiAgdmFyIHRva2VuVHlwZSA9IE9QRVJBVE9SOwogIHByZWZpeCArPSAnOic7CiAgZnVuY3Rpb24gcmVwbGFjZXIodG9rZW4sIGlkZW50aWZpZXIsIHN1ZmZpeCwgdGVybSwgb3BlcmF0b3IpIHsKICAgIGlmIChzdWZmaXgpIHRva2VuVHlwZSA9IChzdWZmaXggPT09ICc6JyB8fCAoc3VmZml4ID09PSAnOjonICYmIChpZGVudGlmaWVyID09PSAnYXR0cmlidXRlJyB8fCBpZGVudGlmaWVyID09PSAnbmFtZXNwYWNlJykpKSA/IE1PRElGSUVSIDogT1BFUkFUT1I7CiAgICBlbHNlIGlmIChpZGVudGlmaWVyKSB7CiAgICAgIGlmICh0b2tlblR5cGUgPT09IE9QRVJBVE9SICYmIGlkZW50aWZpZXIgIT09ICcqJykgdG9rZW4gPSBwcmVmaXggKyB0b2tlbjsKICAgICAgdG9rZW5UeXBlID0gKHRva2VuVHlwZSA9PT0gVEVSTSkgPyBPUEVSQVRPUiA6IFRFUk07CiAgICB9IGVsc2UgdG9rZW5UeXBlID0gKHRlcm0pID8gVEVSTSA6IChvcGVyYXRvcikgPyBPUEVSQVRPUiA6IE1PRElGSUVSOwogICAgcmV0dXJuIHRva2VuOwogIH0KICByZXR1cm4geHBhdGgucmVwbGFjZSh0b2tlblBhdHRlcm4sIHJlcGxhY2VyKTsKfQoKLy8gQXV0b1BhZ2VyaXplIChjKSBpZDpzd2R5aApmdW5jdGlvbiBjcmVhdGVEb2N1bWVudEZyYWdtZW50QnlTdHJpbmcoc3RyKSB7CiAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICByYW5nZS5zZXRTdGFydEFmdGVyKGRvY3VtZW50LmJvZHkpOwogIHJldHVybiByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoc3RyKTsKfQoKLy8gQXV0b1BhZ2VyaXplIChjKSBpZDpzd2R5aApmdW5jdGlvbiBzdHJpcF9odG1sX3RhZyhzdHIpIHsKICB2YXIgY2h1bmtzID0gc3RyLnNwbGl0KC8oPGh0bWwoPzpbIFx0XHJcbl1bXj5dKik/PikvKTsKICBpZiAoY2h1bmtzLmxlbmd0aCA+PSAzKSBjaHVua3Muc3BsaWNlKDAsIDIpOwogIHN0ciA9IGNodW5rcy5qb2luKCcnKTsKICBjaHVua3MgPSBzdHIuc3BsaXQoLyg8XC9odG1sWyBcdFxyXG5dKj4pLyk7CiAgaWYgKGNodW5rcy5sZW5ndGggPj0gMykgY2h1bmtzLnNwbGljZShjaHVua3MubGVuZ3RoIC0gMik7CiAgcmV0dXJuIGNodW5rcy5qb2luKCcnKTsKfQoKZnVuY3Rpb24gcGF0aFRvVVJMKHVybCwgcGF0aCkgewogIHZhciByZSA9IChwYXRoLmluZGV4T2YoJy8nKSA9PT0gMCkgPyAvXihbYS16QS1aXSs6XC9cL1teXC9dKylcLy4qJC8gOiAvXiguKlwvKS4qJC87CiAgcmV0dXJuIHVybC5yZXBsYWNlKHJlLCAnJDEnICsgcGF0aCk7Cn0KCn0pKCk7Cg=="},{"name":"QQ音乐付费音乐流畅版本下载","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://y.qq.com/portal/player.html"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1521729340197,"data":{}},"enabled":true,"position":13,"file_url":"https://greasyfork.org/scripts/28082-qq%E9%9F%B3%E4%B9%90%E4%BB%98%E8%B4%B9%E9%9F%B3%E4%B9%90%E6%B5%81%E7%95%85%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD/code/QQ%E9%9F%B3%E4%B9%90%E4%BB%98%E8%B4%B9%E9%9F%B3%E4%B9%90%E6%B5%81%E7%95%85%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD.user.js","uuid":"1652d523-677c-4d0e-81ee-4ffdc17335ef","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBRUemfs+S5kOS7mOi0uemfs+S5kOa1geeVheeJiOacrOS4i+i9vQovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly90YW1wZXJtb25rZXkubmV0LwovLyBAdmVyc2lvbiAgICAgIDAuMQovLyBAZGVzY3JpcHRpb24gIOWGjeaUtui0ueatjOabsuWQrOatjOmhtemdouacieS4que6r+WHgOS4i+i9vQovLyBAYXV0aG9yICAgICAgIOa1t+e7teWuneWunQovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8veS5xcS5jb20vcG9ydGFsL3BsYXllci5odG1sCi8vIEByZXF1aXJlICAgICAgIGh0dHA6Ly9jZG4uYm9vdGNzcy5jb20vanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciBrPXt9OwogICAgZnVuY3Rpb24gcCgpCiAgICB7CiAgICAgICAgdmFyIHVybD0kKCJzb3VyY2UiKS5hdHRyKCJzcmMiKTsKICAgICAgICAkKCJkaXZbY2xhc3M9J21vZF9zb25nbGlzdF90b29sYmFyJ10iKS5hcHBlbmQoJzxhIGhyZWY9IicrdXJsKyciIGNsYXNzPSJtb2RfYnRuIiBkb3dubG9hZD0i6Zeo56WocCI+PGkgY2xhc3M9Im1vZF9idG5fZ3JlZW5fX2ljb25fZG93biI+PC9pPue6r+WHgOS4i+i9vTxzcGFuIGNsYXNzPSJtb2RfYnRuX19ib3JkZXIiPjwvc3Bhbj48L2E+Jyk7CiAgICB9CiAgICBrPWZ1bmN0aW9uKCkKICAgIHsKICAgICAgICB2YXIgeT0kKCIjaDVhdWRpb19tZWRpYSIpLnRleHQoKTsKICAgICAgICBpZigheSkKICAgICAgICB7CiAgICAgICAgICAgIHZhciB0PWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIik7Ly8uY2xpY2soKTsKICAgICAgICAgICAgZm9yKHZhciBoPTA7IGg8dC5sZW5ndGg7aCsrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZih0W2hdLmdldEF0dHJpYnV0ZSgiaWQiKT09ImJ0bnBsYXkiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRbaF0uY2xpY2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRUaW1lb3V0KHAsMzAwMCk7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7YWxlcnQoeSk7fQogICAgfTsKICAgIHNldFRpbWVvdXQoaywyMDAwKTsKICAgIC8vIFlvdXIgY29kZSBoZXJlLi4uCn0pKCk7"},{"name":"YouTube Downloader - By Wígny Almeida","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://*.youtube.com/*","http*://youtube.com/*","http*://*.youtu.be/*","http*://youtu.be/*"],"orig_matches":["https://www.youtube.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1524535342604,"data":{}},"enabled":true,"position":14,"file_url":"https://greasyfork.org/scripts/35777-youtube-downloader-by-w%C3%ADgny-almeida/code/YouTube%20Downloader%20-%20By%20W%C3%ADgny%20Almeida.user.js","uuid":"fdaf9a75-ee69-4aad-a60f-46f43d4daf16","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBZb3VUdWJlIERvd25sb2FkZXIgLSBCeSBXw61nbnkgQWxtZWlkYQovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly90YW1wZXJtb25rZXkubmV0LwovLyBAY29weXJpZ2h0ICAgIFfDrWdueSBBbG1laWRhIHwgd2lnbnkuZ2l0aHViLmlvCi8vIEBob21lcGFnZVVSTCAgaHR0cHM6Ly9nb28uZ2wvcWtUV3ZHCi8vIEB2ZXJzaW9uICAgICAgMi40LjUKLy8gQGRlc2NyaXB0aW9uICBEb3dubG9hZCBBdWRpbyBhbmQgVmlkZW8gZnJvbSBZb3V0dWJlCi8vIEBhdXRob3IgICAgICAgV8OtZ255IEFsbWVpZGEKLy8gQGRhdGUgICAgICAgICAxMS0yOS0yMDE3Ci8vIEBsaWNlbnNlICAgICAgQ0MgQlktTkMtU0EgNC4wCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly93d3cueW91dHViZS5jb20vKgovLyBAaW5jbHVkZSAgICAgIGh0dHAqOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgaHR0cCo6Ly95b3V0dWJlLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgaHR0cCo6Ly8qLnlvdXR1LmJlLyoKLy8gQGluY2x1ZGUgICAgICBodHRwKjovL3lvdXR1LmJlLyoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMy4yLjEubWluLmpzCi8vIEBpY29uICAgICAgICAgaHR0cHM6Ly93d3cueW91dHViZS5jb20veXRzL2ltZy9mYXZpY29uLXZmbDhxU1YyRi5pY28KCgoKCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgLy8gWW91ciBjb2RlIGhlcmUuLgogICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgICAgICAkKCdoZWFkJykuYXBwZW5kKCc8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBtZWRpYT0iYWxsIiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2ZvbnQtYXdlc29tZS80LjcuMC9jc3MvZm9udC1hd2Vzb21lLm1pbi5jc3MiPicpOwoKICAgICAgICAvL0FjZXNzZSBodHRwczovL3dpZ255LmdpdGh1Yi5pbwoKICAgICAgICAvL0FkZCBjbGlja2FibGUgaWNvbgogICAgICAgIGZ1bmN0aW9uIGFkZF9idG5fdXJsX2F0dWFsKCl7CiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9wLXJvdycpOwogICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIHZhciBodG1sID0gICc8ZGl2IGNsYXNzPSJidG5fbXAzIj4nKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwOyBib3JkZXI6IHNvbGlkIDJweCAjZmYwMDAwOyBib3JkZXItcmFkaXVzOiAycHg7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMHB4IDE1cHg7IGZvbnQtc2l6ZTogMTRweDsgY3Vyc29yOnBvaW50ZXI7IGhlaWdodDozM3B4O21hcmdpbi1yaWdodDogNHB4O21hcmdpbi10b3A6IDdweDtsaW5lLWhlaWdodDogMzNweDtmb250LXdlaWdodDogNTAwOyBkaXNwbGF5OmlubGluZS1ibG9jazsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyIgdGl0bGU9IkRvd25sb2FkIG5vdyBpbiBNUDMgfCBZb3VUdWJlIERvd25sb2FkZXIgLSBCeSBXw61nbnkgQWxtZWlkYSIgY2xhc3M9ImxpbmtfbXAzIiBocmVmPSJodHRwczovL3NhdmV0b21wMy5jb20vJyt1cmwrJyI+JysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRE9XTkxPQUQgPHNwYW4gc3R5bGU9ImNvbG9yOiNmZmNjY2M7Ij5NUDM8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2E+JysKICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJidG5fbXA0Ij4nKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwOyBib3JkZXI6IHNvbGlkIDJweCAjZmYwMDAwOyBib3JkZXItcmFkaXVzOiAycHg7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMHB4IDE1cHg7IGZvbnQtc2l6ZTogMTRweDsgY3Vyc29yOnBvaW50ZXI7IGhlaWdodDozM3B4O21hcmdpbi1yaWdodDogNHB4O21hcmdpbi10b3A6IDdweDtsaW5lLWhlaWdodDogMzNweDtmb250LXdlaWdodDogNTAwOyBkaXNwbGF5OmlubGluZS1ibG9jazsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyIgdGl0bGU9IkRvd25sb2FkIG5vdyBpbiBNUDQgfCBZb3VUdWJlIERvd25sb2FkZXIgLSBCeSBXw61nbnkgQWxtZWlkYSIgY2xhc3M9ImxpbmtfbXA0IiBocmVmPSJodHRwczovL3B0LnNhdmVmcm9tLm5ldC8jdXJsPScrdXJsKyciPicrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RPV05MT0FEIDxzcGFuIHN0eWxlPSJjb2xvcjojZmZjY2NjOyI+TVA0PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9hPicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nOwogICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sKTsKICAgICAgICB9CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICBhZGRfYnRuX3VybF9hdHVhbCgpOwogICAgICAgIH0sMTAwMCk7CgogICAgICAgIC8vQnkgV8OtZ255IEFsbWVpZGEKCiAgICAgICAgLy9BbHRlcmEgbyBocmVmIGNvbmZvcm1lIGNsaXF1ZXMKICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljb3UnKTsKICAgICAgICAgICAgJCgnLmxpbmtfbXAzJykuYXR0cignaHJlZicsJ2h0dHBzOi8vc2F2ZXRvbXAzLmNvbS8nK3dpbmRvdy5sb2NhdGlvbi5ocmVmKycnKTsKICAgICAgICAgICAgJCgnLmxpbmtfbXA0JykuYXR0cignaHJlZicsJ2h0dHBzOi8vcHQuc2F2ZWZyb20ubmV0LyN1cmw9Jyt3aW5kb3cubG9jYXRpb24uaHJlZisnJyk7CiAgICAgICAgfSkudHJpZ2dlcigpOwogICAgfSk7Cn0pKCk7"}]}
